<!DOCTYPE html><html class="appearance-auto" lang="zh-cn"><head><meta charset="UTF-8"><title>ssh的基本用法</title><meta name="description" content="完善自己"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><link rel="icon"><link rel="stylesheet" href="/My-Blogs/style/bulma.css"><link rel="stylesheet" href="/My-Blogs/style/base.css"><link rel="stylesheet" href="/My-Blogs/style/helper.css"><script src="/My-Blogs/js/main.js"></script><link rel="stylesheet" href="/My-Blogs/style/post.css"><link rel="stylesheet" href="/My-Blogs/style/highlight-theme-light.css"><script src="/My-Blogs/jslib/highlight.pack.js"></script><meta name="generator" content="Hexo 5.2.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/My-Blogs/atom.xml" title="John Doe's blog" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-mobile"><section class="is-hidden-mobile"><h2><a href="/My-Blogs/">Lucas's blog</a></h2></section><h3 class="is-hidden-mobile"></h3><aside><h3 class="is-inline-block"><a href="/My-Blogs/">Home</a></h3><h3 class="is-inline-block"><a href="/My-Blogs/about">About</a></h3><h3 class="is-inline-block"><a href="/My-Blogs/archives">Archives</a></h3></aside></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/My-Blogs/">Home</a></h3><h3 class="is-inline-block"><a href="/My-Blogs/about">About</a></h3><h3 class="is-inline-block"><a href="/My-Blogs/archives">Archives</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ssh%E7%99%BB%E5%BD%95%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%91%BD%E4%BB%A4"><span class="toc-text">ssh登录服务器命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ssh%E6%89%A7%E8%A1%8C%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4"><span class="toc-text">ssh执行远程命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ssh%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-text">ssh命令行配置项</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#c-%E5%8F%82%E6%95%B0%E6%8C%87%E5%AE%9A%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%E3%80%82"><span class="toc-text">-c 参数指定加密算法。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#C-%E5%8F%82%E6%95%B0%E8%A1%A8%E7%A4%BA%E5%8E%8B%E7%BC%A9%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93"><span class="toc-text">-C 参数表示压缩数据传输</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#d-%E5%8F%82%E6%95%B0%E8%AE%BE%E7%BD%AE%E6%89%93%E5%8D%B0%E7%9A%84-debug-%E4%BF%A1%E6%81%AF%E7%BA%A7%E5%88%AB%EF%BC%8C%E6%95%B0%E5%80%BC%E8%B6%8A%E9%AB%98%EF%BC%8C%E8%BE%93%E5%87%BA%E7%9A%84%E5%86%85%E5%AE%B9%E8%B6%8A%E8%AF%A6%E7%BB%86%E3%80%82"><span class="toc-text">-d 参数设置打印的 debug 信息级别，数值越高，输出的内容越详细。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#D-%E5%8F%82%E6%95%B0%E6%8C%87%E5%AE%9A%E6%9C%AC%E6%9C%BA%E7%9A%84-Socks-%E7%9B%91%E5%90%AC%E7%AB%AF%E5%8F%A3"><span class="toc-text">-D 参数指定本机的 Socks 监听端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#f-%E5%8F%82%E6%95%B0%E8%A1%A8%E7%A4%BA-SSH-%E8%BF%9E%E6%8E%A5%E5%9C%A8%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C"><span class="toc-text">-f 参数表示 SSH 连接在后台运行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#F-%E5%8F%82%E6%95%B0%E6%8C%87%E5%AE%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">-F 参数指定配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#i-%E5%8F%82%E6%95%B0%E7%94%A8%E4%BA%8E%E6%8C%87%E5%AE%9A%E7%A7%81%E9%92%A5"><span class="toc-text">-i 参数用于指定私钥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#l-%E5%8F%82%E6%95%B0%E6%8C%87%E5%AE%9A%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95%E7%9A%84%E8%B4%A6%E6%88%B7%E5%90%8D"><span class="toc-text">-l 参数指定远程登录的账户名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#L-%E5%8F%82%E6%95%B0%E8%AE%BE%E7%BD%AE%E6%9C%AC%E5%9C%B0%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91"><span class="toc-text">-L 参数设置本地端口转发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#m-%E5%8F%82%E6%95%B0%E6%8C%87%E5%AE%9A%E6%A0%A1%E9%AA%8C%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7%E7%9A%84%E7%AE%97%E6%B3%95"><span class="toc-text">-m 参数指定校验数据完整性的算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#o-%E5%8F%82%E6%95%B0%E7%94%A8%E6%9D%A5%E6%8C%87%E5%AE%9A%E4%B8%80%E4%B8%AA%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4"><span class="toc-text">-o 参数用来指定一个配置命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#p-%E5%8F%82%E6%95%B0%E6%8C%87%E5%AE%9A-SSH-%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%9E%E6%8E%A5%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%8F%A3"><span class="toc-text">-p 参数指定 SSH 客户端连接的服务器端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#q-%E5%8F%82%E6%95%B0%E8%A1%A8%E7%A4%BA%E5%AE%89%E9%9D%99%E6%A8%A1%E5%BC%8F%EF%BC%88quiet%EF%BC%89%EF%BC%8C%E4%B8%8D%E5%90%91%E7%94%A8%E6%88%B7%E8%BE%93%E5%87%BA%E4%BB%BB%E4%BD%95%E8%AD%A6%E5%91%8A%E4%BF%A1%E6%81%AF"><span class="toc-text">-q 参数表示安静模式（quiet），不向用户输出任何警告信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#R-%E5%8F%82%E6%95%B0%E6%8C%87%E5%AE%9A%E8%BF%9C%E7%A8%8B%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91"><span class="toc-text">-R 参数指定远程端口转发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#t-%E5%8F%82%E6%95%B0%E5%9C%A8-ssh-%E7%9B%B4%E6%8E%A5%E8%BF%90%E8%A1%8C%E8%BF%9C%E7%AB%AF%E5%91%BD%E4%BB%A4%E6%97%B6%EF%BC%8C%E6%8F%90%E4%BE%9B%E4%B8%80%E4%B8%AA%E4%BA%92%E5%8A%A8%E5%BC%8F-Shell"><span class="toc-text">-t 参数在 ssh 直接运行远端命令时，提供一个互动式 Shell</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-%E5%8F%82%E6%95%B0%E6%98%BE%E7%A4%BA%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF"><span class="toc-text">-v 参数显示详细信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#V-%E5%8F%82%E6%95%B0%E8%BE%93%E5%87%BA-ssh-%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E7%89%88%E6%9C%AC"><span class="toc-text">-V 参数输出 ssh 客户端的版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#X-%E5%8F%82%E6%95%B0%E8%A1%A8%E7%A4%BA%E6%89%93%E5%BC%80-X-%E7%AA%97%E5%8F%A3%E8%BD%AC%E5%8F%91"><span class="toc-text">-X 参数表示打开 X 窗口转发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2%E5%8F%82%E6%95%B0%E6%8C%87%E5%AE%9A%E4%BD%BF%E7%94%A8-SSH1-SSH2-%E5%8D%8F%E8%AE%AE%E3%80%82"><span class="toc-text">-1, -2参数指定使用 SSH1, SSH2 协议。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%8C%87%E5%AE%9A%E4%BD%BF%E7%94%A8-IPv4-%E5%8D%8F%E8%AE%AE%EF%BC%8C%E8%BF%99%E6%98%AF%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-text">-4 指定使用 IPv4 协议，这是默认值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%8C%87%E5%AE%9A%E4%BD%BF%E7%94%A8-IPv6-%E5%8D%8F%E8%AE%AE"><span class="toc-text">-6 指定使用 IPv6 协议</span></a></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/My-Blogs/tags/SSH"><i class="tag post-item-tag">SSH</i></a><a href="/My-Blogs/tags/Linux"><i class="tag post-item-tag">Linux</i></a><a href="/My-Blogs/tags/shell"><i class="tag post-item-tag">shell</i></a></header><h1 class="mt-0 mb-1 is-family-serif">ssh的基本用法</h1><time class="has-text-grey" datetime="2021-01-08T17:54:30.000Z">2021-01-08</time><article class="mt-2 post-content"><p><code>SSH</code>，我们经常操作远程服务器的时候，都会用到这个命令，但是他除了登录服务器还有很多作用，下面我们一起来了解下吧</p>
<a id="more"></a>

<h2 id="ssh登录服务器命令"><a href="#ssh登录服务器命令" class="headerlink" title="ssh登录服务器命令"></a>ssh登录服务器命令</h2><pre><code class="BASH">ssh hostname</code></pre>
<p>上面命令中， <code>hostname</code> 是主机名，它可以是域名，也可能是 IP 地址或局域网内部的主机名。不指定用户名的情况下，将使用客户端的当前用户名，作为远程服务器的登录用户名。</p>
<p>如果要指定用户名，可以采用下面的语法。</p>
<pre><code class="BASH">ssh user@hostname</code></pre>
<p>上面的命令中，用户名和主机名写在一起了，之间使用 <code>@</code> 分隔。</p>
<p>指定用户名，可以使用 <code>ssh</code> 和 <code>-l</code> 参数</p>
<pre><code class="BASH">ssh -l username host</code></pre>
<p>ssh 默认连接服务器的 <code>22</code> 端口， <code>-p</code> 参数可以指定其他端口</p>
<pre><code class="BASH">ssh -p 8821 hostname</code></pre>
<h2 id="ssh执行远程命令"><a href="#ssh执行远程命令" class="headerlink" title="ssh执行远程命令"></a>ssh执行远程命令</h2><p>将命令直接写在 <code>ssh</code> 命令的后面</p>
<pre><code class="BASH">ssh username@hostname command</code></pre>
<p>上面的命令会使得 SSH 在登录成功后，立刻在远程主机上执行命令 <code>command</code> 。</p>
<p>例子</p>
<pre><code class="BASH">ssh foo@server.example.com cat /etc/hosts</code></pre>
<p>上面的命令会在登录成功后，立即远程执行命令 <code>cat /etc/hosts</code> 。</p>
<h2 id="ssh命令行配置项"><a href="#ssh命令行配置项" class="headerlink" title="ssh命令行配置项"></a>ssh命令行配置项</h2><h3 id="c-参数指定加密算法。"><a href="#c-参数指定加密算法。" class="headerlink" title="-c 参数指定加密算法。"></a><code>-c</code> 参数指定加密算法。</h3><pre><code class="BASH">$ ssh -c blowfish,3des server.example.com
# 或者
$ ssh -c blowfish -c 3des server.example.com</code></pre>
<p>上面命令指定使用加密算法 <code>blowfish</code> 或 <code>3des</code></p>
<h3 id="C-参数表示压缩数据传输"><a href="#C-参数表示压缩数据传输" class="headerlink" title="-C 参数表示压缩数据传输"></a><code>-C</code> 参数表示压缩数据传输</h3><pre><code class="BASH">ssh -C server.example.com</code></pre>
<h3 id="d-参数设置打印的-debug-信息级别，数值越高，输出的内容越详细。"><a href="#d-参数设置打印的-debug-信息级别，数值越高，输出的内容越详细。" class="headerlink" title="-d 参数设置打印的 debug 信息级别，数值越高，输出的内容越详细。"></a><code>-d</code> 参数设置打印的 debug 信息级别，数值越高，输出的内容越详细。</h3><pre><code class="BASH">ssh –d 1 foo.com</code></pre>
<h3 id="D-参数指定本机的-Socks-监听端口"><a href="#D-参数指定本机的-Socks-监听端口" class="headerlink" title="-D 参数指定本机的 Socks 监听端口"></a><code>-D</code> 参数指定本机的 Socks 监听端口</h3><blockquote>
<p>该端口收到的请求，都将转发到远程的 SSH 主机，又称动态端口转发</p>
</blockquote>
<pre><code class="BASH"> ssh -D 1080 server</code></pre>
<p>上面命令将本机 1080 端口收到的请求，都转发到服务器 <code>server</code></p>
<h3 id="f-参数表示-SSH-连接在后台运行"><a href="#f-参数表示-SSH-连接在后台运行" class="headerlink" title="-f 参数表示 SSH 连接在后台运行"></a><code>-f</code> 参数表示 SSH 连接在后台运行</h3><h3 id="F-参数指定配置文件"><a href="#F-参数指定配置文件" class="headerlink" title="-F 参数指定配置文件"></a><code>-F</code> 参数指定配置文件</h3><pre><code class="BASH">ssh -F /usr/local/ssh/other_config</code></pre>
<p>上面命令指定使用配置文件 <code>other_config</code></p>
<h3 id="i-参数用于指定私钥"><a href="#i-参数用于指定私钥" class="headerlink" title="-i 参数用于指定私钥"></a><code>-i</code> 参数用于指定私钥</h3><blockquote>
<p>意为“identity_file”，默认值为~/.ssh/id_dsa。注意，对应的公钥必须存放到服务器</p>
</blockquote>
<pre><code class="BASH">ssh -i my-key server.example.com</code></pre>
<h3 id="l-参数指定远程登录的账户名"><a href="#l-参数指定远程登录的账户名" class="headerlink" title="-l 参数指定远程登录的账户名"></a><code>-l</code> 参数指定远程登录的账户名</h3><pre><code class="BASH">$ ssh -l sally server.example.com
# 等同于
$ ssh sally@server.example.com</code></pre>
<h3 id="L-参数设置本地端口转发"><a href="#L-参数设置本地端口转发" class="headerlink" title="-L 参数设置本地端口转发"></a><code>-L</code> 参数设置本地端口转发</h3><pre><code class="BASH">ssh  -L 9999:targetServer:80 user@remoteserver</code></pre>
<p>上面命令中，所有发向本地 <code>9999</code> 端口的请求，都会经过 <code>remoteserver</code> 发往 <code>targetServer</code> 的 <code>80</code> 端口，这就相当于直接连上了 <code>targetServer</code> 的 <code>80</code> 端口</p>
<h3 id="m-参数指定校验数据完整性的算法"><a href="#m-参数指定校验数据完整性的算法" class="headerlink" title="-m 参数指定校验数据完整性的算法"></a><code>-m</code> 参数指定校验数据完整性的算法</h3><pre><code class="BASH">ssh -m hmac-sha1,hmac-md5 server.example.com</code></pre>
<p>上面命令指定数据校验算法为 <code>hmac-sha1</code> 或 <code>hmac-md5</code></p>
<h3 id="o-参数用来指定一个配置命令"><a href="#o-参数用来指定一个配置命令" class="headerlink" title="-o 参数用来指定一个配置命令"></a><code>-o</code> 参数用来指定一个配置命令</h3><pre><code class="BASH">ssh -o "Keyword Value"</code></pre>
<p>举例来说，配置文件里面有如下内容。</p>
<pre><code class="BASH">User sally
Port 220</code></pre>
<p>通过 <code>-o</code> 参数，可以把上面两个配置命令从命令行传入。</p>
<pre><code class="BASH">ssh -o "User sally" -o "Port 220" server.example.com</code></pre>
<p>使用等号时，配置命令可以不用写在引号里面，但是等号前后不能有空格</p>
<pre><code class="BASH">ssh -o User=sally -o Port=220 server.example.com</code></pre>
<h3 id="p-参数指定-SSH-客户端连接的服务器端口"><a href="#p-参数指定-SSH-客户端连接的服务器端口" class="headerlink" title="-p 参数指定 SSH 客户端连接的服务器端口"></a><code>-p</code> 参数指定 SSH 客户端连接的服务器端口</h3><pre><code class="BASH">ssh -p 2035 server.example.com</code></pre>
<p>上面命令连接服务器的2035端口</p>
<h3 id="q-参数表示安静模式（quiet），不向用户输出任何警告信息"><a href="#q-参数表示安静模式（quiet），不向用户输出任何警告信息" class="headerlink" title="-q 参数表示安静模式（quiet），不向用户输出任何警告信息"></a><code>-q</code> 参数表示安静模式（quiet），不向用户输出任何警告信息</h3><pre><code class="BASH">ssh –q foo.com
root’s password:</code></pre>
<p>上面命令使用 <code>-q</code> 参数，只输出要求用户输入密码的提示</p>
<h3 id="R-参数指定远程端口转发"><a href="#R-参数指定远程端口转发" class="headerlink" title="-R 参数指定远程端口转发"></a><code>-R</code> 参数指定远程端口转发</h3><pre><code class="BASH">ssh -R 9999:targetServer:902 local</code></pre>
<p>上面命令需在跳板服务器执行，指定本地计算机 <code>local</code> 监听自己的 9999 端口，所有发向这个端口的请求，都会转向 targetServer 的 902 端口</p>
<h3 id="t-参数在-ssh-直接运行远端命令时，提供一个互动式-Shell"><a href="#t-参数在-ssh-直接运行远端命令时，提供一个互动式-Shell" class="headerlink" title="-t 参数在 ssh 直接运行远端命令时，提供一个互动式 Shell"></a><code>-t</code> 参数在 ssh 直接运行远端命令时，提供一个互动式 Shell</h3><pre><code class="BASH">ssh -t server.example.com emacs</code></pre>
<h3 id="v-参数显示详细信息"><a href="#v-参数显示详细信息" class="headerlink" title="-v 参数显示详细信息"></a><code>-v</code> 参数显示详细信息</h3><pre><code class="BASH">ssh -v server.example.com</code></pre>
<p><code>-v</code> 可以重复多次，表示信息的详细程度，比如 <code>-vv</code> 和 <code>-vvv</code></p>
<pre><code class="BASH">$ ssh -vvv server.example.com
# 或者
$ ssh -v -v -v server.example.com</code></pre>
<p>上面命令会输出最详细的连接信息</p>
<h3 id="V-参数输出-ssh-客户端的版本"><a href="#V-参数输出-ssh-客户端的版本" class="headerlink" title="-V 参数输出 ssh 客户端的版本"></a><code>-V</code> 参数输出 ssh 客户端的版本</h3><pre><code class="BASH">$ ssh –V
ssh: SSH Secure Shell 3.2.3 (non-commercial version) on i686-pc-linux-gnu</code></pre>
<p>上面命令输出本机 ssh 客户端版本是 <code>SSH Secure Shell 3.2.3</code></p>
<h3 id="X-参数表示打开-X-窗口转发"><a href="#X-参数表示打开-X-窗口转发" class="headerlink" title="-X 参数表示打开 X 窗口转发"></a><code>-X</code> 参数表示打开 X 窗口转发</h3><pre><code class="BASH">ssh -X server.example.com</code></pre>
<h3 id="1-2参数指定使用-SSH1-SSH2-协议。"><a href="#1-2参数指定使用-SSH1-SSH2-协议。" class="headerlink" title="-1, -2参数指定使用 SSH1, SSH2 协议。"></a>-1, -2参数指定使用 SSH1, SSH2 协议。</h3><pre><code class="BASH">ssh -2 server.example.com</code></pre>
<h3 id="4-指定使用-IPv4-协议，这是默认值"><a href="#4-指定使用-IPv4-协议，这是默认值" class="headerlink" title="-4 指定使用 IPv4 协议，这是默认值"></a><code>-4</code> 指定使用 IPv4 协议，这是默认值</h3><pre><code class="BASH">ssh -4 server.example.com</code></pre>
<h3 id="6-指定使用-IPv6-协议"><a href="#6-指定使用-IPv6-协议" class="headerlink" title="-6 指定使用 IPv6 协议"></a><code>-6</code> 指定使用 IPv6 协议</h3><pre><code class="BASH">ssh -6 server.example.com</code></pre>
</article><section class="is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-small is-default" href="/My-Blogs/2021/01/08/%E5%AE%89%E5%85%A8/%E8%B0%88%E8%B0%88%E7%99%BB%E5%BD%95/" title="谈谈登录">Previous</a><a class="button is-small is-default" href="/My-Blogs/2021/01/08/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/%E7%BC%93%E5%AD%98/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" title="微服务缓存原理与最佳实践">Next</a></section><article class="mt-6 comment-container"><script src="https://utteranc.es/client.js" repo="529303664/My-Blogs" issue-term="pathname" theme="github-light" async></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com/https://twitter.com/Lucas55207840?s=05"><i class="iconfont icon-twitter"></i></a><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/529303664"><i class="iconfont icon-github"></i></a><!-- Ins--><a title="instagram" target="_blank" rel="noopener nofollow" href="//www.instagram.com//"><i class="iconfont icon-ins"></i></a><!-- RSS--><a title="rss" target="_blank" rel="noopener nofollow" href="/My-Blogs/atom.xml"><i class="iconfont icon-rss"></i></a><!-- 知乎--><!-- 领英--><!-- 脸书--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com/https://www.facebook.com/profile.php?id=100010703889793"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> Lucas 2022</span></p><div class="is-flex"><p>Powered by Hexo｜</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by &nbspHaojen&nbsp</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script>hljs.initHighlighting();

var directory = document.querySelectorAll('.toc a')
if (directory.length > 0) {
    var contentTocList = []
    var activeClassName = 'is-active'

    directory.forEach(function (link) {
        if (!link.href) return
        var id = decodeURI(link.href).split('#')[1]
        contentTocList.push(document.getElementById(id))
    })

    var DELAY = 150
    var needWait = false
    window.addEventListener('scroll', function (evt) {
        if (needWait) {
            return
        }
        needWait = true
        var tocContainer = document.querySelector('.toc')
        setTimeout(function () {
            var spacing = 60
            var activeTopicEl = null
            var scrollTop = window.pageYOffset
            for (var i = 0; i < contentTocList.length; i++) {
                var currentTopic = contentTocList[i]

                if (currentTopic.offsetTop > scrollTop + spacing / 2) {
                    // jump to next loop
                    continue
                }

                if (!activeTopicEl) {
                    activeTopicEl = currentTopic
                } else if (currentTopic.offsetTop + spacing >= activeTopicEl.offsetTop - spacing) {
                    activeTopicEl = currentTopic
                }

                var beforeActiveEl = document.querySelector('.toc' + ' .' + activeClassName)
                beforeActiveEl && beforeActiveEl.classList.remove(activeClassName)

                var selectTarget = '.toc a[href="#' + encodeURI(activeTopicEl.id) + '"]'
                var direc = document.querySelector(selectTarget)
                direc.classList.add(activeClassName)

                var tocContainerHeight = tocContainer.getBoundingClientRect().height
                if (direc.offsetTop >= tocContainerHeight - spacing) {
                    tocContainer.scrollTo({
                        // top: direc.offsetTop - spacing,
                        top: direc.offsetTop + 100 - tocContainerHeight,
                    })
                }
                else {
                    tocContainer.scrollTo({ top: 0 })
                }
            }
            needWait = false
        }, DELAY)

    })

}</script></body></html>