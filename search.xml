<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ç”µå•†-å•†å“è®¾è®¡</title>
      <link href="/My-Blogs/2021/04/26/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/%E7%94%B5%E5%95%86-%E5%95%86%E5%93%81%E8%AE%BE%E8%AE%A1/"/>
      <url>/My-Blogs/2021/04/26/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/%E7%94%B5%E5%95%86-%E5%95%86%E5%93%81%E8%AE%BE%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<p>ç”µå•†æ•°æ®åº“è®¾è®¡ä¹‹å•†å“è®¾è®¡ã€‚</p><a id="more"></a><p><img src="/My-Blogs/images/%E7%94%B5%E5%95%86-%E5%95%86%E5%93%81%E8%AE%BE%E8%AE%A1.png"></p>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> ç”µå•† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>screen å¸¸ç”¨å‘½ä»¤</title>
      <link href="/My-Blogs/2021/04/25/Linux/shell/%E7%AA%97%E5%8F%A3/screen%20%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/My-Blogs/2021/04/25/Linux/shell/%E7%AA%97%E5%8F%A3/screen%20%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<p>screen å¸¸ç”¨å‘½ä»¤ä»‹ç»</p><a id="more"></a><h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><pre><code class="BASH">screen -ls              # æŸ¥çœ‹æ‰€æœ‰screenscreen -S &lt;screen-name&gt; # åˆ›å»ºscreenï¼Œå¹¶å‘½åctr + A, D              # å¿«æ·é”®ï¼Œé€€å‡ºå½“å‰screenscreen -r &lt;screen-name&gt; # è¿›å…¥screenscreen -X quit          # åˆ é™¤screenï¼Œä½†æ²¡æœ‰æŒ‡å®šä¼šè¯screen -X -S [session you want to kill] quit #åˆ é™¤screenï¼ŒæŒ‡å®šä¼šè¯screen -wipe            # æ¸…é™¤dead screens</code></pre>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨nestä¸­ä½¿ç”¨typeorm-model-generatorè‡ªåŠ¨ç”Ÿæˆå®ä½“</title>
      <link href="/My-Blogs/2021/04/21/%E6%95%B0%E6%8D%AE%E5%BA%93/TypeOrm/%E5%9C%A8nest%E4%B8%AD%E4%BD%BF%E7%94%A8typeorm-model-generator%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E5%AE%9E%E4%BD%93/"/>
      <url>/My-Blogs/2021/04/21/%E6%95%B0%E6%8D%AE%E5%BA%93/TypeOrm/%E5%9C%A8nest%E4%B8%AD%E4%BD%BF%E7%94%A8typeorm-model-generator%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E5%AE%9E%E4%BD%93/</url>
      
        <content type="html"><![CDATA[<p>æ€»ç»“ä¸€ä¸‹nestjsæ¡†æ¶ä½¿ç”¨typeormè‡ªåŠ¨ç”Ÿæˆå®ä½“ç±»çš„æ–¹æ³•ã€‚å¯ä»¥èŠ‚çœä¸€äº›å¼€å‘æ—¶é—´</p><a id="more"></a><ol><li><p><code>npm i -g typeorm-model-generator</code> æˆ–è€… <code>yarn global add typeorm-model-generator</code></p></li><li><p>ä¿®æ”¹é¡¹ç›®ä¸­çš„ <code>package.json</code> æ–‡ä»¶  </p><pre><code class="json">"scripts": {"db": "rimraf ./src/modules/entities &amp; npx typeorm-model-generator -h 121.36.70.68 -d chat -p 3306 -u root -x 123456 -e mysql -o ./src/modules/entities --noConfig true --ce pascal --cp camel"}</code></pre><ul><li><code>rm -rf entities</code>è¡¨ç¤ºå…ˆåˆ é™¤æ–‡ä»¶å¤¹<code>entitiesï¼ˆwindowä¸‹ä½¿ç”¨ rimraf entities ï¼‰</code></li><li><code>npx typeorm-model-generator</code>å¦‚æœå…¨å±€å®‰è£…äº†å°±ä¸éœ€è¦åŠ npxæ²¡æœ‰å…¨å±€å®‰è£…å°±åŠ ä¸Šå»</li><li><code>-h localhost -d æ•°æ®åº“åå­— -p ç«¯å£ -u ç”¨æˆ·å -x å¯†ç  -e æ•°æ®åº“ç±»å‹</code></li><li><code>-o entities</code>è¡¨ç¤ºè¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶å¤¹</li><li><code>--noConfig true</code>è¡¨ç¤ºä¸ç”Ÿæˆ<code>ormconfig.json</code>å’Œ<code>tsconfig.json</code>æ–‡ä»¶</li><li><code>--ce pascal</code>è¡¨ç¤ºå°†ç±»åè½¬æ¢é¦–å­—æ¯æ˜¯å¤§å†™çš„é©¼å³°å‘½å</li><li><code>--cp camel</code>è¡¨ç¤ºå°†æ•°æ®åº“ä¸­çš„å­—æ®µæ¯”å¦‚create_atè½¬æ¢ä¸ºcreateAt</li><li><code>-a</code>è¡¨ç¤ºä¼šç»§æ‰¿ä¸€ä¸ª<code>BaseEntity</code>çš„ç±»,æ ¹æ®è‡ªå·±éœ€æ±‚åŠ </li></ul></li><li><p> è¿è¡Œä»£ç  <code>npm run db</code> æˆ– <code>yarn db</code></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> MYSQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> nestjs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zipå‘½ä»¤çš„åŸºæœ¬ä½¿ç”¨</title>
      <link href="/My-Blogs/2021/02/22/Linux/shell/%E6%96%87%E4%BB%B6/zip%E5%91%BD%E4%BB%A4%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
      <url>/My-Blogs/2021/02/22/Linux/shell/%E6%96%87%E4%BB%B6/zip%E5%91%BD%E4%BB%A4%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>è¿™æ˜¯ä¸€ç¯‡å…³äºzipå‘½ä»¤çš„ç®€å•ä½¿ç”¨</p><a id="more"></a><h2 id="å‘½ä»¤ç®€ä»‹"><a href="#å‘½ä»¤ç®€ä»‹" class="headerlink" title="å‘½ä»¤ç®€ä»‹"></a>å‘½ä»¤ç®€ä»‹</h2><p>zip å‘½ä»¤å¯ä»¥ç”¨æ¥å‹ç¼©ã€æ‰“åŒ…æ–‡ä»¶ã€‚</p><pre><code class="BASH">#Debian/Ubuntuå®‰è£…apt-get&nbsp;install&nbsp;zip#CentOSå®‰è£…[root@centos7&nbsp;testdir]#&nbsp;zip-bash:&nbsp;zip:&nbsp;command&nbsp;not&nbsp;found[root@centos7&nbsp;testdir]#&nbsp;yum&nbsp;install&nbsp;zip&nbsp;-y</code></pre><p>zip å‘½ä»¤ä¹Ÿå¯ä»¥ç”¨æ¥è§£å‹ç¼©æ–‡ä»¶ï¼Œzipä¹Ÿæ˜¯ä¸€ä¸ªå¸¸ç”¨çš„å‹ç¼©ã€è§£å‹åº”ç”¨ç¨‹åºï¼Œæ–‡ä»¶ç»å®ƒå‹ç¼©åä¼šäº§ç”Ÿä¸€ä¸ªæ–°ä»¥.zipä¸ºæ‰©å±•åçš„å‹ç¼©åŒ…æ–‡ä»¶ã€‚</p><h2 id="è¯­æ³•æ ¼å¼"><a href="#è¯­æ³•æ ¼å¼" class="headerlink" title="è¯­æ³•æ ¼å¼"></a>è¯­æ³•æ ¼å¼</h2><pre><code class="BASH">zip&nbsp;[&nbsp;OPTIONS&nbsp;]&nbsp;[&nbsp;NAME&nbsp;..]</code></pre><h2 id="é€‰é¡¹è¯´æ˜"><a href="#é€‰é¡¹è¯´æ˜" class="headerlink" title="é€‰é¡¹è¯´æ˜"></a>é€‰é¡¹è¯´æ˜</h2><pre><code class="BASH">-A  #è°ƒæ•´å¯æ‰§è¡Œçš„è‡ªåŠ¨è§£å‹ç¼©æ–‡ä»¶-b&lt;å·¥ä½œç›®å½•&gt;  #æŒ‡å®šå‹ç¼©æ–‡ä»¶çš„å­˜æ”¾ç›®å½•-c  #ç»™æ¯ä¸ªè¢«å‹ç¼©çš„æ–‡ä»¶åŠ ä¸Šæ³¨é‡Šä¿¡æ¯-d  #ä»å‹ç¼©æ–‡ä»¶å†…åˆ é™¤æŒ‡å®šçš„æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨--deleteå‚æ•°-D  #å‹ç¼©æ–‡ä»¶å†…ä¸å»ºç«‹ç›®å½•åç§°-f  #æ›´æ–°æ—¢æœ‰æ–‡ä»¶ï¼Œå°†å…¶å®ƒæ–‡ä»¶ä¸€å¹¶åŠ å…¥åˆ°å‹ç¼©æ–‡ä»¶ä¸­-F  #ä¿®å¤å·²æŸåçš„å‹ç¼©æ–‡ä»¶-g  #å°†æŒ‡å®šæ–‡ä»¶å‹ç¼©è‡³å·²å­˜åœ¨çš„å‹ç¼©æ–‡ä»¶ä¸­ï¼Œä¸å»ºç«‹æ–°æ–‡ä»¶-h  #æ‰“å°å¸®åŠ©ä¿¡æ¯-i&lt;èŒƒæœ¬æ ·å¼&gt;  #åªå‹ç¼©åŒ¹é…æŒ‡å®šæ¡ä»¶çš„æ–‡ä»¶-m  #å°†æŒ‡å®šæ–‡ä»¶å‹ç¼©æ‰“åŒ…åç›´æ¥åˆ é™¤åŸå§‹æ–‡ä»¶-o  #å°†å‹ç¼©æ–‡ä»¶çš„å±æ€§ä¿¡æ¯æ›´æ”¹æˆä¸å‹ç¼©æ–‡ä»¶ä¸­çš„æœ€æ–°æ–‡ä»¶çš„å±æ€§ä¸€è‡´-q  #å®‰é™æ¨¡å¼-r  #é€’å½’å¤„ç†-t&lt;æ—¥æœŸæ—¶é—´&gt;  #æŠŠå‹ç¼©æ–‡ä»¶çš„æ—¥æœŸè®¾æˆæŒ‡å®šçš„æ—¥æœŸ-T  #æ£€æŸ¥å¤‡ä»½æ–‡ä»¶å†…çš„æ¯ä¸ªæ–‡ä»¶æ˜¯å¦æ­£ç¡®æ— è¯¯-u  #æ›´æ–°è¾ƒæ–°çš„æ–‡ä»¶åˆ°å‹ç¼©æ–‡ä»¶å†…-v  #æ‰“å°å‘½ä»¤æ‰§è¡Œè¿‡ç¨‹ä¿¡æ¯æˆ–ç‰ˆæœ¬ä¿¡æ¯-x&lt;èŒƒæœ¬æ ·å¼&gt;  #å‹ç¼©æ—¶æ’é™¤ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶-z  #ç»™å‹ç¼©æ–‡ä»¶åŠ ä¸Šæ³¨é‡Šä¿¡æ¯-&lt;å‹ç¼©æ•ˆç‡&gt;  #æŒ‡å®šå‹ç¼©æ•ˆç‡ï¼ˆ1~9æ•°å­—ï¼‰</code></pre><h2 id="åº”ç”¨ä¸¾ä¾‹"><a href="#åº”ç”¨ä¸¾ä¾‹" class="headerlink" title="åº”ç”¨ä¸¾ä¾‹"></a>åº”ç”¨ä¸¾ä¾‹</h2><p>åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºå‹ç¼©æ–‡ä»¶ï¼ˆè‡ªåŠ¨åˆ›å»ºä»¥.zipçš„æ–‡ä»¶ï¼‰</p><pre><code class="BASH">[root@centos7 testdir]# zip mingongge *  adding: cest.txt.gz (stored 0%)  adding: cuttest.txt.gz (stored 0%)  adding: dir/ (stored 0%)  adding: file (stored 0%)  adding: mingongge1.txt.gz (stored 0%)  adding: mingongge2.txt.gz (stored 0%)  adding: mingongge.txt.md5.gz (stored 0%)  adding: sort.cut.txt.gz (stored 0%)</code></pre><p>åˆ†å‰²ä¸€ä¸ªå¤§æ–‡ä»¶</p><pre><code class="BASH">[root@centos7&nbsp;~]#&nbsp;ls&nbsp;-lhtotal&nbsp;22M-rw-------.&nbsp;&nbsp;1&nbsp;root&nbsp;root&nbsp;1.3K&nbsp;Aug&nbsp;20&nbsp;10:39&nbsp;anaconda-ks.cfg-rw-r--r--&nbsp;&nbsp;&nbsp;1&nbsp;root&nbsp;root&nbsp;&nbsp;140&nbsp;Jan&nbsp;16&nbsp;11:36&nbsp;dos_test.txtdrwxr-xr-x&nbsp;&nbsp;&nbsp;3&nbsp;root&nbsp;root&nbsp;&nbsp;&nbsp;39&nbsp;Aug&nbsp;30&nbsp;03:48&nbsp;goinception-rw-r--r--&nbsp;&nbsp;&nbsp;1&nbsp;root&nbsp;root&nbsp;&nbsp;13M&nbsp;Aug&nbsp;30&nbsp;03:42&nbsp;goInception-linux-amd64-v1.2.3.tar.gzdrwxr-sr-x&nbsp;&nbsp;11&nbsp;root&nbsp;&nbsp;&nbsp;40&nbsp;4.0K&nbsp;Dec&nbsp;24&nbsp;22:35&nbsp;httpd-2.4.46-rw-r--r--&nbsp;&nbsp;&nbsp;1&nbsp;root&nbsp;root&nbsp;9.0M&nbsp;Aug&nbsp;&nbsp;5&nbsp;07:32&nbsp;httpd-2.4.46.tar.gz-rw-r--r--&nbsp;&nbsp;&nbsp;1&nbsp;root&nbsp;root&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;Jan&nbsp;16&nbsp;11:32&nbsp;mingongge.filedrwxr-xr-x&nbsp;&nbsp;&nbsp;3&nbsp;root&nbsp;root&nbsp;&nbsp;192&nbsp;Jan&nbsp;16&nbsp;16:19&nbsp;testdir-rw-r--r--&nbsp;&nbsp;&nbsp;1&nbsp;root&nbsp;root&nbsp;&nbsp;140&nbsp;Jan&nbsp;16&nbsp;11:32&nbsp;test.txt[root@centos7&nbsp;~]#&nbsp;zip&nbsp;-s&nbsp;4M&nbsp;-r&nbsp;mingongge.zip&nbsp;httpd-2.4.46.tar.gz&nbsp;&nbsp;adding:&nbsp;httpd-2.4.46.tar.gz&nbsp;(deflated&nbsp;0%)[root@centos7&nbsp;~]#&nbsp;ls&nbsp;-lhtotal&nbsp;31M-rw-------.&nbsp;&nbsp;1&nbsp;root&nbsp;root&nbsp;1.3K&nbsp;Aug&nbsp;20&nbsp;10:39&nbsp;anaconda-ks.cfg-rw-r--r--&nbsp;&nbsp;&nbsp;1&nbsp;root&nbsp;root&nbsp;&nbsp;140&nbsp;Jan&nbsp;16&nbsp;11:36&nbsp;dos_test.txtdrwxr-xr-x&nbsp;&nbsp;&nbsp;3&nbsp;root&nbsp;root&nbsp;&nbsp;&nbsp;39&nbsp;Aug&nbsp;30&nbsp;03:48&nbsp;goinception-rw-r--r--&nbsp;&nbsp;&nbsp;1&nbsp;root&nbsp;root&nbsp;&nbsp;13M&nbsp;Aug&nbsp;30&nbsp;03:42&nbsp;goInception-linux-amd64-v1.2.3.tar.gzdrwxr-sr-x&nbsp;&nbsp;11&nbsp;root&nbsp;&nbsp;&nbsp;40&nbsp;4.0K&nbsp;Dec&nbsp;24&nbsp;22:35&nbsp;httpd-2.4.46-rw-r--r--&nbsp;&nbsp;&nbsp;1&nbsp;root&nbsp;root&nbsp;9.0M&nbsp;Aug&nbsp;&nbsp;5&nbsp;07:32&nbsp;httpd-2.4.46.tar.gz-rw-r--r--&nbsp;&nbsp;&nbsp;1&nbsp;root&nbsp;root&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;Jan&nbsp;16&nbsp;11:32&nbsp;mingongge.file-rw-r--r--&nbsp;&nbsp;&nbsp;1&nbsp;root&nbsp;root&nbsp;4.0M&nbsp;Jan&nbsp;16&nbsp;16:24&nbsp;mingongge.z01-rw-r--r--&nbsp;&nbsp;&nbsp;1&nbsp;root&nbsp;root&nbsp;4.0M&nbsp;Jan&nbsp;16&nbsp;16:24&nbsp;mingongge.z02-rw-r--r--&nbsp;&nbsp;&nbsp;1&nbsp;root&nbsp;root&nbsp;943K&nbsp;Jan&nbsp;16&nbsp;16:24&nbsp;mingongge.zipdrwxr-xr-x&nbsp;&nbsp;&nbsp;3&nbsp;root&nbsp;root&nbsp;&nbsp;192&nbsp;Jan&nbsp;16&nbsp;16:19&nbsp;testdir#ä»ç»“æœå¯ä»¥çœ‹å‡ºä¼šæ‹†åˆ†æˆä¸‰ä¸ªæ–‡ä»¶å³ï¼š4Må¤§å°çš„mingongge.z01ã€4Må¤§å°çš„mingongge.z02å’Œä¸€ä¸ª943kçš„mingongge.zipæ–‡ä»¶ã€‚</code></pre>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> shell </tag>
            
            <tag> æ–‡ä»¶å¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tarå‘½ä»¤çš„åŸºæœ¬ä½¿ç”¨</title>
      <link href="/My-Blogs/2021/02/20/Linux/shell/%E6%96%87%E4%BB%B6/tar%E5%91%BD%E4%BB%A4%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
      <url>/My-Blogs/2021/02/20/Linux/shell/%E6%96%87%E4%BB%B6/tar%E5%91%BD%E4%BB%A4%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>è¿™æ˜¯ä¸€ç¯‡å…³äºtarå‘½ä»¤çš„ç®€å•ä½¿ç”¨</p><a id="more"></a><h2 id="å‘½ä»¤ç®€ä»‹"><a href="#å‘½ä»¤ç®€ä»‹" class="headerlink" title="å‘½ä»¤ç®€ä»‹"></a>å‘½ä»¤ç®€ä»‹</h2><p>tar å‘½ä»¤ç”¨äºæ‰“åŒ…ã€å‹ç¼©ä¸è§£å‹å‹ç¼©åŒ…æ–‡ä»¶ã€‚</p><p>tar å‘½ä»¤å¸¸å¸¸ç”¨äºæ‰“åŒ…ã€å‹ç¼©æŸäº›æ–‡ä»¶æˆ–ç›®å½•ï¼Œä¹Ÿå¯ä»¥æ·»åŠ æ–°æ–‡ä»¶åˆ°å½’æ¡£æ–‡ä»¶ä¸­ã€‚Tar ä»£è¡¨çš„æ˜¯ç£å¸¦å­˜æ¡£ï¼Œæ˜¯ä¸€ç§å½’æ¡£çš„æ–‡ä»¶æ ¼å¼ï¼Œæ—©æœŸç”¨äºå°†æ–‡ä»¶å½’æ¡£åˆ°ç£å¸¦å¤‡ä»½å­˜å‚¨ã€‚ç°å¯ä»¥ç”¨äºæ”¶é›†ã€åˆ†å‘ã€å½’æ¡£æ–‡ä»¶ï¼Œè¿˜å¯ä»¥ä¿ç•™æ–‡ä»¶åŸæœ‰çš„å±æ€§ï¼Œå¦‚ï¼šç”¨æˆ·å’Œç»„æƒé™ï¼Œè®¿é—®å’Œä¿®æ”¹æ—¥æœŸä»¥åŠç›®å½•ç»“æ„ã€‚</p><h2 id="è¯­æ³•æ ¼å¼"><a href="#è¯­æ³•æ ¼å¼" class="headerlink" title="è¯­æ³•æ ¼å¼"></a>è¯­æ³•æ ¼å¼</h2><pre><code class="BASH">tar&nbsp;[OPTIONS]&nbsp;[FILE]</code></pre><h2 id="é€‰é¡¹è¯´æ˜"><a href="#é€‰é¡¹è¯´æ˜" class="headerlink" title="é€‰é¡¹è¯´æ˜"></a>é€‰é¡¹è¯´æ˜</h2><pre><code class="BASH">-A&nbsp;&nbsp;#æ–°å¢æ–‡ä»¶åˆ°å·²ç»å­˜åœ¨çš„å½’æ¡£æ–‡ä»¶-B&nbsp;&nbsp;#è®¾ç½®åŒºå—å¤§å°-c&nbsp;&nbsp;#å»ºç«‹æ–°çš„å½’æ¡£æ–‡ä»¶-C&nbsp;&nbsp;#å°†å‹ç¼©çš„æ–‡ä»¶è§£å‹åˆ°æŒ‡å®šçš„ç›®å½•ä¸‹-d&nbsp;&nbsp;#è®°å½•æ–‡ä»¶çš„å·®å¼‚-x&nbsp;&nbsp;#è§£å‹æˆ–æå–å½’æ¡£æ–‡ä»¶å†…å®¹ -t&nbsp;&nbsp;#åˆ—å‡ºå¤‡ä»½æ–‡ä»¶çš„å†…å®¹-z&nbsp;&nbsp;#é€šè¿‡gzipå‘½ä»¤æ¥å‹ç¼©/è§£å‹ç¼©æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸€èˆ¬ä¸º&nbsp;xx.tar.gz-Z&nbsp;&nbsp;#é€šè¿‡compresså‘½ä»¤å¤„ç†å¤‡ä»½æ–‡ä»¶-f&nbsp;&nbsp;#æŒ‡å®šå¤‡ä»½æ–‡ä»¶-v&nbsp;&nbsp;#æ˜¾ç¤ºå‘½ä»¤æ‰§è¡Œè¿‡ç¨‹-r&nbsp;&nbsp;#æ·»åŠ æ–°æ–‡ä»¶åˆ°å·²ç»å‹ç¼©çš„æ–‡ä»¶ä¸­-u&nbsp;&nbsp;#æ·»åŠ æ”¹å˜äº†å’Œç°æœ‰çš„æ–‡ä»¶åˆ°å·²ç»å­˜åœ¨çš„å‹ç¼©æ–‡ä»¶-j&nbsp;&nbsp;#é€šè¿‡bzip2å‘½ä»¤æ¥å‹ç¼©/è§£å‹ç¼©æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸€èˆ¬ä¸ºxx.tar.bz2-v&nbsp;&nbsp;#æ˜¾ç¤ºæ“ä½œè¿‡ç¨‹ï¼›-k&nbsp;&nbsp;#ä¿ç•™åŸæœ‰æ–‡ä»¶ä¸è¦†ç›–-m&nbsp;&nbsp;#ä¿ç•™æ–‡ä»¶ä¸è¢«è¦†ç›–-w&nbsp;&nbsp;#ç¡®è®¤å‹ç¼©æ–‡ä»¶çš„æ­£ç¡®æ€§-p&nbsp;&nbsp;#ä¿ç•™åŸæ¥çš„æ–‡ä»¶æƒé™ä¸å±æ€§-P&nbsp;&nbsp;#ä½¿ç”¨æ–‡ä»¶åçš„ç»å¯¹è·¯å¾„ï¼Œä¸åˆ é™¤æ–‡ä»¶åç§°å‰çš„â€œ/â€å·-N&nbsp;&nbsp;#åªå°†è¾ƒæŒ‡å®šæ—¥æœŸæ›´æ–°çš„æ–‡ä»¶ä¿å­˜åˆ°å¤‡ä»½æ–‡ä»¶ä¸­--exclude=[èŒƒæœ¬æ ·å¼]&nbsp;&nbsp;#æ’é™¤ç¬¦åˆèŒƒæœ¬æ ·å¼çš„æ–‡ä»¶--remove-files&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#å½’æ¡£/å‹ç¼©ä¹‹ååˆ é™¤æºæ–‡ä»¶</code></pre><h2 id="åº”ç”¨ä¸¾ä¾‹"><a href="#åº”ç”¨ä¸¾ä¾‹" class="headerlink" title="åº”ç”¨ä¸¾ä¾‹"></a>åº”ç”¨ä¸¾ä¾‹</h2><p>å¸¸è§åº”ç”¨ä¾‹å­</p><pre><code class="BASH">tar&nbsp;-cf&nbsp;mingongge.tar&nbsp;*.jpg#å°†æ‰€æœ‰.jpgçš„æ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªåä¸ºmingongge.tarçš„æ–‡ä»¶&nbsp;tar&nbsp;-rf&nbsp;mingongge.tar&nbsp;*.gif#å°†æ‰€æœ‰.gifçš„æ–‡ä»¶å¢åŠ åˆ°mingongge.tarçš„åŒ…é‡Œ&nbsp;tar&nbsp;-uf&nbsp;mingonggel.tar&nbsp;mingongge.gif#æ›´æ–°mingongge.taræ–‡ä»¶ä¸­çš„mingongge.gifæ–‡ä»¶&nbsp;tar&nbsp;-tf&nbsp;mingongge.tar#åˆ—å‡º&nbsp;all.tar&nbsp;åŒ…ä¸­æ‰€æœ‰æ–‡ä»¶tar&nbsp;-cfv&nbsp;mingongge.tar&nbsp;foo&nbsp;bar&nbsp;&nbsp;#å°†æ–‡ä»¶fooå’Œbaræ‰“åŒ…æˆmingongge.taræ–‡ä»¶åŒ…ï¼Œä¹Ÿå¯ä»¥ç†è§£æˆï¼šä»è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸­å»åˆ›å»ºè¿™ä¸ªmingongge.taræ–‡ä»¶tar&nbsp;-tvf&nbsp;mingongge.tar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#è¯¦ç»†åˆ—å‡ºmingongge.tarä¸­çš„æ‰€æœ‰æ–‡ä»¶tar&nbsp;-xf&nbsp;mingongge.tar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ä»mingongge.taræå–æ‰€æœ‰æ–‡ä»¶</code></pre><p>å°†æ–‡ä»¶å…¨éƒ¨æ‰“åŒ…æˆtaråŒ…</p><pre><code class="BASH">tar&nbsp;-cvf&nbsp;mingongg.tar&nbsp;mingongg.log&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ä»…æ‰“åŒ…ï¼Œä¸å‹ç¼©ï¼tar&nbsp;-zcvf&nbsp;mingongg.tar.gz&nbsp;mingongg.log&nbsp;&nbsp;&nbsp;#æ‰“åŒ…åï¼Œä»¥gzipæ–¹å¼å‹ç¼©tar&nbsp;-jcvf&nbsp;mingongg.tar.bz2&nbsp;mingongg.log&nbsp;&nbsp;#æ‰“åŒ…åï¼Œä»¥bzip2æ–¹å¼å‹ç¼©</code></pre><p>è§£å‹ç›®å½•</p><pre><code class="BASH">tar&nbsp;-xvf&nbsp;portal-web-v2.0.0.tar&nbsp;--strip-components&nbsp;1&nbsp;&nbsp;-C&nbsp;æŒ‡å®šç›®å½•#æ’é™¤ç›®å½•--strip-components</code></pre><p>å°† taråŒ…è§£å‹ç¼©</p><pre><code class="BASH">tar&nbsp;-zxvf&nbsp;/opt/soft/test/log.tar.gz</code></pre><p>æ‰“åŒ…æˆ–å‹ç¼©æ–‡ä»¶æ—¶ï¼Œæ’é˜ŸæŒ‡å®šçš„æ–‡ä»¶ç±»å‹</p><pre><code class="BASH">tar&nbsp;-zcf&nbsp;mingongge.tar.gz&nbsp;/etc/&nbsp;/var/&nbsp;--exclude=*.txt</code></pre><p>æ³¨æ„ï¼šå¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°è¿™ç±»é”™è¯¯æç¤º</p><pre><code class="BASH">tar:&nbsp;Removing&nbsp;leading&nbsp;`/`&nbsp;from&nbsp;member&nbsp;names </code></pre><p>åŸå› æ˜¯taré»˜è®¤ä¸ºç›¸å¯¹è·¯å¾„ï¼Œä½¿ç”¨ç»å¯¹è·¯å¾„çš„è¯å°±ä¼šæŠ¥è¿™ä¸ªé”™ï¼Œå¯ä»¥ä½¿ç”¨-Pï¼ˆå¤§å†™ï¼‰å‚æ•°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> shell </tag>
            
            <tag> æ–‡ä»¶å¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6ç¬”è®°</title>
      <link href="/My-Blogs/2021/02/07/JavaScript/ES6%E7%AC%94%E8%AE%B0/"/>
      <url>/My-Blogs/2021/02/07/JavaScript/ES6%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>æ€»ç»“ä¸€äº›æ¯”è¾ƒéœ€è¦æ³¨æ„çš„ES6è¯­æ³•ã€‚</p><a id="more"></a><h2 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h2><h3 id="TDZ-æš‚æ—¶æ€§æ­»åŒº"><a href="#TDZ-æš‚æ—¶æ€§æ­»åŒº" class="headerlink" title="TDZ(æš‚æ—¶æ€§æ­»åŒº)"></a>TDZ(æš‚æ—¶æ€§æ­»åŒº)</h3><ul><li>å½“ä½¿ç”¨letï¼Œconstå£°æ˜è¯­å¥æ—¶ï¼Œè¿˜æœªæ‰§è¡Œçš„æ—¶å€™ï¼Œå˜é‡ä¼šå­˜å…¥TDZ(æš‚æ—¶æ€§æ­»åŒº)ï¼Œå¼•ç”¨è¯­å¥æ—¶ï¼Œä¼šæŠ›å‡ºé”™è¯¯ã€‚</li><li>ç±»å£°æ˜ä¸letå£°æ˜ç±»ä¼¼ï¼Œä¸èƒ½è¢«æå‡ï¼›çœŸæ­£æ‰§è¡Œå£°æ˜è¯­å¥ä¹‹å‰ï¼Œå®ƒä»¬ä¼šä¸€ç›´å­˜åœ¨äºä¸´æ—¶æ­»åŒºä¸­ã€‚</li></ul><pre><code class="JS">console.log(typeof value); // throw ReferenceError: Cannot access 'value' before initializationlet value = 'string';</code></pre><h3 id="æ›´å¥½çš„Unicodeæ”¯æŒ"><a href="#æ›´å¥½çš„Unicodeæ”¯æŒ" class="headerlink" title="æ›´å¥½çš„Unicodeæ”¯æŒ"></a>æ›´å¥½çš„Unicodeæ”¯æŒ</h3><p>ä»¥ååšå­—ç¬¦å¤„ç†æ—¶ï¼Œä¼˜å…ˆé€‰æ‹©codePointç›¸å…³æ–¹æ³•ï¼Œ <code>String.fromCodePoint</code> å¯ä»¥åŒæ—¶å¤„ç†BMPå’ŒéBMPå­—ç¬¦ï¼Œå³æ”¯æŒ0xFFFFä»¥ä¸Šçš„å­—ç¬¦è§£æ</p><pre><code class="JS">String.fromCodePoint(97); // aString.fromCharCode(97); // a</code></pre><h3 id="å‡½æ•°å½¢å‚çš„é»˜è®¤å€¼"><a href="#å‡½æ•°å½¢å‚çš„é»˜è®¤å€¼" class="headerlink" title="å‡½æ•°å½¢å‚çš„é»˜è®¤å€¼"></a>å‡½æ•°å½¢å‚çš„é»˜è®¤å€¼</h3><p>å¯ä»¥åˆ©ç”¨ä»¥ä¸‹ç‰¹æ€§ï¼Œå¯¹å…¥å‚åšäº›é¢„å¤„ç†</p><pre><code class="JS">function add(first, second = first) {  return first + second;}</code></pre><h3 id="æ–°å¢æ–¹æ³•"><a href="#æ–°å¢æ–¹æ³•" class="headerlink" title="æ–°å¢æ–¹æ³•"></a>æ–°å¢æ–¹æ³•</h3><p>æ¯”èµ· <code>===</code> åˆ¤æ–­ä¸¤ä¸ªå˜é‡æ˜¯å¦ä¸€è‡´ï¼ŒObject.is()ä¼šæ›´å®Œå–„ï¼Œä¼˜å…ˆä½¿ç”¨å®ƒ</p><pre><code class="JS">console.log(+0 === -0); // trueconsole.log(Object.is(+0, -0)); // falseconsole.log(NaN === NaN); // falseconsole.log(Object.is(NaN, NaN)); // true</code></pre><h3 id="è‡ªç”±å±æ€§æšä¸¾é¡ºåº"><a href="#è‡ªç”±å±æ€§æšä¸¾é¡ºåº" class="headerlink" title="è‡ªç”±å±æ€§æšä¸¾é¡ºåº"></a>è‡ªç”±å±æ€§æšä¸¾é¡ºåº</h3><p><code>Object.getOwnPropertyNames</code> è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒåŒ…å«äº†æŒ‡å®šå¯¹è±¡æ‰€æœ‰çš„å¯æšä¸¾æˆ–ä¸å¯æšä¸¾çš„å±æ€§åï¼Œè€Œ <code>Object.keys</code> è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰ç»™å®šå¯¹è±¡è‡ªèº«å¯æšä¸¾å±æ€§åç§°çš„æ•°ç»„ã€‚</p><pre><code class="JS">var a = {};Object.defineProperties(a, {  one: {    enumerable: true,    value: 1  },  two: {    enumerable: false,    value: 2  },});Object.keys(a); // ["one"]Object.getOwnPropertyNames(a); // ["one", "two"]</code></pre><h3 id="Symbolå…±äº«"><a href="#Symbolå…±äº«" class="headerlink" title="Symbolå…±äº«"></a>Symbolå…±äº«</h3><p>å¦‚æœæƒ³åˆ›å»ºä¸€ä¸ªå¯å…±äº«çš„Symbolï¼Œè¦ä½¿ç”¨Symbol.for()æ–¹æ³•ã€‚å®ƒåªæ¥å—ä¸€ä¸ªå‚æ•°ã€‚</p><pre><code class="JS">let uid = Symbo.for('uid');let object = {};object[uid] = '12345';console.log(object[uid]); // "12345"console.log(uid); // "Symbol(uid)"</code></pre><blockquote><p><code>Symbol.for()</code> æ–¹æ³•é¦–å…ˆåœ¨å…¨å±€Symbolæ³¨å†Œè¡¨ä¸­æœç´¢é”®ä¸ºâ€uidâ€çš„Symbolæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œç›´æ¥è¿”å›å·²æœ‰çš„Symbolï¼›å¦åˆ™ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„Symbolï¼Œå¹¶ä½¿ç”¨è¿™ä¸ªé”®åœ¨Symbolå…¨å±€æ³¨å†Œè¡¨ä¸­æ³¨å†Œï¼Œéšå³è¿”å›æ–°åˆ›å»ºçš„Symbolã€‚</p></blockquote><h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><ul><li>Setä¸å…è®¸ç›¸åŒçš„å€¼å­˜åœ¨ä¸¤ä¸ªï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨Setå»é‡ï¼Œæ¯”å¦‚<code>[...new Set([1, 3, 1])]</code>; </li><li>åœ¨Seté›†åˆä¸­ï¼Œä¸ä¼šå¯¹æ‰€å­˜å€¼è¿›è¡Œå¼ºåˆ¶çš„ç±»å‹è½¬æ¢ï¼Œæ•°å­—5å’Œå­—ç¬¦ä¸²â€œ5â€å¯ä»¥ä½œä¸ºä¸¤ä¸ªç‹¬ç«‹å…ƒç´ å­˜åœ¨ã€‚</li><li>add, delete, hasç±»ä¼¼æ•°ç»„çš„pushã€spliceã€includesã€‚</li><li>åœ¨Setå­˜æ”¾å¯¹è±¡ï¼Œå½“å¯¹è±¡çš„å¼•ç”¨æ¸…é™¤äº†ï¼Œä¹Ÿä¸ä¼šé‡Šæ”¾ï¼Œè°ƒç”¨deleteæˆ–è€…clearï¼Œè¿˜å¯ä»¥ä½¿ç”¨WeakSetï¼Œå­˜æ”¾å¼±å¼•ç”¨ã€‚</li></ul><h3 id="WeakSet"><a href="#WeakSet" class="headerlink" title="WeakSet"></a>WeakSet</h3><ul><li>WeakSetæ²¡æœ‰Setè¯¸å¦‚add, has, delete, forEach, sizeç­‰æ–¹æ³•å’Œå±æ€§ï¼Œä¹Ÿä¸å¯è¿­ä»£</li><li>åªé€‚åˆç”¨æ¥è·Ÿè¸ªå¯¹è±¡å¼•ç”¨ã€‚</li></ul><h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><ul><li>ä¸Objectç›¸æ¯”ï¼Œé”®å€¼æ”¯æŒå¯¹è±¡ä½œä¸ºå±æ€§ï¼Œâ€5â€ã€5å°†ä½œä¸ºä¸åŒçš„keyï¼Œè€ŒObjectä¼šè°ƒç”¨toStringå°†5è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œä¸¤ä¸ªé”®å€¼å°†å†²çªã€‚</li><li>set, get, delete, has, clearæ–¹æ³•ï¼Œsizeå±æ€§ã€‚</li><li>forEachã€‚</li></ul><h3 id="WeakMap"><a href="#WeakMap" class="headerlink" title="WeakMap"></a>WeakMap</h3><ul><li>ç±»ä¼¼WeakSetï¼ŒKeyå­˜æ”¾å¯¹è±¡çš„å¼±å¼•ç”¨ï¼Œå½“è¯¥å¯¹è±¡çš„æ‰€æœ‰å¼ºå¼•ç”¨éƒ½è¢«æ¸…é™¤æ—¶ï¼ŒWeakMapä¸­å¯¹åº”çš„å¼±å¼•ç”¨é”®åŠå…¶å¯¹åº”çš„å€¼ä¹Ÿä¼šè‡ªåŠ¨è¢«GCã€‚</li></ul><h3 id="è¿­ä»£å™¨"><a href="#è¿­ä»£å™¨" class="headerlink" title="è¿­ä»£å™¨"></a>è¿­ä»£å™¨</h3><ul><li>æœ¬è´¨å°±æ˜¯è°ƒç”¨å¯¹è±¡çš„nextæ–¹æ³• æ¯æ¬¡è°ƒç”¨nextï¼Œè¿”å›{ value: xxx, done: false }å¯¹è±¡ï¼Œå½“doneä¸ºtrueè¡¨ç¤ºè¿­ä»£ç»“æŸã€‚</li></ul><h3 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h3><h3 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h3><ul><li>ç±»æ•°ç»„å¯¹è±¡ï¼ˆå…·æœ‰æ•°å€¼å‹ç´¢å¼•å’Œlengthå±æ€§çš„å¯¹è±¡ï¼‰ã€‚</li><li>å®šå‹æ•°ç»„ï¼ŒèŠ‚çœå†…å­˜ï¼ŒJSæ•°å­—æ˜¯ä»¥64ä½æµ®ç‚¹æ ¼å¼å­˜å‚¨ã€‚</li><li>æ•°ç»„ç¼“å†²åŒº ArrayBufferï¼Œç±»ä¼¼Cè¯­è¨€çš„<code>malloc</code>åˆ†é…å†…å­˜ã€‚<code>DataView</code>æ•°æ®è§†å›¾ï¼Œç”¨æ¥æ“ä½œæ•°ç»„ç¼“å­˜åŒºçš„æ•°æ®ã€‚</li><li>ç‰¹å®šç±»å‹è§†å›¾ï¼ŒInt8Arrayç­‰ã€‚<br><img src="/My-Blogs/images/ES6%E7%AC%94%E8%AE%B0/ES6%E7%AC%94%E8%AE%B0-01.png" alt="img">ã€‚</li></ul><h3 id="Promiseä¸å¼‚æ­¥ç¼–ç¨‹"><a href="#Promiseä¸å¼‚æ­¥ç¼–ç¨‹" class="headerlink" title="Promiseä¸å¼‚æ­¥ç¼–ç¨‹"></a>Promiseä¸å¼‚æ­¥ç¼–ç¨‹</h3><h3 id="ä»£ç†-Proxy-å’Œåå°„Reflection"><a href="#ä»£ç†-Proxy-å’Œåå°„Reflection" class="headerlink" title="ä»£ç†(Proxy)å’Œåå°„Reflection"></a>ä»£ç†(Proxy)å’Œåå°„Reflection</h3><h3 id="æ¨¡å—"><a href="#æ¨¡å—" class="headerlink" title="æ¨¡å—"></a>æ¨¡å—</h3><ul><li>ä¸ç®¡åœ¨importè¯­å¥ä¸­æŠŠä¸€ä¸ªæ¨¡å—å†™äº†å¤šå°‘æ¬¡ï¼Œè¯¥æ¨¡å—å°†åªæ‰§è¡Œä¸€æ¬¡ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>denoçš„åˆä½“éªŒ</title>
      <link href="/My-Blogs/2021/01/19/Deno/deno%E7%9A%84%E5%88%9D%E4%BD%93%E9%AA%8C/"/>
      <url>/My-Blogs/2021/01/19/Deno/deno%E7%9A%84%E5%88%9D%E4%BD%93%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<p>è¿™æ˜¯ä¸€ç¯‡å…³äºdenoåˆä½“éªŒæ–‡ç« </p><a id="more"></a><h2 id="Deno-â€“-å°è€Œç¾çš„è„šæœ¬è¿è¡Œæ—¶"><a href="#Deno-â€“-å°è€Œç¾çš„è„šæœ¬è¿è¡Œæ—¶" class="headerlink" title="Deno â€“ å°è€Œç¾çš„è„šæœ¬è¿è¡Œæ—¶"></a><a href="https://deno.land/">Deno</a> â€“ å°è€Œç¾çš„è„šæœ¬è¿è¡Œæ—¶</h2><blockquote><p>a simple, modern and secure runtime for JavaScript and TypeScript that uses V8 and is built in Rustã€‚</p></blockquote><p>Dahlï¼ˆNode.js çš„åˆ›å§‹äººä¹‹ä¸€ï¼‰åœ¨2017å¹´åˆ›å»ºï¼ŒRust è¯­è¨€å¼€å‘ã€‚ <code>deno</code> éŸ³è¯‘å¸è¯ºï¼Œæé¾™(dinosaur)çš„ç®€ç§°ï¼Œ<code>deno</code> è¿™ä¸ªåå­—å°±æ˜¯æ¥è‡ª Node çš„å­—æ¯é‡æ–°ç»„åˆï¼ˆNode = no + deï¼‰ï¼Œè¡¨ç¤ºâ€æ‹†é™¤ Node.jsâ€ï¼ˆde = destroy, no = Node.jsï¼‰ã€‚</p><h2 id="åˆ›å»ºåŸç”±"><a href="#åˆ›å»ºåŸç”±" class="headerlink" title="åˆ›å»ºåŸç”±"></a>åˆ›å»ºåŸç”±</h2><ul><li>Node.js Callback hellã€‚</li><li>åŸç”Ÿæ”¯æŒCommonJsï¼Œå¯¹ESæ¨¡å—ä¸å…¼å®¹ã€‚</li><li>npm(ä½ æ€•å—)æ¨¡å—ç®¡ç†å·¥å…·ï¼Œnpm_modules æå…¶åºæ‚ï¼Œè¿˜æœ‰Dependency Hellï¼Œç‰ˆæœ¬é‡å¤é—®é¢˜ç­‰é—®é¢˜ï¼Œæéš¾ç®¡ç†ã€‚è¯¦æƒ…å¯æŸ¥çœ‹<a href="https://juejin.cn/post/6914508615969669127">node_modules å›°å¢ƒ</a><br><img src="/My-Blogs/images/deno%E5%88%9D%E4%BD%93%E9%AA%8C-01.jpg" alt="img"></li><li>åŠŸèƒ½ä¸å®Œæ•´ï¼Œè¦å­¦ä¹ å¾ˆå¤šå¤–éƒ¨å·¥å…·ï¼Œè¯¸å¦‚webpackï¼Œbabelï¼Œtypescriptã€eslintã€prettierâ€¦â€¦</li></ul><blockquote><p><em>â€œç”±äºä¸Šé¢è¿™äº›åŸå› ï¼ŒRyan Dahl å†³å®šæ”¾å¼ƒ Node.jsï¼Œä»å¤´å†™ä¸€ä¸ªæ›¿ä»£å“ï¼Œå½»åº•è§£å†³è¿™äº›é—®é¢˜ã€‚deno è¿™ä¸ªåå­—å°±æ˜¯æ¥è‡ª Node çš„å­—æ¯é‡æ–°ç»„åˆï¼ˆNode = no + deï¼‰ï¼Œè¡¨ç¤ºâ€æ‹†é™¤ Node.jsâ€ï¼ˆde = destroy, no = Node.jsï¼‰ã€‚<br>è·Ÿ Node.js ä¸€æ ·ï¼ŒDeno ä¹Ÿæ˜¯ä¸€ä¸ªæœåŠ¡å™¨è¿è¡Œæ—¶ï¼Œä½†æ˜¯æ”¯æŒå¤šç§è¯­è¨€ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œ JavaScriptã€TypeScript å’Œ WebAssembly ç¨‹åºã€‚<br>å®ƒå†…ç½®äº† V8 å¼•æ“ï¼Œç”¨æ¥è§£é‡Š JavaScriptã€‚åŒæ—¶ï¼Œä¹Ÿå†…ç½®äº† tsc å¼•æ“ï¼Œè§£é‡Š TypeScriptã€‚å®ƒä½¿ç”¨ Rust è¯­è¨€å¼€å‘ï¼Œç”±äº Rust åŸç”Ÿæ”¯æŒ WebAssemblyï¼Œæ‰€ä»¥å®ƒä¹Ÿèƒ½ç›´æ¥è¿è¡Œ WebAssemblyã€‚å®ƒçš„å¼‚æ­¥æ“ä½œä¸ä½¿ç”¨ libuv è¿™ä¸ªåº“ï¼Œè€Œæ˜¯ä½¿ç”¨ Rust è¯­è¨€çš„ Tokio åº“ï¼Œæ¥å®ç°äº‹ä»¶å¾ªç¯ï¼ˆevent loopï¼‰ã€‚â€</em>â€” å‡ºè‡ªé˜®ä¸€å³°å¤§ç¥ã€Š<a href="https://www.ruanyifeng.com/blog/2020/01/deno-intro.html">Deno è¿è¡Œæ—¶å…¥é—¨æ•™ç¨‹ï¼šNode.js çš„æ›¿ä»£å“</a>ã€‹</p></blockquote><p><strong>é—²è¨€å°‘å™ï¼Œä¹¦å½’æ­£æ–‡ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹Denoçš„ç‰¹æ€§å§ã€‚</strong></p><h2 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h2><ul><li>æœåŠ¡å™¨è¿è¡Œæ—¶ï¼Œæ”¯æŒå¤šç§è¯­è¨€ï¼Œå¯ç›´æ¥è¿è¡Œ <code>JavaScript</code>ã€<code>TypeScript</code> å’Œ <code>WebAssembly</code> ç¨‹åºã€‚</li><li>å…·æœ‰å®‰å…¨æ§åˆ¶ï¼Œé»˜è®¤æƒ…å†µä¸‹è„šæœ¬ä¸å…·æœ‰è¯»å†™æƒé™ã€‚å¦‚æœè„šæœ¬æœªæˆæƒï¼Œå°±è¯»å†™æ–‡ä»¶ç³»ç»Ÿæˆ–ç½‘ç»œï¼Œä¼šæŠ¥é”™ã€‚</li><li>åªæœ‰ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ‰€æœ‰æ“ä½œéƒ½é€šè¿‡è¿™ä¸ªæ–‡ä»¶å®Œæˆã€‚å®ƒæ”¯æŒè·¨å¹³å°ï¼ˆMacã€Linuxã€Windowsï¼‰ã€‚</li><li>å¼‚æ­¥æ“ä½œ ä¸€å¾‹è¿”å› Promiseã€‚</li><li>Deno æ”¯æŒ Web APIï¼Œå°½é‡è·Ÿæµè§ˆå™¨ä¿æŒä¸€è‡´ã€‚<code>window</code>ã€<code>fetch</code>ã€<code>webCrypto</code>ã€<code>worker</code>, ä¹Ÿæ”¯æŒ <code>onload</code>ã€<code>onunload</code>ã€<code>addEventListener</code> ç­‰äº‹ä»¶æ“ä½œå‡½æ•°ã€‚</li><li>æ‰€æœ‰æ¨¡å—é€šè¿‡ URL åŠ è½½ï¼Œæ¯”å¦‚<code>import { bar } from "https://foo.com/bar.ts"</code>ï¼ˆç»å¯¹ URLï¼‰æˆ–<code>import { bar } from './foo/bar.ts'</code>ï¼ˆç›¸å¯¹ URLï¼‰ã€‚æœ¬åœ°ç¼“å­˜ï¼Œæœ‰ä¸ªCacheæ€»ç›®å½•</li><li>åŸç”Ÿæ”¯æŒTypeScript, å†…ç½®<a href="https://github.com/microsoft/TypeScript">TypeScriptç¼–è¯‘å™¨</a>å’Œ<a href="https://swc.rs/">swc</a>çš„Ruståº“ç»„åˆå®ç°ã€‚</li><li>æ‰“åŒ…ã€æ ¼å¼æ¸…ç†ã€æµ‹è¯•ã€å®‰è£…ã€æ–‡æ¡£ç”Ÿæˆã€lintingã€è„šæœ¬ç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶ç­‰ä¸€æ¡é¾™æœåŠ¡ã€‚</li></ul><h2 id="ä¼˜åŠ¿"><a href="#ä¼˜åŠ¿" class="headerlink" title="ä¼˜åŠ¿"></a>ä¼˜åŠ¿</h2><ul><li>é«˜æ•ˆä¸”å®‰å…¨</li><li>å•æ–‡ä»¶ï¼Œå…¼å®¹æµè§ˆå™¨æ ‡å‡†ï¼Œä½“ç§¯å°ã€‚</li><li>æ›¿ä»£è„šæœ¬</li><li>å†…å­˜å ç”¨å°‘ï¼Œè¿è¡Œé€Ÿåº¦æ¯”nodeå¿«ã€‚<a href="https://juejin.cn/post/6854573218419474439">ä»Denoè·ŸNodeçš„æ€§èƒ½å¯¹æ¯”è¯´èµ·</a></li></ul><h2 id="ä¸è¶³"><a href="#ä¸è¶³" class="headerlink" title="ä¸è¶³"></a>ä¸è¶³</h2><ul><li>ç¼ºå°‘é›†å¤§æˆæ¡†æ¶ï¼Œæ»¡è¶³ä¸äº†ä¼ä¸šçº§åº”ç”¨å¼€å‘ã€‚</li><li>ç¤¾åŒºè¿˜ä¸å®Œå–„ï¼Œç¬¬ä¸‰æ–¹åº“ä¸å¤Ÿä¸°å¯Œã€‚</li><li>ç¼ºä¹åŒ…ç®¡ç†å·¥å…·ï¼Œç®¡ç†èµ·æ¥æ··ä¹±ã€‚</li><li><a href="https://juejin.cn/post/6917830384956899341">ç½‘ç»œä¸Šä¸€äº›æ€€ç–‘çš„å£°éŸ³</a></li></ul><h3 id="CLI"><a href="#CLI" class="headerlink" title="CLI"></a><a href="https://deno.land/manual@v1.7.0/getting_started/command_line_interface">CLI</a></h3><h3 id="permission"><a href="#permission" class="headerlink" title="permission"></a><a href="https://deno.land/manual@v1.7.0/getting_started/permissions">permission</a></h3><h3 id="WebAssembly"><a href="#WebAssembly" class="headerlink" title="WebAssembly"></a><a href="https://deno.land/manual@v1.7.0/getting_started/webassembly#webassembly-support">WebAssembly</a></h3><pre><code class="JS">const wasmCode = new Uint8Array([  0, 97, 115, 109, 1, 0, 0, 0, 1, 133, 128, 128, 128, 0, 1, 96, 0, 1, 127,  3, 130, 128, 128, 128, 0, 1, 0, 4, 132, 128, 128, 128, 0, 1, 112, 0, 0,  5, 131, 128, 128, 128, 0, 1, 0, 1, 6, 129, 128, 128, 128, 0, 0, 7, 145,  128, 128, 128, 0, 2, 6, 109, 101, 109, 111, 114, 121, 2, 0, 4, 109, 97,  105, 110, 0, 0, 10, 138, 128, 128, 128, 0, 1, 132, 128, 128, 128, 0, 0,  65, 42, 11]);const wasmModule = new WebAssembly.Module(wasmCode);const wasmInstance = new WebAssembly.Instance(wasmModule);const main = wasmInstance.exports.main as CallableFunctionconsole.log(main().toString());</code></pre><h3 id="ç¬¬ä¸‰æ–¹åº“"><a href="#ç¬¬ä¸‰æ–¹åº“" class="headerlink" title="ç¬¬ä¸‰æ–¹åº“"></a>ç¬¬ä¸‰æ–¹åº“</h3><ul><li><a href="https://deno.land/x">å·²æ”¯æŒå¼€æºé¡¹ç›®</a></li><li><a href="https://deno.land/x/denon@2.4.6">denon</a></li><li><a href="https://deno.land/x/oak@v6.4.2">oak</a> â€“ ç±»ä¼¼koaçš„webæ¡†æ¶</li><li><a href="https://deno.land/x/aleph@v0.2.28">Aleph.js</a> â€“ ç±»ä¼¼Next.js(React ssræ¡†æ¶)<h3 id="æ ‡å‡†åº“"><a href="#æ ‡å‡†åº“" class="headerlink" title="æ ‡å‡†åº“"></a><a href="https://deno.land/std/">æ ‡å‡†åº“</a></h3><h3 id="å…¼å®¹node-js"><a href="#å…¼å®¹node-js" class="headerlink" title="å…¼å®¹node.js"></a><a href="https://deno.land/std/node">å…¼å®¹node.js</a></h3></li></ul><h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>Shell (Mac, Linux):</p><pre><code class="BASH">curl -fsSL https://deno.land/x/install/install.sh | sh</code></pre><p>PowerShell (Windows):</p><pre><code class="BASH">iwr https://deno.land/x/install/install.ps1 -useb | iex</code></pre><p>Using Homebrew (macOS):</p><pre><code class="BASH">brew install deno</code></pre><h3 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h3><p>Try running a simple program:</p><pre><code class="BASH">deno run https://deno.land/std/examples/welcome.ts</code></pre><p>Or a more complex one:</p><pre><code class="JS">import {  serve} from "https://deno.land/std@0.83.0/http/server.ts";const s = serve({  port: 8000});console.log("http://localhost:8000/");for await (const req of s) {  req.respond({    body: "Hello World\n"  });}</code></pre><h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a><a href="https://deno.land/std/">ä¾‹å­</a></h3><h2 id="ç¼“å­˜ç›®å½•"><a href="#ç¼“å­˜ç›®å½•" class="headerlink" title="ç¼“å­˜ç›®å½•"></a>ç¼“å­˜ç›®å½•</h2><p>ä»¥Macä¸ºä¾‹ï¼Œä¸¾ä¸ªğŸŒ° </p><pre><code class="BASH"> $HOME/Library/Caches/Deno#  è¿œç¨‹åº“ä¸‹è½½åœ°å€deno run https://deno.land/std@0.83.0/examples/welcome.ts# DIRECTORIESgen/: ç¼“å­˜ç¼–è¯‘ä¸ºJavaScriptçš„æ–‡ä»¶deps/: ç¼“å­˜å¯¼å…¥çš„è¿œç¨‹urlçš„æ–‡ä»¶  |__ http/: httpæ–¹å¼å¯¼å…¥çš„æ–‡ä»¶  |__ https/: httpsæ–¹å¼å¯¼å…¥çš„æ–‡ä»¶# FILESdeno_history.txt: Deno REPLå†å²è®°å½•ç¼“å­˜deno info                                                                               DENO_DIR location: "/Users/lulu/Library/Caches/deno"Remote modules cache: "/Users/lulu/Library/Caches/deno/deps"TypeScript compiler cache: "/Users/lulu/Library/Caches/deno/gen"</code></pre><h3 id="gen"><a href="#gen" class="headerlink" title="gen/"></a>gen/</h3><p><code>$DENO_DIR/gen/</code> è¢«ç”¨æ¥å­˜æ”¾ JavaScript æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶æ˜¯ä» TypeScript æºç ç¼–è¯‘æ¥çš„ã€‚è¿™æ ·çš„ç¼–è¯‘æ˜¯å¿…è¦çš„ï¼Œå› ä¸º V8 ä¸è¯†åˆ« JS å­é›†ä¹‹å¤–çš„ TypeScript è¯­æ³•ã€‚</p><p>gen/ç›®å½•ä¸‹çš„æ¯ä¸€ä¸ª JS æ–‡ä»¶çš„æ–‡ä»¶åæ˜¯ä»–çš„ TypeScript æºç çš„ hash å€¼ã€‚åŒæ—¶ JS æ–‡ä»¶ä¹Ÿå¯¹åº”ä¸€ä¸ª .map ä¸ºåç¼€çš„ source map æ–‡ä»¶ã€‚</p><p>ç¼“å­˜å­˜åœ¨çš„åŸå› æ˜¯ä¸ºäº†é¿å…åœ¨ç”¨æˆ·æ²¡æœ‰ä¿®æ”¹ä»£ç çš„æƒ…å†µä¸‹ï¼Œæ¯æ¬¡è¿è¡Œæ—¶ä¸æ–­çš„é‡æ–°ç¼–è¯‘æ–‡ä»¶ã€‚æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ª hello-world.ts æ–‡ä»¶ï¼Œä»–åªæ˜¯åŒ…å«äº†ä»£ç  console.log(â€œHello worldâ€)ã€‚åœ¨ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ç¼–è¯‘ä¿¡æ¯ï¼š</p><pre><code class="BASH">$ deno hello-world.tsCompiling /Users/kevinqian/my-folder/hello-world.tsHello world</code></pre><p>ä½†æ˜¯åœ¨æ²¡æœ‰ä¿®æ”¹æ–‡ä»¶å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå½“ä½ é‡æ–°è¿è¡Œä»£ç ï¼š</p><pre><code class="BASH">$ deno hello-world.tsHello world</code></pre><p>ä¸ä¼šå†æœ‰ç¼–è¯‘ä¿¡æ¯çš„æç¤ºã€‚è¿™æ˜¯å› ä¸ºåœ¨è¿™ä¸€æ¬¡è¿è¡Œä¸­ï¼ŒDeno ç›´æ¥ä½¿ç”¨äº† gen/ ä¸­ç¼“å­˜çš„ç‰ˆæœ¬ï¼Œè€Œä¸ç”¨å†æ¬¡ç¼–è¯‘ã€‚</p><p>ç¼“å­˜åŠ è½½å’Œä¿å­˜çš„ä»£ç ï¼Œå¯ä»¥ä»æ–‡ä»¶ src/deno_dir.rs ä¸­çš„ DenoDir::load_cache å’Œ DenoDir::code_cache ä¸­æ‰¾åˆ°ã€‚</p><p>å¦‚æœæƒ³è¦å¼ºåˆ¶ Deno é‡æ–°ç¼–è¯‘ä½ çš„ä»£ç è€Œä¸æ˜¯ä½¿ç”¨ç¼“å­˜çš„ç‰ˆæœ¬ï¼Œä½ éœ€è¦ä½¿ç”¨ <code>--recompile</code> æ ‡å¿—ã€‚</p><h3 id="deps"><a href="#deps" class="headerlink" title="deps/"></a>deps/</h3><p><code>$DENO_DIR/deps</code> è¢«ç”¨æ¥ä¿å­˜è¿œç«¯ url import è·å¾—çš„æ–‡ä»¶ã€‚æ ¹æ® url çš„æ¨¡å¼ï¼Œä»–åŒ…å«äº†å­ç›®å½•ï¼ˆç°åœ¨åªæœ‰httpå’Œhttpsï¼‰ï¼Œå¹¶ä¸”ä¿å­˜æ–‡ä»¶çš„ä½ç½®ç”± URL path å†³å®šã€‚æ¯”å¦‚ï¼Œå¯¹äºä¸‹é¢çš„çš„ importï¼ˆè¯·æ³¨æ„ï¼ŒDeno è¦æ±‚ç”¨æˆ·æ˜¾å¼åœ°æŒ‡å®šæ‰©å±•åï¼‰ã€‚</p><pre><code class="JS">import {  serve} from "https://deno.land/x/std/net/http.ts";</code></pre><p>ä¸‹è½½çš„http.tsæ–‡ä»¶å°†ä¼šè¢«å­˜å‚¨åœ¨ï¼š</p><pre><code class="BASH">$DENO_DIR/deps/https/deno.land/x/std/net/http.ts</code></pre><p>éœ€è¦æ³¨æ„ï¼Œé™¤éç”¨æˆ·ç”¨ <code>--reload</code> æ ‡å¿—è¿è¡Œä»£ç ï¼Œå¦åˆ™æˆ‘ä»¬çš„http.tsæ–‡ä»¶åœ¨æ¥ä¸‹æ¥çš„è¿è¡Œä¸­ä¸ä¼šè¢«é‡æ–°ä¸‹è½½ã€‚</p><p>å½“å‰ï¼ˆè­¦å‘Šï¼šå°†æ¥å¯èƒ½æ”¹å˜ï¼‰ï¼ŒDeno ä¼šå…³æ³¨ä»è¿œç«¯ä¸‹è½½çš„æ–‡ä»¶çš„å†…å®¹çš„ MIME ç±»å‹ã€‚åœ¨æ–‡ä»¶ç¼ºå°‘æ‰©å±•åæˆ–æ‰©å±•åä¸å†…å®¹ç±»å‹ä¸åŒ¹é…çš„æƒ…å†µä¸‹ï¼ŒDeno å°†åˆ›å»ºä¸€ä¸ªä»¥ .mime ç»“å°¾çš„é¢å¤–æ–‡ä»¶ï¼Œæ¥å­˜å‚¨ HTTP å“åº”å¤´æä¾›çš„ mime ç±»å‹ã€‚å¦‚æœæˆ‘ä»¬ä¸‹è½½çš„æ–‡ä»¶åæ˜¯ a.tsï¼Œç„¶è€Œå“åº”å¤´é‡Œé¢æ˜¯ Content-Type: text/javascriptï¼Œä¸€ä¸ªåŒ…å«text/javascriptå†…å®¹çš„a.ts.mimeæ–‡ä»¶å°†ä¼šåœ¨ä»–æ—è¾¹è¢«åˆ›å»ºã€‚ç”±äº.mimeæ–‡ä»¶çš„å­˜åœ¨ï¼Œa.ts åé¢å°†ä¼šè¢«å½“åšä¸€ä¸ª JavaScript æ–‡ä»¶è¢« importã€‚</p><h2 id="æ¼”ç¤º"><a href="#æ¼”ç¤º" class="headerlink" title="æ¼”ç¤º"></a>æ¼”ç¤º</h2><pre><code class="BASH">cd /Users/lulu/my-projects/deno-demo &amp;&amp; code .</code></pre><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Denoçš„ç›®æ ‡ä¸æ˜¯æ›¿ä»£Nodeï¼Œè€Œæ˜¯Nodeçš„ä¸€ä¸ªè¡¥å……å®Œå–„æ–¹æ¡ˆã€‚<br>ç›®å‰Denoè¿˜å¤„äºåˆæ­¥é˜¶æ®µï¼Œæ ‡å‡†åº“ï¼Œå…¼å®¹æ€§è¿˜æœ‰å¾…æ”¹è¿›ï¼Œé€‚åˆè„šæœ¬ï¼Œå°å‹åº”ç”¨å¼€å‘ã€‚æƒ³è¦å®Œæˆä¸€ä¸ªæˆç†Ÿçš„å¤§å‹é¡¹ç›®ï¼Œè¿˜éœ€è¦æ—¶é—´çš„æ²‰æ·€ã€‚è®©æˆ‘ä»¬å¥½å¥½æœŸå¾…ä¸‹ï¼Œæœªæ¥çš„Denoä¼šå¦‚ä½•å‘å±•ï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> deno </category>
          
      </categories>
      
      
        <tags>
            
            <tag> deno </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>treeå‘½ä»¤çš„åŸºæœ¬ä½¿ç”¨</title>
      <link href="/My-Blogs/2021/01/18/Linux/shell/%E6%96%87%E4%BB%B6/tree%E5%91%BD%E4%BB%A4%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
      <url>/My-Blogs/2021/01/18/Linux/shell/%E6%96%87%E4%BB%B6/tree%E5%91%BD%E4%BB%A4%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>æ¯å¤©å­¦ä¸€ä¸ª Linux å‘½ä»¤ä¹‹treeçš„åŸºæœ¬ä½¿ç”¨</p><a id="more"></a><h2 id="å‘½ä»¤ç®€ä»‹"><a href="#å‘½ä»¤ç®€ä»‹" class="headerlink" title="å‘½ä»¤ç®€ä»‹"></a>å‘½ä»¤ç®€ä»‹</h2><p>tree å‘½ä»¤çš„ä½œç”¨æ˜¯ä»¥æ ‘å½¢ç»“æ„æ˜¾ç¤ºç›®å½•ä¸‹çš„å†…å®¹ã€‚</p><p>å¸¸ç”¨çš„Linuxå‘è¡Œç‰ˆç³»ç»Ÿä¸­é»˜è®¤æ²¡æœ‰è¿™ä¸ªå‘½ä»¤ï¼Œä½ éœ€è¦é€šè¿‡å®‰è£…æ‰å¯ä»¥ä½¿ç”¨ï¼š</p><pre><code class="BASH">#Centosyum install tree -y#Ubuntusudo apt-get install tree</code></pre><p>å®‰è£…å®Œæˆä¹‹åå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨è¿™ä¸ªtreeå‘½ä»¤äº†ã€‚</p><h2 id="è¯­æ³•æ ¼å¼"><a href="#è¯­æ³•æ ¼å¼" class="headerlink" title="è¯­æ³•æ ¼å¼"></a>è¯­æ³•æ ¼å¼</h2><pre><code class="BASH">tree [é€‰é¡¹] [ç›®å½•]</code></pre><h2 id="é€‰é¡¹è¯´æ˜"><a href="#é€‰é¡¹è¯´æ˜" class="headerlink" title="é€‰é¡¹è¯´æ˜"></a>é€‰é¡¹è¯´æ˜</h2><pre><code class="BASH">-a   #æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶-d   #åªæ˜¾ç¤ºç›®å½•ï¼ˆåç§°ï¼‰-l   #æ˜¾ç¤ºé“¾æ¥æ–‡ä»¶çš„åŸå§‹æ–‡ä»¶-f   #æ˜¾ç¤ºæ‰€åˆ—å‡ºçš„æ–‡ä»¶æˆ–ç›®å½•çš„å®Œæ•´ç›®å½•è·¯å¾„-i   #ä¸ä»¥é˜¶æ¢¯çš„å½¢å¼æ˜¾ç¤ºæ–‡ä»¶æˆ–ç›®å½•åç§°-q   #å°†æ§åˆ¶å­—ç¬¦ä»¥?å­—ç¬¦ä»£æ›¿ï¼Œæ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•åç§°-N   #ç›´æ¥æ˜¾ç¤ºæ–‡ä»¶æˆ–ç›®å½•çš„åç§°-p   #æ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶çš„æƒé™ä¿¡æ¯-u   #æ˜¾ç¤ºæ–‡ä»¶æ‰€æœ‰è€…æˆ–è€…uid-g   #æ˜¾ç¤ºæ–‡ä»¶æ‰€å±ç»„æˆ–è€…gid-s   #æ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶çš„å¤§å°ä¿¡æ¯-h   #ä»¥å¯è¯»çš„æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶çš„å¤§å°ä¿¡æ¯-D   #æ˜¾ç¤ºæœ€åä¿®æ”¹æ—¥æœŸ-v   #æŒ‰å­—æ¯æ•°å­—æ­£åºæ˜¾ç¤ºæ–‡ä»¶-r   #æŒ‰å­—æ¯æ•°å­—å€’åºæ˜¾ç¤ºæ–‡ä»¶-t   #æŒ‰æœ€åæ—¶é—´æ’åºæ˜¾ç¤ºæ–‡ä»¶-C   #åœ¨æ–‡ä»¶å’Œç›®å½•åˆ—è¡¨ä¸ŠåŠ ä¸Šè‰²å½©ï¼Œä¾¿äºåŒºåˆ†æ–‡ä»¶ç±»å‹-P pattern    #åªæ˜¾ç¤ºåŒ¹é…æ­£åˆ™è¡¨å¼çš„æ–‡ä»¶æˆ–ç›®å½•åç§°-I pattern    #ä¸ä¸Šç»“æœç›¸å</code></pre><h2 id="åº”ç”¨ä¸¾ä¾‹"><a href="#åº”ç”¨ä¸¾ä¾‹" class="headerlink" title="åº”ç”¨ä¸¾ä¾‹"></a>åº”ç”¨ä¸¾ä¾‹</h2><pre><code class="BASH">#æ ‘å½¢æ˜¾ç¤ºå½“å‰ç›®å½•åŠå…¶å­ç›®å½•ä¸‹çš„æ–‡ä»¶åŠç›®å½•åç§°[root@centos7&nbsp;testdir]#&nbsp;tree.â”œâ”€â”€&nbsp;dirâ”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;test2.txt~â”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;test3.txtâ”‚&nbsp;&nbsp;&nbsp;â””â”€â”€&nbsp;test3.txt.bakâ”œâ”€â”€&nbsp;test2.txtâ””â”€â”€&nbsp;test2.txt~1&nbsp;directory,&nbsp;5&nbsp;files#åªæ˜¾ç¤ºç›®å½•åç§°[root@centos7&nbsp;testdir]#&nbsp;tree&nbsp;-d.â””â”€â”€&nbsp;dir1&nbsp;directory#æ˜¾ç¤ºç›®å½•åŠæ–‡ä»¶çš„æƒé™ä¿¡æ¯[root@centos7&nbsp;testdir]#&nbsp;tree&nbsp;-p.â”œâ”€â”€&nbsp;[drwxr-xr-x]&nbsp;&nbsp;dirâ”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;[-rw-r--r--]&nbsp;&nbsp;test2.txt~â”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;[-rw-r--r--]&nbsp;&nbsp;test3.txtâ”‚&nbsp;&nbsp;&nbsp;â””â”€â”€&nbsp;[-rw-r--r--]&nbsp;&nbsp;test3.txt.bakâ”œâ”€â”€&nbsp;[-rw-r--r--]&nbsp;&nbsp;test2.txtâ””â”€â”€&nbsp;[-rw-r--r--]&nbsp;&nbsp;test2.txt~1&nbsp;directory,&nbsp;5&nbsp;files#æ˜¾ç¤ºå‡ å±‚ä¿¡æ¯2ä»£è¡¨2å±‚ï¼ˆå‘ä¸‹ï¼‰[root@centos7&nbsp;testdir]#&nbsp;tree&nbsp;-L&nbsp;2.â”œâ”€â”€&nbsp;dirâ”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;test2.txt~â”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;test3.txtâ”‚&nbsp;&nbsp;&nbsp;â””â”€â”€&nbsp;test3.txt.bakâ”œâ”€â”€&nbsp;test2.txtâ””â”€â”€&nbsp;test2.txt~1&nbsp;directory,&nbsp;5&nbsp;files[root@centos7&nbsp;testdir]#&nbsp;tree&nbsp;-L&nbsp;1.â”œâ”€â”€&nbsp;dirâ”œâ”€â”€&nbsp;test2.txtâ””â”€â”€&nbsp;test2.txt~1&nbsp;directory,&nbsp;2&nbsp;files</code></pre><p>-C æ˜¾ç¤ºå„ç§æ–‡ä»¶ç±»å‹ï¼Œä»¥é¢œè‰²åŒºåˆ†</p><p><img src="/My-Blogs/images/tree%E5%91%BD%E4%BB%A4%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-01.png" alt="img"></p><pre><code class="BASH">#æ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•çš„æ‰€æœ‰è€…[root@centos7&nbsp;testdir]#&nbsp;tree&nbsp;-u.â”œâ”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;cp&nbsp;-&gt;&nbsp;/usr/bin/cpâ”œâ”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;dirâ”‚??&nbsp;â”œâ”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;test2.txt~â”‚??&nbsp;â”œâ”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;test3.txtâ”‚??&nbsp;â””â”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;test3.txt.bakâ”œâ”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;test2.txtâ””â”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;test2.txt~1&nbsp;directory,&nbsp;6&nbsp;files#æ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•çš„æ‰€å±ç»„[root@centos7&nbsp;testdir]#&nbsp;tree&nbsp;-g.â”œâ”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;cp&nbsp;-&gt;&nbsp;/usr/bin/cpâ”œâ”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;dirâ”‚??&nbsp;â”œâ”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;test2.txt~â”‚??&nbsp;â”œâ”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;test3.txtâ”‚??&nbsp;â””â”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;test3.txt.bakâ”œâ”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;test2.txtâ””â”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;test2.txt~1&nbsp;directory,&nbsp;6&nbsp;files#ä¸æŒ‰æ ‘å½¢å½¢å¼æ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•[root@centos7&nbsp;testdir]#&nbsp;tree&nbsp;-i.cp&nbsp;-&gt;&nbsp;/usr/bin/cpdirtest2.txt~test3.txttest3.txt.baktest2.txttest2.txt~1&nbsp;directory,&nbsp;6&nbsp;files[root@centos7&nbsp;testdir]#&nbsp;tree.â”œâ”€â”€&nbsp;cp&nbsp;-&gt;&nbsp;/usr/bin/cpâ”œâ”€â”€&nbsp;dirâ”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;test2.txt~â”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;test3.txtâ”‚&nbsp;&nbsp;&nbsp;â””â”€â”€&nbsp;test3.txt.bakâ”œâ”€â”€&nbsp;test2.txtâ””â”€â”€&nbsp;test2.txt~1&nbsp;directory,&nbsp;6&nbsp;files#æ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•çš„å®Œæ•´è·¯å¾„[root@centos7&nbsp;testdir]#&nbsp;pwd/root/testdir[root@centos7&nbsp;testdir]#&nbsp;tree&nbsp;-f.â”œâ”€â”€&nbsp;./cp&nbsp;-&gt;&nbsp;/usr/bin/cpâ”œâ”€â”€&nbsp;./dirâ”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;./dir/test2.txt~â”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;./dir/test3.txtâ”‚&nbsp;&nbsp;&nbsp;â””â”€â”€&nbsp;./dir/test3.txt.bakâ”œâ”€â”€&nbsp;./test2.txtâ””â”€â”€&nbsp;./test2.txt~1&nbsp;directory,&nbsp;6&nbsp;files[root@centos7&nbsp;~]#&nbsp;tree&nbsp;-f&nbsp;./testdir/./testdirâ”œâ”€â”€&nbsp;./testdir/cp&nbsp;-&gt;&nbsp;/usr/bin/cpâ”œâ”€â”€&nbsp;./testdir/dirâ”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;./testdir/dir/test2.txt~â”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;./testdir/dir/test3.txtâ”‚&nbsp;&nbsp;&nbsp;â””â”€â”€&nbsp;./testdir/dir/test3.txt.bakâ”œâ”€â”€&nbsp;./testdir/test2.txtâ””â”€â”€&nbsp;./testdir/test2.txt~1&nbsp;directory,&nbsp;6&nbsp;files</code></pre>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> shell </tag>
            
            <tag> æ–‡ä»¶å¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Explainä½¿ç”¨åˆ†æ</title>
      <link href="/My-Blogs/2021/01/08/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/Explain%E4%BD%BF%E7%94%A8%E5%88%86%E6%9E%90/"/>
      <url>/My-Blogs/2021/01/08/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/Explain%E4%BD%BF%E7%94%A8%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>MySQL æä¾›äº†ä¸€ä¸ª EXPLAIN å‘½ä»¤, å®ƒå¯ä»¥å¯¹ SELECT è¯­å¥è¿›è¡Œåˆ†æ, å¹¶è¾“å‡º SELECT æ‰§è¡Œçš„è¯¦ç»†ä¿¡æ¯, ä»¥ä¾›å¼€å‘äººå‘˜é’ˆå¯¹æ€§ä¼˜åŒ–.<br>EXPLAIN å‘½ä»¤ç”¨æ³•ååˆ†ç®€å•, åœ¨ SELECT è¯­å¥å‰åŠ ä¸Š Explain å°±å¯ä»¥äº†, ä¾‹å¦‚:</p><a id="more"></a><pre><code class="SQL">EXPLAIN SELECT * from user_info WHERE  id &lt; 300;</code></pre><h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><p>ä¸ºäº†æ¥ä¸‹æ¥æ–¹ä¾¿æ¼”ç¤º EXPLAIN çš„ä½¿ç”¨, é¦–å…ˆæˆ‘ä»¬éœ€è¦å»ºç«‹ä¸¤ä¸ªæµ‹è¯•ç”¨çš„è¡¨, å¹¶æ·»åŠ ç›¸åº”çš„æ•°æ®:</p><pre><code class="SQL">CREATE TABLE `user_info` (  `id`   BIGINT(20)  NOT NULL AUTO_INCREMENT,  `name` VARCHAR(50) NOT NULL DEFAULT '',  `age`  INT(11)              DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `name_index` (`name`))  ENGINE = InnoDB  DEFAULT CHARSET = utf8</code></pre><pre><code class="SQL">CREATE TABLE `order_info` (  `id`           BIGINT(20)  NOT NULL AUTO_INCREMENT,  `user_id`      BIGINT(20)           DEFAULT NULL,  `product_name` VARCHAR(50) NOT NULL DEFAULT '',  `productor`    VARCHAR(30)          DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `user_product_detail_index` (`user_id`, `product_name`, `productor`))  ENGINE = InnoDB  DEFAULT CHARSET = utf8</code></pre><h2 id="EXPLAIN-è¾“å‡ºæ ¼å¼"><a href="#EXPLAIN-è¾“å‡ºæ ¼å¼" class="headerlink" title="EXPLAIN è¾“å‡ºæ ¼å¼"></a>EXPLAIN è¾“å‡ºæ ¼å¼</h2><p>EXPLAIN å‘½ä»¤çš„è¾“å‡ºå†…å®¹å¤§è‡´å¦‚ä¸‹:</p><pre><code class="SQL">mysql&gt; explain select * from user_info where id = 2\G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: user_info   partitions: NULL         type: constpossible_keys: PRIMARY          key: PRIMARY      key_len: 8          ref: const         rows: 1     filtered: 100.00        Extra: NULL1 row in set, 1 warning (0.00 sec)</code></pre><p>å„åˆ—çš„å«ä¹‰å¦‚ä¸‹:</p><ul><li><p><code>id</code>: SELECT æŸ¥è¯¢çš„æ ‡è¯†ç¬¦. æ¯ä¸ª SELECT éƒ½ä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦.</p></li><li><p><code>select_type</code>: SELECT æŸ¥è¯¢çš„ç±»å‹.</p></li><li><p><code>table</code>: æŸ¥è¯¢çš„æ˜¯å“ªä¸ªè¡¨</p></li><li><p><code>partitions</code>: åŒ¹é…çš„åˆ†åŒº</p></li><li><p><code>type</code>: join ç±»å‹</p></li><li><p><code>possible_keys</code>: æ­¤æ¬¡æŸ¥è¯¢ä¸­å¯èƒ½é€‰ç”¨çš„ç´¢å¼•</p></li><li><p><code>key</code>: æ­¤æ¬¡æŸ¥è¯¢ä¸­ç¡®åˆ‡ä½¿ç”¨åˆ°çš„ç´¢å¼•.</p></li><li><p><code>ref</code>: å“ªä¸ªå­—æ®µæˆ–å¸¸æ•°ä¸ key ä¸€èµ·è¢«ä½¿ç”¨</p></li><li><p><code>rows</code>: æ˜¾ç¤ºæ­¤æŸ¥è¯¢ä¸€å…±æ‰«æäº†å¤šå°‘è¡Œ. è¿™ä¸ªæ˜¯ä¸€ä¸ªä¼°è®¡å€¼.</p></li><li><p><code>filtered</code>: è¡¨ç¤ºæ­¤æŸ¥è¯¢æ¡ä»¶æ‰€è¿‡æ»¤çš„æ•°æ®çš„ç™¾åˆ†æ¯”</p></li><li><p><code>extra</code>: é¢å¤–çš„ä¿¡æ¯</p></li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥é‡ç‚¹çœ‹ä¸€ä¸‹æ¯”è¾ƒé‡è¦çš„å‡ ä¸ªå­—æ®µ.</p><h3 id="select-type"><a href="#select-type" class="headerlink" title="select_type"></a>select_type</h3><p><code>select_type</code> è¡¨ç¤ºäº†æŸ¥è¯¢çš„ç±»å‹, å®ƒçš„å¸¸ç”¨å–å€¼æœ‰:</p><ul><li><p>SIMPLE, è¡¨ç¤ºæ­¤æŸ¥è¯¢ä¸åŒ…å« UNION æŸ¥è¯¢æˆ–å­æŸ¥è¯¢</p></li><li><p>PRIMARY, è¡¨ç¤ºæ­¤æŸ¥è¯¢æ˜¯æœ€å¤–å±‚çš„æŸ¥è¯¢</p></li><li><p>UNION, è¡¨ç¤ºæ­¤æŸ¥è¯¢æ˜¯ UNION çš„ç¬¬äºŒæˆ–éšåçš„æŸ¥è¯¢</p></li><li><p>DEPENDENT UNION, UNION ä¸­çš„ç¬¬äºŒä¸ªæˆ–åé¢çš„æŸ¥è¯¢è¯­å¥, å–å†³äºå¤–é¢çš„æŸ¥è¯¢</p></li><li><p>UNION RESULT, UNION çš„ç»“æœ</p></li><li><p>SUBQUERY, å­æŸ¥è¯¢ä¸­çš„ç¬¬ä¸€ä¸ª SELECT</p></li><li><p>DEPENDENT SUBQUERY: å­æŸ¥è¯¢ä¸­çš„ç¬¬ä¸€ä¸ª SELECT, å–å†³äºå¤–é¢çš„æŸ¥è¯¢. å³å­æŸ¥è¯¢ä¾èµ–äºå¤–å±‚æŸ¥è¯¢çš„ç»“æœ.</p></li></ul><p>æœ€å¸¸è§çš„æŸ¥è¯¢ç±»åˆ«åº”è¯¥æ˜¯ <code>SIMPLE</code> äº†, æ¯”å¦‚å½“æˆ‘ä»¬çš„æŸ¥è¯¢æ²¡æœ‰å­æŸ¥è¯¢, ä¹Ÿæ²¡æœ‰ UNION æŸ¥è¯¢æ—¶, é‚£ä¹ˆé€šå¸¸å°±æ˜¯ <code>SIMPLE</code> ç±»å‹, ä¾‹å¦‚:</p><pre><code class="SQL">mysql&gt; explain select * from user_info where id = 2\G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: user_info   partitions: NULL         type: constpossible_keys: PRIMARY          key: PRIMARY      key_len: 8          ref: const         rows: 1     filtered: 100.00        Extra: NULL1 row in set, 1 warning (0.00 sec)</code></pre><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨äº† UNION æŸ¥è¯¢, é‚£ä¹ˆ EXPLAIN è¾“å‡º çš„ç»“æœç±»ä¼¼å¦‚ä¸‹:</p><pre><code class="SQL">mysql&gt; EXPLAIN (SELECT * FROM user_info  WHERE id IN (1, 2, 3))    -&gt; UNION    -&gt; (SELECT * FROM user_info WHERE id IN (3, 4, 5));+----+--------------+------------+------------+-------+---------------+---------+---------+------+------+----------+-----------------+| id | select_type  | table      | partitions | type  | possible_keys | key     | key_len | ref  | rows | filtered | Extra           |+----+--------------+------------+------------+-------+---------------+---------+---------+------+------+----------+-----------------+|  1 | PRIMARY      | user_info  | NULL       | range | PRIMARY       | PRIMARY | 8       | NULL |    3 |   100.00 | Using where     ||  2 | UNION        | user_info  | NULL       | range | PRIMARY       | PRIMARY | 8       | NULL |    3 |   100.00 | Using where     || NULL | UNION RESULT | &lt;union1,2&gt; | NULL       | ALL   | NULL          | NULL    | NULL    | NULL | NULL |     NULL | Using temporary |+----+--------------+------------+------------+-------+---------------+---------+---------+------+------+----------+-----------------+3 rows in set, 1 warning (0.00 sec)</code></pre><h3 id="table"><a href="#table" class="headerlink" title="table"></a>table</h3><p>è¡¨ç¤ºæŸ¥è¯¢æ¶‰åŠçš„è¡¨æˆ–è¡ç”Ÿè¡¨</p><h3 id="type"><a href="#type" class="headerlink" title="type"></a>type</h3><p><code>type</code> å­—æ®µæ¯”è¾ƒé‡è¦, å®ƒæä¾›äº†åˆ¤æ–­æŸ¥è¯¢æ˜¯å¦é«˜æ•ˆçš„é‡è¦ä¾æ®ä¾æ®. é€šè¿‡ <code>type</code> å­—æ®µ, æˆ‘ä»¬åˆ¤æ–­æ­¤æ¬¡æŸ¥è¯¢æ˜¯ <code>å…¨è¡¨æ‰«æ</code> è¿˜æ˜¯ <code>ç´¢å¼•æ‰«æ</code> ç­‰.</p><p><strong>type å¸¸ç”¨ç±»å‹</strong><br>type å¸¸ç”¨çš„å–å€¼æœ‰:</p><p><code>system</code> : è¡¨ä¸­åªæœ‰ä¸€æ¡æ•°æ®. è¿™ä¸ªç±»å‹æ˜¯ç‰¹æ®Šçš„ <code>const</code> ç±»å‹.</p><p><code>const</code> : é’ˆå¯¹ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•çš„ç­‰å€¼æŸ¥è¯¢æ‰«æ, æœ€å¤šåªè¿”å›ä¸€è¡Œæ•°æ®. <code>const</code> æŸ¥è¯¢é€Ÿåº¦éå¸¸å¿«, å› ä¸ºå®ƒä»…ä»…è¯»å–ä¸€æ¬¡å³å¯.<br>ä¾‹å¦‚ä¸‹é¢çš„è¿™ä¸ªæŸ¥è¯¢, å®ƒä½¿ç”¨äº†ä¸»é”®ç´¢å¼•, å› æ­¤ <code>type</code> å°±æ˜¯ <code>const</code> ç±»å‹çš„.</p><pre><code class="SQL">mysql&gt; explain select * from user_info where id = 2\G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: user_info   partitions: NULL         type: constpossible_keys: PRIMARY          key: PRIMARY      key_len: 8          ref: const         rows: 1     filtered: 100.00        Extra: NULL1 row in set, 1 warning (0.00 sec)</code></pre><ul><li><code>eq_ref</code>: æ­¤ç±»å‹é€šå¸¸å‡ºç°åœ¨å¤šè¡¨çš„ join æŸ¥è¯¢, è¡¨ç¤ºå¯¹äºå‰è¡¨çš„æ¯ä¸€ä¸ªç»“æœ, éƒ½åªèƒ½åŒ¹é…åˆ°åè¡¨çš„ä¸€è¡Œç»“æœ. å¹¶ä¸”æŸ¥è¯¢çš„æ¯”è¾ƒæ“ä½œé€šå¸¸æ˜¯ =, æŸ¥è¯¢æ•ˆç‡è¾ƒé«˜. ä¾‹å¦‚:</li></ul><pre><code class="SQL">mysql&gt; EXPLAIN SELECT * FROM user_info, order_info WHERE user_info.id = order_info.user_id\G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: order_info   partitions: NULL         type: indexpossible_keys: user_product_detail_index          key: user_product_detail_index      key_len: 314          ref: NULL         rows: 9     filtered: 100.00        Extra: Using where; Using index*************************** 2. row ***************************           id: 1  select_type: SIMPLE        table: user_info   partitions: NULL         type: eq_refpossible_keys: PRIMARY          key: PRIMARY      key_len: 8          ref: test.order_info.user_id         rows: 1     filtered: 100.00        Extra: NULL2 rows in set, 1 warning (0.00 sec)</code></pre><ul><li><code>ref</code>: æ­¤ç±»å‹é€šå¸¸å‡ºç°åœ¨å¤šè¡¨çš„ join æŸ¥è¯¢, é’ˆå¯¹äºéå”¯ä¸€æˆ–éä¸»é”®ç´¢å¼•, æˆ–è€…æ˜¯ä½¿ç”¨äº† <code>æœ€å·¦å‰ç¼€</code> è§„åˆ™ç´¢å¼•çš„æŸ¥è¯¢.</li></ul><p>ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­, å°±ä½¿ç”¨åˆ°äº† <code>ref</code> ç±»å‹çš„æŸ¥è¯¢:</p><pre><code class="SQL">mysql&gt; EXPLAIN SELECT * FROM user_info, order_info WHERE user_info.id = order_info.user_id AND order_info.user_id = 5\G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: user_info   partitions: NULL         type: constpossible_keys: PRIMARY          key: PRIMARY      key_len: 8          ref: const         rows: 1     filtered: 100.00        Extra: NULL*************************** 2. row ***************************           id: 1  select_type: SIMPLE        table: order_info   partitions: NULL         type: refpossible_keys: user_product_detail_index          key: user_product_detail_index      key_len: 9          ref: const         rows: 1     filtered: 100.00        Extra: Using index2 rows in set, 1 warning (0.01 sec)</code></pre><ul><li><code>range</code>: è¡¨ç¤ºä½¿ç”¨ç´¢å¼•èŒƒå›´æŸ¥è¯¢, é€šè¿‡ç´¢å¼•å­—æ®µèŒƒå›´è·å–è¡¨ä¸­éƒ¨åˆ†æ•°æ®è®°å½•. è¿™ä¸ªç±»å‹é€šå¸¸å‡ºç°åœ¨ =, &lt;&gt;, &gt;, &gt;=, &lt;, &lt;=, IS NULL, &lt;=&gt;, BETWEEN, IN() æ“ä½œä¸­.</li></ul><p>å½“ <code>type</code> æ˜¯ <code>range</code> æ—¶, é‚£ä¹ˆ EXPLAIN è¾“å‡ºçš„ <code>ref</code> å­—æ®µä¸º NULL, å¹¶ä¸” <code>key_len</code> å­—æ®µæ˜¯æ­¤æ¬¡æŸ¥è¯¢ä¸­ä½¿ç”¨åˆ°çš„ç´¢å¼•çš„æœ€é•¿çš„é‚£ä¸ª.</p><p>ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­å°±æ˜¯ä¸€ä¸ªèŒƒå›´æŸ¥è¯¢:</p><pre><code class="SQL">mysql&gt; EXPLAIN SELECT *    -&gt;         FROM user_info    -&gt;         WHERE id BETWEEN 2 AND 8 \G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: user_info   partitions: NULL         type: rangepossible_keys: PRIMARY          key: PRIMARY      key_len: 8          ref: NULL         rows: 7     filtered: 100.00        Extra: Using where1 row in set, 1 warning (0.00 sec)</code></pre><ul><li><code>index</code>: è¡¨ç¤ºå…¨ç´¢å¼•æ‰«æ(full index scan), å’Œ ALL ç±»å‹ç±»ä¼¼, åªä¸è¿‡ ALL ç±»å‹æ˜¯å…¨è¡¨æ‰«æ, è€Œ index ç±»å‹åˆ™ä»…ä»…æ‰«ææ‰€æœ‰çš„ç´¢å¼•, è€Œä¸æ‰«ææ•°æ®.</li></ul><p><code>index</code> ç±»å‹é€šå¸¸å‡ºç°åœ¨: æ‰€è¦æŸ¥è¯¢çš„æ•°æ®ç›´æ¥åœ¨ç´¢å¼•æ ‘ä¸­å°±å¯ä»¥è·å–åˆ°, è€Œä¸éœ€è¦æ‰«ææ•°æ®. å½“æ˜¯è¿™ç§æƒ…å†µæ—¶, Extra å­—æ®µ ä¼šæ˜¾ç¤º <code>Using index</code> .</p><p>ä¾‹å¦‚:</p><pre><code class="SQL">mysql&gt; EXPLAIN SELECT name FROM  user_info \G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: user_info   partitions: NULL         type: indexpossible_keys: NULL          key: name_index      key_len: 152          ref: NULL         rows: 10     filtered: 100.00        Extra: Using index1 row in set, 1 warning (0.00 sec)</code></pre><p>ä¸Šé¢çš„ä¾‹å­ä¸­, æˆ‘ä»¬æŸ¥è¯¢çš„ name å­—æ®µæ°å¥½æ˜¯ä¸€ä¸ªç´¢å¼•, å› æ­¤æˆ‘ä»¬ç›´æ¥ä»ç´¢å¼•ä¸­è·å–æ•°æ®å°±å¯ä»¥æ»¡è¶³æŸ¥è¯¢çš„éœ€æ±‚äº†, è€Œä¸éœ€è¦æŸ¥è¯¢è¡¨ä¸­çš„æ•°æ®. å› æ­¤è¿™æ ·çš„æƒ…å†µä¸‹, type çš„å€¼æ˜¯ <code>index</code> , å¹¶ä¸” Extra çš„å€¼æ˜¯ <code>Using index</code> .</p><ul><li><code>ALL</code>: è¡¨ç¤ºå…¨è¡¨æ‰«æ, è¿™ä¸ªç±»å‹çš„æŸ¥è¯¢æ˜¯æ€§èƒ½æœ€å·®çš„æŸ¥è¯¢ä¹‹ä¸€. é€šå¸¸æ¥è¯´, æˆ‘ä»¬çš„æŸ¥è¯¢ä¸åº”è¯¥å‡ºç° ALL ç±»å‹çš„æŸ¥è¯¢, å› ä¸ºè¿™æ ·çš„æŸ¥è¯¢åœ¨æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹, å¯¹æ•°æ®åº“çš„æ€§èƒ½æ˜¯å·¨å¤§çš„ç¾éš¾. å¦‚ä¸€ä¸ªæŸ¥è¯¢æ˜¯ ALL ç±»å‹æŸ¥è¯¢, é‚£ä¹ˆä¸€èˆ¬æ¥è¯´å¯ä»¥å¯¹ç›¸åº”çš„å­—æ®µæ·»åŠ ç´¢å¼•æ¥é¿å….</li></ul><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå…¨è¡¨æ‰«æçš„ä¾‹å­, å¯ä»¥çœ‹åˆ°, åœ¨å…¨è¡¨æ‰«ææ—¶, possible_keys å’Œ key å­—æ®µéƒ½æ˜¯ NULL, è¡¨ç¤ºæ²¡æœ‰ä½¿ç”¨åˆ°ç´¢å¼•, å¹¶ä¸” rows ååˆ†å·¨å¤§, å› æ­¤æ•´ä¸ªæŸ¥è¯¢æ•ˆç‡æ˜¯ååˆ†ä½ä¸‹çš„.</p><pre><code class="SQL">mysql&gt; EXPLAIN SELECT age FROM  user_info WHERE age = 20 \G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: user_info   partitions: NULL         type: ALLpossible_keys: NULL          key: NULL      key_len: NULL          ref: NULL         rows: 10     filtered: 10.00        Extra: Using where1 row in set, 1 warning (0.00 sec)</code></pre><p><strong>type ç±»å‹çš„æ€§èƒ½æ¯”è¾ƒ</strong></p><p>é€šå¸¸æ¥è¯´, ä¸åŒçš„ type ç±»å‹çš„æ€§èƒ½å…³ç³»å¦‚ä¸‹:</p><p> <code>ALL &lt; index &lt; range ~ index_merge &lt; ref &lt; eq_ref &lt; const &lt; system</code></p><p><code>ALL</code> ç±»å‹å› ä¸ºæ˜¯å…¨è¡¨æ‰«æ, å› æ­¤åœ¨ç›¸åŒçš„æŸ¥è¯¢æ¡ä»¶ä¸‹, å®ƒæ˜¯é€Ÿåº¦æœ€æ…¢çš„.</p><p>è€Œ <code>index</code> ç±»å‹çš„æŸ¥è¯¢è™½ç„¶ä¸æ˜¯å…¨è¡¨æ‰«æ, ä½†æ˜¯å®ƒæ‰«æäº†æ‰€æœ‰çš„ç´¢å¼•, å› æ­¤æ¯” ALL ç±»å‹çš„ç¨å¿«.</p><p>åé¢çš„å‡ ç§ç±»å‹éƒ½æ˜¯åˆ©ç”¨äº†ç´¢å¼•æ¥æŸ¥è¯¢æ•°æ®, å› æ­¤å¯ä»¥è¿‡æ»¤éƒ¨åˆ†æˆ–å¤§éƒ¨åˆ†æ•°æ®, å› æ­¤æŸ¥è¯¢æ•ˆç‡å°±æ¯”è¾ƒé«˜äº†.</p><h3 id="possible-keys"><a href="#possible-keys" class="headerlink" title="possible_keys"></a>possible_keys</h3><p><code>possible_keys</code> è¡¨ç¤º MySQL åœ¨æŸ¥è¯¢æ—¶, èƒ½å¤Ÿä½¿ç”¨åˆ°çš„ç´¢å¼•. æ³¨æ„, å³ä½¿æœ‰äº›ç´¢å¼•åœ¨ <code>possible_keys</code> ä¸­å‡ºç°, ä½†æ˜¯å¹¶ä¸è¡¨ç¤ºæ­¤ç´¢å¼•ä¼šçœŸæ­£åœ°è¢« MySQL ä½¿ç”¨åˆ°. MySQL åœ¨æŸ¥è¯¢æ—¶å…·ä½“ä½¿ç”¨äº†å“ªäº›ç´¢å¼•, ç”± <code>key</code> å­—æ®µå†³å®š.</p><h3 id="key"><a href="#key" class="headerlink" title="key"></a>key</h3><p>æ­¤å­—æ®µæ˜¯ MySQL åœ¨å½“å‰æŸ¥è¯¢æ—¶æ‰€çœŸæ­£ä½¿ç”¨åˆ°çš„ç´¢å¼•.</p><h3 id="key-len"><a href="#key-len" class="headerlink" title="key_len"></a>key_len</h3><p>è¡¨ç¤ºæŸ¥è¯¢ä¼˜åŒ–å™¨ä½¿ç”¨äº†ç´¢å¼•çš„å­—èŠ‚æ•°. è¿™ä¸ªå­—æ®µå¯ä»¥è¯„ä¼°ç»„åˆç´¢å¼•æ˜¯å¦å®Œå…¨è¢«ä½¿ç”¨, æˆ–åªæœ‰æœ€å·¦éƒ¨åˆ†å­—æ®µè¢«ä½¿ç”¨åˆ°.<br>key_len çš„è®¡ç®—è§„åˆ™å¦‚ä¸‹:</p><ul><li><p>å­—ç¬¦ä¸²</p><ul><li><p>char(n): n å­—èŠ‚é•¿åº¦</p></li><li><p>varchar(n): å¦‚æœæ˜¯ utf8 ç¼–ç , åˆ™æ˜¯ 3 n + 2å­—èŠ‚; å¦‚æœæ˜¯ utf8mb4 ç¼–ç , åˆ™æ˜¯ 4 n + 2 å­—èŠ‚.</p></li></ul></li><li><p>æ•°å€¼ç±»å‹:</p><ul><li><p>TINYINT: 1å­—èŠ‚</p></li><li><p>SMALLINT: 2å­—èŠ‚</p></li><li><p>MEDIUMINT: 3å­—èŠ‚</p></li><li><p>INT: 4å­—èŠ‚</p></li><li><p>BIGINT: 8å­—èŠ‚</p></li><li><p>æ—¶é—´ç±»å‹</p></li><li><p>DATE: 3å­—èŠ‚</p></li><li><p>TIMESTAMP: 4å­—èŠ‚</p></li><li><p>DATETIME: 8å­—èŠ‚</p></li><li><p>å­—æ®µå±æ€§: NULL å±æ€§ å ç”¨ä¸€ä¸ªå­—èŠ‚. å¦‚æœä¸€ä¸ªå­—æ®µæ˜¯ NOT NULL çš„, åˆ™æ²¡æœ‰æ­¤å±æ€§.</p></li></ul></li></ul><p>æˆ‘ä»¬æ¥ä¸¾ä¸¤ä¸ªç®€å•çš„æ —å­:</p><pre><code class="SQL">mysql&gt; EXPLAIN SELECT * FROM order_info WHERE user_id &lt; 3 AND product_name = 'p1' AND productor = 'WHH' \G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: order_info   partitions: NULL         type: rangepossible_keys: user_product_detail_index          key: user_product_detail_index      key_len: 9          ref: NULL         rows: 5     filtered: 11.11        Extra: Using where; Using index1 row in set, 1 warning (0.00 sec)</code></pre><p>ä¸Šé¢çš„ä¾‹å­æ˜¯ä»è¡¨ order_info ä¸­æŸ¥è¯¢æŒ‡å®šçš„å†…å®¹, è€Œæˆ‘ä»¬ä»æ­¤è¡¨çš„å»ºè¡¨è¯­å¥ä¸­å¯ä»¥çŸ¥é“, è¡¨ <code>order_info</code> æœ‰ä¸€ä¸ªè”åˆç´¢å¼•:</p><pre><code class="SQL">KEY `user_product_detail_index` (`user_id`, `product_name`, `productor`)</code></pre><p>ä¸è¿‡æ­¤æŸ¥è¯¢è¯­å¥ <code>WHERE user_id &lt; 3 AND product_name = 'p1' AND productor = 'WHH'</code> ä¸­, å› ä¸ºå…ˆè¿›è¡Œ user_id çš„èŒƒå›´æŸ¥è¯¢, è€Œæ ¹æ® <code>æœ€å·¦å‰ç¼€åŒ¹é…</code> åŸåˆ™, å½“é‡åˆ°èŒƒå›´æŸ¥è¯¢æ—¶, å°±åœæ­¢ç´¢å¼•çš„åŒ¹é…, å› æ­¤å®é™…ä¸Šæˆ‘ä»¬ä½¿ç”¨åˆ°çš„ç´¢å¼•çš„å­—æ®µåªæœ‰ <code>user_id</code> , å› æ­¤åœ¨ <code>EXPLAIN</code> ä¸­, æ˜¾ç¤ºçš„ key_len ä¸º 9. å› ä¸º user_id å­—æ®µæ˜¯ BIGINT, å ç”¨ 8 å­—èŠ‚, è€Œ NULL å±æ€§å ç”¨ä¸€ä¸ªå­—èŠ‚, å› æ­¤æ€»å…±æ˜¯ 9 ä¸ªå­—èŠ‚. è‹¥æˆ‘ä»¬å°†user_id å­—æ®µæ”¹ä¸º <code>BIGINT(20) NOT NULL DEFAULT '0'</code> , åˆ™ key_length åº”è¯¥æ˜¯8.</p><p>ä¸Šé¢å› ä¸º <code>æœ€å·¦å‰ç¼€åŒ¹é…</code> åŸåˆ™, æˆ‘ä»¬çš„æŸ¥è¯¢ä»…ä»…ä½¿ç”¨åˆ°äº†è”åˆç´¢å¼•çš„ <code>user_id</code> å­—æ®µ, å› æ­¤æ•ˆç‡ä¸ç®—é«˜.</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸‹ä¸€ä¸ªä¾‹å­:</p><pre><code class="SQL">mysql&gt; EXPLAIN SELECT * FROM order_info WHERE user_id = 1 AND product_name = 'p1' \G;*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: order_info   partitions: NULL         type: refpossible_keys: user_product_detail_index          key: user_product_detail_index      key_len: 161          ref: const,const         rows: 2     filtered: 100.00        Extra: Using index1 row in set, 1 warning (0.00 sec)</code></pre><p>è¿™æ¬¡çš„æŸ¥è¯¢ä¸­, æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨åˆ°èŒƒå›´æŸ¥è¯¢, key_len çš„å€¼ä¸º 161. ä¸ºä»€ä¹ˆå‘¢? å› ä¸ºæˆ‘ä»¬çš„æŸ¥è¯¢æ¡ä»¶ <code>WHERE user_id = 1 AND product_name = 'p1'</code> ä¸­, ä»…ä»…ä½¿ç”¨åˆ°äº†è”åˆç´¢å¼•ä¸­çš„å‰ä¸¤ä¸ªå­—æ®µ, å› æ­¤ <code>keyLen(user_id) + keyLen(product_name) = 9 + 50 * 3 + 2 = 161</code></p><h3 id="rows"><a href="#rows" class="headerlink" title="rows"></a>rows</h3><p><code>rows</code> ä¹Ÿæ˜¯ä¸€ä¸ªé‡è¦çš„å­—æ®µ. MySQL æŸ¥è¯¢ä¼˜åŒ–å™¨æ ¹æ®ç»Ÿè®¡ä¿¡æ¯, ä¼°ç®— SQL è¦æŸ¥æ‰¾åˆ°ç»“æœé›†éœ€è¦æ‰«æè¯»å–çš„æ•°æ®è¡Œæ•°.<br>è¿™ä¸ªå€¼éå¸¸ç›´è§‚æ˜¾ç¤º SQL çš„æ•ˆç‡å¥½å, åŸåˆ™ä¸Š <code>rows</code> è¶Šå°‘è¶Šå¥½.</p><h3 id="Extra"><a href="#Extra" class="headerlink" title="Extra"></a>Extra</h3><p><code>EXplain</code> ä¸­çš„å¾ˆå¤šé¢å¤–çš„ä¿¡æ¯ä¼šåœ¨ Extra å­—æ®µæ˜¾ç¤º, å¸¸è§çš„æœ‰ä»¥ä¸‹å‡ ç§å†…å®¹:</p><ul><li><code>Using filesort</code></li></ul><p>å½“ Extra ä¸­æœ‰ <code>Using filesort</code> æ—¶, è¡¨ç¤º MySQL éœ€é¢å¤–çš„æ’åºæ“ä½œ, ä¸èƒ½é€šè¿‡ç´¢å¼•é¡ºåºè¾¾åˆ°æ’åºæ•ˆæœ. ä¸€èˆ¬æœ‰ <code>Using filesort</code> , éƒ½å»ºè®®ä¼˜åŒ–å»æ‰, å› ä¸ºè¿™æ ·çš„æŸ¥è¯¢ CPU èµ„æºæ¶ˆè€—å¤§.</p><p>ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­:</p><pre><code class="SQL">mysql&gt; EXPLAIN SELECT * FROM order_info ORDER BY product_name \G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: order_info   partitions: NULL         type: indexpossible_keys: NULL          key: user_product_detail_index      key_len: 253          ref: NULL         rows: 9     filtered: 100.00        Extra: Using index; Using filesort1 row in set, 1 warning (0.00 sec)</code></pre><p>æˆ‘ä»¬çš„ç´¢å¼•æ˜¯</p><pre><code class="SQL">KEY `user_product_detail_index` (`user_id`, `product_name`, `productor`)</code></pre><p>ä½†æ˜¯ä¸Šé¢çš„æŸ¥è¯¢ä¸­æ ¹æ® <code>product_name</code> æ¥æ’åº, å› æ­¤ä¸èƒ½ä½¿ç”¨ç´¢å¼•è¿›è¡Œä¼˜åŒ–, è¿›è€Œä¼šäº§ç”Ÿ <code>Using filesort</code> .<br>å¦‚æœæˆ‘ä»¬å°†æ’åºä¾æ®æ”¹ä¸º <code>ORDER BY user_id, product_name</code> , é‚£ä¹ˆå°±ä¸ä¼šå‡ºç° <code>Using filesort</code> äº†. ä¾‹å¦‚:</p><pre><code class="SQL">mysql&gt; EXPLAIN SELECT * FROM order_info ORDER BY user_id, product_name \G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: order_info   partitions: NULL         type: indexpossible_keys: NULL          key: user_product_detail_index      key_len: 253          ref: NULL         rows: 9     filtered: 100.00        Extra: Using index1 row in set, 1 warning (0.00 sec)</code></pre><ul><li><p><code>Using index</code> â€œè¦†ç›–ç´¢å¼•æ‰«æâ€, è¡¨ç¤ºæŸ¥è¯¢åœ¨ç´¢å¼•æ ‘ä¸­å°±å¯æŸ¥æ‰¾æ‰€éœ€æ•°æ®, ä¸ç”¨æ‰«æè¡¨æ•°æ®æ–‡ä»¶, å¾€å¾€è¯´æ˜æ€§èƒ½ä¸é”™</p></li><li><p><code>Using temporary</code> æŸ¥è¯¢æœ‰ä½¿ç”¨ä¸´æ—¶è¡¨, ä¸€èˆ¬å‡ºç°äºæ’åº, åˆ†ç»„å’Œå¤šè¡¨ join çš„æƒ…å†µ, æŸ¥è¯¢æ•ˆç‡ä¸é«˜, å»ºè®®ä¼˜åŒ–.</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dbæ“ä½œå¸¸è§é—®é¢˜</title>
      <link href="/My-Blogs/2021/01/08/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/db%E6%93%8D%E4%BD%9C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
      <url>/My-Blogs/2021/01/08/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/db%E6%93%8D%E4%BD%9C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>æ€»ç»“äº†ä¸€äº›dbæ“ä½œçš„å¸¸è§é—®é¢˜ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹å§</p><a id="more"></a><h2 id="è”åˆç´¢å¼•é—®é¢˜"><a href="#è”åˆç´¢å¼•é—®é¢˜" class="headerlink" title="è”åˆç´¢å¼•é—®é¢˜"></a>è”åˆç´¢å¼•é—®é¢˜</h2><ol><li> åœ¨imoåå°ç¾¤å”¤é†’æ´»åŠ¨ä¸­ï¼Œç”¨æˆ·æ•°æ®è¡¨å¤šè¾¾å‡ åƒä¸‡ï¼Œå¤§æ•°æ®è¿™è¾¹ï¼Œå¹¶æœªé’ˆå¯¹ä¸šåŠ¡åœºæ™¯å»ºç«‹æœ‰æ•ˆè¦†ç›–ç´¢å¼•ï¼Œå¯¼è‡´åå°SQLæ…¢æŸ¥è¯¢å‘Šè­¦ä¸Šåƒæ¬¡ï¼Œé’ˆå¯¹ä¸šåŠ¡åœºæ™¯ï¼Œæå‡ºä»¥ä¸‹ä¼˜åŒ–ï¼Œæ–°å¢key1ï¼Œkey2ç´¢å¼•è¦†ç›–ï¼Œåå°whereæ¡ä»¶ä¸¥æ ¼æŒ‰ç…§stats_dayï¼Œactivelevelï¼Œcategeory_idï¼Œccé¡ºåºæŸ¥è¯¢ã€‚</li><li> æŒ‰ç…§MySQLè”åˆç´¢å¼•æœ€å·¦åŒ¹é…åŸåˆ™ï¼Œæ¯”å¦‚A-B-Cè”åˆç´¢å¼•ï¼Œåˆ™é’ˆå¯¹Aï¼ŒA-Bï¼ŒA-B-CæŸ¥è¯¢æœ‰æ•ˆï¼Œè€ŒA-Cï¼ŒB-Cï¼ŒBï¼ŒCåˆ™æ— æ•ˆï¼Œwhereæ¡ä»¶æœ€å¥½æ ¹æ®ç´¢å¼•é¡ºåºè¿›è¡Œ</li><li> å¦‚æœæœç´¢æ¡ä»¶è¿‡äºå¤æ‚æ··ä¹±ï¼Œå»ºè®®å…ˆä¸äº§å“æ²Ÿé€šæ¸…æ¥šï¼Œç¡®å®šå¥½å¦‚ä½•å»ºç«‹ç´¢å¼•ï¼Œä¸¥æ ¼æŠŠæ§æœç´¢æ¡ä»¶ï¼ˆä»ç•Œé¢ä¸Šï¼‰</li><li> ä»¥ä¸‹ä¸ºç”¨æˆ·æ•°æ®è¡¨ï¼ˆåƒä¸‡çº§åˆ«ï¼‰</li></ol><pre><code class="SQL">CREATE TABLE `xx_push_activelevel_categeory_day` (  `stats_day` date NOT NULL DEFAULT '2019-01-01',  `cc` varchar(10) NOT NULL DEFAULT '',  `activelevel` varchar(30) NOT NULL DEFAULT 'unknown',  `categeory_id` varchar(50) NOT NULL DEFAULT 'unknown',  `groupid` char(30) NOT NULL DEFAULT 'unknown',  `role` varchar(15) NOT NULL DEFAULT 'unknown',  `uid` varchar(25) NOT NULL DEFAULT '',  PRIMARY KEY (`role`,`activelevel`,`categeory_id`,`cc`,`uid`,`groupid`,`stats_day`),  KEY `role` (`role`,`activelevel`,`categeory_id`),  KEY `key1` (`stats_day`,`activelevel`,`categeory_id`,`cc`,`role`),  KEY `key2` (`stats_day`,`activelevel`,`categeory_id`,`cc`),  KEY `actl` (`activelevel`),  KEY `agid` (`categeory_id`),  KEY `cc` (`cc`)) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4/*!50100 PARTITION BY RANGE (TO_DAYS(stats_day))(PARTITION pd20200609 VALUES LESS THAN (737951) ENGINE = MyISAM, PARTITION pd20200610 VALUES LESS THAN (737952) ENGINE = MyISAM, PARTITION pd20200611 VALUES LESS THAN (737953) ENGINE = MyISAM) */;</code></pre><h2 id="ä¸»é”®åç§»é—®é¢˜"><a href="#ä¸»é”®åç§»é—®é¢˜" class="headerlink" title="ä¸»é”®åç§»é—®é¢˜"></a>ä¸»é”®åç§»é—®é¢˜</h2><ol><li> åœ¨å•è¡¨å¤§æ•°æ®é‡çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ç´¢å¼•å¹¶ä¸æ˜¯å”¯ä¸€é€‰æ‹©ï¼Œå½“SQLåˆ†é¡µæŸ¥è¯¢ï¼Œoffsetè¾¾åˆ°ä¸€å®šé‡(å¤§æ¦‚20wä»¥ä¸Šï¼Ÿ)ä»¥åï¼Œå°±ä¼šå‡ºç°æ…¢æŸ¥è¯¢ç°è±¡ï¼Œæ˜¯ç”±äºMySQLæ ¹æ®ç´¢å¼•æŸ¥å‡ºä¸€å®šé‡æ•°æ®ä¹‹åï¼Œä¼šæ ¹æ®offsetæŠ›å¼ƒä¹‹å‰çš„æ•°æ®</li><li> è¿™æ„å‘³ç€å‰20wæ•°æ®çš„æŸ¥è¯¢éƒ½æ˜¯æ— ç”¨çš„ï¼Œè´¹åŠ›ä¸è®¨å¥½</li><li> å¯ä»¥é‡‡ç”¨ä¸»é”®id(INT, BIGINTç±»å‹)åç§»ï¼ŒINTç±»å‹æŸ¥è¯¢å¤©ç”Ÿå°±æœ‰ä¼˜åŠ¿ï¼Œåˆæ˜¯ä¸»é”®ç´¢å¼•ï¼Œå¯ä»¥åšåˆ°ä¸€éƒ¨åˆ°ä½</li><li> whereæ¡ä»¶æœ€åï¼ŒåŠ ä¸Šidæ’åºï¼Œè®°å½•ä¸Šä¸€æ¬¡çš„æŸ¥è¯¢æ•°æ®æœ€åä¸€æ¡idï¼Œä¸‹ä¸€æ¬¡æŸ¥è¯¢ä½œä¸ºåç§»é‡ï¼Œä»è€Œè·³è¿‡å‰é¢æ— ç”¨çš„æ•°æ®ï¼Œå†å¼€å§‹è¿›è¡Œç´¢å¼•æŸ¥è¯¢</li><li> ä»¥ä¸‹æ˜¯æŸä¸ªé¡¹ç›®çš„ä¾‹å­ï¼ˆä»…ä¾›å‚è€ƒï¼‰</li></ol><pre><code class="SQL">SELECT id, stats_day, cc, activelevel, categeory_id, groupid, role, uid FROM xx_push_activelevel_categeory_day AS biggroupPushCategeoryWHERE biggroupPushCategeory.id &gt; 200000 AND biggroupPushCategeory.stats_day = '2020-07-01 00:00:00' AND biggroupPushCategeory.activelevel = 'gtype_unactive_2' AND biggroupPushCategeory.categeory_id = 'categeory_mems_less_300' AND biggroupPushCategeory.cc = 'PK'ORDER BY biggroupPushCategeory.id ASC LIMIT 500;</code></pre><h2 id="ç»“æœé›†è¿‡æ»¤é—®é¢˜"><a href="#ç»“æœé›†è¿‡æ»¤é—®é¢˜" class="headerlink" title="ç»“æœé›†è¿‡æ»¤é—®é¢˜"></a>ç»“æœé›†è¿‡æ»¤é—®é¢˜</h2><ol><li> æ¥ä¸Šä¸€ä¸ªé—®é¢˜ï¼Œå½“æˆ‘ä»¬ç»“åˆä¸»é”®åç§»+ç´¢å¼•ã€KEY <code>sacc</code> (<code>stats_day</code>,<code>activelevel</code>,<code>categeory_id</code>,<code>cc</code>)ã€‘æœç´¢çš„æ—¶å€™ï¼ŒSQLè¿™è¾¹ä¼˜å…ˆæ ¹æ®ç´¢å¼•è¿‡æ»¤ç»“æœé›†ï¼Œæ ¹æ®ä¸Šé¢é‚£æ¡sqlï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè¿‡æ»¤å‡ºä¸€ä¸ªå¤§ç»“æœé›†ï¼Œè€Œä¸”ç»“æœé›†å¹¶ä¸ä¿è¯idæœ‰åº</li><li> è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦é‡æ–°ä¿®æ”¹ç´¢å¼•é”®ï¼ŒåŠ ä¸Šä¸»é”®idï¼Œä¾‹å¦‚KEY <code>sacci</code> (<code>stats_day</code>,<code>activelevel</code>,<code>categeory_id</code>,<code>cc</code>,<code>id</code>)ï¼Œå½“æˆ‘ä»¬è¿›è¡Œç´¢å¼•æŸ¥è¯¢å–500è¡Œæ—¶ï¼Œå¯ä»¥æ ¹æ®id&gt;20000ï¼Œç›´æ¥å‘½ä¸­500è¡Œå¹¶è¿”å›ï¼Œä¸éœ€è¦é‡æ–°æ’åºï¼Œä¹Ÿä¸ä¼šè¿”å›ä¹‹å‰saccç´¢å¼•çš„æ‰€æœ‰ç»“æœé›†</li><li> ä»¥ä¸‹æ˜¯ä¼˜åŒ–å‰å’Œä¼˜åŒ–åçš„å¯¹æ¯”å›¾ï¼Œæ€§èƒ½æé«˜äº†å‡ åå€</li></ol><h3 id="ä¼˜åŒ–å‰"><a href="#ä¼˜åŒ–å‰" class="headerlink" title="ä¼˜åŒ–å‰"></a>ä¼˜åŒ–å‰</h3><p><img src="/My-Blogs/images/db%E6%93%8D%E4%BD%9C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/db%E6%93%8D%E4%BD%9C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-01.png" alt="ä¼˜åŒ–å‰"></p><h3 id="ä¼˜åŒ–å"><a href="#ä¼˜åŒ–å" class="headerlink" title="ä¼˜åŒ–å"></a>ä¼˜åŒ–å</h3><p><img src="/My-Blogs/images/db%E6%93%8D%E4%BD%9C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/db%E6%93%8D%E4%BD%9C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-02.png" alt="ä¼˜åŒ–å"></p><h2 id="whereæ¡ä»¶é¡ºåºé—®é¢˜"><a href="#whereæ¡ä»¶é¡ºåºé—®é¢˜" class="headerlink" title="whereæ¡ä»¶é¡ºåºé—®é¢˜"></a>whereæ¡ä»¶é¡ºåºé—®é¢˜</h2><ol><li> æ¥ä¸Šä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºç´¢å¼•KEY <code>sacci</code> (<code>stats_day</code>,<code>activelevel</code>,<code>categeory_id</code>,<code>cc</code>,<code>id</code>)ï¼Œå¦‚æœæˆ‘ä»¬æŠŠidæ”¾åœ¨æœ€å‰ï¼Œæˆ–è€…æœ€åï¼Œä¼šå¯¹æŸ¥è¯¢çš„æ•ˆç‡æœ‰å½±å“å—ï¼Ÿç­”æ¡ˆæ˜¯æ²¡æœ‰ã€‚</li><li> SQLæ‰§è¡Œæ˜¯ä¼šè¢«è¿›è¡Œä¸€ç³»åˆ—é¢„å¤„ç†ï¼Œè®©æŸ¥è¯¢ä¼˜åŒ–å™¨é€‰æ‹©æœ€ä¼˜çš„æŸ¥è¯¢è®¡åˆ’ï¼Œæ‰€ä»¥whereæ¡ä»¶çš„å…ˆåå…³ç³»ä¸æ˜¯ä¼˜åŒ–å™¨é€‰æ‹©è§„åˆ™çš„ä¸€æ¡ï¼Œå½“ç„¶å‰ææ˜¯ä½ çš„whereæ¡ä»¶æ•°é‡ä¸ç´¢å¼•ä¸€è‡´ï¼Œå¦‚æœwhereæ¡ä»¶å°‘äºç´¢å¼•æ•°é‡ï¼Œä¼šæ ¹æ®æœ€å·¦åŸåˆ™ä¼˜å…ˆæŸ¥è¯¢ã€‚</li><li> æ€»çš„æ¥è¯´ï¼Œå”¯ä¸€ä¼šå½±å“çš„å°±æ˜¯whereæ¡ä»¶å’Œç´¢å¼•çš„æ¯”å¯¹ï¼Œä»¥åŠè·Ÿorder byç­‰ï¼Œè·Ÿå…ˆåé¡ºåºæ— å…³ã€‚</li><li> å¼•ç”³å¼€æ¥è¯´ï¼Œå¦‚æœå¯¹ABCä¸‰ä¸ªå­—æ®µå»ºç«‹è”åˆç´¢å¼•ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œåœ¨åˆ›å»ºç´¢å¼•æ—¶ï¼Œæ ¹æ®åŒºåˆ†åº¦åŸåˆ™ï¼Œå°½é‡è®©Aèƒ½å¤Ÿæ’é™¤æ›´å¤šè®°å½•è€Œä¸æ˜¯Bæˆ–Cï¼Œåœ¨æŸ¥è¯¢æ—¶ï¼Œæ ¹æ®ç´¢å¼•å‰ç¼€åŒ¹é…åŸåˆ™ï¼Œå°½å¯èƒ½è®©Aæ¡ä»¶ç²¾ç¡®ï¼ŒBå…¶æ¬¡ï¼ŒCçœ‹ç€åŠã€‚</li><li> ä»¥ä¸‹æ˜¯idå‰åå¯¹æ¯”å›¾</li></ol><p><img src="/My-Blogs/images/db%E6%93%8D%E4%BD%9C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/db%E6%93%8D%E4%BD%9C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-03.png" alt="alt"></p><p><img src="/My-Blogs/images/db%E6%93%8D%E4%BD%9C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/db%E6%93%8D%E4%BD%9C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-04.png" alt="alt"></p>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PRPLæ¨¡å¼åŠ å¿«Webåº”ç”¨åŠ è½½</title>
      <link href="/My-Blogs/2021/01/08/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD/"/>
      <url>/My-Blogs/2021/01/08/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD/</url>
      
        <content type="html"><![CDATA[<p>PRPL æ˜¯ä¸€ç§ç”¨äºç»“æ„åŒ–å’Œäº¤ä»˜ Web åº”ç”¨ç¨‹åºå’Œæ¸è¿›å¼ Web åº”ç”¨ï¼ˆPWAï¼‰çš„æ¨¡å¼ï¼Œé‡ç‚¹åœ¨äºæ”¹è¿›åº”ç”¨çš„äº¤ä»˜å’Œå¯åŠ¨æ€§èƒ½ã€‚è¿™ä¸ªæ¨¡å¼åŒ…å«ä¸€ç»„æ­¥éª¤ï¼Œä»¥å®ç°å¿«é€Ÿã€å¯é ã€é«˜æ•ˆçš„åŠ è½½ï¼š</p><a id="more"></a><ul><li><p><code>Push</code>, æ¨é€åˆå§‹è·¯ç”±æ‰€éœ€çš„æ‰€æœ‰èµ„æºï¼Œå¹¶ä¸”åªæ¨é€è¿™äº›èµ„æºï¼Œä»¥ç¡®ä¿å®ƒä»¬å°½æ—©å¯ç”¨ã€‚</p></li><li><p><code>Render</code>, åœ¨åŠ è½½å…¶ä»–èµ„æºä¹‹å‰ï¼Œæ¸²æŸ“åˆå§‹è·¯ç”±å¹¶ä½¿å…¶å…·å¤‡äº¤äº’èƒ½åŠ›ã€‚</p></li><li><p><code>Pre-cache</code>, é¢„ç¼“å­˜ç”¨æˆ·å¯èƒ½è®¿é—®çš„å…¶ä»–è·¯ç”±çš„èµ„æºï¼Œä»è€Œåœ¨æ¶åŠ£çš„ç½‘ç»œæ¡ä»¶ä¸‹å°½å¯èƒ½æé«˜å¯¹åç»­è¯·æ±‚çš„å“åº”èƒ½åŠ›å’Œå¼¹æ€§ã€‚</p></li><li><p><code>Lazy-load</code>, å½“ç”¨æˆ·è¯·æ±‚æ—¶ï¼ŒæŒ‰éœ€å»¶è¿ŸåŠ è½½è·¯ç”±ï¼›å…³é”®è·¯ç”±çš„èµ„æºåº”ç«‹å³ä»ç¼“å­˜ä¸­åŠ è½½ï¼Œè€Œç›¸å¯¹ä¸å¸¸ç”¨çš„èµ„æºå¯ä»¥æ ¹æ®è¯·æ±‚ä»ç½‘ç»œè·å–ã€‚</p></li></ul><blockquote><p>æ³¨æ„ï¼šPRPLæ¨¡å¼æ˜¯ç”±Polymerå›¢é˜Ÿäº2016å¹´é¦–æ¬¡å¼•å…¥çš„ï¼Œä½†å·²è¢«è¯æ˜é€‚ç”¨äºå…¶ä»–è®¸å¤šæŠ€æœ¯æ ˆã€‚</p></blockquote><p><img src="/My-Blogs/images/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD-01.png" alt="img"></p><center>PRPL æ¨¡å¼åŠ è½½é¡ºåº</center><p>æœåŠ¡å™¨å’ŒæœåŠ¡ Worker ä¸€èµ·ä¸ºéæ´»åŠ¨è·¯ç”±é¢„ç¼“å­˜èµ„æºã€‚å½“ç”¨æˆ·åˆ‡æ¢è·¯ç”±æ—¶ï¼Œåº”ç”¨ä¼šå»¶è¿ŸåŠ è½½å°šæœªç¼“å­˜çš„æ‰€æœ‰å¿…éœ€èµ„æºï¼Œå¹¶åˆ›å»ºæ‰€éœ€çš„è§†å›¾ã€‚</p><p>Twitter.com è‡ª 2017 å¹´ä»¥æ¥å°±åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨ PRPL æ¨¡å¼äº†ã€‚ä¸‹é¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä»–ä»¬å¯¹å…³é”®è„šæœ¬ä½¿ç”¨äº†ç²’åº¦ä»£ç æ‹†åˆ†ï¼Œå¹¶ä½¿ç”¨ <code>&lt;linkrel=preload&gt;</code> æ¨é€è„šæœ¬ä»¥å°½å¿«è®©è„šæœ¬å¯ç”¨ï¼š</p><p><img src="/My-Blogs/images/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD-02.png" alt="img"></p><br><center style="margin-top: 20px">PRPL æ¨¡å¼ï¼šé¢„åŠ è½½å…³é”®è„šæœ¬</center><br><p>å…¶ä»–è·¯ç”±ä¼šæŒ‰éœ€å»¶è¿ŸåŠ è½½ã€‚Twitter åœ¨æ•´ä¸ªç”¨æˆ·ä½“éªŒéƒ¨åˆ†ä¸­ä¼šæŒ‰éœ€æä¾› 40 å¤šä¸ªå—ã€‚Twitter è¿˜ä½¿ç”¨æœåŠ¡ Workers å¯¹å…¶ä»–è·¯ç”±è¿›è¡Œï¼ˆç¦»çº¿ï¼‰èµ„äº§é¢„ç¼“å­˜ï¼Œä»¥æé«˜å¯¹åç»­å¯¼èˆªæ“ä½œçš„å“åº”èƒ½åŠ›ï¼š</p><br><p><img src="/My-Blogs/images/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD-03.png" alt="img"></p><br><center style="margin-top: 20px">PRPL æ¨¡å¼ï¼šç¦»çº¿ç¼“å­˜èµ„æº</center><br><p>ä»–ä»¬çš„åº”ç”¨ç¨‹åºå¤–å£³ç¨‹åºï¼ˆéª¨æ¶ UIï¼‰ä¹Ÿæ˜¯ç¦»çº¿ç¼“å­˜çš„ï¼Œå°±ç®—ç”¨æˆ·é€šè¿‡ç¼“æ…¢æˆ–ä¸ç¨³å®šçš„ç½‘ç»œè¿æ¥åŠ è½½ç«™ç‚¹ï¼Œä¹Ÿä¼šç«‹å³åŠ è½½å®ƒä»¬ï¼š</p><p><img src="/My-Blogs/images/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD-04.png" alt="img"></p><center>PRPL æ¨¡å¼ï¼šåº”ç”¨ç¨‹åºå¤–å£³</center><h2 id="ä¸ºä»€ä¹ˆé€‰æ‹©-PRPLï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆé€‰æ‹©-PRPLï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰æ‹© PRPLï¼Ÿ"></a>ä¸ºä»€ä¹ˆé€‰æ‹© PRPLï¼Ÿ</h2><p>åº”ç”¨ä½¿ç”¨ PRPL æ„å»ºæ˜¯ä¸ºäº†è¾¾åˆ°å¯é ã€å¿«é€Ÿå’Œå¼•äººå…¥èƒœçš„ç›®çš„ã€‚é™¤äº†è¿™äº›åŸºæœ¬ç›®æ ‡ï¼ŒPRPL è¿˜æ—¨åœ¨ï¼š</p><ul><li><p><strong>æ”¹å–„åº”ç”¨çš„äº¤äº’å°±ç»ªæ°´å¹³</strong>ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œåœ¨ç¬¬ä¸€ä¸ªè§†å›¾æ¸²æŸ“å¹¶å…·å¤‡äº¤äº’èƒ½åŠ›ä¹‹å‰ï¼Œä¸ä¼šå‘æµè§ˆå™¨å‘é€å¤šä½™çš„èµ„æºã€‚</p></li><li><p><strong>æé«˜åº”ç”¨çš„ç¼“å­˜æ•ˆç‡ï¼Œå°¤å…¶æ˜¯é•¿æœŸç¼“å­˜æ•ˆç‡</strong>ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œèµ„æºä¼šä»¥å¾ˆç»†çš„ç²’åº¦å‘æµè§ˆå™¨å‘é€ã€‚å½“èµ„æºè¢«è§£ç»‘æˆ–æ¾æ•£åœ°æ‰“åŒ…æ—¶ï¼Œå¯¹ä»£ç çš„æ¯æ¬¡æ›´æ”¹ç»™ç¼“å­˜çš„è´Ÿé¢å½±å“ä¹Ÿä¼šå‡å°‘ã€‚</p></li><li><p><strong>é™ä½å¼€å‘å’Œéƒ¨ç½²çš„å¤æ‚æ€§</strong>ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¿™ç§æ¨¡å¼ä½¿ç”¨åº”ç”¨çš„éšå¼ä¾èµ–å›¾å°†æ¯ä¸ªå…¥å£ç‚¹ç²¾ç¡®æ˜ å°„åˆ°æ‰€éœ€çš„èµ„æºé›†ï¼Œä»è€Œå‡å°‘æˆ–æ¶ˆé™¤äº†æ‰‹åŠ¨ç®¡ç†æ‰“åŒ…å’Œäº¤ä»˜çš„éœ€æ±‚ã€‚</p></li></ul><h2 id="PRPL-åº”åŒ…å«å“ªäº›æŠ€æœ¯ï¼Ÿ"><a href="#PRPL-åº”åŒ…å«å“ªäº›æŠ€æœ¯ï¼Ÿ" class="headerlink" title="PRPL åº”åŒ…å«å“ªäº›æŠ€æœ¯ï¼Ÿ"></a>PRPL åº”åŒ…å«å“ªäº›æŠ€æœ¯ï¼Ÿ</h2><p>PRPL æ˜¯ä¸€ç§èƒ½ä»¥å„ç§æ–¹å¼å®ç°çš„æ¦‚å¿µæ¨¡å¼ï¼Œä½†æ˜¯é€šè¿‡ä»¥ä¸‹ç°ä»£ Web ç‰¹æ€§çš„æŸç§ç»„åˆï¼Œå¯ä»¥æœ€è½»æ¾æœ‰æ•ˆåœ°å®ç° PRPLï¼š</p><ul><li><p>åƒJavaScript Modulesè¿™æ ·çš„ç°ä»£æ¨¡å—ç³»ç»Ÿï¼Œä½¿å·¥å…·å¯ä»¥è½»æ¾æ„é€ å®Œæ•´çš„ä¾èµ–å›¾ï¼›</p></li><li><p>æœåŠ¡Workersï¼Œä¸ºåç»­çš„åº”ç”¨è§†å›¾é¢„ç¼“å­˜ï¼ˆâ€œå®‰è£…â€ï¼‰èµ„æºï¼ˆè¿›è€Œæ”¯æŒç¦»çº¿ä¼˜å…ˆæ¶æ„ï¼‰</p></li><li><p>é¢„åŠ è½½ï¼Œç”¨äºå°½å¿«äº¤ä»˜æ‰€éœ€èµ„æºã€‚ä½ è¿˜å¯ä»¥ä½¿ç”¨é¢„åŠ è½½é“¾æ¥å¤´ï¼Œè¿™äº›å¤´å¯ä»¥è¢«åä½œæœåŠ¡å™¨æ‹¦æˆªå¹¶å‡çº§ä¸ºHTTP/2 Server Pushï¼ˆè¯¦æƒ…å¯è§<a href="https://www.smashingmagazine.com/2017/04/guide-http2-server-push/">åŸæ–‡</a>ï¼‰ã€‚ä¸€å®šè¦è®°ä½ï¼Œå°½ç®¡PushåŠŸèƒ½å¼ºå¤§ï¼Œä½†å®ƒä¹Ÿé¢ä¸´ç€è®¸å¤šå·²çŸ¥çš„æŒ‘æˆ˜ï¼›ä¸è¿‡PRPLä½¿ç”¨æœåŠ¡Workerå¯ä»¥é¿å…è¿‡åº¦æ¨é€çš„é—®é¢˜ï¼ˆä»…é’ˆå¯¹åˆå§‹è´Ÿè½½ä½¿ç”¨pushï¼‰ã€‚</p></li></ul><h2 id="å¦‚ä½•å®ç°-PRPL-æ¨¡å¼ï¼Ÿ"><a href="#å¦‚ä½•å®ç°-PRPL-æ¨¡å¼ï¼Ÿ" class="headerlink" title="å¦‚ä½•å®ç° PRPL æ¨¡å¼ï¼Ÿ"></a>å¦‚ä½•å®ç° PRPL æ¨¡å¼ï¼Ÿ</h2><p>PRPL çš„å¾ˆå¤§ä¸€éƒ¨åˆ†ç†å¿µæ˜¯å¯¹ JS æ‰“åŒ…æ€ç»´çš„é¢ è¦†ï¼Œå¹¶åœ¨æä¾›èµ„æºæ—¶æ‹†åˆ†æˆå°½å¯èƒ½æ¥è¿‘ç¼–å†™èµ„æºæ—¶çš„ç²’åº¦ï¼ˆè‡³å°‘æ‹†åˆ†æˆç‹¬ç«‹çš„åŠŸèƒ½æ¨¡å—ï¼‰ã€‚é‚£ä¹ˆå¦‚ä½•å®ç°ç»†ç²’åº¦å‘¢ï¼Ÿ</p><h3 id="åŸºäºè·¯ç”±æˆ–åŸºäºç»„ä»¶çš„ä»£ç æ‹†åˆ†å’Œå»¶è¿ŸåŠ è½½"><a href="#åŸºäºè·¯ç”±æˆ–åŸºäºç»„ä»¶çš„ä»£ç æ‹†åˆ†å’Œå»¶è¿ŸåŠ è½½" class="headerlink" title="åŸºäºè·¯ç”±æˆ–åŸºäºç»„ä»¶çš„ä»£ç æ‹†åˆ†å’Œå»¶è¿ŸåŠ è½½"></a>åŸºäºè·¯ç”±æˆ–åŸºäºç»„ä»¶çš„ä»£ç æ‹†åˆ†å’Œå»¶è¿ŸåŠ è½½</h3><p>ä½ æ­£åœ¨å°†äº‹ç‰©ç¼–å†™ä¸ºç»„ä»¶ã€‚ä¹Ÿè®¸ä½ æ­£åœ¨ä½¿ç”¨ ES æ¨¡å—ã€‚å¯¹äº Webpackï¼Œæˆ‘ä»¬ä½¿ç”¨åŠ¨æ€å¯¼å…¥å’Œä»£ç æ‹†åˆ†ï¼Œå°†ä½ çš„ä»£ç åº“æ‹†åˆ†ä¸ºæŒ‰éœ€åŠ è½½çš„å—ã€‚</p><br><p>Next.js å’Œ Nuxt.js ä¹‹ç±»çš„å…ƒæ¡†æ¶ä¼šé»˜è®¤å®ç°åŸºäºè·¯ç”±çš„ä»£ç æ‹†åˆ†ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ create-react-app ä¹‹ç±»çš„å·¥å…·é“¾æ ·æ¿ï¼Œåˆ™éœ€è¦å€ŸåŠ© React Router ä¹‹ç±»çš„è·¯ç”±å™¨è¿›è¡ŒåŠ¨æ€å¯¼å…¥ï¼Œæ‰èƒ½å°†åŸºäºè·¯ç”±æˆ–åŸºäºç»„ä»¶çš„ä»£ç æ‹†åˆ†æ·»åŠ åˆ°ä½ çš„åº”ç”¨ç¨‹åºä¸­ã€‚</p><br><p>å¯¹äº PRPL çš„ push/preload éƒ¨åˆ†ï¼ŒWebpack è¿˜æ”¯æŒå°† preload ä½œä¸ºé­”æœ¯æ³¨é‡Šæ¥é¢„åŠ è½½å…³é”®è„šæœ¬ã€‚</p><br><h3 id="é¢„ç¼“å­˜"><a href="#é¢„ç¼“å­˜" class="headerlink" title="é¢„ç¼“å­˜"></a>é¢„ç¼“å­˜</h3><p>å¯ä»¥ä½¿ç”¨æœåŠ¡ worker é¢„ç¼“å­˜å‰©ä½™çš„è·¯ç”±ã€‚å¦ä¸€ç§å¸¸è§çš„åšæ³•æ˜¯ï¼Œåˆ©ç”¨ Workbox ä¹‹ç±»çš„æœåŠ¡ worker åº“æ¥ç®€åŒ–ä¸ºåº”ç”¨ç¨‹åºé¢„ç¼“å­˜è·¯ç”±å’Œå—çš„è¿‡ç¨‹ã€‚</p><br><h2 id="PRPL-ä½¿ç”¨ä½•ç§åº”ç”¨ç¨‹åºç»“æ„ï¼Ÿ"><a href="#PRPL-ä½¿ç”¨ä½•ç§åº”ç”¨ç¨‹åºç»“æ„ï¼Ÿ" class="headerlink" title="PRPL ä½¿ç”¨ä½•ç§åº”ç”¨ç¨‹åºç»“æ„ï¼Ÿ"></a>PRPL ä½¿ç”¨ä½•ç§åº”ç”¨ç¨‹åºç»“æ„ï¼Ÿ</h2><p>PRPL é¼“åŠ±é‡‡ç”¨ä»¥ä¸‹ç»“æ„çš„å•é¡µåº”ç”¨ï¼ˆSPAï¼‰æ¶æ„ï¼š</p><br><ul><li><p>ä»æ¯ä¸ªæœ‰æ•ˆè·¯ç”±æä¾›çš„åº”ç”¨ç¨‹åºçš„ä¸»å…¥å£ç‚¹ã€‚</p></li><li><p>è¿™ä¸ªæ–‡ä»¶åº”è¯¥å¾ˆå°ï¼Œå› ä¸ºå®ƒå°†é€šè¿‡ä¸åŒçš„URLæä¾›ï¼Œå› æ­¤ä¼šè¢«å¤šæ¬¡ç¼“å­˜ã€‚å…¥å£ç‚¹ä¸­çš„æ‰€æœ‰èµ„æºURLéƒ½å¿…é¡»æ˜¯ç»å¯¹çš„ï¼Œå› ä¸ºå®ƒå¯ä»¥ä»éé¡¶çº§URLæä¾›ã€‚</p></li><li><p>å¤–å£³ï¼ˆapp-shellï¼‰ï¼Œå…¶ä¸­åŒ…æ‹¬é¡¶çº§åº”ç”¨é€»è¾‘ã€routerç­‰ã€‚</p></li><li><p>å»¶è¿ŸåŠ è½½çš„åº”ç”¨ç‰‡æ®µã€‚</p></li><li><p>å¯ä»¥ä»£è¡¨ç‰¹å®šè§†å›¾ä»£ç çš„ç‰‡æ®µï¼Œæˆ–å…¶ä»–å¯ä»¥å»¶è¿ŸåŠ è½½çš„ä»£ç ï¼ˆä¾‹å¦‚ï¼Œä¸»åº”ç”¨çš„ä¸€äº›éƒ¨åˆ†åœ¨ç¬¬ä¸€æ¬¡ç»˜åˆ¶æ—¶å¹¶ä¸éœ€è¦ï¼Œæ¯”å¦‚è¯´èœå•ï¼Œç›´åˆ°ç”¨æˆ·ä¸åº”ç”¨äº¤äº’æ—¶æ‰æ˜¾ç¤ºï¼‰ã€‚å¤–å£³è´Ÿè´£æ ¹æ®éœ€è¦åŠ¨æ€å¯¼å…¥è¿™äº›ç‰‡æ®µã€‚</p></li></ul><p><img src="/My-Blogs/images/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD-05.png" alt="img"></p><center style="margin: 20px 0 20px 0; ">åº”ç”¨å¤–å£³éª¨æ¶æ¨¡å¼</center><p>åº”ç”¨åº”æ ¹æ®éœ€è¦è°ƒç”¨åŠ¨æ€å¯¼å…¥ä»¥å»¶è¿ŸåŠ è½½ç‰‡æ®µã€‚ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·æ›´æ”¹ä¸ºæ–°è·¯ç”±æ—¶ï¼Œå®ƒå°†å¯¼å…¥ä¸è¯¥è·¯ç”±å…³è”çš„ç‰‡æ®µã€‚è¿™å¯èƒ½ä¼šå‘æœåŠ¡å™¨å‘èµ·æ–°è¯·æ±‚ï¼Œæˆ–è€…åªæ˜¯ä»ç¼“å­˜ä¸­åŠ è½½èµ„æºã€‚</p><br><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>é™¤äº†é’ˆå¯¹ PWA çš„åŸºæœ¬ç›®æ ‡å’Œæ ‡å‡†ä¹‹å¤–ï¼ŒPRPL è¿˜å°½é‡é’ˆå¯¹ä»¥ä¸‹æ–¹é¢åšäº†ä¼˜åŒ–ï¼š</p><br><ul><li><p>å°½é‡å‡å°‘äº¤äº’çš„å‡†å¤‡å·¥ä½œâ€”â€”ç‰¹åˆ«æ˜¯åœ¨é¦–æ¬¡ä½¿ç”¨æ—¶ï¼ˆæ— è®ºå…¥å£ç‚¹å¦‚ä½•ï¼‰ã€‚</p></li><li><p>å°½é‡æå‡ç¼“å­˜æ•ˆç‡ï¼Œå°¤å…¶æ˜¯æ›´æ–°ä¸æ–­å‘å¸ƒåçš„é•¿æœŸç¼“å­˜æ•ˆç‡ã€‚</p></li><li><p>ç®€åŒ–å¼€å‘å’Œéƒ¨ç½²ã€‚</p></li></ul><p>è‡ª 2016 å¹´è¯ç”Ÿä»¥æ¥ï¼ŒPRPL æ¨¡å¼å·²è·å¾—äº†å¤§è§„æ¨¡ä½¿ç”¨ï¼Œå€¼å¾—ä½ åœ¨ä¼˜åŒ–åº”ç”¨åŠ è½½æ—¶è€ƒè™‘ã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://addyosmani.com/blog/the-prpl-pattern/">https://addyosmani.com/blog/the-prpl-pattern/</a></p>]]></content>
      
      
      <categories>
          
          <category> æ€§èƒ½ä¼˜åŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€§èƒ½ä¼˜åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è°ˆè°ˆç™»å½•</title>
      <link href="/My-Blogs/2021/01/08/%E5%AE%89%E5%85%A8/%E8%B0%88%E8%B0%88%E7%99%BB%E5%BD%95/"/>
      <url>/My-Blogs/2021/01/08/%E5%AE%89%E5%85%A8/%E8%B0%88%E8%B0%88%E7%99%BB%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€ã€Cookieä¸Session"><a href="#ä¸€ã€Cookieä¸Session" class="headerlink" title="ä¸€ã€Cookieä¸Session"></a>ä¸€ã€Cookieä¸Session</h3><p>HTTPæ˜¯æ— çŠ¶æ€åè®®ï¼Œå®ƒä¸å¯¹ä¹‹å‰å‘ç”Ÿè¿‡çš„è¯·æ±‚å’Œå“åº”çš„çŠ¶æ€è¿›è¡Œä¿å­˜ã€‚å› ä¸ºæ— æ³•ç®¡ç†ç”¨æˆ·çŠ¶æ€ï¼Œå¯¹äºè¦ç™»å½•çš„é¡µé¢ï¼Œæ¯æ¬¡è·³è½¬æ–°é¡µé¢æ—¶éƒ½éœ€è¦å†æ¬¡ç™»å½•ã€‚</p><a id="more"></a><p>äºæ˜¯å¼•å…¥äº†Cookieæ¥ç®¡ç†ç”¨æˆ·çŠ¶æ€ï¼š</p><p>â‘  é¦–å…ˆå®¢æˆ·ç«¯å‘èµ·ä¸å¸¦Cookieä¿¡æ¯çš„ç™»å½•è¯·æ±‚</p><p>â‘¡ æœåŠ¡ç«¯æ¥æ”¶åˆ°è¯·æ±‚ï¼ŒéªŒè¯ç”¨æˆ·æ•°æ®æ­£ç¡®åï¼Œæ·»åŠ å“åº”å¤´Set-Cookie</p><p>â‘¢ å®¢æˆ·ç«¯æ”¶åˆ°å“åº”æŠ¥æ–‡åï¼Œæ£€æŸ¥åˆ°å“åº”å¤´Set-Cookieï¼Œåœ¨æœ¬åœ°ä¿å­˜Cookie</p><p>â‘£ ä¹‹åæ¯æ¬¡å‘è¯¥åŸŸå‘èµ·è¯·æ±‚æ—¶ï¼Œè‡ªåŠ¨æ·»åŠ è¯·æ±‚å¤´Cookieï¼Œå‘é€ç»™æœåŠ¡ç«¯</p><p>â‘¤ æœåŠ¡ç«¯è·å–è¯·æ±‚å¤´Cookieï¼Œæ ¹æ®Cookieçš„å€¼ï¼Œå°±å¯ä»¥åˆ¤æ–­å‡ºç”¨æˆ·æ˜¯å¦ç™»å½•</p><p>ä½†æ˜¯Cookieæå®¹æ˜“è¢«ç¯¡æ”¹å’Œä¼ªé€ ï¼Œäºæ˜¯äº§ç”Ÿäº†Sessionï¼ŒSessionå°†ç”¨æˆ·ä¿¡æ¯ä¿å­˜åœ¨æœåŠ¡ç«¯ï¼Œé‚£ä¹ˆSessionæ˜¯å¦‚ä½•ç®¡ç†ç”¨æˆ·çŠ¶æ€çš„å‘¢ï¼Ÿ</p><p>â‘  é¦–å…ˆå®¢æˆ·ç«¯å‘èµ·ä¸å¸¦Cookieä¿¡æ¯çš„ç™»å½•è¯·æ±‚</p><p>â‘¡ æœåŠ¡ç«¯æ¥æ”¶åˆ°è¯·æ±‚ï¼Œæ£€æŸ¥åˆ°æ²¡æœ‰æºå¸¦å£ä»¤ï¼ŒéªŒè¯ç”¨æˆ·å¯†ç æ­£ç¡®åç”ŸæˆSessionï¼Œå°†ç”¨æˆ·ä¿¡æ¯ä¿å­˜åœ¨Sessionï¼Œè®¾ç½®å“åº”å¤´Set-Cookieï¼Œé€šå¸¸æ˜¯å°†Session IDä½œä¸ºå£ä»¤å€¼</p><p>â‘¢ å®¢æˆ·ç«¯æ£€æŸ¥åˆ°Set-Cookieå“åº”å¤´ï¼Œåœ¨æœ¬åœ°ä¿å­˜Cookieä¿¡æ¯</p><p>â‘£ ä¹‹åæ¯æ¬¡å‘èµ·è¯·æ±‚æ—¶ï¼Œè‡ªåŠ¨åœ¨è¯·æ±‚å¤´Cookieä¸­æºå¸¦å£ä»¤ï¼Œå‘é€ç»™æœåŠ¡ç«¯</p><p>â‘¤ æœåŠ¡ç«¯è·å–Cookieæºå¸¦çš„å£ä»¤å€¼ï¼Œæ‰¾åˆ°å¯¹åº”çš„Sessionï¼Œå°±å¯ä»¥åˆ¤æ–­ç”¨æˆ·çŠ¶æ€</p><h3 id="äºŒã€å¦‚ä½•è®©Sessionå£ä»¤å€¼æ›´å®‰å…¨"><a href="#äºŒã€å¦‚ä½•è®©Sessionå£ä»¤å€¼æ›´å®‰å…¨" class="headerlink" title="äºŒã€å¦‚ä½•è®©Sessionå£ä»¤å€¼æ›´å®‰å…¨"></a>äºŒã€å¦‚ä½•è®©Sessionå£ä»¤å€¼æ›´å®‰å…¨</h3><p>è™½ç„¶å£ä»¤å€¼ç”±æœåŠ¡ç«¯ç”Ÿæˆï¼Œç”¨æˆ·ä¸å®¹æ˜“ä¼ªé€ ï¼ŒBut nothing is impossibleï¼›è€Œä¸”å£ä»¤å€¼å­˜åœ¨å®¢æˆ·ç«¯ï¼Œå°±æœ‰å¯èƒ½è¢«ç›—ç”¨ã€‚ä¸€æ—¦å£ä»¤å€¼è¢«ä¼ªé€ æˆ–ç›—ç”¨ï¼Œæ”»å‡»è€…å°±å¯ä»¥ä¼ªè£…æˆç”¨æˆ·è®¿é—®æœåŠ¡ç«¯çš„æ•°æ®ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•è®©Sessionå£ä»¤å€¼æ›´å®‰å…¨å‘¢ï¼Ÿ</p><p>â‘  å°†å®¢æˆ·ç«¯çš„æŸäº›ç‹¬æœ‰ä¿¡æ¯+å£ä»¤å€¼ä½œä¸ºåŸå€¼ï¼Œå¯¹å…¶è¿›è¡Œç­¾å</p><p>â‘¡ å°†å£ä»¤å€¼æ‹¼æ¥ç­¾åè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå°†Cookieè®¾ç½®ä¸ºHttpOnlyï¼ˆç¦æ­¢ç”¨æˆ·é€šè¿‡è„šæœ¬æ¥è·å–å’Œæ›´æ”¹Cookieï¼‰</p><p>â‘¢ æœåŠ¡ç«¯å†æ¬¡æ”¶åˆ°è¯·æ±‚ï¼Œå–å®¢æˆ·ç«¯ä¿¡æ¯ä¸å£ä»¤å€¼ç­¾åï¼Œä¸å®¢æˆ·ç«¯æºå¸¦çš„ç­¾åå¯¹æ¯”ï¼Œä¸ç›¸ç­‰ï¼Œè¯´æ˜è¯·æ±‚ä¸åˆæ³•</p><p>è¿™æ ·çš„è¯ï¼š</p><p>â‘  å³ä½¿æ”»å‡»è€…çŸ¥é“äº†å£ä»¤å€¼ï¼Œç”±äºä¸çŸ¥é“å¯†é’¥ï¼Œæ— æ³•ä¼ªé€ ç­¾å</p><p>â‘¡ å³ä½¿æ”»å‡»è€…é€šè¿‡æŸç§æ–¹å¼å¾—åˆ°äº†çœŸå®çš„å£ä»¤å€¼å’Œç­¾åï¼Œä½†æ˜¯ç”±äºæ”»å‡»è€…çš„å®¢æˆ·ç«¯ä¿¡æ¯ä¸ä¸€æ ·ï¼Œå‘é€åˆ°æœåŠ¡ç«¯åï¼Œä¼šå¾—åˆ°ä¸ä¸€æ ·çš„ç­¾åï¼Œç­¾åæ ¡éªŒä¸èƒ½é€šè¿‡</p><h3 id="ä¸‰ã€å¤šç³»ç»Ÿçš„å¤æ‚æ€§"><a href="#ä¸‰ã€å¤šç³»ç»Ÿçš„å¤æ‚æ€§" class="headerlink" title="ä¸‰ã€å¤šç³»ç»Ÿçš„å¤æ‚æ€§"></a>ä¸‰ã€å¤šç³»ç»Ÿçš„å¤æ‚æ€§</h3><p>webç³»ç»Ÿç”±æ—©æœŸçš„å•ç³»ç»Ÿå‘å±•æˆå¤šç³»ç»Ÿç»„æˆçš„åº”ç”¨ç¾¤ï¼Œé¢å¯¹å¦‚æ­¤ä¼—å¤šçš„ç³»ç»Ÿï¼Œç”¨æˆ·éš¾é“è¦ä¸€ä¸ªä¸ªç™»å½•ã€å†ä¸€ä¸ªä¸ªæ³¨é”€å—ï¼Ÿ</p><p>ç³»ç»Ÿå¤æ‚æ€§åº”è¯¥ç”±ç³»ç»Ÿå†…éƒ¨æ‰¿æ‹…ï¼Œè€Œä¸æ˜¯ç”¨æˆ·ã€‚æ— è®ºwebç³»ç»Ÿå†…éƒ¨å¤šä¹ˆå¤æ‚ï¼Œå¯¹ç”¨æˆ·è€Œè¨€ï¼Œéƒ½æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„æ•´ä½“ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·è®¿é—®webç³»ç»Ÿçš„æ•´ä¸ªåº”ç”¨ç¾¤ä¸è®¿é—®å•ä¸ªç³»ç»Ÿä¸€æ ·ï¼Œåªè¦ç™»å½•/æ³¨é”€ä¸€æ¬¡å°±å¤Ÿäº†ã€‚</p><p><img src="/My-Blogs/images/%E8%B0%88%E8%B0%88%E7%99%BB%E5%BD%95-01.png"></p><p>å› ä¸ºCookieä¸å…è®¸è·¨åŸŸï¼Œæ—©æœŸå¤šç³»ç»Ÿç™»å½•é‡‡ç”¨å°†Cookieç§åœ¨é¡¶çº§åŸŸåä¸‹çš„æ–¹å¼ï¼Œæ¥å®ç°Cookieå…±äº«ã€‚è¿™ç§æ–¹å¼çš„å±€é™åœ¨äºï¼š</p><p>â‘  åº”ç”¨ç¾¤å„ç³»ç»Ÿçš„åŸŸåå¾—ç»Ÿä¸€</p><p>â‘¡ åº”ç”¨ç¾¤å„ç³»ç»Ÿçš„webæœåŠ¡ç«¯ä½¿ç”¨çš„æŠ€æœ¯è¦ç›¸åŒï¼Œæ¯”å¦‚Sessionå£ä»¤å€¼ä»¥åŠå®ƒçš„ç­¾å</p><p>æ–¹å¼è¦ç›¸åŒï¼Œè¦ä¸Sessionå£ä»¤å€¼ä¸åŒï¼Œæ— æ³•ç»´æŒä¼šè¯</p><p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§å…¨æ–°çš„ç™»å½•æ–¹å¼æ¥å®ç°å¤šç³»ç»Ÿåº”ç”¨ç¾¤çš„ç™»å½•ï¼Œè¿™å°±æ˜¯å•ç‚¹ç™»å½•ã€‚</p><h3 id="å››ã€å•ç‚¹ç™»å½•"><a href="#å››ã€å•ç‚¹ç™»å½•" class="headerlink" title="å››ã€å•ç‚¹ç™»å½•"></a>å››ã€å•ç‚¹ç™»å½•</h3><p>å•ç‚¹ç™»å½•å…¨ç§°Single Sign Onï¼ˆç®€ç§°SSOï¼‰ï¼Œæ˜¯æŒ‡åœ¨å¤šç³»ç»Ÿåº”ç”¨ç¾¤ä¸­ç™»å½•ä¸€ä¸ªç³»ç»Ÿï¼Œä¾¿å¯åœ¨å…¶å®ƒæ‰€æœ‰ç³»ç»Ÿä¸­å¾—åˆ°æˆæƒè€Œæ— éœ€å†æ¬¡ç™»å½•ã€‚åŒ…æ‹¬å•ç‚¹ç™»å½•ä¸å•ç‚¹æ³¨é”€ä¸¤éƒ¨åˆ†ï¼š</p><h4 id="1ã€å•ç‚¹ç™»å½•"><a href="#1ã€å•ç‚¹ç™»å½•" class="headerlink" title="1ã€å•ç‚¹ç™»å½•"></a>1ã€å•ç‚¹ç™»å½•</h4><p>ã€€    ç›¸æ¯”äºå•ç³»ç»Ÿç™»å½•ï¼ŒSSOéœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„è®¤è¯ä¸­å¿ƒï¼Œåªæœ‰è®¤è¯ä¸­å¿ƒèƒ½æ¥å—ç”¨æˆ·çš„ç”¨    æˆ·åå¯†ç ç­‰å®‰å…¨ä¿¡æ¯ï¼Œå…¶å®ƒç³»ç»Ÿä¸æä¾›ç™»å½•å…¥å£ï¼Œåªæ¥å—è®¤è¯ä¸­å¿ƒçš„é—´æ¥æˆæƒã€‚</p><p>é€šå¸¸SSOè®¤è¯ä¸­å¿ƒéªŒè¯ç”¨æˆ·æ•°æ®æ²¡é—®é¢˜åï¼Œä¼šåˆ›å»ºæˆæƒTokenï¼Œåˆ†å‘ç»™å„ä¸ªå­ç³»ç»Ÿã€‚å­ç³»ç»Ÿæ‹¿åˆ°Tokenï¼Œå³å¾—åˆ°äº†æˆæƒï¼Œå¯ä»¥å€Ÿæ­¤åˆ›å»ºå±€éƒ¨ä¼šè¯ï¼Œå±€éƒ¨ä¼šè¯ç™»å½•æ–¹å¼ä¸å•ç³»ç»Ÿçš„ç™»å½•æ–¹å¼ç›¸åŒã€‚è¿™ä¸ªè¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯å•ç‚¹ç™»å½•çš„åŸç†ã€‚</p><p><img src="/My-Blogs/images/%E8%B0%88%E8%B0%88%E7%99%BB%E5%BD%95-02.png"></p><p>ä¾‹å¦‚ï¼š</p><p>ï¬    ç”¨æˆ·è®¿é—®ç³»ç»Ÿ1ï¼Œç³»ç»Ÿ1å‘ç°ç”¨æˆ·æœªç™»å½•ï¼Œè·³è½¬è‡³SSOè®¤è¯ä¸­å¿ƒï¼Œå¹¶å°†è‡ªå·±çš„åœ°å€ä½œä¸ºå‚æ•°</p><p>ï¬    SSOè®¤è¯ä¸­å¿ƒå‘ç°ç”¨æˆ·æœªç™»å½•ï¼Œå°†ç”¨æˆ·å¼•å¯¼è‡³ç™»å½•é¡µé¢</p><p>ï¬    ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå¯†ç æäº¤ç™»å½•ç”³è¯·</p><p>ï¬    SSOè®¤è¯ä¸­å¿ƒæ ¡éªŒç”¨æˆ·ä¿¡æ¯ï¼Œåˆ›å»ºç”¨æˆ·ä¸SSOè®¤è¯ä¸­å¿ƒä¹‹é—´çš„ä¼šè¯ï¼Œç§°ä¸ºå…¨å±€ä¼šè¯ï¼ŒåŒæ—¶åˆ›å»ºæˆæƒToken</p><p>ï¬    SSOè®¤è¯ä¸­å¿ƒå¸¦ç€Tokenè·³è½¬å›æœ€åˆçš„è¯·æ±‚åœ°å€ï¼ˆç³»ç»Ÿ1ï¼‰</p><p>ï¬    ç³»ç»Ÿ1æ‹¿åˆ°Tokenï¼Œå»SSOè®¤è¯ä¸­å¿ƒæ ¡éªŒTokenæ˜¯å¦æœ‰æ•ˆ</p><p>ï¬    SSOè®¤è¯ä¸­å¿ƒæ ¡éªŒTokenï¼Œè¿”å›æœ‰æ•ˆï¼Œæ³¨å†Œç³»ç»Ÿ1</p><p>ï¬    ç³»ç»Ÿ1ä½¿ç”¨è¯¥Tokenåˆ›å»ºä¸ç”¨æˆ·çš„ä¼šè¯ï¼Œç§°ä¸ºå±€éƒ¨ä¼šè¯ï¼Œè¿”å›å—ä¿æŠ¤èµ„æº</p><p>ï¬    ç”¨æˆ·è®¿é—®ç³»ç»Ÿ2çš„å—ä¿æŠ¤èµ„æº</p><p>ï¬    ç³»ç»Ÿ2å‘ç°ç”¨æˆ·æœªç™»å½•ï¼Œè·³è½¬è‡³SSOè®¤è¯ä¸­å¿ƒï¼Œå¹¶å°†è‡ªå·±çš„åœ°å€ä½œä¸ºå‚æ•°</p><p>ï¬    SSOè®¤è¯ä¸­å¿ƒå‘ç°ç”¨æˆ·å·²ç™»å½•ï¼Œè·³è½¬å›ç³»ç»Ÿ2çš„åœ°å€ï¼Œå¹¶é™„ä¸Šä»¤ç‰Œ</p><p>ï¬    ç³»ç»Ÿ2æ‹¿åˆ°ä»¤ç‰Œï¼Œå»SSOè®¤è¯ä¸­å¿ƒæ ¡éªŒä»¤ç‰Œæ˜¯å¦æœ‰æ•ˆ</p><p>ï¬    SSOè®¤è¯ä¸­å¿ƒæ ¡éªŒä»¤ç‰Œï¼Œè¿”å›æœ‰æ•ˆï¼Œæ³¨å†Œç³»ç»Ÿ2</p><p>ï¬    ç³»ç»Ÿ2ä½¿ç”¨è¯¥ä»¤ç‰Œåˆ›å»ºä¸ç”¨æˆ·çš„å±€éƒ¨ä¼šè¯ï¼Œè¿”å›å—ä¿æŠ¤èµ„æº</p><p>ç”¨æˆ·ç™»å½•æˆåŠŸä¹‹åï¼Œä¼šä¸SSOè®¤è¯ä¸­å¿ƒåŠå„ä¸ªå­ç³»ç»Ÿå»ºç«‹ä¼šè¯ï¼Œç”¨æˆ·ä¸SSOè®¤è¯ä¸­å¿ƒå»ºç«‹çš„ä¼šè¯ç§°ä¸ºå…¨å±€ä¼šè¯ï¼Œç”¨æˆ·ä¸å„ä¸ªå­ç³»ç»Ÿå»ºç«‹çš„ä¼šè¯ç§°ä¸ºå±€éƒ¨ä¼šè¯ï¼Œå±€éƒ¨ä¼šè¯å»ºç«‹ä¹‹åï¼Œç”¨æˆ·è®¿é—®å­ç³»ç»Ÿå—ä¿æŠ¤èµ„æºå°†ä¸å†é€šè¿‡SSOè®¤è¯ä¸­å¿ƒï¼Œå…¨å±€ä¼šè¯ä¸å±€éƒ¨ä¼šè¯æœ‰å¦‚ä¸‹çº¦æŸå…³ç³»ï¼š</p><p>â‘  å±€éƒ¨ä¼šè¯å­˜åœ¨ï¼Œå…¨å±€ä¼šè¯ä¸€å®šå­˜åœ¨</p><p>â‘¡ å…¨å±€ä¼šè¯å­˜åœ¨ï¼Œå±€éƒ¨ä¼šè¯ä¸ä¸€å®šå­˜åœ¨</p><p>â‘¢ å…¨å±€ä¼šè¯é”€æ¯ï¼Œå±€éƒ¨ä¼šè¯å¿…é¡»é”€æ¯</p><p>2ã€å•ç‚¹æ³¨é”€</p><p>å•ç‚¹ç™»å½•è‡ªç„¶ä¹Ÿè¦å•ç‚¹æ³¨é”€ï¼Œåœ¨ä¸€ä¸ªå­ç³»ç»Ÿä¸­æ³¨é”€ï¼Œæ‰€æœ‰å­ç³»ç»Ÿçš„ä¼šè¯éƒ½å°†è¢«é”€æ¯ã€‚</p><p><img src="/My-Blogs/images/%E8%B0%88%E8%B0%88%E7%99%BB%E5%BD%95-03.png"></p><p>ï¬    ç”¨æˆ·å‘ç³»ç»Ÿ1å‘èµ·æ³¨é”€è¯·æ±‚</p><p>ï¬    ç³»ç»Ÿ1æ ¹æ®ç”¨æˆ·ä¸ç³»ç»Ÿ1å»ºç«‹çš„ä¼šè¯æ‹¿åˆ°Tokenï¼Œå‘SSOè®¤è¯ä¸­å¿ƒå‘èµ·æ³¨é”€è¯·æ±‚</p><p>ï¬    SSOè®¤è¯ä¸­å¿ƒæ ¡éªŒTokenæœ‰æ•ˆï¼Œé”€æ¯å…¨å±€ä¼šè¯ï¼ŒåŒæ—¶å–å‡ºæ‰€æœ‰ç”¨æ­¤Tokenæ³¨å†Œçš„ç³»ç»Ÿåœ°å€</p><p>ï¬    SSOè®¤è¯ä¸­å¿ƒå‘æ‰€æœ‰æ³¨å†Œç³»ç»Ÿå‘èµ·æ³¨é”€è¯·æ±‚</p><p>ï¬    å„æ³¨å†Œç³»ç»Ÿæ¥æ”¶SSOè®¤è¯ä¸­å¿ƒçš„æ³¨é”€è¯·æ±‚ï¼Œé”€æ¯å±€éƒ¨ä¼šè¯</p><p>ï¬    SSOè®¤è¯ä¸­å¿ƒå¼•å¯¼ç”¨æˆ·è‡³ç™»å½•é¡µé¢</p><h3 id="äº”ã€ç™»å½•å®‰å…¨é˜²èŒƒ"><a href="#äº”ã€ç™»å½•å®‰å…¨é˜²èŒƒ" class="headerlink" title="äº”ã€ç™»å½•å®‰å…¨é˜²èŒƒ"></a>äº”ã€ç™»å½•å®‰å…¨é˜²èŒƒ</h3><p>1ã€CSRFæ”»å‡»</p><p>CSRFï¼ˆCross-site request forgeryï¼‰è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼šæ”»å‡»è€…è¯±å¯¼å—å®³è€…è¿›å…¥ç¬¬ä¸‰æ–¹ç½‘ç«™ï¼Œåœ¨ç¬¬ä¸‰æ–¹ç½‘ç«™ä¸­ï¼Œå‘è¢«æ”»å‡»ç½‘ç«™å‘é€è·¨ç«™è¯·æ±‚ã€‚åˆ©ç”¨å—å®³è€…åœ¨è¢«æ”»å‡»ç½‘ç«™å·²ç»è·å–çš„ç™»å½•å‡­è¯ï¼Œç»•è¿‡åå°çš„ç”¨æˆ·éªŒè¯ï¼Œè¾¾åˆ°å†’å……ç”¨æˆ·å¯¹è¢«æ”»å‡»ç½‘ç«™æ‰§è¡ŒæŸé¡¹æ“ä½œçš„ç›®çš„ã€‚</p><p>ä¸€ä¸ªå…¸å‹çš„CSRFæ”»å‡»æœ‰ç€å¦‚ä¸‹çš„æµç¨‹ï¼š</p><p>â‘  å—å®³è€…ç™»å½•ç½‘ç«™aï¼Œå¹¶ä¿ç•™äº†ç™»å½•å‡­è¯Cookie</p><p>â‘¡ æ”»å‡»è€…å¼•è¯±å—å®³è€…è®¿é—®ç½‘ç«™bï¼Œå®ƒå‘ç½‘ç«™açš„æœåŠ¡å™¨å‘é€äº†ä¸€ä¸ªè·¨ç«™è¯·æ±‚ï¼Œè¯¥è¯·æ±‚ä¼šé»˜è®¤æºå¸¦ç½‘ç«™açš„Cookie</p><p>â‘¢ ç½‘ç«™açš„æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œå¯¹è¯·æ±‚è¿›è¡ŒéªŒè¯ï¼Œç¡®è®¤æ˜¯å—å®³è€…çš„å‡­è¯ï¼Œè¯¯ä»¥ä¸ºæ˜¯å—å®³è€…è‡ªå·±å‘é€çš„è¯·æ±‚ï¼Œä»¥å—å®³è€…çš„åä¹‰æ‰§è¡ŒæŸä¸ªæ“ä½œ</p><p>â‘£ æ”»å‡»å®Œæˆï¼Œæ”»å‡»è€…åœ¨å—å®³è€…ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ï¼Œå†’å……å—å®³è€…ï¼Œè®©ç½‘ç«™aæ‰§è¡Œäº†æ”»å‡»è€…è‡ªå·±å®šä¹‰çš„æ“ä½œ</p><p>CSRFé€šå¸¸å‘ç”Ÿåœ¨ç¬¬ä¸‰æ–¹åŸŸåï¼Œç”±äºæµè§ˆå™¨åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œæ”»å‡»è€…ä¸èƒ½è·å–åˆ°å—å®³è€…çš„Cookieä¿¡æ¯ï¼Œåªæ˜¯å†’ç”¨ã€‚é’ˆå¯¹è¿™2ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¶å®šç›¸åº”çš„é˜²æŠ¤ç­–ç•¥ï¼š</p><p>1ï¼‰åŒæºæ£€æµ‹</p><p>æœåŠ¡å™¨é€šè¿‡è§£æOrigin æˆ–Refererè¿™ä¸¤ä¸ªè¯·æ±‚å¤´ï¼Œç¡®å®šè¯·æ±‚çš„æ¥æºåŸŸï¼Œå¦‚æœè¯·æ±‚æ¥è‡ªå¤–åŸŸï¼Œç›´æ¥é˜»æ­¢ã€‚</p><p>ç¼ºç‚¹ï¼šåœ¨éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæ”»å‡»è€…å¯ä»¥éšè—ç”šè‡³ä¿®æ”¹è‡ªå·±è¯·æ±‚çš„Refererï¼›ä¼šè¯¯ä¼¤ä¸€äº›æ­£å¸¸è¯·æ±‚ï¼Œæ¯”å¦‚é€šè¿‡æœç´¢ç»“æœè·³è½¬çš„é¡µé¢è¯·æ±‚ã€‚</p><p>2ï¼‰Samesite Cookie</p><p>ä¸ºäº†ä»æºå¤´ä¸Šè§£å†³CSRFæ”»å‡»ï¼ŒGoogleèµ·è‰äº†ä¸€ä»½è‰æ¡ˆæ¥æ”¹è¿›HTTPåè®®ï¼Œå³ä¸ºå“åº”å¤´Set-Cookieæ–°å¢Samesiteå±æ€§ï¼š</p><p>Strictï¼šä»»ä½•æƒ…å†µä¸‹éƒ½ä¸å¯èƒ½ä½œä¸ºç¬¬ä¸‰æ–¹Cookieï¼Œå…¶å®ƒç½‘ç«™å‘èµ·çš„ä»»æ„è¯·æ±‚éƒ½ä¸ä¼šæºå¸¦ä¸Šè¯¥Cookieï¼ŒåŒ…æ‹¬æœç´¢é¡µé¢ã€‚</p><p>Laxï¼šç”¨æˆ·åœ¨ä¸åŒç½‘ç«™ä¹‹é—´é€šè¿‡é“¾æ¥è·³è½¬ä¸å—å½±å“ï¼›ä½†å‡å¦‚è¿™ä¸ªè¯·æ±‚æ˜¯ä»å…¶å®ƒç½‘ç«™å‘èµ·çš„è¯·æ±‚ï¼Œæˆ–è€…é¡µé¢è·³è½¬æ˜¯é€šè¿‡è¡¨å•POSTæäº¤è§¦å‘çš„ï¼Œåˆ™Cookieä¹Ÿä¸ä¼šæºå¸¦å‘é€ã€‚</p><p>ç¼ºç‚¹ï¼šç›®å‰è¿˜å¹¶ä¸æˆç†Ÿï¼Œå…¶åº”ç”¨åœºæ™¯æœ‰å¾…è§‚æœ›ã€‚</p><p>3ï¼‰åŒé‡Cookie</p><p>â‘      åœ¨ç”¨æˆ·è®¿é—®ç½‘ç«™é¡µé¢æ—¶ï¼Œå‘è¯·æ±‚åŸŸåæ³¨å…¥ä¸¤ä¸ªCookieï¼Œä¸€ä¸ªæ˜¯åŸæœ¬è¦æ³¨å…¥çš„Cookieï¼Œä¸€ä¸ªæ¯”å¦‚éšæœºå­—ç¬¦ä¸²</p><p>â‘¡ å‰ç«¯å‘åç«¯å‘èµ·è¯·æ±‚æ—¶ï¼Œå–å‡ºéšæœºå­—ç¬¦ä¸²ï¼Œæ·»åŠ åˆ°URLå‚æ•°æˆ–è¯·æ±‚å¤´ä¸­</p><p>â‘¢ åç«¯éªŒè¯æºå¸¦çš„éšæœºæ•°ä¸Cookieä¸­çš„éšæœºæ•°æ˜¯å¦ä¸€è‡´ï¼Œä¸ä¸€è‡´åˆ™æ‹’ç»è¯·æ±‚</p><p>ç¼ºç‚¹ï¼šéš¾ä»¥åšåˆ°å­åŸŸåéš”ç¦»ï¼Œè®¤è¯Cookieå¿…é¡»è¢«ç§åœ¨é¡¶çº§åŸŸåä¸‹ï¼Œæ¯ä¸ªå­åŸŸæ‰å¯ä»¥è®¿é—®ï¼›å¦‚æœæŸä¸ªå­åŸŸå­˜åœ¨XSSæ¼æ´ï¼Œæ”»å‡»è€…å°†è¿™ä¸ªè®¤è¯Cookieä¿®æ”¹ä¸ºè‡ªå·±é…ç½®çš„Cookieï¼›æ”»å‡»è€…ç›´æ¥ä½¿ç”¨è‡ªå·±é…ç½®çš„Cookieå‘èµ·CSRFæ”»å‡»ã€‚</p><p>4ï¼‰CSRF Token</p><p>CSRFæ”»å‡»è€…æ— æ³•ç›´æ¥çªƒå–åˆ°ç”¨æˆ·çš„Cookieï¼Œä»…ä»…æ˜¯å†’ç”¨ï¼›è€ŒCSRFæ”»å‡»ä¹‹æ‰€ä»¥èƒ½å¤ŸæˆåŠŸï¼Œæ˜¯å› ä¸ºæœåŠ¡å™¨è¯¯æŠŠæ”»å‡»è€…å‘é€çš„è¯·æ±‚å½“æˆäº†ç”¨æˆ·çš„è¯·æ±‚ã€‚</p><p>â‘  æœåŠ¡å™¨ç”Ÿæˆç™»å½•Cookieæ—¶ï¼ŒåŒæ—¶ç”ŸæˆTokenå’ŒTokenç­¾åçš„2ä¸ªCookie</p><p>â‘¡ å‰ç«¯å‘åç«¯å‘èµ·è¯·æ±‚æ—¶ï¼Œå°†Tokenæ·»åŠ åˆ°URLå‚æ•°æˆ–è¯·æ±‚å¤´ä¸­</p><p>â‘¢ åç«¯æ”¶åˆ°è¯·æ±‚ï¼Œé¦–å…ˆéªŒè¯å‚æ•°ä¸Tokenç›¸ä¸ç›¸åŒï¼Œä¸ç›¸åŒåˆ™ä¸­æ­¢è¯·æ±‚ï¼›ç„¶åæ ¡éªŒç­¾åï¼Œä¸ç›¸åŒåˆ™ä¸­æ­¢è¯·æ±‚ã€‚å› ä¸ºæ”»å‡»è€…ä¸çŸ¥é“å¯†é’¥ï¼Œä½¿ç”¨Tokenç­¾åå¯ä»¥é˜²æ­¢Cookieè¢«ç¯¡æ”¹å’Œä¼ªé€ ã€‚</p><p>ç¼ºç‚¹ï¼šæ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦æºå¸¦Tokenï¼Œä¸”éœ€è¦æœåŠ¡ç«¯å¯¹æ¯ä¸ªè¯·æ±‚è¿›è¡Œæ ¡éªŒã€‚æ‰€ä»¥ä¸€èˆ¬åªå¯¹åŒ…å«æ•æ„Ÿæ•°æ®çš„è¯·æ±‚åšæ­¤å¤„ç†ã€‚</p><p>2ã€çŸ­ä¿¡é˜²åˆ·</p><p>çŸ­ä¿¡è½°ç‚¸æ˜¯æŒ‡æ”»å‡»è€…åˆ©ç”¨ä»å„ä¸ªç½‘ç«™ä¸Šæ‰¾åˆ°çš„å‘é€åŠ¨æ€çŸ­ä¿¡çš„URLå’Œå‰ç«¯è¾“å…¥çš„è¢«æ”»å‡»è€…çš„æ‰‹æœºå·ç ï¼Œå‘é€HTTPè¯·æ±‚ï¼Œæ¯æ¬¡è¯·æ±‚ç»™ç”¨æˆ·å‘é€ä¸€ä¸ªåŠ¨æ€çŸ­ä¿¡ã€‚</p><p>å±å®³ï¼šå¢åŠ å…¬å¸çš„è¿è¥æˆæœ¬ï¼Œå› ä¸ºçŸ­ä¿¡æ˜¯éœ€è¦è®¡è´¹çš„ï¼›è¢«æ”»å‡»è€…å¤§é‡è¢«åŠ¨æ¥æ”¶éè‡ªèº«è¯·æ±‚çš„çŸ­ä¿¡ï¼Œé€ æˆæ— æ³•æ­£å¸¸ä½¿ç”¨ç§»åŠ¨è¿è¥å•†ä¸šåŠ¡ï¼›ç»™å…¬å¸å½¢è±¡é€ æˆæå¤§å½±å“ï¼Œå› ä¸ºä¸€èˆ¬çŸ­ä¿¡ä¼šå¸¦å…¬å¸ç­¾åã€‚</p><p>å¸¸è§é˜²èŒƒæ‰‹æ®µï¼š</p><p>ï¬    çŸ­ä¿¡å‘é€é—´éš”è®¾ç½®</p><p>ï¬    å‘é€é‡é™åˆ¶</p><p>ï¬    å›¾æ–‡éªŒè¯ç </p><p>ï¬    è§¦å‘æµç¨‹é™åˆ¶</p><h3 id="å…­ã€å…¨çƒéƒ¨ç½²é—®é¢˜"><a href="#å…­ã€å…¨çƒéƒ¨ç½²é—®é¢˜" class="headerlink" title="å…­ã€å…¨çƒéƒ¨ç½²é—®é¢˜"></a>å…­ã€å…¨çƒéƒ¨ç½²é—®é¢˜</h3><p>Sessionå­˜åœ¨å†…å­˜é‡Œéšç€ç”¨æˆ·çš„å¢å¤šä¼šå¯¼è‡´å†…å­˜æº¢å‡ºï¼Œä¸”ä¸èƒ½è·¨è¿›ç¨‹ã€è·¨æœºå™¨å…±äº«ï¼Œä¸”é‡å¯è¿›ç¨‹åä¼šå¯¼è‡´Sessionä¸¢å¤±ï¼Œæ‰€ä»¥Sessioné€šå¸¸ä¼šå­˜åœ¨ç¬¬ä¸‰æ–¹ç¼“å­˜ï¼Œæ¯”å¦‚Redisé‡Œã€‚</p><p>Rediså…¨çƒéƒ¨ç½²å¸¦æ¥çš„é—®é¢˜åœ¨äºï¼Œå·²ç™»å½•çš„ç”¨æˆ·å†æ¬¡è¯·æ±‚æ—¶ï¼Œå¦‚æœè¯·æ±‚å®šä½åˆ°ä¸åŒé›†ç¾¤çš„Redisï¼Œä¼šå¯¼è‡´ç™»å½•çŠ¶æ€å¤±æ•ˆã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><p>ï¬    ä¸åŒé›†ç¾¤Redisæ•°æ®åŒæ­¥</p><p>ï¬    ä¿è¯ç›¸åŒé›†ç¾¤çš„WebæœåŠ¡è¯·æ±‚åŒä¸€é›†ç¾¤çš„Redis</p>]]></content>
      
      
      <categories>
          
          <category> å®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å®‰å…¨ </tag>
            
            <tag> ç™»å½• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sshçš„åŸºæœ¬ç”¨æ³•</title>
      <link href="/My-Blogs/2021/01/08/%E5%8D%8F%E8%AE%AE/ssh/ssh%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/"/>
      <url>/My-Blogs/2021/01/08/%E5%8D%8F%E8%AE%AE/ssh/ssh%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p><code>SSH</code>ï¼Œæˆ‘ä»¬ç»å¸¸æ“ä½œè¿œç¨‹æœåŠ¡å™¨çš„æ—¶å€™ï¼Œéƒ½ä¼šç”¨åˆ°è¿™ä¸ªå‘½ä»¤ï¼Œä½†æ˜¯ä»–é™¤äº†ç™»å½•æœåŠ¡å™¨è¿˜æœ‰å¾ˆå¤šä½œç”¨ï¼Œä¸‹é¢æˆ‘ä»¬ä¸€èµ·æ¥äº†è§£ä¸‹å§</p><a id="more"></a><h2 id="sshç™»å½•æœåŠ¡å™¨å‘½ä»¤"><a href="#sshç™»å½•æœåŠ¡å™¨å‘½ä»¤" class="headerlink" title="sshç™»å½•æœåŠ¡å™¨å‘½ä»¤"></a>sshç™»å½•æœåŠ¡å™¨å‘½ä»¤</h2><pre><code class="BASH">ssh hostname</code></pre><p>ä¸Šé¢å‘½ä»¤ä¸­ï¼Œ <code>hostname</code> æ˜¯ä¸»æœºåï¼Œå®ƒå¯ä»¥æ˜¯åŸŸåï¼Œä¹Ÿå¯èƒ½æ˜¯ IP åœ°å€æˆ–å±€åŸŸç½‘å†…éƒ¨çš„ä¸»æœºåã€‚ä¸æŒ‡å®šç”¨æˆ·åçš„æƒ…å†µä¸‹ï¼Œå°†ä½¿ç”¨å®¢æˆ·ç«¯çš„å½“å‰ç”¨æˆ·åï¼Œä½œä¸ºè¿œç¨‹æœåŠ¡å™¨çš„ç™»å½•ç”¨æˆ·åã€‚</p><p>å¦‚æœè¦æŒ‡å®šç”¨æˆ·åï¼Œå¯ä»¥é‡‡ç”¨ä¸‹é¢çš„è¯­æ³•ã€‚</p><pre><code class="BASH">ssh user@hostname</code></pre><p>ä¸Šé¢çš„å‘½ä»¤ä¸­ï¼Œç”¨æˆ·åå’Œä¸»æœºåå†™åœ¨ä¸€èµ·äº†ï¼Œä¹‹é—´ä½¿ç”¨ <code>@</code> åˆ†éš”ã€‚</p><p>æŒ‡å®šç”¨æˆ·åï¼Œå¯ä»¥ä½¿ç”¨ <code>ssh</code> å’Œ <code>-l</code> å‚æ•°</p><pre><code class="BASH">ssh -l username host</code></pre><p>ssh é»˜è®¤è¿æ¥æœåŠ¡å™¨çš„ <code>22</code> ç«¯å£ï¼Œ <code>-p</code> å‚æ•°å¯ä»¥æŒ‡å®šå…¶ä»–ç«¯å£</p><pre><code class="BASH">ssh -p 8821 hostname</code></pre><h2 id="sshæ‰§è¡Œè¿œç¨‹å‘½ä»¤"><a href="#sshæ‰§è¡Œè¿œç¨‹å‘½ä»¤" class="headerlink" title="sshæ‰§è¡Œè¿œç¨‹å‘½ä»¤"></a>sshæ‰§è¡Œè¿œç¨‹å‘½ä»¤</h2><p>å°†å‘½ä»¤ç›´æ¥å†™åœ¨ <code>ssh</code> å‘½ä»¤çš„åé¢</p><pre><code class="BASH">ssh username@hostname command</code></pre><p>ä¸Šé¢çš„å‘½ä»¤ä¼šä½¿å¾— SSH åœ¨ç™»å½•æˆåŠŸåï¼Œç«‹åˆ»åœ¨è¿œç¨‹ä¸»æœºä¸Šæ‰§è¡Œå‘½ä»¤ <code>command</code> ã€‚</p><p>ä¾‹å­</p><pre><code class="BASH">ssh foo@server.example.com cat /etc/hosts</code></pre><p>ä¸Šé¢çš„å‘½ä»¤ä¼šåœ¨ç™»å½•æˆåŠŸåï¼Œç«‹å³è¿œç¨‹æ‰§è¡Œå‘½ä»¤ <code>cat /etc/hosts</code> ã€‚</p><h2 id="sshå‘½ä»¤è¡Œé…ç½®é¡¹"><a href="#sshå‘½ä»¤è¡Œé…ç½®é¡¹" class="headerlink" title="sshå‘½ä»¤è¡Œé…ç½®é¡¹"></a>sshå‘½ä»¤è¡Œé…ç½®é¡¹</h2><h3 id="c-å‚æ•°æŒ‡å®šåŠ å¯†ç®—æ³•ã€‚"><a href="#c-å‚æ•°æŒ‡å®šåŠ å¯†ç®—æ³•ã€‚" class="headerlink" title="-c å‚æ•°æŒ‡å®šåŠ å¯†ç®—æ³•ã€‚"></a><code>-c</code> å‚æ•°æŒ‡å®šåŠ å¯†ç®—æ³•ã€‚</h3><pre><code class="BASH">$ ssh -c blowfish,3des server.example.com# æˆ–è€…$ ssh -c blowfish -c 3des server.example.com</code></pre><p>ä¸Šé¢å‘½ä»¤æŒ‡å®šä½¿ç”¨åŠ å¯†ç®—æ³• <code>blowfish</code> æˆ– <code>3des</code></p><h3 id="C-å‚æ•°è¡¨ç¤ºå‹ç¼©æ•°æ®ä¼ è¾“"><a href="#C-å‚æ•°è¡¨ç¤ºå‹ç¼©æ•°æ®ä¼ è¾“" class="headerlink" title="-C å‚æ•°è¡¨ç¤ºå‹ç¼©æ•°æ®ä¼ è¾“"></a><code>-C</code> å‚æ•°è¡¨ç¤ºå‹ç¼©æ•°æ®ä¼ è¾“</h3><pre><code class="BASH">ssh -C server.example.com</code></pre><h3 id="d-å‚æ•°è®¾ç½®æ‰“å°çš„-debug-ä¿¡æ¯çº§åˆ«ï¼Œæ•°å€¼è¶Šé«˜ï¼Œè¾“å‡ºçš„å†…å®¹è¶Šè¯¦ç»†ã€‚"><a href="#d-å‚æ•°è®¾ç½®æ‰“å°çš„-debug-ä¿¡æ¯çº§åˆ«ï¼Œæ•°å€¼è¶Šé«˜ï¼Œè¾“å‡ºçš„å†…å®¹è¶Šè¯¦ç»†ã€‚" class="headerlink" title="-d å‚æ•°è®¾ç½®æ‰“å°çš„ debug ä¿¡æ¯çº§åˆ«ï¼Œæ•°å€¼è¶Šé«˜ï¼Œè¾“å‡ºçš„å†…å®¹è¶Šè¯¦ç»†ã€‚"></a><code>-d</code> å‚æ•°è®¾ç½®æ‰“å°çš„ debug ä¿¡æ¯çº§åˆ«ï¼Œæ•°å€¼è¶Šé«˜ï¼Œè¾“å‡ºçš„å†…å®¹è¶Šè¯¦ç»†ã€‚</h3><pre><code class="BASH">ssh â€“d 1 foo.com</code></pre><h3 id="D-å‚æ•°æŒ‡å®šæœ¬æœºçš„-Socks-ç›‘å¬ç«¯å£"><a href="#D-å‚æ•°æŒ‡å®šæœ¬æœºçš„-Socks-ç›‘å¬ç«¯å£" class="headerlink" title="-D å‚æ•°æŒ‡å®šæœ¬æœºçš„ Socks ç›‘å¬ç«¯å£"></a><code>-D</code> å‚æ•°æŒ‡å®šæœ¬æœºçš„ Socks ç›‘å¬ç«¯å£</h3><blockquote><p>è¯¥ç«¯å£æ”¶åˆ°çš„è¯·æ±‚ï¼Œéƒ½å°†è½¬å‘åˆ°è¿œç¨‹çš„ SSH ä¸»æœºï¼Œåˆç§°åŠ¨æ€ç«¯å£è½¬å‘</p></blockquote><pre><code class="BASH"> ssh -D 1080 server</code></pre><p>ä¸Šé¢å‘½ä»¤å°†æœ¬æœº 1080 ç«¯å£æ”¶åˆ°çš„è¯·æ±‚ï¼Œéƒ½è½¬å‘åˆ°æœåŠ¡å™¨ <code>server</code></p><h3 id="f-å‚æ•°è¡¨ç¤º-SSH-è¿æ¥åœ¨åå°è¿è¡Œ"><a href="#f-å‚æ•°è¡¨ç¤º-SSH-è¿æ¥åœ¨åå°è¿è¡Œ" class="headerlink" title="-f å‚æ•°è¡¨ç¤º SSH è¿æ¥åœ¨åå°è¿è¡Œ"></a><code>-f</code> å‚æ•°è¡¨ç¤º SSH è¿æ¥åœ¨åå°è¿è¡Œ</h3><h3 id="F-å‚æ•°æŒ‡å®šé…ç½®æ–‡ä»¶"><a href="#F-å‚æ•°æŒ‡å®šé…ç½®æ–‡ä»¶" class="headerlink" title="-F å‚æ•°æŒ‡å®šé…ç½®æ–‡ä»¶"></a><code>-F</code> å‚æ•°æŒ‡å®šé…ç½®æ–‡ä»¶</h3><pre><code class="BASH">ssh -F /usr/local/ssh/other_config</code></pre><p>ä¸Šé¢å‘½ä»¤æŒ‡å®šä½¿ç”¨é…ç½®æ–‡ä»¶ <code>other_config</code></p><h3 id="i-å‚æ•°ç”¨äºæŒ‡å®šç§é’¥"><a href="#i-å‚æ•°ç”¨äºæŒ‡å®šç§é’¥" class="headerlink" title="-i å‚æ•°ç”¨äºæŒ‡å®šç§é’¥"></a><code>-i</code> å‚æ•°ç”¨äºæŒ‡å®šç§é’¥</h3><blockquote><p>æ„ä¸ºâ€œidentity_fileâ€ï¼Œé»˜è®¤å€¼ä¸º~/.ssh/id_dsaã€‚æ³¨æ„ï¼Œå¯¹åº”çš„å…¬é’¥å¿…é¡»å­˜æ”¾åˆ°æœåŠ¡å™¨</p></blockquote><pre><code class="BASH">ssh -i my-key server.example.com</code></pre><h3 id="l-å‚æ•°æŒ‡å®šè¿œç¨‹ç™»å½•çš„è´¦æˆ·å"><a href="#l-å‚æ•°æŒ‡å®šè¿œç¨‹ç™»å½•çš„è´¦æˆ·å" class="headerlink" title="-l å‚æ•°æŒ‡å®šè¿œç¨‹ç™»å½•çš„è´¦æˆ·å"></a><code>-l</code> å‚æ•°æŒ‡å®šè¿œç¨‹ç™»å½•çš„è´¦æˆ·å</h3><pre><code class="BASH">$ ssh -l sally server.example.com# ç­‰åŒäº$ ssh sally@server.example.com</code></pre><h3 id="L-å‚æ•°è®¾ç½®æœ¬åœ°ç«¯å£è½¬å‘"><a href="#L-å‚æ•°è®¾ç½®æœ¬åœ°ç«¯å£è½¬å‘" class="headerlink" title="-L å‚æ•°è®¾ç½®æœ¬åœ°ç«¯å£è½¬å‘"></a><code>-L</code> å‚æ•°è®¾ç½®æœ¬åœ°ç«¯å£è½¬å‘</h3><pre><code class="BASH">ssh  -L 9999:targetServer:80 user@remoteserver</code></pre><p>ä¸Šé¢å‘½ä»¤ä¸­ï¼Œæ‰€æœ‰å‘å‘æœ¬åœ° <code>9999</code> ç«¯å£çš„è¯·æ±‚ï¼Œéƒ½ä¼šç»è¿‡ <code>remoteserver</code> å‘å¾€ <code>targetServer</code> çš„ <code>80</code> ç«¯å£ï¼Œè¿™å°±ç›¸å½“äºç›´æ¥è¿ä¸Šäº† <code>targetServer</code> çš„ <code>80</code> ç«¯å£</p><h3 id="m-å‚æ•°æŒ‡å®šæ ¡éªŒæ•°æ®å®Œæ•´æ€§çš„ç®—æ³•"><a href="#m-å‚æ•°æŒ‡å®šæ ¡éªŒæ•°æ®å®Œæ•´æ€§çš„ç®—æ³•" class="headerlink" title="-m å‚æ•°æŒ‡å®šæ ¡éªŒæ•°æ®å®Œæ•´æ€§çš„ç®—æ³•"></a><code>-m</code> å‚æ•°æŒ‡å®šæ ¡éªŒæ•°æ®å®Œæ•´æ€§çš„ç®—æ³•</h3><pre><code class="BASH">ssh -m hmac-sha1,hmac-md5 server.example.com</code></pre><p>ä¸Šé¢å‘½ä»¤æŒ‡å®šæ•°æ®æ ¡éªŒç®—æ³•ä¸º <code>hmac-sha1</code> æˆ– <code>hmac-md5</code></p><h3 id="o-å‚æ•°ç”¨æ¥æŒ‡å®šä¸€ä¸ªé…ç½®å‘½ä»¤"><a href="#o-å‚æ•°ç”¨æ¥æŒ‡å®šä¸€ä¸ªé…ç½®å‘½ä»¤" class="headerlink" title="-o å‚æ•°ç”¨æ¥æŒ‡å®šä¸€ä¸ªé…ç½®å‘½ä»¤"></a><code>-o</code> å‚æ•°ç”¨æ¥æŒ‡å®šä¸€ä¸ªé…ç½®å‘½ä»¤</h3><pre><code class="BASH">ssh -o "Keyword Value"</code></pre><p>ä¸¾ä¾‹æ¥è¯´ï¼Œé…ç½®æ–‡ä»¶é‡Œé¢æœ‰å¦‚ä¸‹å†…å®¹ã€‚</p><pre><code class="BASH">User sallyPort 220</code></pre><p>é€šè¿‡ <code>-o</code> å‚æ•°ï¼Œå¯ä»¥æŠŠä¸Šé¢ä¸¤ä¸ªé…ç½®å‘½ä»¤ä»å‘½ä»¤è¡Œä¼ å…¥ã€‚</p><pre><code class="BASH">ssh -o "User sally" -o "Port 220" server.example.com</code></pre><p>ä½¿ç”¨ç­‰å·æ—¶ï¼Œé…ç½®å‘½ä»¤å¯ä»¥ä¸ç”¨å†™åœ¨å¼•å·é‡Œé¢ï¼Œä½†æ˜¯ç­‰å·å‰åä¸èƒ½æœ‰ç©ºæ ¼</p><pre><code class="BASH">ssh -o User=sally -o Port=220 server.example.com</code></pre><h3 id="p-å‚æ•°æŒ‡å®š-SSH-å®¢æˆ·ç«¯è¿æ¥çš„æœåŠ¡å™¨ç«¯å£"><a href="#p-å‚æ•°æŒ‡å®š-SSH-å®¢æˆ·ç«¯è¿æ¥çš„æœåŠ¡å™¨ç«¯å£" class="headerlink" title="-p å‚æ•°æŒ‡å®š SSH å®¢æˆ·ç«¯è¿æ¥çš„æœåŠ¡å™¨ç«¯å£"></a><code>-p</code> å‚æ•°æŒ‡å®š SSH å®¢æˆ·ç«¯è¿æ¥çš„æœåŠ¡å™¨ç«¯å£</h3><pre><code class="BASH">ssh -p 2035 server.example.com</code></pre><p>ä¸Šé¢å‘½ä»¤è¿æ¥æœåŠ¡å™¨çš„2035ç«¯å£</p><h3 id="q-å‚æ•°è¡¨ç¤ºå®‰é™æ¨¡å¼ï¼ˆquietï¼‰ï¼Œä¸å‘ç”¨æˆ·è¾“å‡ºä»»ä½•è­¦å‘Šä¿¡æ¯"><a href="#q-å‚æ•°è¡¨ç¤ºå®‰é™æ¨¡å¼ï¼ˆquietï¼‰ï¼Œä¸å‘ç”¨æˆ·è¾“å‡ºä»»ä½•è­¦å‘Šä¿¡æ¯" class="headerlink" title="-q å‚æ•°è¡¨ç¤ºå®‰é™æ¨¡å¼ï¼ˆquietï¼‰ï¼Œä¸å‘ç”¨æˆ·è¾“å‡ºä»»ä½•è­¦å‘Šä¿¡æ¯"></a><code>-q</code> å‚æ•°è¡¨ç¤ºå®‰é™æ¨¡å¼ï¼ˆquietï¼‰ï¼Œä¸å‘ç”¨æˆ·è¾“å‡ºä»»ä½•è­¦å‘Šä¿¡æ¯</h3><pre><code class="BASH">ssh â€“q foo.comrootâ€™s password:</code></pre><p>ä¸Šé¢å‘½ä»¤ä½¿ç”¨ <code>-q</code> å‚æ•°ï¼Œåªè¾“å‡ºè¦æ±‚ç”¨æˆ·è¾“å…¥å¯†ç çš„æç¤º</p><h3 id="R-å‚æ•°æŒ‡å®šè¿œç¨‹ç«¯å£è½¬å‘"><a href="#R-å‚æ•°æŒ‡å®šè¿œç¨‹ç«¯å£è½¬å‘" class="headerlink" title="-R å‚æ•°æŒ‡å®šè¿œç¨‹ç«¯å£è½¬å‘"></a><code>-R</code> å‚æ•°æŒ‡å®šè¿œç¨‹ç«¯å£è½¬å‘</h3><pre><code class="BASH">ssh -R 9999:targetServer:902 local</code></pre><p>ä¸Šé¢å‘½ä»¤éœ€åœ¨è·³æ¿æœåŠ¡å™¨æ‰§è¡Œï¼ŒæŒ‡å®šæœ¬åœ°è®¡ç®—æœº <code>local</code> ç›‘å¬è‡ªå·±çš„ 9999 ç«¯å£ï¼Œæ‰€æœ‰å‘å‘è¿™ä¸ªç«¯å£çš„è¯·æ±‚ï¼Œéƒ½ä¼šè½¬å‘ targetServer çš„ 902 ç«¯å£</p><h3 id="t-å‚æ•°åœ¨-ssh-ç›´æ¥è¿è¡Œè¿œç«¯å‘½ä»¤æ—¶ï¼Œæä¾›ä¸€ä¸ªäº’åŠ¨å¼-Shell"><a href="#t-å‚æ•°åœ¨-ssh-ç›´æ¥è¿è¡Œè¿œç«¯å‘½ä»¤æ—¶ï¼Œæä¾›ä¸€ä¸ªäº’åŠ¨å¼-Shell" class="headerlink" title="-t å‚æ•°åœ¨ ssh ç›´æ¥è¿è¡Œè¿œç«¯å‘½ä»¤æ—¶ï¼Œæä¾›ä¸€ä¸ªäº’åŠ¨å¼ Shell"></a><code>-t</code> å‚æ•°åœ¨ ssh ç›´æ¥è¿è¡Œè¿œç«¯å‘½ä»¤æ—¶ï¼Œæä¾›ä¸€ä¸ªäº’åŠ¨å¼ Shell</h3><pre><code class="BASH">ssh -t server.example.com emacs</code></pre><h3 id="v-å‚æ•°æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯"><a href="#v-å‚æ•°æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯" class="headerlink" title="-v å‚æ•°æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯"></a><code>-v</code> å‚æ•°æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</h3><pre><code class="BASH">ssh -v server.example.com</code></pre><p><code>-v</code> å¯ä»¥é‡å¤å¤šæ¬¡ï¼Œè¡¨ç¤ºä¿¡æ¯çš„è¯¦ç»†ç¨‹åº¦ï¼Œæ¯”å¦‚ <code>-vv</code> å’Œ <code>-vvv</code></p><pre><code class="BASH">$ ssh -vvv server.example.com# æˆ–è€…$ ssh -v -v -v server.example.com</code></pre><p>ä¸Šé¢å‘½ä»¤ä¼šè¾“å‡ºæœ€è¯¦ç»†çš„è¿æ¥ä¿¡æ¯</p><h3 id="V-å‚æ•°è¾“å‡º-ssh-å®¢æˆ·ç«¯çš„ç‰ˆæœ¬"><a href="#V-å‚æ•°è¾“å‡º-ssh-å®¢æˆ·ç«¯çš„ç‰ˆæœ¬" class="headerlink" title="-V å‚æ•°è¾“å‡º ssh å®¢æˆ·ç«¯çš„ç‰ˆæœ¬"></a><code>-V</code> å‚æ•°è¾“å‡º ssh å®¢æˆ·ç«¯çš„ç‰ˆæœ¬</h3><pre><code class="BASH">$ ssh â€“Vssh: SSH Secure Shell 3.2.3 (non-commercial version) on i686-pc-linux-gnu</code></pre><p>ä¸Šé¢å‘½ä»¤è¾“å‡ºæœ¬æœº ssh å®¢æˆ·ç«¯ç‰ˆæœ¬æ˜¯ <code>SSH Secure Shell 3.2.3</code></p><h3 id="X-å‚æ•°è¡¨ç¤ºæ‰“å¼€-X-çª—å£è½¬å‘"><a href="#X-å‚æ•°è¡¨ç¤ºæ‰“å¼€-X-çª—å£è½¬å‘" class="headerlink" title="-X å‚æ•°è¡¨ç¤ºæ‰“å¼€ X çª—å£è½¬å‘"></a><code>-X</code> å‚æ•°è¡¨ç¤ºæ‰“å¼€ X çª—å£è½¬å‘</h3><pre><code class="BASH">ssh -X server.example.com</code></pre><h3 id="1-2å‚æ•°æŒ‡å®šä½¿ç”¨-SSH1-SSH2-åè®®ã€‚"><a href="#1-2å‚æ•°æŒ‡å®šä½¿ç”¨-SSH1-SSH2-åè®®ã€‚" class="headerlink" title="-1, -2å‚æ•°æŒ‡å®šä½¿ç”¨ SSH1, SSH2 åè®®ã€‚"></a>-1, -2å‚æ•°æŒ‡å®šä½¿ç”¨ SSH1, SSH2 åè®®ã€‚</h3><pre><code class="BASH">ssh -2 server.example.com</code></pre><h3 id="4-æŒ‡å®šä½¿ç”¨-IPv4-åè®®ï¼Œè¿™æ˜¯é»˜è®¤å€¼"><a href="#4-æŒ‡å®šä½¿ç”¨-IPv4-åè®®ï¼Œè¿™æ˜¯é»˜è®¤å€¼" class="headerlink" title="-4 æŒ‡å®šä½¿ç”¨ IPv4 åè®®ï¼Œè¿™æ˜¯é»˜è®¤å€¼"></a><code>-4</code> æŒ‡å®šä½¿ç”¨ IPv4 åè®®ï¼Œè¿™æ˜¯é»˜è®¤å€¼</h3><pre><code class="BASH">ssh -4 server.example.com</code></pre><h3 id="6-æŒ‡å®šä½¿ç”¨-IPv6-åè®®"><a href="#6-æŒ‡å®šä½¿ç”¨-IPv6-åè®®" class="headerlink" title="-6 æŒ‡å®šä½¿ç”¨ IPv6 åè®®"></a><code>-6</code> æŒ‡å®šä½¿ç”¨ IPv6 åè®®</h3><pre><code class="BASH">ssh -6 server.example.com</code></pre>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SSH </tag>
            
            <tag> Linux </tag>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®æœåŠ¡ç¼“å­˜åŸç†ä¸æœ€ä½³å®è·µ</title>
      <link href="/My-Blogs/2021/01/08/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/%E7%BC%93%E5%AD%98/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/"/>
      <url>/My-Blogs/2021/01/08/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/%E7%BC%93%E5%AD%98/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/</url>
      
        <content type="html"><![CDATA[<p>æ–‡ç« ä¸»è¦ä»‹ç»äº†åˆ†å¸ƒå¼æ¶æ„é‡Œçš„å¾®æœåŠ¡ç¼“å­˜åŸç†ä¸æœ€ä½³å®è·µï¼Œä¸‹é¢è®©æˆ‘ä»¬æ¥ä¸€èµ·çœ‹çœ‹å§</p><a id="more"></a><h2 id="ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿ</h2><ol><li><p> ç¨‹åºå­˜å‚¨åœ¨ <code>disk</code> ä¸­</p></li><li><p> ç¨‹åºæ˜¯è¿è¡Œåœ¨ <code>RAM</code> ä¹‹ä¸­ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„ <code>main memory</code></p></li><li><p> ç¨‹åºçš„è®¡ç®—é€»è¾‘åœ¨ <code>CPU</code> ä¸­æ‰§è¡Œ</p></li></ol><p>æ¥çœ‹ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼š <code>a = a + 1</code></p><ol><li><p> <code>load x:</code></p></li><li><p> <code>x0 = x0 + 1</code></p></li><li><p> <code>load x0 -&gt; RAM</code></p></li></ol><p><img src="/My-Blogs/images/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5-01.png" alt="img"></p><p>ä¸Šé¢æåˆ°äº†3ç§å­˜å‚¨ä»‹è´¨ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œä¸‰ç±»çš„è¯»å†™é€Ÿåº¦å’Œæˆæœ¬æˆåæ¯”ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å…‹æœé€Ÿåº¦é—®é¢˜ä¸Šéœ€è¦å¼•å…¥ä¸€ä¸ª ä¸­é—´å±‚ã€‚è¿™ä¸ªä¸­é—´å±‚ï¼Œéœ€è¦é«˜é€Ÿå­˜å–çš„é€Ÿåº¦ï¼Œä½†æ˜¯æˆæœ¬å¯æ¥å—ã€‚äºæ˜¯ä¹, <code>Cache</code> è¢«å¼•å…¥</p><p><img src="/My-Blogs/images/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5-02.png" alt="img"></p><p>è€Œåœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œæœ‰ä¸¤ç§é»˜è®¤ç¼“å­˜ï¼š</p><p>CPU é‡Œé¢çš„æœ«çº§ç¼“å­˜ï¼Œå³ <code>LLC</code> ã€‚ç¼“å­˜å†…å­˜ä¸­çš„æ•°æ®</p><p>å†…å­˜ä¸­çš„é«˜é€Ÿé¡µç¼“å­˜ï¼Œå³ <code>page cache</code> ã€‚ç¼“å­˜ç£ç›˜ä¸­çš„æ•°æ®</p><h2 id="ç¼“å­˜è¯»å†™ç­–ç•¥"><a href="#ç¼“å­˜è¯»å†™ç­–ç•¥" class="headerlink" title="ç¼“å­˜è¯»å†™ç­–ç•¥"></a>ç¼“å­˜è¯»å†™ç­–ç•¥</h2><p>å¼•å…¥ <code>Cache</code> ä¹‹åï¼Œæˆ‘ä»¬ç»§ç»­æ¥çœ‹çœ‹æ“ä½œç¼“å­˜ä¼šå‘ç”Ÿä»€ä¹ˆã€‚å› ä¸ºå­˜åœ¨å­˜å–é€Ÿåº¦çš„å·®å¼‚ã€Œè€Œä¸”å·®å¼‚å¾ˆå¤§ã€ï¼Œä»è€Œåœ¨æ“ä½œæ•°æ®æ—¶ï¼Œå»¶è¿Ÿæˆ–ç¨‹åºå¤±è´¥ç­‰éƒ½ä¼šå¯¼è‡´ç¼“å­˜å’Œå®é™…å­˜å‚¨å±‚æ•°æ®ä¸ä¸€è‡´ã€‚</p><p>æˆ‘ä»¬å°±ä»¥æ ‡å‡†çš„ <code>Cache+DB</code> æ¥çœ‹çœ‹ç»å…¸è¯»å†™ç­–ç•¥å’Œåº”ç”¨åœºæ™¯ã€‚</p><h3 id="Cache-Aside"><a href="#Cache-Aside" class="headerlink" title="Cache Aside"></a>Cache Aside</h3><p>å…ˆæ¥è€ƒè™‘ä¸€ç§æœ€ç®€å•çš„ä¸šåŠ¡åœºæ™¯ï¼Œæ¯”å¦‚ç”¨æˆ·è¡¨: <code>userId</code> : ç”¨æˆ·id, <code>phone</code> : ç”¨æˆ·ç”µè¯token, <code>avtoar</code> : ç”¨æˆ·å¤´åƒurlï¼Œç¼“å­˜ä¸­æˆ‘ä»¬ç”¨ <code>phone</code> ä½œä¸ºkeyå­˜å‚¨ç”¨æˆ·å¤´åƒã€‚å½“ç”¨æˆ·ä¿®æ”¹å¤´åƒurlè¯¥å¦‚ä½•åšï¼Ÿ</p><p>æ›´æ–°DBæ•°æ®ï¼Œå†æ›´æ–° <code>Cache</code> æ•°æ®</p><p>æ›´æ–° DB æ•°æ®ï¼Œå†åˆ é™¤ <code>Cache</code> æ•°æ®</p><p>é¦–å…ˆ å˜æ›´æ•°æ®åº“ å’Œ å˜æ›´ç¼“å­˜ æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„æ“ä½œï¼Œè€Œæˆ‘ä»¬å¹¶æ²¡æœ‰å¯¹æ“ä½œåšä»»ä½•çš„å¹¶å‘æ§åˆ¶ã€‚é‚£ä¹ˆå½“ä¸¤ä¸ªçº¿ç¨‹å¹¶å‘æ›´æ–°å®ƒä»¬çš„æ—¶å€™ï¼Œå°±ä¼šå› ä¸ºå†™å…¥é¡ºåºçš„ä¸åŒé€ æˆæ•°æ®ä¸ä¸€è‡´ã€‚</p><p>æ‰€ä»¥æ›´å¥½çš„æ–¹æ¡ˆæ˜¯ <code>2</code> :</p><p>æ›´æ–°æ•°æ®æ—¶ä¸æ›´æ–°ç¼“å­˜ï¼Œè€Œæ˜¯ç›´æ¥åˆ é™¤ç¼“å­˜</p><p>åç»­çš„è¯·æ±‚å‘ç°ç¼“å­˜ç¼ºå¤±ï¼Œå›å»æŸ¥è¯¢ <code>DB</code> ï¼Œå¹¶å°†ç»“æœ <code>load cache</code></p><p><img src="/My-Blogs/images/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5-03.png" alt="img"></p><p>è¿™ä¸ªç­–ç•¥å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨ç¼“å­˜æœ€å¸¸è§çš„ç­–ç•¥: <code>Cache Aside</code> ã€‚è¿™ä¸ªç­–ç•¥æ•°æ®ä»¥æ•°æ®åº“ä¸­çš„æ•°æ®ä¸ºå‡†ï¼Œç¼“å­˜ä¸­çš„æ•°æ®æ˜¯æŒ‰éœ€åŠ è½½çš„ï¼Œåˆ†ä¸ºè¯»ç­–ç•¥å’Œå†™ç­–ç•¥ã€‚</p><p>ä½†æ˜¯å¯è§çš„é—®é¢˜ä¹Ÿå°±å‡ºç°äº†ï¼šé¢‘ç¹çš„è¯»å†™æ“ä½œä¼šå¯¼è‡´ <code>Cache</code> åå¤åœ°æ›¿æ¢ï¼Œç¼“å­˜å‘½ä¸­ç‡é™ä½ã€‚å½“ç„¶å¦‚æœåœ¨ä¸šåŠ¡ä¸­å¯¹å‘½ä¸­ç‡æœ‰ç›‘æ§æŠ¥è­¦æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹æ–¹æ¡ˆï¼š</p><ol><li><p> æ›´æ–°æ•°æ®æ—¶åŒæ—¶æ›´æ–°ç¼“å­˜ï¼Œä½†æ˜¯åœ¨æ›´æ–°ç¼“å­˜å‰åŠ ä¸€ä¸ª åˆ†å¸ƒå¼é”ã€‚è¿™æ ·åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ“ä½œç¼“å­˜ï¼Œè§£å†³äº†å¹¶å‘é—®é¢˜ã€‚åŒæ—¶åœ¨åç»­è¯»è¯·æ±‚ä¸­æ—¶è¯»åˆ°æœ€æ–°çš„ç¼“å­˜ï¼Œè§£å†³äº†ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p></li><li><p> æ›´æ–°æ•°æ®æ—¶åŒæ—¶æ›´æ–°ç¼“å­˜ï¼Œä½†æ˜¯ç»™ç¼“å­˜ä¸€ä¸ªè¾ƒçŸ­çš„ <code>TTL</code>ã€‚</p></li></ol><p>å½“ç„¶é™¤äº†è¿™ä¸ªç­–ç•¥ï¼Œåœ¨è®¡ç®—æœºä½“ç³»è¿˜æœ‰å…¶ä»–å‡ ç§ç»å…¸çš„ç¼“å­˜ç­–ç•¥ï¼Œå®ƒä»¬ä¹Ÿæœ‰å„è‡ªé€‚ç”¨çš„ä½¿ç”¨åœºæ™¯ã€‚</p><h3 id="Write-Through"><a href="#Write-Through" class="headerlink" title="Write Through"></a>Write Through</h3><p>å…ˆæŸ¥è¯¢å†™å…¥æ•°æ®keyæ˜¯å¦å‡»ä¸­ç¼“å­˜ï¼Œå¦‚æœåœ¨ -&gt; æ›´æ–°ç¼“å­˜ï¼ŒåŒæ—¶ç¼“å­˜ç»„ä»¶åŒæ­¥æ•°æ®è‡³DBï¼›ä¸å­˜åœ¨ï¼Œåˆ™è§¦å‘ Â·ã€‚</p><p>è€Œä¸€èˆ¬ Â· æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><p><code>Write Allocate</code> ï¼šå†™æ—¶ç›´æ¥åˆ†é… <code>Cache line</code></p><p><code>No-write allocate</code> ï¼šå†™æ—¶ä¸å†™å…¥ç¼“å­˜ï¼Œç›´æ¥å†™å…¥DBï¼Œreturn</p><p>åœ¨ <code>Write Through</code> ä¸­ï¼Œä¸€èˆ¬é‡‡å– <code>No-write allocate</code> ã€‚å› ä¸ºå…¶å®æ— è®ºå“ªç§ï¼Œæœ€ç»ˆæ•°æ®éƒ½ä¼šæŒä¹…åŒ–åˆ°DBä¸­ï¼Œçœå»ä¸€æ­¥ç¼“å­˜çš„å†™å…¥ï¼Œæå‡å†™æ€§èƒ½ã€‚è€Œç¼“å­˜ç”± <code>Read Through</code> å†™å…¥ç¼“å­˜ã€‚</p><p><img src="/My-Blogs/images/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5-04.png" alt="img"></p><p>è¿™ä¸ªç­–ç•¥çš„æ ¸å¿ƒåŸåˆ™ï¼š<strong>ç”¨æˆ·åªä¸ç¼“å­˜æ‰“äº¤é“ï¼Œç”±ç¼“å­˜ç»„ä»¶å’ŒDBé€šä¿¡ï¼Œå†™å…¥æˆ–è€…è¯»å–æ•°æ®</strong>ã€‚åœ¨ä¸€äº›æœ¬åœ°è¿›ç¨‹ç¼“å­˜ç»„ä»¶å¯ä»¥è€ƒè™‘è¿™ç§ç­–ç•¥ã€‚</p><h3 id="Write-Back"><a href="#Write-Back" class="headerlink" title="Write Back"></a>Write Back</h3><p>ç›¸ä¿¡ä½ ä¹Ÿçœ‹å‡ºä¸Šè¿°æ–¹æ¡ˆçš„ç¼ºé™·ï¼šå†™æ•°æ®æ—¶ç¼“å­˜å’Œæ•°æ®åº“åŒæ­¥ï¼Œä½†æ˜¯æˆ‘ä»¬çŸ¥é“è¿™ä¸¤å—å­˜å‚¨ä»‹è´¨çš„é€Ÿåº¦å·®å‡ ä¸ªæ•°é‡çº§ï¼Œå¯¹å†™å…¥æ€§èƒ½æ˜¯æœ‰å¾ˆå¤§å½±å“ã€‚é‚£æˆ‘ä»¬æ˜¯å¦å¼‚æ­¥æ›´æ–°æ•°æ®åº“ï¼Ÿ</p><p><code>Write back</code> å°±æ˜¯åœ¨å†™æ•°æ®æ—¶åªæ›´æ–°è¯¥ Cache Line å¯¹åº”çš„æ•°æ®ï¼Œå¹¶æŠŠè¯¥è¡Œæ ‡è®°ä¸º Dirtyã€‚åœ¨è¯»æ•°æ®æ—¶æˆ–æ˜¯åœ¨ç¼“å­˜æ»¡æ—¶æ¢å‡ºã€Œç¼“å­˜æ›¿æ¢ç­–ç•¥ã€æ—¶ï¼Œå°† Dirty å†™å…¥å­˜å‚¨ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåœ¨ <code>Write Miss</code> æƒ…å†µä¸‹ï¼Œé‡‡å–çš„æ˜¯ <code>Write Allocate</code> ï¼Œå³å†™å…¥å­˜å‚¨åŒæ—¶å†™å…¥ç¼“å­˜ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨ä¹‹åçš„å†™è¯·æ±‚åªéœ€è¦æ›´æ–°ç¼“å­˜ã€‚</p><p><img src="/My-Blogs/images/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5-05.png" alt="img"></p><blockquote><p><code>async purge</code> æ­¤ç±»æ¦‚å¿µå…¶å®å­˜åœ¨è®¡ç®—æœºä½“ç³»ä¸­ã€‚ <code>Mysql</code> ä¸­åˆ·è„é¡µï¼Œæœ¬è´¨éƒ½æ˜¯å°½å¯èƒ½é˜²æ­¢éšæœºå†™ï¼Œç»Ÿä¸€å†™ç£ç›˜æ—¶æœºã€‚</p></blockquote><h2 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h2><p><code>Redis</code> æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç³»ç»Ÿè½¯ä»¶ï¼Œå’Œæˆ‘ä»¬å†™çš„ä¸šåŠ¡ç¨‹åºæ˜¯ä¸¤ä¸ªè½¯ä»¶ã€‚å½“æˆ‘ä»¬éƒ¨ç½²äº†Redis å®ä¾‹åï¼Œå®ƒåªä¼šè¢«åŠ¨åœ°ç­‰å¾…å®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼Œç„¶åå†è¿›è¡Œå¤„ç†ã€‚æ‰€ä»¥ï¼Œå¦‚æœåº”ç”¨ç¨‹åºæƒ³è¦ä½¿ç”¨ Redis ç¼“å­˜ï¼Œæˆ‘ä»¬å°±è¦åœ¨ç¨‹åºä¸­å¢åŠ ç›¸åº”çš„ç¼“å­˜æ“ä½œä»£ç ã€‚æ‰€ä»¥æˆ‘ä»¬ä¹ŸæŠŠ <code>Redis</code> ç§°ä¸º <strong>æ—è·¯ç¼“å­˜</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼šè¯»å–ç¼“å­˜ã€è¯»å–æ•°æ®åº“å’Œæ›´æ–°ç¼“å­˜çš„æ“ä½œéƒ½éœ€è¦åœ¨åº”ç”¨ç¨‹åºä¸­æ¥å®Œæˆã€‚</p><p>è€Œä½œä¸ºç¼“å­˜çš„ <code>Redis</code> ï¼ŒåŒæ ·éœ€è¦é¢ä¸´å¸¸è§çš„é—®é¢˜ï¼š</p><ul><li><p>ç¼“å­˜çš„å®¹é‡ç»ˆç©¶æœ‰é™</p></li><li><p>ä¸Šæ¸¸å¹¶å‘è¯·æ±‚å†²å‡»</p></li><li><p>ç¼“å­˜ä¸åç«¯å­˜å‚¨æ•°æ®ä¸€è‡´æ€§</p></li></ul><h3 id="æ›¿æ¢ç­–ç•¥"><a href="#æ›¿æ¢ç­–ç•¥" class="headerlink" title="æ›¿æ¢ç­–ç•¥"></a>æ›¿æ¢ç­–ç•¥</h3><p>ä¸€èˆ¬æ¥è¯´ï¼Œç¼“å­˜å¯¹äºé€‰å®šçš„è¢«æ·˜æ±°æ•°æ®ï¼Œä¼šæ ¹æ®å…¶æ˜¯å¹²å‡€æ•°æ®è¿˜æ˜¯è„æ•°æ®ï¼Œé€‰æ‹©ç›´æ¥åˆ é™¤è¿˜æ˜¯å†™å›æ•°æ®åº“ã€‚ä½†æ˜¯ï¼Œåœ¨ Redis ä¸­ï¼Œè¢«æ·˜æ±°æ•°æ®æ— è®ºå¹²å‡€ä¸å¦éƒ½ä¼šè¢«åˆ é™¤ï¼Œæ‰€ä»¥ï¼Œè¿™æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨ Redis ç¼“å­˜æ—¶è¦ç‰¹åˆ«æ³¨æ„çš„ï¼šå½“æ•°æ®ä¿®æ”¹æˆä¸ºè„æ•°æ®æ—¶ï¼Œéœ€è¦åœ¨æ•°æ®åº“ä¸­ä¹ŸæŠŠæ•°æ®ä¿®æ”¹è¿‡æ¥ã€‚</p><p>æ‰€ä»¥ä¸ç®¡æ›¿æ¢ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Œè„æ•°æ®æœ‰å¯èƒ½åœ¨æ¢å…¥æ¢å‡ºä¸­ä¸¢å¤±ã€‚é‚£æˆ‘ä»¬åœ¨äº§ç”Ÿè„æ•°æ®å°±åº”è¯¥åˆ é™¤ç¼“å­˜ï¼Œè€Œä¸æ˜¯æ›´æ–°ç¼“å­˜ï¼Œä¸€åˆ‡æ•°æ®åº”è¯¥ä»¥æ•°æ®åº“ä¸ºå‡†ã€‚è¿™ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œç¼“å­˜å†™å…¥åº”è¯¥äº¤ç»™è¯»è¯·æ±‚æ¥å®Œæˆï¼›å†™è¯·æ±‚å°½å¯èƒ½ä¿è¯æ•°æ®ä¸€è‡´æ€§ã€‚</p><p>è‡³äºæ›¿æ¢ç­–ç•¥æœ‰å“ªäº›ï¼Œç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šæ–‡ç« å½’çº³ä¹‹é—´çš„ä¼˜åŠ£ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚</p><h2 id="ç¼“å­˜å’Œå­˜å‚¨æ›´æ–°é¡ºåº"><a href="#ç¼“å­˜å’Œå­˜å‚¨æ›´æ–°é¡ºåº" class="headerlink" title="ç¼“å­˜å’Œå­˜å‚¨æ›´æ–°é¡ºåº"></a>ç¼“å­˜å’Œå­˜å‚¨æ›´æ–°é¡ºåº</h2><p>è¿™æ˜¯å¼€å‘ä¸­å¸¸è§çº ç»“é—®é¢˜ï¼š<strong>åˆ°åº•æ˜¯å…ˆåˆ é™¤ç¼“å­˜è¿˜æ˜¯å…ˆæ›´æ–°å­˜å‚¨</strong>ï¼Ÿ</p><blockquote><p>æƒ…å†µä¸€ï¼šå…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ›´æ–°å­˜å‚¨ï¼›</p><ul><li>A åˆ é™¤ç¼“å­˜ï¼Œæ›´æ–°å­˜å‚¨æ—¶ç½‘ç»œå»¶è¿Ÿ</li><li>B è¯»è¯·æ±‚ï¼Œå‘ç°ç¼“å­˜ç¼ºå¤±ï¼Œè¯»å­˜å‚¨ -&gt; æ­¤æ—¶è¯»åˆ°æ—§æ•°æ®</li></ul></blockquote><p>è¿™æ ·ä¼šäº§ç”Ÿä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li>B è¯»å–æ—§å€¼</li><li>B åŒæ—¶è¯»è¯·æ±‚ä¼šæŠŠæ—§å€¼å†™å…¥ç¼“å­˜ï¼Œå¯¼è‡´åç»­è¯»è¯·æ±‚è¯»åˆ°æ—§å€¼</li></ul><p>æ—¢ç„¶æ˜¯ç¼“å­˜å¯èƒ½æ˜¯æ—§å€¼ï¼Œé‚£å°±ä¸ç®¡åˆ é™¤ã€‚æœ‰ä¸€ä¸ªå¹¶ä¸ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼š<strong>åœ¨å†™è¯·æ±‚æ›´æ–°å®Œå­˜å‚¨å€¼ä»¥å</strong>ï¼Œ <code>sleep()</code> <strong>ä¸€å°æ®µæ—¶é—´ï¼Œå†è¿›è¡Œä¸€æ¬¡ç¼“å­˜åˆ é™¤æ“ä½œ</strong>ã€‚</p><p><code>sleep</code> æ˜¯ä¸ºäº†ç¡®ä¿è¯»è¯·æ±‚ç»“æŸï¼Œå†™è¯·æ±‚å¯ä»¥åˆ é™¤è¯»è¯·æ±‚é€ æˆçš„ç¼“å­˜è„æ•°æ®ï¼Œå½“ç„¶ä¹Ÿè¦è€ƒè™‘åˆ° redis ä¸»ä»åŒæ­¥çš„è€—æ—¶ã€‚ä¸è¿‡è¿˜æ˜¯è¦æ ¹æ®å®é™…ä¸šåŠ¡è€Œå®šã€‚</p><p>è¿™ä¸ªæ–¹æ¡ˆä¼šåœ¨ç¬¬ä¸€æ¬¡åˆ é™¤ç¼“å­˜å€¼åï¼Œå»¶è¿Ÿä¸€æ®µæ—¶é—´å†æ¬¡è¿›è¡Œåˆ é™¤ï¼Œè¢«ç§°ä¸ºï¼š <code>å»¶è¿ŸåŒåˆ </code> ã€‚</p><blockquote><p>æƒ…å†µäºŒï¼šå…ˆæ›´æ–°æ•°æ®åº“å€¼ï¼Œå†åˆ é™¤ç¼“å­˜å€¼ï¼š</p><ul><li>A åˆ é™¤å­˜å‚¨å€¼ï¼Œä½†æ˜¯åˆ é™¤ç¼“å­˜ç½‘ç»œå»¶è¿Ÿ</li><li>B è¯»è¯·æ±‚æ—¶ï¼Œç¼“å­˜å‡»ä¸­ï¼Œå°±ç›´æ¥è¿”å›æ—§å€¼</li></ul></blockquote><p>è¿™ç§æƒ…å†µå¯¹ä¸šåŠ¡çš„å½±å“è¾ƒå°ï¼Œè€Œç»å¤§å¤šæ•°ç¼“å­˜ç»„ä»¶éƒ½æ˜¯é‡‡å–æ­¤ç§æ›´æ–°é¡ºåºï¼Œæ»¡è¶³æœ€ç»ˆä¸€è‡´æ€§è¦æ±‚ã€‚</p><blockquote><p>æƒ…å†µä¸‰ï¼šæ–°ç”¨æˆ·æ³¨å†Œï¼Œç›´æ¥å†™å…¥æ•°æ®åº“ï¼ŒåŒæ—¶ç¼“å­˜ä¸­è‚¯å®šæ²¡æœ‰ã€‚å¦‚æœç¨‹åºæ­¤æ—¶è¯»ä»åº“ï¼Œç”±äºä¸»ä»å»¶è¿Ÿï¼Œå¯¼è‡´è¯»å–ä¸åˆ°ç”¨æˆ·æ•°æ®ã€‚</p></blockquote><p>è¿™ç§æƒ…å†µå°±éœ€è¦é’ˆå¯¹ Insert è¿™ç§æ“ä½œï¼šæ’å…¥æ–°æ•°æ®å…¥æ•°æ®åº“åŒæ—¶å†™ç¼“å­˜ã€‚ä½¿å¾—åç»­è¯»è¯·æ±‚å¯ä»¥ç›´æ¥è¯»ç¼“å­˜ï¼ŒåŒæ—¶å› ä¸ºæ˜¯åˆšæ’å…¥çš„æ–°æ•°æ®ï¼Œåœ¨ä¸€æ®µæ—¶é—´ä¿®æ”¹çš„å¯èƒ½æ€§ä¸å¤§ã€‚</p><p><strong>ä»¥ä¸Šæ–¹æ¡ˆåœ¨å¤æ‚çš„æƒ…å†µæˆ–å¤šæˆ–å°‘éƒ½æœ‰æ½œåœ¨é—®é¢˜ï¼Œéœ€è¦è´´åˆä¸šåŠ¡åšå…·ä½“çš„ä¿®æ”¹ã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼æ¶æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†å¸ƒå¼æ¶æ„ </tag>
            
            <tag> ç¼“å­˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¶æ„ä¸‰é«˜æ€»ç»“</title>
      <link href="/My-Blogs/2021/01/08/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/%E6%A6%82%E5%BF%B5/%E6%9E%B6%E6%9E%84%E4%B8%89%E9%AB%98%E6%80%BB%E7%BB%93/"/>
      <url>/My-Blogs/2021/01/08/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/%E6%A6%82%E5%BF%B5/%E6%9E%B6%E6%9E%84%E4%B8%89%E9%AB%98%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>é’ˆå¯¹é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€é«˜æ‰©å±•3ä¸ªæ–¹é¢ï¼Œç½—åˆ—å‡ºéœ€è¦æ³¨æ„çš„ç‚¹ã€‚</p><a id="more"></a><h3 id="ä¸€ã€é«˜æ€§èƒ½çš„å®è·µæ–¹æ¡ˆ"><a href="#ä¸€ã€é«˜æ€§èƒ½çš„å®è·µæ–¹æ¡ˆ" class="headerlink" title="ä¸€ã€é«˜æ€§èƒ½çš„å®è·µæ–¹æ¡ˆ"></a>ä¸€ã€é«˜æ€§èƒ½çš„å®è·µæ–¹æ¡ˆ</h3><p>1ã€é›†ç¾¤éƒ¨ç½²ï¼Œé€šè¿‡è´Ÿè½½å‡è¡¡å‡è½»å•æœºå‹åŠ›ã€‚</p><p>2ã€å¤šçº§ç¼“å­˜ï¼ŒåŒ…æ‹¬é™æ€æ•°æ®ä½¿ç”¨CDNã€æœ¬åœ°ç¼“å­˜ã€åˆ†å¸ƒå¼ç¼“å­˜ç­‰ï¼Œä»¥åŠå¯¹ç¼“å­˜åœºæ™¯ä¸­çš„çƒ­ç‚¹keyã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜å¹¶å‘ã€æ•°æ®ä¸€è‡´æ€§ç­‰é—®é¢˜çš„å¤„ç†ã€‚</p><p>3ã€åˆ†åº“åˆ†è¡¨å’Œç´¢å¼•ä¼˜åŒ–ï¼Œä»¥åŠå€ŸåŠ©æœç´¢å¼•æ“è§£å†³å¤æ‚æŸ¥è¯¢é—®é¢˜ã€‚</p><p>4ã€è€ƒè™‘æ•°æ®åº“çš„ä½¿ç”¨ï¼Œæ¯”å¦‚<code>HBase</code>ã€<code>TiDB</code>ç­‰ï¼Œä½†æ˜¯å›¢é˜Ÿå¿…é¡»ç†Ÿæ‚‰è¿™äº›ç»„ä»¶ï¼Œä¸”æœ‰è¾ƒå¼ºçš„è¿ç»´èƒ½åŠ›ã€‚</p><p>5ã€å¼‚æ­¥åŒ–ï¼Œå°†æ¬¡è¦æµç¨‹é€šè¿‡å¤šçº¿ç¨‹ã€<code>MQ</code>ã€ç”šè‡³å»¶æ—¶ä»»åŠ¡è¿›è¡Œå¼‚æ­¥å¤„ç†ã€‚</p><p>6ã€é™æµï¼Œéœ€è¦å…ˆè€ƒè™‘ä¸šåŠ¡æ˜¯å¦å…è®¸é™æµï¼ˆæ¯”å¦‚ç§’æ€åœºæ™¯æ˜¯å…è®¸çš„ï¼‰ï¼ŒåŒ…æ‹¬å‰ç«¯é™æµã€<code>Nginx</code>æ¥å…¥å±‚çš„é™æµã€æœåŠ¡ç«¯çš„é™æµã€‚</p><p>7ã€å¯¹æµé‡è¿›è¡Œå‰Šå³°å¡«è°·ï¼Œé€šè¿‡<code>MQ</code>æ‰¿æ¥æµé‡ã€‚</p><p>8ã€å¹¶å‘å¤„ç†ï¼Œé€šè¿‡å¤šçº¿ç¨‹å°†ä¸²è¡Œé€»è¾‘å¹¶è¡ŒåŒ–ã€‚</p><p>9ã€é¢„è®¡ç®—ï¼Œæ¯”å¦‚æŠ¢çº¢åŒ…åœºæ™¯ï¼Œå¯ä»¥æå‰è®¡ç®—å¥½çº¢åŒ…é‡‘é¢ç¼“å­˜èµ·æ¥ï¼Œå‘çº¢åŒ…æ—¶ç›´æ¥ä½¿ç”¨å³å¯ã€‚</p><p>10ã€ç¼“å­˜é¢„çƒ­ï¼Œé€šè¿‡å¼‚æ­¥ä»»åŠ¡æå‰é¢„çƒ­æ•°æ®åˆ°æœ¬åœ°ç¼“å­˜æˆ–è€…åˆ†å¸ƒå¼ç¼“å­˜ä¸­ã€‚</p><p>11ã€å‡å°‘IOæ¬¡æ•°ï¼Œæ¯”å¦‚æ•°æ®åº“å’Œç¼“å­˜çš„æ‰¹é‡è¯»å†™ã€<code>RPC</code>çš„æ‰¹é‡æ¥å£æ”¯æŒã€æˆ–è€…é€šè¿‡å†—ä½™æ•°æ®çš„æ–¹å¼å¹²æ‰<code>RPC</code>è°ƒç”¨ã€‚</p><p>12ã€å‡å°‘IOæ—¶çš„æ•°æ®åŒ…å¤§å°ï¼ŒåŒ…æ‹¬é‡‡ç”¨è½»é‡çº§çš„é€šä¿¡åè®®ã€åˆé€‚çš„æ•°æ®ç»“æ„ã€å»æ‰æ¥å£ä¸­çš„å¤šä½™å­—æ®µã€å‡å°‘ç¼“å­˜keyçš„å¤§å°ã€å‹ç¼©ç¼“å­˜valueç­‰ã€‚</p><p>13ã€ç¨‹åºé€»è¾‘ä¼˜åŒ–ï¼Œæ¯”å¦‚å°†å¤§æ¦‚ç‡é˜»æ–­æ‰§è¡Œæµç¨‹çš„åˆ¤æ–­é€»è¾‘å‰ç½®ã€Forå¾ªç¯çš„è®¡ç®—é€»è¾‘ä¼˜åŒ–ï¼Œæˆ–è€…é‡‡ç”¨æ›´é«˜æ•ˆçš„ç®—æ³•ã€‚</p><p>14ã€å„ç§æ± åŒ–æŠ€æœ¯çš„ä½¿ç”¨å’Œæ± å¤§å°çš„è®¾ç½®ï¼ŒåŒ…æ‹¬<code>HTTP</code>è¯·æ±‚æ± ã€çº¿ç¨‹æ± ï¼ˆè€ƒè™‘<code>CPUå¯†é›†å‹</code>è¿˜æ˜¯<code>IOå¯†é›†å‹</code>è®¾ç½®æ ¸å¿ƒå‚æ•°ï¼‰ã€æ•°æ®åº“å’Œ<code>Redis</code>è¿æ¥æ± ç­‰ã€‚</p><p>15ã€<code>JVM</code>ä¼˜åŒ–ï¼ŒåŒ…æ‹¬æ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„å¤§å°ã€GCç®—æ³•çš„é€‰æ‹©ç­‰ï¼Œå°½å¯èƒ½å‡å°‘GCé¢‘ç‡å’Œè€—æ—¶ã€‚</p><p>16ã€é”é€‰æ‹©ï¼Œè¯»å¤šå†™å°‘çš„åœºæ™¯ç”¨ä¹è§‚é”ï¼Œæˆ–è€…è€ƒè™‘é€šè¿‡åˆ†æ®µé”çš„æ–¹å¼å‡å°‘é”å†²çªã€‚</p><p>ä¸Šè¿°æ–¹æ¡ˆæ— å¤–ä¹ä»è®¡ç®—å’Œ IO ä¸¤ä¸ªç»´åº¦è€ƒè™‘æ‰€æœ‰å¯èƒ½çš„ä¼˜åŒ–ç‚¹ï¼Œéœ€è¦æœ‰é…å¥—çš„ç›‘æ§ç³»ç»Ÿå®æ—¶äº†è§£å½“å‰çš„æ€§èƒ½è¡¨ç°ï¼Œå¹¶æ”¯æ’‘ä½ è¿›è¡Œæ€§èƒ½ç“¶é¢ˆåˆ†æï¼Œç„¶åå†éµå¾ªäºŒå…«åŸåˆ™ï¼ŒæŠ“ä¸»è¦çŸ›ç›¾è¿›è¡Œä¼˜åŒ–ã€‚</p><h3 id="äºŒã€é«˜å¯ç”¨çš„å®è·µæ–¹æ¡ˆ"><a href="#äºŒã€é«˜å¯ç”¨çš„å®è·µæ–¹æ¡ˆ" class="headerlink" title="äºŒã€é«˜å¯ç”¨çš„å®è·µæ–¹æ¡ˆ"></a>äºŒã€é«˜å¯ç”¨çš„å®è·µæ–¹æ¡ˆ</h3><p>1ã€å¯¹ç­‰èŠ‚ç‚¹çš„æ•…éšœè½¬ç§»ï¼ŒNginxå’ŒæœåŠ¡æ²»ç†æ¡†æ¶å‡æ”¯æŒä¸€ä¸ªèŠ‚ç‚¹å¤±è´¥åè®¿é—®å¦ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p><p>2ã€éå¯¹ç­‰èŠ‚ç‚¹çš„æ•…éšœè½¬ç§»ï¼Œé€šè¿‡å¿ƒè·³æ£€æµ‹å¹¶å®æ–½ä¸»å¤‡åˆ‡æ¢ï¼ˆæ¯”å¦‚<code>redis</code>çš„å“¨å…µæ¨¡å¼æˆ–è€…é›†ç¾¤æ¨¡å¼ã€MySQLçš„ä¸»ä»åˆ‡æ¢ç­‰ï¼‰ã€‚</p><p>3ã€æ¥å£å±‚é¢çš„è¶…æ—¶è®¾ç½®ã€é‡è¯•ç­–ç•¥å’Œå¹‚ç­‰è®¾è®¡ã€‚</p><p>4ã€é™çº§å¤„ç†ï¼šä¿è¯æ ¸å¿ƒæœåŠ¡ï¼Œç‰ºç‰²éæ ¸å¿ƒæœåŠ¡ï¼Œå¿…è¦æ—¶è¿›è¡Œç†”æ–­ï¼›æˆ–è€…æ ¸å¿ƒé“¾è·¯å‡ºé—®é¢˜æ—¶ï¼Œæœ‰å¤‡é€‰é“¾è·¯ã€‚</p><p>5ã€é™æµå¤„ç†ï¼šå¯¹è¶…è¿‡ç³»ç»Ÿå¤„ç†èƒ½åŠ›çš„è¯·æ±‚ç›´æ¥æ‹’ç»æˆ–è€…è¿”å›é”™è¯¯ç ã€‚</p><p>6ã€MQåœºæ™¯çš„æ¶ˆæ¯å¯é æ€§ä¿è¯ï¼ŒåŒ…æ‹¬<code>producer</code>ç«¯çš„é‡è¯•æœºåˆ¶ã€<code>broker</code>ä¾§çš„æŒä¹…åŒ–ã€<code>consumer</code>ç«¯çš„ackæœºåˆ¶ç­‰ã€‚</p><p>7ã€ç°åº¦å‘å¸ƒï¼Œèƒ½æ”¯æŒæŒ‰æœºå™¨ç»´åº¦è¿›è¡Œå°æµé‡éƒ¨ç½²ï¼Œè§‚å¯Ÿç³»ç»Ÿæ—¥å¿—å’Œä¸šåŠ¡æŒ‡æ ‡ï¼Œç­‰è¿è¡Œå¹³ç¨³åå†æ¨å…¨é‡ã€‚</p><p>8ã€ç›‘æ§æŠ¥è­¦ï¼šå…¨æ–¹ä½çš„ç›‘æ§ä½“ç³»ï¼ŒåŒ…æ‹¬æœ€åŸºç¡€çš„CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œçš„ç›‘æ§ï¼Œä»¥åŠWebæœåŠ¡å™¨ã€JVMã€æ•°æ®åº“ã€å„ç±»ä¸­é—´ä»¶çš„ç›‘æ§å’Œä¸šåŠ¡æŒ‡æ ‡çš„ç›‘æ§ã€‚</p><p>9ã€ç¾å¤‡æ¼”ç»ƒï¼šç±»ä¼¼å½“å‰çš„â€œæ··æ²Œå·¥ç¨‹â€ï¼Œå¯¹ç³»ç»Ÿè¿›è¡Œä¸€äº›ç ´åæ€§æ‰‹æ®µï¼Œè§‚å¯Ÿå±€éƒ¨æ•…éšœæ˜¯å¦ä¼šå¼•èµ·å¯ç”¨æ€§é—®é¢˜ã€‚</p><p>é«˜å¯ç”¨çš„æ–¹æ¡ˆä¸»è¦ä»å†—ä½™ã€å–èˆã€ç³»ç»Ÿè¿ç»´3ä¸ªæ–¹å‘è€ƒè™‘ï¼ŒåŒæ—¶éœ€è¦æœ‰é…å¥—çš„å€¼ç­æœºåˆ¶å’Œæ•…éšœå¤„ç†æµç¨‹ï¼Œå½“å‡ºç°çº¿ä¸Šé—®é¢˜æ—¶ï¼Œå¯åŠæ—¶è·Ÿè¿›å¤„ç†ã€‚</p><h3 id="ä¸‰ã€é«˜æ‰©å±•çš„å®è·µæ–¹æ¡ˆ"><a href="#ä¸‰ã€é«˜æ‰©å±•çš„å®è·µæ–¹æ¡ˆ" class="headerlink" title="ä¸‰ã€é«˜æ‰©å±•çš„å®è·µæ–¹æ¡ˆ"></a>ä¸‰ã€é«˜æ‰©å±•çš„å®è·µæ–¹æ¡ˆ</h3><p>1ã€åˆç†çš„åˆ†å±‚æ¶æ„ï¼šæ¯”å¦‚ä¸Šé¢è°ˆåˆ°çš„äº’è”ç½‘æœ€å¸¸è§çš„åˆ†å±‚æ¶æ„ï¼Œå¦å¤–è¿˜èƒ½è¿›ä¸€æ­¥æŒ‰ç…§æ•°æ®è®¿é—®å±‚ã€ä¸šåŠ¡é€»è¾‘å±‚å¯¹å¾®æœåŠ¡åšæ›´ç»†ç²’åº¦çš„åˆ†å±‚ï¼ˆä½†æ˜¯éœ€è¦è¯„ä¼°æ€§èƒ½ï¼Œä¼šå­˜åœ¨ç½‘ç»œå¤šä¸€è·³çš„æƒ…å†µï¼‰ã€‚</p><p>2ã€å­˜å‚¨å±‚çš„æ‹†åˆ†ï¼šæŒ‰ç…§ä¸šåŠ¡ç»´åº¦åšå‚ç›´æ‹†åˆ†ã€æŒ‰ç…§æ•°æ®ç‰¹å¾ç»´åº¦è¿›ä¸€æ­¥åšæ°´å¹³æ‹†åˆ†ï¼ˆåˆ†åº“åˆ†è¡¨ï¼‰ã€‚</p><p>3ã€ä¸šåŠ¡å±‚çš„æ‹†åˆ†ï¼šæœ€å¸¸è§çš„æ˜¯æŒ‰ç…§ä¸šåŠ¡ç»´åº¦æ‹†ï¼ˆæ¯”å¦‚ç”µå•†åœºæ™¯çš„å•†å“æœåŠ¡ã€è®¢å•æœåŠ¡ç­‰ï¼‰ï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§æ ¸å¿ƒæ¥å£å’Œéæ ¸å¿ƒæ¥å£æ‹†ï¼Œè¿˜å¯ä»¥æŒ‰ç…§è¯·æ±‚æºæ‹†ï¼ˆæ¯”å¦‚To Cå’ŒTo Bï¼ŒAPPå’ŒH5ï¼‰ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼æ¶æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†å¸ƒå¼æ¶æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¹‚ç­‰æ€§ä¸åˆ†å¸ƒå¼é”</title>
      <link href="/My-Blogs/2021/01/08/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/%E6%A6%82%E5%BF%B5/%E5%B9%82%E7%AD%89%E6%80%A7%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/"/>
      <url>/My-Blogs/2021/01/08/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/%E6%A6%82%E5%BF%B5/%E5%B9%82%E7%AD%89%E6%80%A7%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/</url>
      
        <content type="html"><![CDATA[<h3 id="1-ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§"><a href="#1-ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§" class="headerlink" title="1. ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§"></a>1. ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§</h3><p><code>å¹‚ç­‰æ€§</code> å°±æ˜¯æŒ‡ï¼šä¸€ä¸ªå¹‚ç­‰æ“ä½œä»»å…¶æ‰§è¡Œå¤šæ¬¡æ‰€äº§ç”Ÿçš„å½±å“å‡ä¸ä¸€æ¬¡æ‰§è¡Œçš„å½±å“ç›¸åŒã€‚ç”¨æ•°å­¦çš„æ¦‚å¿µè¡¨è¾¾æ˜¯è¿™æ ·çš„: <code>f(f(x)) = f(x)</code> . å°±åƒ <code>nx1 = n</code> ä¸€æ ·ï¼Œ x1 å°±æ˜¯ä¸€ä¸ªå¹‚ç­‰æ“ä½œã€‚æ— è®ºæ˜¯ä¹˜ä»¥å¤šå°‘æ¬¡ç»“æœéƒ½ä¸€æ ·ã€‚</p><a id="more"></a><h3 id="2-å¸¸è§çš„å¹‚ç­‰æ€§é—®é¢˜"><a href="#2-å¸¸è§çš„å¹‚ç­‰æ€§é—®é¢˜" class="headerlink" title="2. å¸¸è§çš„å¹‚ç­‰æ€§é—®é¢˜"></a>2. å¸¸è§çš„å¹‚ç­‰æ€§é—®é¢˜</h3><blockquote><p>å¹‚ç­‰æ€§é—®é¢˜ç»å¸¸ä¼šæ˜¯ç”±ç½‘ç»œé—®é¢˜å¼•èµ·çš„ï¼Œè¿˜æœ‰é‡å¤æ“ä½œå¼•èµ·çš„ã€‚</p></blockquote><p><strong>åœºæ™¯ä¸€ï¼šæ¯”å¦‚ç‚¹èµåŠŸèƒ½ï¼Œä¸€ä¸ªç”¨æˆ·åªèƒ½å¯¹åŒä¸€ç‰‡æ–‡ç« ç‚¹èµä¸€æ¬¡ï¼Œé‡å¤ç‚¹èµæç¤ºå·²ç»ç‚¹è¿‡èµäº†ã€‚</strong></p><p>ç¤ºä¾‹ä»£ç ï¼š</p><pre><code class="JAVA">public void like(Article article,User user) {    //æ£€æŸ¥æ˜¯å¦ç‚¹è¿‡èµ    if (checkIsLike(article,user)) {        //ç‚¹è¿‡èµäº†        throw new ApiException(CodeEnums.SYSTEM_ERR);    } else {        //ä¿å­˜ç‚¹èµ        saveLike(article,user);    }}</code></pre><p>çœ‹ä¸Šå»å¥½åƒæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä¿å­˜ç‚¹èµä¹‹å‰å·²ç»æ£€æŸ¥è¿‡æ˜¯å¦ç‚¹èµäº†ï¼Œç†è®ºä¸ŠåŒä¸€ä¸ªäººä¸ä¼šå¯¹åŒä¸€ç¯‡æ–‡ç« é‡å¤ç‚¹èµã€‚ä½†å®é™…ä¸æ˜¯è¿™æ ·çš„ã€‚å› ä¸ºç½‘ç»œè¯·æ±‚ä¸æ˜¯æ’é˜Ÿè¿›æ¥çš„ï¼Œè€Œæ˜¯ä¸€çªèœ‚æ¶Œè¿›æ¥çš„ã€‚</p><p>æŸäº›æ—¶å€™ï¼Œç”¨æˆ·ç½‘ç»œä¸å¥½ï¼Œå¯èƒ½å¾ˆçŸ­çš„æ—¶é—´å†…ç‚¹å‡»äº†å¤šæ¬¡ï¼Œç”±äºç½‘ç»œä¼ è¾“é—®é¢˜ï¼Œè¿™äº›è¯·æ±‚å¯èƒ½ä¼šåŒæ—¶æ¥åˆ°æˆ‘ä»¬çš„æœåŠ¡å™¨ã€‚</p><ul><li><strong>ç¬¬ä¸€ä¸ªè¯·æ±‚ checkIsLikeï¼ˆï¼‰ è¿”å› false ï¼Œ æ­£åœ¨æ‰§è¡Œ saveLike() æ“ä½œï¼Œè¿˜æ²¡æ¥çš„åŠæäº¤äº‹åŠ¡</strong> </li><li><strong>ç¬¬äºŒä¸ªè¯·æ±‚è¿‡æ¥äº† ï¼ŒcheckIsLikeï¼ˆï¼‰ è¿”å› ä¹Ÿæ˜¯ false , å¹¶å» æ‰§è¡Œäº† saveLike() æ“ä½œ</strong></li></ul><p>è¿™æ ·å­ï¼Œå°±é€ æˆäº†ä¸€ä¸ªç”¨æˆ·åŒæ—¶å¯¹ä¸€ç¯‡æ–‡ç« è¿›è¡Œäº†å¤šæ¬¡ç‚¹èµæ“ä½œã€‚</p><p>è¿™å°±æ˜¯å…¸å‹çš„å¹‚ç­‰æ€§é—®é¢˜ï¼Œ æ“ä½œäº†ä¸€æ¬¡å’Œæ“ä½œäº†ä¸¤æ¬¡ç»“æœä¸ä¸€æ ·ï¼Œå› ä¸ºä½ å¤šç‚¹äº†ä¸€æ¬¡èµï¼ŒæŒ‰ç…§å¹‚ç­‰æ€§åŸåˆ™ ä¸ç®¡ä½ ç‚¹å‡»äº†å¤šå°‘æ¬¡ç»“æœéƒ½ä¸€æ ·ï¼Œåªç‚¹äº†ä¸€æ¬¡èµã€‚</p><p>å¾ˆå¤šåœºæ™¯éƒ½æ˜¯è¿™æ ·é€ æˆçš„ï¼Œæ¯”å¦‚ç”¨æˆ·é‡å¤ä¸‹å•ï¼Œé‡å¤è¯„è®ºï¼Œé‡å¤æäº¤è¡¨å•ç­‰ã€‚</p><p>é‚£æ€ä¹ˆè§£å†³å‘¢ï¼Ÿå‡è®¾ç½‘ç»œçš„è¯·æ±‚æ˜¯æ’é˜Ÿè¿›æ¥çš„å°±ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜äº†ã€‚</p><p>äºæ˜¯æˆ‘ä»¬å¯ä»¥æ”¹æˆè¿™æ ·ï¼š</p><pre><code class="JAVA">public synchronized void like(Article article,User user) {    //æ£€æŸ¥æ˜¯å¦ç‚¹è¿‡èµ    if (checkIsLike(article,user)) {        //ç‚¹è¿‡èµäº†        throw new ApiException(CodeEnums.SYSTEM_ERR);    } else {        //ä¿å­˜ç‚¹èµ        saveLike(article,user);    }}</code></pre><p><code>synchronized</code> åŒæ­¥é” è¿™æ ·æˆ‘ä»¬çš„è¯·æ±‚å°±ä¼šä¹–ä¹–çš„æ’é˜Ÿè¿›æ¥äº†ã€‚</p><p>PS: è¿™æ ·åšæ˜¯æ•ˆç‡æ¯”è¾ƒä½çš„åšæ³•ï¼Œä¸å»ºè®®è¿™ä¹ˆåšï¼Œåªæ˜¯ä¸¾ä¾‹å­ï¼Œ<code>synchronized</code> ä¹Ÿä¸é€‚åˆåˆ†å¸ƒå¼é›†ç¾¤åœºæ™¯ã€‚</p><p><strong>åœºæ™¯äºŒ ï¼š ç¬¬ä¸‰æ–¹å›è°ƒ</strong></p><p>æˆ‘ä»¬ç³»ç»Ÿç»å¸¸éœ€è¦å’Œç¬¬ä¸‰æ–¹ç³»ç»Ÿæ‰“äº¤é“ï¼Œæ¯”å¦‚å¾®ä¿¡å……å€¼ï¼Œæ”¯ä»˜å®å……å€¼ä»€ä¹ˆçš„ï¼Œå¾®ä¿¡å’Œæ”¯ä»˜å®å¸¸å¸¸ä¼šä»¥å›è°ƒä½ çš„æ¥å£é€šçŸ¥ä½ æ”¯ä»˜ç»“æœã€‚ä¸ºäº†ä¿è¯ä½ èƒ½æ”¶åˆ°å›è°ƒï¼Œå¾€å¾€å¯èƒ½ä¼šå›è°ƒå¤šæ¬¡ã€‚</p><p>æœ‰æ—¶å€™æˆ‘ä»¬ä¹Ÿä¸ºäº†ä¿è¯æ•°æ®çš„å‡†ç¡®æ€§ä¼šæœ‰ä¸ªå®šæ—¶å™¨å»æŸ¥è¯¢æ”¯ä»˜ç»“æœæœªçŸ¥çš„æµæ°´ï¼Œå¹¶æ‰§è¡Œå“åº”çš„å¤„ç†ã€‚<br>å¦‚æœå®šæ—¶å™¨çš„è½®è¯¢å’Œå›è°ƒåˆšå¥½æ˜¯åœ¨åŒæ—¶è¿›è¡Œï¼Œè¿™å¯èƒ½åˆå‡ºBUGäº†, åˆè¿›è¡Œäº†ä¸¤æ¬¡é‡å¤æ“ä½œã€‚</p><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šå‡è®¾æˆ‘æ˜¯ä¸€ä¸ªå……å€¼æ“ä½œï¼Œ å›è°ƒå›æ¥çš„æ—¶å€™ ï¼Œä¼šåšä¸šåŠ¡å¤„ç†ï¼ŒæˆåŠŸäº†ç»™ç”¨æˆ·è´¦æˆ·åŠ é’±ã€‚è¿™æ˜¯åå°±è¦ä¿è¯å¹‚ç­‰æ€§äº†ï¼Œ å‡è®¾å¾®ä¿¡åŒä¸€ç¬”äº¤æ˜“ç»™ä½ å›è°ƒäº†ä¸¤æ¬¡ï¼Œå¦‚æœä½ ç»™ç”¨æˆ·å……å€¼äº†ä¸¤æ¬¡ï¼Œè¿™æ˜¾ç„¶ä¸åˆç†(æˆ‘æ˜¯è€æ¿è‚¯å®šæ‰£ä½ å·¥èµ„)ï¼Œæ‰€ä»¥è¦ä¿è¯ ä¸ç®¡å¾®ä¿¡å›è°ƒä½ å¤šå°‘æ¬¡ ï¼ŒåŒä¸€ç¬”äº¤æ˜“ä½ åªèƒ½ç»™ç”¨æˆ·å……ä¸€æ¬¡é’±ã€‚è¿™å°±å¹‚ç­‰æ€§</p><h3 id="è§£å†³å¹‚ç­‰æ€§é—®é¢˜æ–¹æ¡ˆ"><a href="#è§£å†³å¹‚ç­‰æ€§é—®é¢˜æ–¹æ¡ˆ" class="headerlink" title="è§£å†³å¹‚ç­‰æ€§é—®é¢˜æ–¹æ¡ˆ"></a>è§£å†³å¹‚ç­‰æ€§é—®é¢˜æ–¹æ¡ˆ</h3><ul><li>synchronized é€‚åˆå•æœºåº”ç”¨ï¼Œä¸è¿½æ±‚æ€§èƒ½ ï¼Œä¸è¿½æ±‚å¹¶å‘ã€‚</li><li>åˆ†å¸ƒå¼é” ä½†æ˜¯å¾€å¾€æˆ‘ä»¬çš„åº”ç”¨æ˜¯åˆ†å¸ƒå¼çš„é›†ç¾¤ï¼Œå¹¶ä¸”å¾ˆè®²ç©¶æ€§èƒ½ï¼Œå¹¶å‘ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨åˆ° åˆ†å¸ƒå¼é” æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</li></ul><p>Redis åˆ†å¸ƒå¼é”ï¼š</p><pre><code class="JAVA">/*** setNx**  @param key*  @param value*  @return*/public Boolean setNx(String key,Object value) {    return redisTemplate.opsForValue().setIfAbsent(key,value);}/***  @param key é”*  @param waitTime ç­‰å¾…æ—¶é—´  æ¯«ç§’*  @param expireTime è¶…æ—¶æ—¶é—´  æ¯«ç§’*  @return*/public Boolean lock(String key,long waitTime,long expireTime) {    String vlaue =  UUIDUtil.mongoObjectId();    Boolean flag = setNx(key,vlaue);    //å°è¯•è·å–é”  æˆåŠŸè¿”å›    if (flag) {        redisTemplate.expire(key,expireTime,TimeUnit.MILLISECONDS);        return flag;    } else {        //å¤±è´¥        //ç°åœ¨æ—¶é—´        long newTime =  System.currentTimeMillis();        //ç­‰å¾…è¿‡æœŸæ—¶é—´        long loseTime = newTime + waitTime;        //ä¸æ–­å°è¯•è·å–é”æˆåŠŸè¿”å›        while (System.currentTimeMillis()  &lt; loseTime) {            Boolean testFlag = setNx(key,vlaue);            if (testFlag) {                redisTemplate.expire(key,expireTime,TimeUnit.MILLISECONDS);                return testFlag;            }            //ä¼‘çœ 100æ¯«ç§’            try {                Thread.sleep(100);            }            catch (InterruptedException e) {                e.printStackTrace();            }        }    }    return false;}/***  @param key*  @return*/public Boolean lock(String key) {    return lock(key,1000L,60  *  1000L);}/***  @param key*/public void unLock(String key) {    remove(key);}</code></pre><p>åˆ©ç”¨Redis åˆ†å¸ƒå¼é” æˆ‘ä»¬çš„ä»£ç å¯ä»¥æ”¹æˆè¿™æ ·ï¼š</p><pre><code class="JAVA">public void like(Article article,User user) {    String key =  "key:like"  + article.getId()  +  ":"  + user.getUserId();    //  ç­‰å¾…é”çš„æ—¶é—´  0  ï¼Œ  è¿‡æœŸæ—¶é—´  ä¸€åˆ†é’Ÿé˜²æ­¢æ­»é”    Boolean flag = redisService.lock(key,0,60  *  1000L);    if(!flag) {        //è·å–é”å¤±è´¥  è¯´æ˜å‰é¢çš„è¯·æ±‚å·²ç»è·å–äº†é”        throw new ApiException(CodeEnums.SYSTEM_ERR);    }    //æ£€æŸ¥æ˜¯å¦ç‚¹è¿‡èµ    if (checkIsLike(article,user)) {        //ç‚¹è¿‡èµäº†        throw new ApiException(CodeEnums.SYSTEM_ERR);    } else {        //ä¿å­˜ç‚¹èµ        saveLike(article,user);    }    //åˆ é™¤é”    redisService.unLock(key);}</code></pre><p>key çš„è®¾è®¡ä¹Ÿå¾ˆè®²ç©¶ï¼š</p><p>æ•°æ®ä¸å†²çªçš„ä¸¤ä¸ªä¸šåŠ¡åœºæ™¯ï¼Œkeyä¸èƒ½å†²çªï¼Œä¸åŒäººçš„keyä¹Ÿä¸ä¸€æ ·ï¼Œä¸åŒçš„æ–‡ç« Keyä¹Ÿä¸ä¸€æ ·ã€‚</p><p>æ ¹æ®åœºæ™¯ä¸šåŠ¡è®¾å®šã€‚</p><p><strong>ä¸€ä¸ªåŸåˆ™ï¼š å°½å¯èƒ½çš„ç¼©å°keyçš„èŒƒå›´ã€‚</strong> è¿™æ ·æ‰èƒ½å¢å¼ºæˆ‘ä»¬çš„å¹¶å‘ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬å…ˆè·å–é”ï¼Œè·å–é”æˆåŠŸ æ‰§è¡Œå®Œæ“ä½œï¼Œä¿å­˜æ•°æ® ï¼Œåˆ é™¤é”ã€‚è·å–ä¸åˆ°é”è¿”å›å¤±è´¥ã€‚è®¾ç½®è¿‡æœŸæ—¶é—´æ˜¯ä¸ºäº†é˜²æ­¢â€˜æ­»é”â€™ï¼Œæ¯”å¦‚æœºå™¨è·å–åˆ°äº† é”ï¼Œæ²¡æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œä½†æ˜¯ä»–æ­»æœºäº†ï¼Œæ²¡æœ‰åˆ é™¤é‡Šæ”¾é”ã€‚</p><ul><li>ç‰ˆæœ¬å·æ§åˆ¶CAS ç®—æ³•ï¼š CASæœ‰3ä¸ªæ“ä½œæ•°ï¼Œå†…å­˜å€¼Vï¼Œæ—§çš„é¢„æœŸå€¼Aï¼Œè¦ä¿®æ”¹çš„æ–°å€¼Bã€‚å½“ä¸”ä»…å½“é¢„æœŸå€¼Aå’Œå†…å­˜å€¼Vç›¸åŒæ—¶ï¼Œå°†å†…å­˜å€¼Vä¿®æ”¹ä¸ºBï¼Œå¦åˆ™ä»€ä¹ˆéƒ½ä¸åšã€‚è¿™ä¸ªæ¯”è¾ƒç¹æ‚ï¼Œæœ‰å…´è¶£çš„å¤§å®¶å¯ä»¥å»çœ‹çœ‹ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼æ¶æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†å¸ƒå¼æ¶æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•å­¦ä¹ åˆ†å¸ƒå¼ç³»ç»Ÿ(è½¬è½½)</title>
      <link href="/My-Blogs/2021/01/08/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F(%E8%BD%AC%E8%BD%BD)/"/>
      <url>/My-Blogs/2021/01/08/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F(%E8%BD%AC%E8%BD%BD)/</url>
      
        <content type="html"><![CDATA[<p>å­¦ä¹ ä¸€ä¸ªçŸ¥è¯†ä¹‹å‰ï¼Œæˆ‘è§‰å¾—æ¯”è¾ƒå¥½çš„æ–¹å¼æ˜¯å…ˆç†è§£å®ƒçš„æ¥é¾™å»è„‰ï¼šå³è¿™ä¸ªçŸ¥è¯†äº§ç”Ÿçš„è¿‡ç¨‹ï¼Œå®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œå®ƒæ˜¯æ€ä¹ˆæ ·è§£å†³çš„å¹¶ä¸”å®ƒå¸¦æ¥äº†å“ªäº›é—®é¢˜ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½æ¯”è¾ƒå¥½çš„æŠ“åˆ°å®ƒçš„è„‰ç»œå’Œå…³é”®ç‚¹ï¼Œä¸ä¼šä¸€å¼€å§‹å°±è¿·å¤±åœ¨ç»†èŠ‚ä¸­ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦è§£å†³çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼š<strong>åˆ†å¸ƒå¼ç³»ç»Ÿè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</strong></p><a id="more"></a><p><strong>ç¬¬ä¸€ä¸ª</strong>æ˜¯å•æœºæ€§èƒ½ç“¶é¢ˆå¯¼è‡´çš„æˆæœ¬é—®é¢˜ï¼Œç”±äºæ‘©å°”å®šå¾‹å¤±æ•ˆï¼Œå»‰ä»· PC æœºæ€§èƒ½çš„ç“¶é¢ˆæ— æ³•ç»§ç»­çªç ´ï¼Œå°å‹æœºå’Œå¤§å‹æœºèƒ½æé«˜æ›´é«˜çš„å•æœºæ€§èƒ½ï¼Œä½†æ˜¯æˆæœ¬å¤ªå¤§é«˜ï¼Œä¸€èˆ¬çš„å…¬å¸å¾ˆéš¾æ‰¿å—ï¼›</p><p><strong>ç¬¬äºŒä¸ª</strong>æ˜¯ç”¨æˆ·é‡å’Œæ•°æ®é‡çˆ†ç‚¸æ€§çš„å¢å¤§å¯¼è‡´çš„æˆæœ¬é—®é¢˜ï¼Œè¿›å…¥äº’è”ç½‘æ—¶ä»£ï¼Œç”¨æˆ·é‡çˆ†ç‚¸æ€§çš„å¢å¤§ï¼Œç”¨æˆ·äº§ç”Ÿçš„æ•°æ®é‡ä¹Ÿåœ¨çˆ†ç‚¸æ€§çš„å¢å¤§ï¼Œä½†æ˜¯å•ä¸ªç”¨æˆ·æˆ–è€…å•æ¡æ•°æ®çš„ä»·å€¼å…¶å®æ¯”è½¯ä»¶æ—¶ä»£ï¼ˆæ¯”å¦‚é“¶è¡Œç”¨æˆ·ï¼‰çš„ä»·å€¼æ˜¯åªä½ä¸é«˜ï¼Œæ‰€ä»¥å¿…é¡»å¯»æ‰¾æ›´ç»æµçš„æ–¹æ¡ˆï¼›</p><p><strong>ç¬¬ä¸‰ä¸ª</strong>æ˜¯ä¸šåŠ¡é«˜å¯ç”¨çš„è¦æ±‚ï¼Œå¯¹äºäº’è”ç½‘çš„äº§å“æ¥è¯´ï¼Œéƒ½è¦æ±‚ 7 * 24 å°æ—¶æä¾›æœåŠ¡ï¼Œæ— æ³•å®¹å¿åœæ­¢æœåŠ¡ç­‰æ•…éšœï¼Œè€Œè¦æä¾›é«˜å¯ç”¨çš„æœåŠ¡ï¼Œå”¯ä¸€çš„æ–¹å¼å°±æ˜¯å¢åŠ å†—ä½™æ¥å®Œæˆï¼Œè¿™æ ·å°±ç®—å•æœºç³»ç»Ÿå¯ä»¥æ”¯æ’‘çš„æœåŠ¡ï¼Œå› ä¸ºé«˜å¯ç”¨çš„è¦æ±‚ï¼Œä¹Ÿä¼šå˜æˆä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿã€‚</p><p>åŸºäºä¸Šé¢çš„ä¸‰ä¸ªåŸå› å¯ä»¥çœ‹å‡ºï¼Œåœ¨äº’è”ç½‘æ—¶ä»£ï¼Œå•æœºç³»ç»Ÿæ˜¯æ— æ³•è§£å†³æˆæœ¬å’Œé«˜å¯ç”¨é—®é¢˜çš„ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªé—®é¢˜å¯¹å‡ ä¹å¯¹æ‰€æœ‰çš„å…¬å¸æ¥è¯´éƒ½æ˜¯éå¸¸å…³é”®çš„é—®é¢˜ï¼Œæ‰€ä»¥ï¼Œä»å•æœºç³»ç»Ÿåˆ°åˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯æ— æ³•é¿å…çš„æŠ€æœ¯å¤§æ½®æµã€‚</p><p>é‚£ä¹ˆï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯æ€ä¹ˆæ¥è§£å†³å•æœºç³»ç»Ÿé¢ä¸´çš„æˆæœ¬å’Œé«˜å¯ç”¨é—®é¢˜å‘¢ï¼Ÿå…¶å®æƒ³æ³•å¾ˆç®€å•ï¼Œå°±æ˜¯å°†ä¸€äº›å»‰ä»·çš„ PC æœºé€šè¿‡ç½‘ç»œè¿æ¥èµ·æ¥ï¼Œå…±åŒå®Œæˆå·¥ä½œï¼Œå¹¶ä¸”åœ¨ç³»ç»Ÿä¸­æä¾›å†—ä½™æ¥è§£å†³é«˜å¯ç”¨çš„é—®é¢˜ã€‚æˆ‘ä»¬æ¥çœ‹åˆ†å¸ƒå¼ç³»ç»Ÿçš„å®šä¹‰ï¼š<strong>åˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯ç”±ä¸€ç»„é€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡ã€ä¸ºäº†å®Œæˆå…±åŒçš„ä»»åŠ¡è€Œåè°ƒå·¥ä½œçš„è®¡ç®—æœºèŠ‚ç‚¹ç»„æˆçš„ç³»ç»Ÿ</strong>ã€‚åœ¨å®šä¹‰ä¸­ï¼Œæˆ‘ä»¬å¯ç”¨çœ‹å‡ºï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿå®ƒé€šè¿‡å¤šå·¥ä½œèŠ‚ç‚¹æ¥è§£å†³å•æœºç³»ç»Ÿé¢ä¸´çš„æˆæœ¬å’Œå¯ç”¨æ€§é—®é¢˜ï¼Œä½†æ˜¯å®ƒå¼•å…¥äº†å¯¹åˆ†å¸ƒå¼ç³»ç»Ÿå†…éƒ¨å·¥ä½œèŠ‚ç‚¹çš„åè°ƒé—®é¢˜ã€‚</p><p>æŒæ¡ä¸€ä¸ªçŸ¥è¯†éœ€è¦ç†è§£å®ƒçš„å‰å› åæœï¼Œå¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿæ¥è¯´ï¼Œå‰å› æ˜¯ã€Œåˆ†å¸ƒå¼ç³»ç»Ÿè§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€ï¼Œåæœæ˜¯ã€Œå®ƒæ˜¯æ€ä¹ˆåšå†…éƒ¨å·¥ä½œèŠ‚ç‚¹çš„åè°ƒã€ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è§£å†³çš„ç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯æ€ä¹ˆåšå†…éƒ¨å·¥ä½œèŠ‚ç‚¹åè°ƒçš„ï¼Ÿ</p><p>å…ˆä»ç®€å•çš„æƒ…å†µå…¥æ‰‹ï¼Œå¯¹äºåˆ†å¸ƒå¼è®¡ç®—ï¼ˆæ— çŠ¶æ€ï¼‰çš„æƒ…å†µï¼Œç³»ç»Ÿå†…éƒ¨çš„åè°ƒéœ€è¦åšå“ªäº›å·¥ä½œï¼š</p><h3 id="1ã€æ€ä¹ˆæ ·æ‰¾åˆ°æœåŠ¡ï¼Ÿ"><a href="#1ã€æ€ä¹ˆæ ·æ‰¾åˆ°æœåŠ¡ï¼Ÿ" class="headerlink" title="1ã€æ€ä¹ˆæ ·æ‰¾åˆ°æœåŠ¡ï¼Ÿ"></a>1ã€æ€ä¹ˆæ ·æ‰¾åˆ°æœåŠ¡ï¼Ÿ</h3><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå†…éƒ¨ï¼Œä¼šæœ‰ä¸åŒçš„æœåŠ¡ï¼ˆè§’è‰²ï¼‰ï¼ŒæœåŠ¡ A æ€ä¹ˆæ‰¾åˆ°æœåŠ¡ B æ˜¯éœ€è¦è§£å†³çš„é—®é¢˜ï¼Œä¸€èˆ¬æ¥è¯´æœåŠ¡æ³¨å†Œä¸å‘ç°æœºåˆ¶æ˜¯å¸¸ç”¨çš„æ€è·¯ï¼Œæ‰€ä»¥å¯ä»¥äº†è§£ä¸€ä¸‹æœåŠ¡æ³¨å†Œå‘ç°æœºåˆ¶å®ç°åŸç†ï¼Œå¹¶ä¸”å¯ä»¥æ€è€ƒæœåŠ¡æ³¨å†Œå‘ç°æ˜¯é€‰æ‹©åšæˆ AP è¿˜æ˜¯ CP ç³»ç»Ÿæ›´åˆç†ï¼›</p><h3 id="2ã€æ€ä¹ˆæ ·æ‰¾åˆ°å®ä¾‹ï¼Ÿ"><a href="#2ã€æ€ä¹ˆæ ·æ‰¾åˆ°å®ä¾‹ï¼Ÿ" class="headerlink" title="2ã€æ€ä¹ˆæ ·æ‰¾åˆ°å®ä¾‹ï¼Ÿ"></a>2ã€æ€ä¹ˆæ ·æ‰¾åˆ°å®ä¾‹ï¼Ÿ</h3><p>æ‰¾åˆ°æœåŠ¡åï¼Œå½“å‰çš„è¯·æ±‚åº”è¯¥é€‰æ‹©å‘å¾€æœåŠ¡çš„å“ªä¸€ä¸ªå®ä¾‹å‘¢ï¼Ÿä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœåŒä¸€ä¸ªæœåŠ¡çš„å®ä¾‹éƒ½æ˜¯å®Œå…¨å¯¹ç­‰çš„ï¼ˆæ— çŠ¶æ€ï¼‰ï¼Œé‚£ä¹ˆæŒ‰è´Ÿè½½å‡è¡¡ç­–ç•¥æ¥å¤„ç†å°±è¶³å¤Ÿï¼ˆè½®è¯¢ã€æƒé‡ã€hashã€ä¸€è‡´æ€§hashï¼Œfairç­‰å„ç§ç­–ç•¥çš„é€‚ç”¨åœºæ™¯ï¼‰ï¼›å¦‚æœåŒä¸€ä¸ªæœåŠ¡çš„å®ä¾‹ä¸æ˜¯å¯¹ç­‰çš„ï¼ˆæœ‰çŠ¶æ€ï¼‰ï¼Œé‚£ä¹ˆéœ€è¦é€šè¿‡è·¯ç”±æœåŠ¡ï¼ˆå…ƒæ•°æ®æœåŠ¡ç­‰ï¼‰å…ˆç¡®å®šå½“å‰è¦è®¿é—®çš„è¯·æ±‚æ•°æ®åšå“ªä¸€ä¸ªå®ä¾‹ä¸Šï¼Œç„¶åå†è¿›è¡Œè®¿é—®ã€‚</p><h3 id="3ã€æ€ä¹ˆæ ·é¿å…é›ªå´©ï¼Ÿ"><a href="#3ã€æ€ä¹ˆæ ·é¿å…é›ªå´©ï¼Ÿ" class="headerlink" title="3ã€æ€ä¹ˆæ ·é¿å…é›ªå´©ï¼Ÿ"></a>3ã€æ€ä¹ˆæ ·é¿å…é›ªå´©ï¼Ÿ</h3><p>ç³»ç»Ÿé›ªå´©æ˜¯æŒ‡æ•…éšœçš„ç”±äºæ­£åé¦ˆå¾ªåºå¯¼è‡´ä¸æ–­æ‰©å¤§è§„åˆ™çš„æ•…éšœã€‚ä¸€æ¬¡é›ªå´©é€šå¸¸æ˜¯ç”±äºæ•´ä¸ªç³»ç»Ÿä¸­ä¸€ä¸ªå¾ˆå°çš„éƒ¨åˆ†å‡ºç°æ•…éšœäºå¼•å‘ï¼Œè¿›è€Œå¯¼è‡´ç³»ç»Ÿå…¶å®ƒéƒ¨åˆ†ä¹Ÿå‡ºç°æ•…éšœã€‚æ¯”å¦‚ç³»ç»Ÿä¸­æŸä¸€ä¸ªæœåŠ¡çš„ä¸€ä¸ªå®ä¾‹å‡ºç°æ•…éšœï¼Œå¯¼è‡´è´Ÿè½½å‡è¡¡å°†è¯¥å®ä¾‹æ‘˜é™¤è€Œå¼•èµ·å…¶å®ƒå®ä¾‹è´Ÿè½½å‡é«˜ï¼Œæœ€ç»ˆå¯¼è‡´è¯¥æœåŠ¡çš„æ‰€æœ‰å®ä¾‹åƒå¤šç±³è¯ºéª¨ç‰Œä¸€æ ·ä¸€ä¸ªä¸€ä¸ªå…¨éƒ¨å‡ºç°æ•…éšœã€‚</p><p>é¿å…é›ªå´©æ€»ä½“çš„ç­–ç•¥æ¯”è¾ƒç®€å•ï¼Œåªè¦æ˜¯ä¸¤ä¸ªæ€è·¯ï¼Œä¸€ä¸ªæ˜¯å¿«é€Ÿå¤±è´¥å’Œé™çº§æœºåˆ¶ï¼ˆç†”æ–­ã€é™çº§ã€é™æµç­‰ï¼‰ï¼Œé€šè¿‡å¿«é€Ÿå‡å°‘ç³»ç»Ÿè´Ÿè½½æ¥é¿å…é›ªå´©çš„å‘ç”Ÿï¼›å¦ä¸€ä¸ªä¸ºå¼¹æ€§æ‰©å®¹æœºåˆ¶ï¼Œé€šè¿‡å¿«é€Ÿå¢åŠ ç³»ç»Ÿçš„æœåŠ¡èƒ½åŠ›æ¥é¿å…é›ªå´©çš„å‘ç”Ÿã€‚è¿™ä¸ªæ ¹æ®ä¸åŒçš„åœºæ™¯å¯ä»¥åšä¸åŒçš„é€‰æ‹©ï¼Œæˆ–è€…ä¸¤ä¸ªç­–ç•¥éƒ½ä½¿ç”¨ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œå¿«é€Ÿå¤±è´¥ä¼šå¯¼è‡´éƒ¨åˆ†çš„è¯·æ±‚å¤±è´¥ï¼Œå¦‚æœåˆ†å¸ƒå¼ç³»ç»Ÿå†…éƒ¨å¯¹ä¸€è‡´æ€§è¦æ±‚å¾ˆé«˜çš„è¯ï¼Œå¿«é€Ÿå¤±è´¥ä¼šå¸¦æ¥ç³»ç»Ÿæ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œå¼¹æ€§æ‰©å®¹ä¼šæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„é€‰æ‹©ï¼Œä½†æ˜¯å¼¹æ€§æ‰©å®¹çš„å®ç°æˆæœ¬å’Œå“åº”æ—¶é—´æ¯”å¿«é€Ÿå¤±è´¥è¦å¤§å¾—å¤šã€‚</p><h3 id="4ã€æ€ä¹ˆæ ·ç›‘æ§å‘Šè­¦ï¼Ÿ"><a href="#4ã€æ€ä¹ˆæ ·ç›‘æ§å‘Šè­¦ï¼Ÿ" class="headerlink" title="4ã€æ€ä¹ˆæ ·ç›‘æ§å‘Šè­¦ï¼Ÿ"></a>4ã€æ€ä¹ˆæ ·ç›‘æ§å‘Šè­¦ï¼Ÿ</h3><p>å¯¹äºä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¦‚æœæˆ‘ä»¬ä¸èƒ½å¾ˆæ¸…æ¥šåœ°äº†è§£å†…éƒ¨çš„çŠ¶æ€ï¼Œé‚£ä¹ˆé«˜å¯ç”¨æ˜¯æ²¡æœ‰åŠæ³•å®Œå…¨ä¿éšœçš„ï¼Œæ‰€ä»¥å¯¹åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç›‘æ§ï¼ˆæ¯”å¦‚æ¥å£çš„æ—¶å»¶å’Œå¯ç”¨æ€§ç­‰ä¿¡æ¯ï¼‰ï¼Œåˆ†å¸ƒå¼è¿½è¸ª Traceï¼Œæ¨¡æ‹Ÿæ•…éšœçš„æ··æ²Œå·¥ç¨‹ï¼Œä»¥åŠç›¸å…³çš„å‘Šè­¦ç­‰æœºåˆ¶æ˜¯ä¸€å®šè¦å®Œå–„çš„ï¼›</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥çœ‹åˆ†å¸ƒå¼å­˜å‚¨ï¼ˆæœ‰çŠ¶æ€ï¼‰çš„å†…éƒ¨çš„åè°ƒæ˜¯æ€ä¹ˆåšçš„ï¼ŒåŒæ—¶ï¼Œå‰é¢ä»‹ç»çš„åˆ†å¸ƒå¼è®¡ç®—çš„åè°ƒæ–¹å¼åœ¨åˆ†å¸ƒå¼å­˜å‚¨ä¸­åŒæ ·é€‚ç”¨ï¼Œå°±ä¸å†é‡å¤äº†ï¼š</p><h3 id="5ã€CAP-åŠå…¶ç›¸å…³ç†è®ºä¸è¡¡æƒï¼š"><a href="#5ã€CAP-åŠå…¶ç›¸å…³ç†è®ºä¸è¡¡æƒï¼š" class="headerlink" title="5ã€CAP åŠå…¶ç›¸å…³ç†è®ºä¸è¡¡æƒï¼š"></a>5ã€CAP åŠå…¶ç›¸å…³ç†è®ºä¸è¡¡æƒï¼š</h3><p>ACIDã€BASE å’Œ CAP ç†è®ºï¼Œäº†è§£è¿™ä¸‰ä¸ªä¸»é¢˜ï¼Œæ¨èè¿™ä¸€ç¯‡æ–‡ç« ä»¥åŠæ–‡ç« åé¢ç›¸å…³çš„å‚è€ƒæ–‡çŒ®ï¼š<a href="https://link.zhihu.com/?target=https://www.infoq.com/articles/cap-twelve-years-later-how-the-rules-have-changed/">è‹±æ–‡ç‰ˆæœ¬</a>ï¼Œ<a href="https://link.zhihu.com/?target=https://www.infoq.cn/article/cap-twelve-years-later-how-the-rules-have-changed/">ä¸­æ–‡ç‰ˆæœ¬</a></p><h3 id="6ã€æ€ä¹ˆæ ·åšæ•°æ®åˆ†ç‰‡ï¼š"><a href="#6ã€æ€ä¹ˆæ ·åšæ•°æ®åˆ†ç‰‡ï¼š" class="headerlink" title="6ã€æ€ä¹ˆæ ·åšæ•°æ®åˆ†ç‰‡ï¼š"></a>6ã€æ€ä¹ˆæ ·åšæ•°æ®åˆ†ç‰‡ï¼š</h3><p>å•æœºçš„å­˜å‚¨èƒ½åŠ›æ˜¯ä¸å¯èƒ½å­˜å‚¨æ‰€æœ‰çš„æ•°æ®çš„ï¼Œæ‰€ä»¥éœ€è¦è§£å†³æ€ä¹ˆå°†æ•°æ®æŒ‰ä¸€å®šçš„è§„åˆ™åˆ†åˆ«å­˜å‚¨åˆ°ä¸åŒçš„æœºå™¨ä¸Šï¼Œç›®å‰ä½¿ç”¨æ¯”è¾ƒå¤šçš„æ–¹æ¡ˆä¸º: <code>Hash</code> å’Œ <code>Region</code> åˆ†ç‰‡ç­–ç•¥ï¼Œå¯ä»¥äº†è§£ä¸€ä¸‹å®ƒä»¬çš„ä¼˜ç¼ºç‚¹å’Œå„è‡ªçš„åº”ç”¨åœºæ™¯ï¼›</p><h3 id="7ã€æ€ä¹ˆæ ·åšæ•°æ®å¤åˆ¶ï¼š"><a href="#7ã€æ€ä¹ˆæ ·åšæ•°æ®å¤åˆ¶ï¼š" class="headerlink" title="7ã€æ€ä¹ˆæ ·åšæ•°æ®å¤åˆ¶ï¼š"></a>7ã€æ€ä¹ˆæ ·åšæ•°æ®å¤åˆ¶ï¼š</h3><p>ä¸ºäº†æ»¡è¶³ç³»ç»Ÿçš„é«˜å¯ç”¨è¦æ±‚ï¼Œéœ€è¦å¯¹æ•°æ®åšå†—ä½™å¤„ç†ï¼Œç›®å‰çš„æ–¹æ¡ˆä¸»è¦ä¸ºï¼šä¸­å¿ƒåŒ–æ–¹æ¡ˆï¼ˆä¸»ä»å¤åˆ¶ã€ä¸€è‡´æ€§åè®®æ¯”å¦‚ <code>Raft</code> å’Œ <code>Paxos</code> ç­‰ï¼‰å’Œ å»ä¸­å¿ƒåŒ–çš„æ–¹æ¡ˆï¼ˆ<code>Quorum</code> å’Œ <code>Vector Clock</code>ï¼‰äº†è§£ä¸€ä¸‹å®ƒä»¬çš„ä¼˜ç¼ºç‚¹å’Œå„è‡ªçš„åº”ç”¨åœºæ™¯ï¼Œä»¥åŠå¯¹ç³»ç»Ÿå¤–éƒ¨è¡¨ç°å‡ºæ¥çš„æ•°æ®ä¸€è‡´æ€§çº§åˆ«ï¼ˆçº¿æ€§ä¸€è‡´æ€§ã€é¡ºåºä¸€è‡´æ€§ã€æœ€ç»ˆä¸€è‡´æ€§ç­‰ï¼‰ï¼›</p><h3 id="8ã€æ€ä¹ˆæ ·åšåˆ†å¸ƒå¼äº‹åŠ¡ï¼š"><a href="#8ã€æ€ä¹ˆæ ·åšåˆ†å¸ƒå¼äº‹åŠ¡ï¼š" class="headerlink" title="8ã€æ€ä¹ˆæ ·åšåˆ†å¸ƒå¼äº‹åŠ¡ï¼š"></a>8ã€æ€ä¹ˆæ ·åšåˆ†å¸ƒå¼äº‹åŠ¡ï¼š</h3><p>å¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿæ¥è¯´ï¼Œè¦å®ç°äº‹åŠ¡ï¼Œé¦–å…ˆéœ€è¦ä¸€ä¸ªå¯¹å¹¶å‘äº‹åŠ¡è¿›è¡Œæ’åºçš„èƒ½åŠ›ï¼Œè¿™æ ·åœ¨äº‹åŠ¡å†²çªçš„æ—¶å€™ï¼Œç¡®è®¤å“ªä¸ªäº‹åŠ¡æä¾›æˆåŠŸï¼Œå“ªä¸ªäº‹åŠ¡æäº¤å¤±è´¥ã€‚</p><p>å¯¹äºå•æœºç³»ç»Ÿæ¥è¯´è¿™ä¸ªå®Œå…¨ä¸è¯´é—®é¢˜ï¼Œç®€å•çš„é€šè¿‡æ—¶é—´æˆ³åŠ åºå·çš„æ–¹å¼å°±å¯ä»¥å®ç°ï¼Œä½†æ˜¯å¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿæ¥è¯´ï¼Œç³»ç»Ÿä¸­æœºå™¨çš„æ—¶é—´ä¸èƒ½å®Œå…¨åŒæ­¥ï¼Œå¹¶ä¸”å•å°æœºå™¨åºå·ä¹Ÿæ²¡ç”¨å…¨å±€æ„ä¹‰ï¼ŒæŒ‰ä¸Šé¢çš„æ–¹å¼è¯´ä¸è¡Œçš„ã€‚</p><p>ä¸è¿‡æ•´ä¸ªç³»ç»Ÿé€‰ä¸€å°æœºå™¨æŒ‰å•æœºçš„æ¨¡å¼ç”Ÿäº§äº‹åŠ¡IDæ˜¯å¯ä»¥çš„ï¼ŒåŒåŸå¤šä¸­å¿ƒå’ŒçŸ­è·ç¦»çš„å¼‚åœ°å¤šä¸­å¿ƒéƒ½æ²¡æœ‰é—®é¢˜ï¼Œä¸è¿‡æƒ³åšæˆå…¨çƒåˆ†å¸ƒå¼ç³»ç»Ÿçš„è¯ï¼Œé‚£ä¹ˆæ¯ä¸€æ¬¡äº‹åŠ¡éƒ½è¦å»ä¸€ä¸ªèŠ‚ç‚¹å»è·å–äº‹åŠ¡IDçš„æˆæœ¬å¤ªé«˜ï¼ˆæ¯”å¦‚ä¸­å›½æ­å·åˆ°ç¾å›½ä¸œéƒ¨çš„RTTä¸º200+msï¼‰ï¼ŒGoogle çš„ Spanner æ˜¯é€šè¿‡ GPS å’Œ åŸå­é’Ÿå®ç° <code>TrueTime</code> API æ¥è§£å†³è¿™ä¸ªé—®é¢˜ä»è€Œå®ç°å…¨çƒåˆ†å¸ƒå¼æ•°æ®åº“çš„ã€‚</p><p>æœ‰äº†äº‹åŠ¡IDåï¼Œé€šè¿‡ <code>2PC</code> æˆ–è€… <code>3PC</code> åè®®æ¥å®ç°åˆ†å¸ƒå¼äº‹åŠ¡çš„åŸå­æ€§ï¼Œå…¶ä»–éƒ¨åˆ†å’Œå•æœºäº‹åŠ¡å·®åˆ«ä¸å¤§ï¼Œå°±ä¸å†ç»†è¯´æ¥ã€‚</p><p>åˆ°è¿™é‡Œï¼Œå¯¹åˆ†å¸ƒå¼ç³»ç»Ÿè„‰ç»œä¸Šæœ‰äº†åŸºæœ¬çš„æ¦‚å¿µï¼Œæ¥ä¸‹æ¥å¼€å§‹è¿›å…¥ç»†èŠ‚å­¦ä¹ é˜¶æ®µï¼Œè¿™ä¹Ÿæ˜¯éå¸¸å¹¸è‹¦çš„é˜¶æ®µï¼Œå¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿçš„ç†è§£æ·±å…¥ä¸å¦ï¼Œå¯¹ç»†èŠ‚çš„æ·±å…¥åº¦æ˜¯å¾ˆé‡è¦çš„è¯„ä»·æŒ‡æ ‡ï¼Œæ¯•ç«Ÿé­”é¬¼åœ¨ç»†èŠ‚ã€‚è¿™é‡Œå¯ä»¥å¾€ä¸¤ä¸ªæ–¹é¢è¿›è¡Œç³»ç»Ÿçš„å­¦ä¹ ï¼š</p><ol><li><p> ä»å®è·µå‡ºå‘ï¼Œç ”ç©¶ç›®å‰æ¯”è¾ƒå¸¸ç”¨çš„åˆ†å¸ƒå¼ç³»ç»Ÿçš„è®¾è®¡ï¼ŒHDFS æˆ–è€… GFSï¼ˆåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼‰ã€Kafka å’Œ Pulsarï¼ˆåˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—ï¼‰ï¼ŒRedis Cluster å’Œ Codisï¼ˆåˆ†å¸ƒå¼ç¼“å­˜ï¼‰ï¼ŒMySQL çš„åˆ†åº“åˆ†è¡¨ï¼ˆä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“çš„åˆ†å¸ƒå¼æ–¹æ¡ˆï¼‰ï¼ŒMongoDB çš„ Replica Set å’Œ Sharingæœºåˆ¶é›†ï¼ˆNoSQLæ•°æ®åº“ï¼‰ï¼ŒTiDBï¼ˆNewSQLï¼‰ï¼Œä»¥åŠä¸€äº›å¾®æœåŠ¡æ¡†æ¶ ç­‰ï¼›</p></li><li><p> ä»ç†è®ºå‡ºå‘ï¼Œç ”ç©¶åˆ†å¸ƒå¼ç›¸å…³çš„è®ºæ–‡ï¼Œè¿™é‡Œæ¨èä¸€æœ¬ä¹¦ã€Œ Designing Data-Intensive Applicationsã€ï¼ˆä¸­æ–‡ç‰ˆæœ¬ï¼šæ•°æ®å¯†é›†å‹åº”ç”¨ç³»ç»Ÿè®¾è®¡ï¼‰ï¼Œå…ˆæ•´ä½“çœ‹ä¹¦ï¼Œå¯¹æ¯”è¾ƒæ„Ÿå…´è¶£çš„ç« èŠ‚ï¼Œå†è¯»ä¸€è¯»è¯¥ç« èŠ‚ä¸­æ¶‰åŠåˆ°çš„ç›¸å…³å‚è€ƒæ–‡çŒ®ã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼æ¶æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†å¸ƒå¼æ¶æ„ </tag>
            
            <tag> åˆ†å¸ƒå¼ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•æ„å»ºä¸€ä¸ªå®Œå–„çš„æ´»åŠ¨å¹³å°</title>
      <link href="/My-Blogs/2021/01/08/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/"/>
      <url>/My-Blogs/2021/01/08/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/</url>
      
        <content type="html"><![CDATA[<h3 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h3><blockquote><p>å³æ˜¯å°†é¡µé¢çš„æŸä¸€éƒ¨åˆ†ç‹¬ç«‹å‡ºæ¥ï¼Œå°†è¿™ä¸€éƒ¨åˆ†çš„ç”¨é»‘ç›’çš„å½¢å¼å…¨éƒ¨å°è£…åˆ°ä¸€ä¸ªç»„ä»¶å†…ï¼Œæš´éœ²å‡ºä¸€äº›å±æ€§ä¾›å¤–éƒ¨ç»„ä»¶ä¼ å…¥å€¼</p></blockquote><a id="more"></a><h3 id="ç™½è¯è§£é‡Š"><a href="#ç™½è¯è§£é‡Š" class="headerlink" title="ç™½è¯è§£é‡Š"></a>ç™½è¯è§£é‡Š</h3><blockquote><p>æ‰§è¡Œä¸€æ®µâ€˜ç»„ä»¶è„šæœ¬â€™åï¼Œå¯ä»¥å†™â€œéæ³•â€HTMLæ ‡ç­¾ï¼ˆæŒ‡ä»£ç»„ä»¶å®ä¾‹ï¼‰ï¼Œå¹¶åœ¨æ ‡ç­¾å†…ç»‘å®šæ•°æ®ï¼Œè¯¥æ ‡ç­¾ï¼ˆç»„ä»¶ï¼‰ä¼šæ ¹æ®è‡ªèº«é€»è¾‘ï¼Œæ¸²æŸ“å‡ºç›¸å…³è§†å›¾ã€‚</p></blockquote><h3 id="å¦‚ä¸‹å›¾"><a href="#å¦‚ä¸‹å›¾" class="headerlink" title="å¦‚ä¸‹å›¾"></a>å¦‚ä¸‹å›¾</h3><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-01.png"></p><br><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><h3 id="ä¸€æ®µä¸å ªå›é¦–çš„ç»å†ğŸ˜­"><a href="#ä¸€æ®µä¸å ªå›é¦–çš„ç»å†ğŸ˜­" class="headerlink" title="ä¸€æ®µä¸å ªå›é¦–çš„ç»å†ğŸ˜­"></a>ä¸€æ®µä¸å ªå›é¦–çš„ç»å†ğŸ˜­</h3><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-02.png" alt="ä¸å ªå›é¦–"></p><br><h3 id="éœ€æ±‚ä¸Šçº¿æµç¨‹å›¾"><a href="#éœ€æ±‚ä¸Šçº¿æµç¨‹å›¾" class="headerlink" title="éœ€æ±‚ä¸Šçº¿æµç¨‹å›¾"></a>éœ€æ±‚ä¸Šçº¿æµç¨‹å›¾</h3><p><strong>ç‰¹å¾ï¼š</strong></p><ol><li> å‚ä¸äººå‘˜å¤šã€‚</li><li> ä¸Šçº¿å‘¨æœŸé•¿ã€‚</li></ol><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-03.png" alt="img"></p><br><h3 id="å¯è§†åŒ–å¹³å°è®¾æƒ³"><a href="#å¯è§†åŒ–å¹³å°è®¾æƒ³" class="headerlink" title="å¯è§†åŒ–å¹³å°è®¾æƒ³"></a>å¯è§†åŒ–å¹³å°è®¾æƒ³</h3><p><strong>ç‰¹å¾ï¼š</strong></p><ol><li> è®¾è®¡ã€å¼€å‘åä½œï¼Œæä¾›é€šç”¨ã€è§„èŒƒUIç»„ä»¶ã€‚</li><li> ç”¨æˆ·åˆ›å»ºæ´»åŠ¨ï¼Œé€‰æ‹©éœ€è¦çš„ç»„ä»¶ï¼Œç¼–è¾‘ç»„ä»¶æ•°æ®ã€‚</li><li> ä¿å­˜ï¼Œé¢„è§ˆï¼Œå‘å¸ƒï¼Œè®¿é—®ã€‚</li></ol><br><p><strong>å¦‚ä¸‹å›¾ğŸ‘‡</strong><br><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-04.png" alt="img"></p><br><h3 id="ä¸Šçº¿æµç¨‹å›¾è®¾æƒ³"><a href="#ä¸Šçº¿æµç¨‹å›¾è®¾æƒ³" class="headerlink" title="ä¸Šçº¿æµç¨‹å›¾è®¾æƒ³"></a>ä¸Šçº¿æµç¨‹å›¾è®¾æƒ³</h3><p><strong>ç‰¹å¾ï¼š</strong></p><ol><li> äººå‘˜å°‘ï¼šä»…è¿è¥1äººã€‚</li><li> ä¸Šçº¿å¿«ï¼šå°æ—¶çº§å‘¨æœŸã€‚</li></ol><br><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-05.png" alt="img"></p><br><h3 id="å¹³å°å¯åŠ¨å‰æ€è€ƒğŸ¤”"><a href="#å¹³å°å¯åŠ¨å‰æ€è€ƒğŸ¤”" class="headerlink" title="å¹³å°å¯åŠ¨å‰æ€è€ƒğŸ¤”"></a>å¹³å°å¯åŠ¨å‰æ€è€ƒğŸ¤”</h3><p><code>ç»„ä»¶å¼€å‘</code>ï¼š<br>å¹³å°çš„ç»„ä»¶æ•°é‡åº”è¯¥æ— é™åˆ¶ï¼Œç»„ä»¶ä¹‹é—´ç‹¬ç«‹ï¼Œç»„ä»¶ä¸å¹³å°è§£è€¦ï¼Œåšåˆ°åŠ¨æ€åŠ è½½ã€ç¼–è¾‘ç»„ä»¶ã€‚</p><p><code>é…ç½®å¹³å°</code>ï¼š<br>å¯¹å¤–çš„æ ¸å¿ƒäº¤äº’ï¼Œé…ç½®å¹³å°è´Ÿè´£å¯è§†åŒ–åˆ›å»ºé¡µé¢ï¼Œé€‰æ‹©ç»„ä»¶ï¼Œç¼–è¾‘æ•°æ®ã€‚</p><p><code>é¡µé¢æ¸²æŸ“</code>ï¼š<br>å¹³å°çš„æœ€ç»ˆäº§ç‰©ï¼Œä¿å­˜æ´»åŠ¨é…ç½®åï¼Œæ¸²æŸ“é¡µåº”è¯¥ä»…åŠ è½½æœ¬æ´»åŠ¨æ¶‰åŠçš„ç»„ä»¶ã€‚</p><p><code>æ€»ç»“</code>ï¼š<br>ç»„ä»¶å¼€å‘æ¨¡å—ï¼šè´Ÿè´£äº§å‡ºé¡µé¢çš„åŸºæœ¬å•å…ƒâ€”â€”ç»„ä»¶ã€‚<br>é…ç½®å¹³å°æ¨¡å—ï¼šè´Ÿè´£å¯è§†åŒ–åˆ›å»ºï¼Œç¼–è¾‘æ´»åŠ¨é¡µã€‚<br>é¡µé¢æ¸²æŸ“æ¨¡å—ï¼šè´Ÿè´£å‘ˆç°æ´»åŠ¨è§†å›¾ã€‚</p><br><h1 id="å¹³å°å®ç°"><a href="#å¹³å°å®ç°" class="headerlink" title="å¹³å°å®ç°"></a>å¹³å°å®ç°</h1><h3 id="ç»„ä»¶å¼€å‘æ¶æ„å›¾"><a href="#ç»„ä»¶å¼€å‘æ¶æ„å›¾" class="headerlink" title="ç»„ä»¶å¼€å‘æ¶æ„å›¾"></a>ç»„ä»¶å¼€å‘æ¶æ„å›¾</h3><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-06.png" alt="img"></p><br><h3 id="ç»„ä»¶å¼€å‘ç¯å¢ƒ"><a href="#ç»„ä»¶å¼€å‘ç¯å¢ƒ" class="headerlink" title="ç»„ä»¶å¼€å‘ç¯å¢ƒ"></a>ç»„ä»¶å¼€å‘ç¯å¢ƒ</h3><p><strong>ç»„ä»¶å¼€å‘ï¼š</strong></p><ol><li> æä¾›é›†ä¸­å¼å¼€å‘ã€ç®¡ç†ç»„ä»¶çš„é¡¹ç›®ç¯å¢ƒã€‚</li><li> æ”¯æŒå‘½ä»¤å¼åˆ›å»ºã€è°ƒè¯•ã€ç¼–è¯‘ã€æ ¡éªŒã€å‘å¸ƒç»„ä»¶ã€‚</li></ol><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-07.png" alt="img"></p><br><h3 id="å†æ¥è¯´ä¸‹ç»„ä»¶å½¢æ€"><a href="#å†æ¥è¯´ä¸‹ç»„ä»¶å½¢æ€" class="headerlink" title="å†æ¥è¯´ä¸‹ç»„ä»¶å½¢æ€"></a>å†æ¥è¯´ä¸‹ç»„ä»¶å½¢æ€</h3><ol><li> ä¸€æ®µå¯æ‰§è¡ŒJSè„šæœ¬â€”â€”ç»„ä»¶æœ¬èº«ã€‚</li><li> ä¸€ä»½XLSXæ–‡ä»¶â€”â€”å¤šåœ°åŒºè¯­è¨€é…ç½®ã€‚</li><li> ä¸€ä»½JSONæ–‡ä»¶â€”â€”å¯ç¼–è¾‘å±æ€§ç”³æ˜ã€‚</li></ol><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-08.png" alt="img"></p><br><h3 id="ç»„ä»¶å‘å¸ƒ"><a href="#ç»„ä»¶å‘å¸ƒ" class="headerlink" title="ç»„ä»¶å‘å¸ƒ"></a>ç»„ä»¶å‘å¸ƒ</h3><blockquote><p>å‘½ä»¤å¼å‘å¸ƒï¼Œç›¸å…³å­—æ®µè¢«å®Œå–„ï¼Œæ³¨å†Œå…¥åº“ã€‚</p></blockquote><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-09.png" alt="img"></p><br><h1 id="å¹³å°å®ç°-1"><a href="#å¹³å°å®ç°-1" class="headerlink" title="å¹³å°å®ç°"></a>å¹³å°å®ç°</h1><h3 id="é¡µé¢é…ç½®ä¸€è§ˆ"><a href="#é¡µé¢é…ç½®ä¸€è§ˆ" class="headerlink" title="é¡µé¢é…ç½®ä¸€è§ˆ"></a>é¡µé¢é…ç½®ä¸€è§ˆ</h3><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-10.png" alt="img"></p><br><h3 id="é¡µé¢é…ç½®-ç¼–è¾‘"><a href="#é¡µé¢é…ç½®-ç¼–è¾‘" class="headerlink" title="é¡µé¢é…ç½®-ç¼–è¾‘"></a>é¡µé¢é…ç½®-ç¼–è¾‘</h3><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-11.png" alt="img"></p><br><h3 id="é¡µé¢é…ç½®-å‘å¸ƒ"><a href="#é¡µé¢é…ç½®-å‘å¸ƒ" class="headerlink" title="é¡µé¢é…ç½®-å‘å¸ƒ"></a>é¡µé¢é…ç½®-å‘å¸ƒ</h3><p><strong>å‘å¸ƒæµç¨‹</strong></p><ol><li> å°†ç»„ä»¶ã€é…ç½®æ‰“åŒ…ã€‚</li><li> æ‰“åŒ…æ–‡ä»¶æ¨è‡³CDNã€‚</li></ol><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-12.png" alt="img"></p><br><h3 id="é¡µé¢æ¸²æŸ“-è§£æ"><a href="#é¡µé¢æ¸²æŸ“-è§£æ" class="headerlink" title="é¡µé¢æ¸²æŸ“-è§£æ"></a>é¡µé¢æ¸²æŸ“-è§£æ</h3><ol><li> åŠ è½½CDNé…ç½®æ–‡ä»¶ã€‚</li><li> éå†Renderç»„ä»¶å¹¶ä¼ å…¥è¯¥ç»„ä»¶é…ç½®</li></ol><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-13.png" alt="img"></p><br><h3 id="é¡µé¢æ¸²æŸ“-ç›‘æ§"><a href="#é¡µé¢æ¸²æŸ“-ç›‘æ§" class="headerlink" title="é¡µé¢æ¸²æŸ“-ç›‘æ§"></a>é¡µé¢æ¸²æŸ“-ç›‘æ§</h3><ol><li> å¼‚å¸¸ç›‘æ§+å‘Šè­¦ã€‚</li><li> é¡µé¢æ€§èƒ½ç›‘æ§+å‘Šè­¦ã€‚</li><li> ç”¨æˆ·è¡Œä¸ºç›‘æ§ã€‚</li></ol><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-14.png" alt="img"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li><code>ç»„ä»¶å¼€å‘</code>ï¼šå…³é”®æ•°æ®æœ‰JS, JSON, XLSXã€‚</li><li><code>é¡µé¢é…ç½®</code>ï¼šé€‰æ‹©ç»„ä»¶ï¼Œç¼–è¾‘ç»„ä»¶ï¼Œä¿å­˜é…ç½®ã€‚</li><li><code>é¡µé¢æ¸²æŸ“</code>ï¼šé€ä¸ªæ¸²æŸ“ç»„ä»¶å¹¶ä¼ å…¥é…ç½®ï¼Œé¡µé¢ç›‘æ§ã€‚</li></ul><br><h1 id="å®ç°ç»†èŠ‚æ€»ç»“"><a href="#å®ç°ç»†èŠ‚æ€»ç»“" class="headerlink" title="å®ç°ç»†èŠ‚æ€»ç»“"></a>å®ç°ç»†èŠ‚æ€»ç»“</h1><ul><li><code>ç»„ä»¶ç¼–è¾‘é¢æ¿</code>: æ ¹æ®ç»„ä»¶JSONé…ç½®ï¼Œå±•å¼€ç¼–è¾‘é¢æ¿ã€‚</li><li><code>ç»„ä»¶é€šä¿¡</code>: å°†å‘å°„ã€æ¥æ”¶çš„äº‹ä»¶ã€æ–¹æ³•åç”³æ˜ï¼Œæ·»åŠ äº‹ä»¶ç›‘å¬å¹¶è°ƒç”¨æš´éœ²æ–¹æ³•ã€‚</li><li><code>ç»„ä»¶åµŒå¥—</code>: é…ç½®ä¸­çˆ¶å­å…³ç³»é“¾ã€‚</li><li><code>å¤šè¯­è¨€</code>: æ±‡æ€»å„ç»„ä»¶å¤šè¯­è¨€æ–‡ä»¶ï¼Œé›†ä¸­å¤„ç†æˆåŒ…ï¼Œå†ä»¥Hash IDåˆ†å‘ã€‚</li><li><code>ä¸»é¢˜è‰²</code>: è§„èŒƒè§†è§‰UIçš„è‰²å€¼å ä½ï¼Œä¸€å¥—ä¸»é¢˜å³ä¸€å¥—è¯å…¸ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> åˆ†å¸ƒå¼æ¶æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†å¸ƒå¼æ¶æ„ </tag>
            
            <tag> æ´»åŠ¨å¹³å° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>easywebpacké¡¹ç›®æ·»åŠ svgå¤„ç†</title>
      <link href="/My-Blogs/2021/01/08/webpack/easywebpack/easywebpack%E9%A1%B9%E7%9B%AE%E6%B7%BB%E5%8A%A0svg%E5%A4%84%E7%90%86/"/>
      <url>/My-Blogs/2021/01/08/webpack/easywebpack/easywebpack%E9%A1%B9%E7%9B%AE%E6%B7%BB%E5%8A%A0svg%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>æ¯”å¦‚æŸ¥çœ‹webpackæœ€ç»ˆçš„loaderï¼š <code>easywebpack print test -n module.rules</code></p><a id="more"></a><p>easywebpacké…ç½®svg-sprite-loaderçš„é…ç½®ï¼š</p><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><blockquote><p>å»é™¤é»˜è®¤svgå¤„ç†ï¼Œå¹¶æ·»åŠ svg-sprite-loaderé…ç½®</p></blockquote><pre><code class="JS">loaders: {  urlimage: {    test: /\.(png|jpe?g|gif)(\?.*)?$/, // é»˜è®¤çš„url-loaderåœ¨å°†svgä¹Ÿå¤„ç†äº†ï¼Œéœ€è¦å»æ‰  },  svg: {    test: /\.svg$/,    loader: 'svg-sprite-loader',    options: {      symbolId: 'icon-[name]',    },    include: resolve('app/web/asset/svg'),  },}</code></pre><p>ç½‘ä¸Šå…³äº<a href="https://juejin.cn/post/6854573215646875655">svg-sprite-loader</a>çš„ä»‹ç»</p>]]></content>
      
      
      <categories>
          
          <category> easywebpack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> svg </tag>
            
            <tag> webpack </tag>
            
            <tag> åŸºç¡€æ„å»º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµ…è°ˆVue3æ–°ç‰¹æ€§</title>
      <link href="/My-Blogs/2021/01/08/vue/vue3/%E6%B5%85%E8%B0%88Vue3%E6%96%B0%E7%89%B9%E6%80%A7/"/>
      <url>/My-Blogs/2021/01/08/vue/vue3/%E6%B5%85%E8%B0%88Vue3%E6%96%B0%E7%89%B9%E6%80%A7/</url>
      
        <content type="html"><![CDATA[<p>Vue3çš„<a href="https://github.com/vuejs/vue-next">releaseç‰ˆæœ¬</a>ç»ˆäºå‘å¸ƒäº†ï¼Œæ–°çš„Vue3åœ¨è¯­æ³•ä»¥åŠåº•å±‚éƒ½è¿›è¡Œäº†å…¨æ–°çš„é‡æ„ï¼Œå¸¦æ¥äº†æ›´å¿«çš„è¿è¡Œé€Ÿåº¦ï¼Œæ›´å°çš„æ„å»ºåŒ…ï¼Œæ›´å‹å¥½çš„ç¼–ç¨‹è§„èŒƒã€‚</p><a id="more"></a><h2 id="æ›´å¿«"><a href="#æ›´å¿«" class="headerlink" title="æ›´å¿«"></a>æ›´å¿«</h2><p>ä¼ ç»Ÿçš„è™šæ‹Ÿdomç®—æ³•ï¼š</p><p>ç»„ä»¶patchçš„æ—¶å€™ï¼Œéœ€è¦é‡æ–°åˆ›å»ºæ•´ä¸ªvdomæ ‘ï¼Œç„¶åéå†æ•´æ£µæ ‘è¿›è¡Œdiffï¼Œupdateâ€¦</p><p>æ›´å¿«çš„è™šæ‹Ÿdomç®—æ³•ï¼Œæºè‡ªç¼–è¯‘æ¨¡æ¿æ—¶ç»™äºˆæ›´å¤šçš„è¿è¡Œæ—¶æç¤ºï¼š</p><ol><li> ç¼–è¯‘æ¨¡æ¿æ—¶å¯¹åŠ¨æ€å†…å®¹è¿›è¡Œpatchæ ‡è®°ï¼Œå‘Šè¯‰patchç®—æ³•åªå…³æ³¨è¢«æ ‡è®°çš„åŠ¨æ€éƒ¨åˆ†</li></ol><p><img src="/My-Blogs/images/%E6%B5%85%E8%B0%88Vue3%E6%96%B0%E7%89%B9%E6%80%A7-01.png"></p><ol><li> å¯¹é™æ€å†…å®¹è¿›è¡Œé™æ€æå‡ï¼ˆå˜é‡æå‡ï¼‰ï¼Œåªåœ¨é¡µé¢åˆå§‹åŒ–æ—¶åˆ›å»ºå¹¶æ¸²æŸ“ä¸€æ¬¡ï¼Œå…¶ä½™æ—¶å€™ä¸å†æ¸²æŸ“</li></ol><p><img src="/My-Blogs/images/%E6%B5%85%E8%B0%88Vue3%E6%96%B0%E7%89%B9%E6%80%A7-02.png"></p><ol><li> å¯¹äº‹ä»¶ç›‘å¬å‡½æ•°è¿›è¡Œç¼“å­˜ï¼Œé˜²æ­¢å†…è”ç›‘å¬å‡½æ•°å¸¦æ¥çš„å‰¯ä½œç”¨</li></ol><p>å¼€å¯ç¼“å­˜å‰ï¼š</p><p><img src="/My-Blogs/images/%E6%B5%85%E8%B0%88Vue3%E6%96%B0%E7%89%B9%E6%80%A7-03.png"></p><p>å¼€å¯ç¼“å­˜åï¼š</p><p><img src="/My-Blogs/images/%E6%B5%85%E8%B0%88Vue3%E6%96%B0%E7%89%B9%E6%80%A7-04.png"></p><p>â€¦â€¦</p><p>ä»åœ¨çº¿æ¨¡æ¿ç¼–è¯‘å™¨ä¸­ç¼–è¾‘å¹¶æŸ¥çœ‹æ–°å˜åŒ– =&gt;<a href="https://vue-next-template-explorer.netlify.app/">æ¨¡æ¿ç¼–è¯‘å™¨</a></p><h2 id="æ›´å°"><a href="#æ›´å°" class="headerlink" title="æ›´å°"></a>æ›´å°</h2><h3 id="å…¨å±€APIçš„ä½¿ç”¨"><a href="#å…¨å±€APIçš„ä½¿ç”¨" class="headerlink" title="å…¨å±€APIçš„ä½¿ç”¨"></a>å…¨å±€APIçš„ä½¿ç”¨</h3><p>å…¨å±€ API ç°åœ¨åªèƒ½ä½œä¸º ES æ¨¡å—æ„å»ºçš„å‘½åå¯¼å‡ºè¿›è¡Œè®¿é—®ã€‚</p><h4 id="Vue2çš„ä½¿ç”¨æ–¹å¼"><a href="#Vue2çš„ä½¿ç”¨æ–¹å¼" class="headerlink" title="Vue2çš„ä½¿ç”¨æ–¹å¼"></a>Vue2çš„ä½¿ç”¨æ–¹å¼</h4><p>Vue.nextTickï¼ˆthis.$nextTickï¼‰ã€Vue.setã€Vue.delete â€¦</p><h4 id="Vue3çš„ä½¿ç”¨æ–¹å¼"><a href="#Vue3çš„ä½¿ç”¨æ–¹å¼" class="headerlink" title="Vue3çš„ä½¿ç”¨æ–¹å¼"></a>Vue3çš„ä½¿ç”¨æ–¹å¼</h4><p>import { nextTick, set, delete, â€¦ } from â€˜vueâ€™; </p><p>nextTick(() =&gt; {// dosomething});<br>â€¦â€¦</p><h3 id="å†…éƒ¨ç»„ä»¶ä¸helperçš„ä½¿ç”¨"><a href="#å†…éƒ¨ç»„ä»¶ä¸helperçš„ä½¿ç”¨" class="headerlink" title="å†…éƒ¨ç»„ä»¶ä¸helperçš„ä½¿ç”¨"></a>å†…éƒ¨ç»„ä»¶ä¸helperçš„ä½¿ç”¨</h3><p>å½“åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨åˆ°transtionç»„ä»¶ã€keepAliveç»„ä»¶ã€ â€¦</p><p>ç»complierç¼–è¯‘åï¼Œç”Ÿæˆ</p><p>import { transtion, keepAlive, â€¦ } from â€˜vueâ€™</p><p>å½“åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨åˆ°v-showã€v-modelâ€¦</p><p>complierç¼–è¯‘åï¼Œç”Ÿæˆ</p><p>import { vShow, vModel â€¦ } from â€˜vueâ€™</p><p>æ„å‘³ç€åªæœ‰åœ¨åº”ç”¨ç¨‹åºå®é™…ä½¿ç”¨äº†æŸä¸ªAPIæˆ–è€…ç»„ä»¶çš„æ—¶å€™æ‰ä¼šå¯¼å…¥å®ƒã€‚æ²¡æœ‰ä½¿ç”¨åˆ°çš„åŠŸèƒ½ä»£ç å°†ä¸ä¼šå‡ºç°åœ¨æœ€ç»ˆçš„æ„å»ºåŒ…ä¸­ã€‚æ¡†æ¶ä½“ç§¯è¿›ä¸€æ­¥ç¼©å°ã€‚</p><h2 id="æ›´å‹å¥½ï¼Ÿ"><a href="#æ›´å‹å¥½ï¼Ÿ" class="headerlink" title="æ›´å‹å¥½ï¼Ÿ"></a>æ›´å‹å¥½ï¼Ÿ</h2><h4 id="VUE2ç»„ä»¶ç°å­˜çš„ç¼ºé™·"><a href="#VUE2ç»„ä»¶ç°å­˜çš„ç¼ºé™·" class="headerlink" title="VUE2ç»„ä»¶ç°å­˜çš„ç¼ºé™·"></a>VUE2ç»„ä»¶ç°å­˜çš„ç¼ºé™·</h4><ol><li><p> ç»„ä»¶è¶Šæ¥è¶Šå¤§ï¼Œå¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§è¶Šæ¥è¶Šå·®ã€‚æ ¹æœ¬åŸå› åœ¨äºVueä½¿ç”¨çš„option APIï¼šå¿…é¡»æŒ‰é…ç½®(options)æ¥ç»„ç»‡ä»£ç ï¼Œä½ éœ€è¦æŠŠä¸€ä¸ªåŠŸèƒ½çš„å®ç°åˆ†å¸ƒåœ¨å„ä¸ªé…ç½®é‡Œï¼šdataï¼Œcomputedï¼Œwatcherï¼Œmethodsï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹æŒ‰åŠŸèƒ½æ¥ç»„ç»‡ä»£ç æ›´åˆç†ã€‚å¦‚æœè¦åœ¨ä¸€ä¸ªå¾ˆå¤§çš„ç»„ä»¶ä¸­ä¿®æ”¹ä¸€ä¸ªåŠŸèƒ½ï¼Œå°±è¦è·³åˆ°å„ä¸ªå±æ€§æ‰¾ï¼Œå¦‚æœç»„ä»¶é‡Œé¢è¿˜ç”¨äº†mixinsï¼Œè¿˜å¾—è·³æ–‡ä»¶çœ‹</p></li><li><p>mixinsæ— æ³•ç‰¹åˆ«å¥½çš„åœ¨å¤šä¸ªç»„ä»¶ä¸­å¤ç”¨åŒä¸€æ®µä»£ç   </p><p> mixinsæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ<br> å¯è¯»æ€§å¤ªå·®ï¼Œå¾—è·³åˆ°mixinsæ‰€åœ¨çš„æ–‡ä»¶ä¸­æ‰èƒ½çŸ¥é“å®ƒåˆ°åº•æœ‰ä»€ä¹ˆ<br> ä¸åŒçš„mixinså®¹æ˜“å†²çª<br> å¤ç”¨å…¶ä»–åŒä¼´çš„mixinsçš„æ—¶å€™ï¼Œæœ‰äº›ä»£ç ä¸åˆè‡ªå·±çš„é¢„æœŸï¼Œä½†æ˜¯ä¸èƒ½éšæ„æ›´æ”¹</p></li><li><p> å¯¹typeScriptçš„æ”¯æŒæœ‰é™</p></li></ol><h4 id="ä½¿ç”¨componsition-API"><a href="#ä½¿ç”¨componsition-API" class="headerlink" title="ä½¿ç”¨componsition API"></a>ä½¿ç”¨componsition API</h4><p>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨componsition APIï¼Ÿ</p><p><img src="/My-Blogs/images/%E6%B5%85%E8%B0%88Vue3%E6%96%B0%E7%89%B9%E6%80%A7-05.png"></p><ol><li> å¦‚æœä½ æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ç»„ä»¶ï¼Œæƒ³è¦æŒ‰åŠŸèƒ½æ¥èšåˆä»£ç ã€‚</li><li> å¦‚æœä½ æƒ³è¦å¤ç”¨ç»„ä»¶çš„ä¸€éƒ¨åˆ†ä»£ç ã€‚</li><li> å¦‚æœä½ æƒ³è¦æ›´å¥½åœ°æ”¯æŒtypeScript</li></ol><pre><code class="JS">import useFeature1 from '../use/useFeature1';import useFeature2 from '../use/useFeature2';export default {  setup() {    const {      data1,      data2,      method1,      computed1,      ...    } = useFeature1();    const {      data3,      data4,      method2,      computed2,      ...    } = useFeature2();    // do something    return {      data1,      data2,      method1,      ...    };  }}</code></pre><p>ä¸Šé¢è¿™æ®µä»£ç æ˜¯compsition APIçš„ä¸€ç§ç¤ºä¾‹ï¼Œå®ƒåšåˆ°äº†ï¼šæŒ‰åŠŸèƒ½ç»„ç»‡ä»£ç ï¼Œæƒ³è¦ä¿®æ”¹æŸä¸ªä¸šåŠ¡é€»è¾‘æ—¶ï¼Œä¸éœ€è¦æ»¡å¤§è¡—æ‰¾æ•£å¸ƒå„åœ°çš„æ•°æ®å’Œæ–¹æ³•äº†ï¼Œå“åº”å¼å±æ€§ä¸ç»„ä»¶è§£è€¦ï¼Œè‡ªç”±æ§åˆ¶éœ€è¦æˆä¸ºå“åº”å¼çš„ä»¥åŠéœ€è¦æš´éœ²ç»™æ¨¡æ¿çš„å±æ€§ã€‚</p><p>setupå†…çš„ä»£ç åªä¾èµ–äºä¼ å…¥çš„å‚æ•°å’Œå…¨å±€å¼•å…¥çš„Vue APIï¼Œè€Œä¸æ˜¯ç‰¹æ®Šä¿®æ”¹è¿‡çš„ <code>this</code> ã€‚æ‰€ä»¥åªéœ€è¦å¯¼å‡ºä½ æƒ³è¦å¤ç”¨çš„åŠŸèƒ½å‡½æ•°ã€‚ç”šè‡³å¯ä»¥å¯¼å‡ºæ•´ä¸ª <code>setup</code> å‡½æ•°å»å®ç°â€œç±»ä¼¼â€ç»§æ‰¿çš„æ•ˆæœã€‚</p><h4 id="ä¸¤ç§åˆ›å»ºå“åº”å¼å±æ€§çš„API"><a href="#ä¸¤ç§åˆ›å»ºå“åº”å¼å±æ€§çš„API" class="headerlink" title="ä¸¤ç§åˆ›å»ºå“åº”å¼å±æ€§çš„API"></a>ä¸¤ç§åˆ›å»ºå“åº”å¼å±æ€§çš„API</h4><h5 id="ref-ä¸ºä¼ å…¥çš„å€¼å°è£…ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œé€šè¿‡valueå±æ€§è®¿é—®ä¸è®¾ç½®å¯¹è±¡çš„å€¼"><a href="#ref-ä¸ºä¼ å…¥çš„å€¼å°è£…ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œé€šè¿‡valueå±æ€§è®¿é—®ä¸è®¾ç½®å¯¹è±¡çš„å€¼" class="headerlink" title="ref: ä¸ºä¼ å…¥çš„å€¼å°è£…ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œé€šè¿‡valueå±æ€§è®¿é—®ä¸è®¾ç½®å¯¹è±¡çš„å€¼"></a>ref: ä¸ºä¼ å…¥çš„å€¼å°è£…ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œé€šè¿‡valueå±æ€§è®¿é—®ä¸è®¾ç½®å¯¹è±¡çš„å€¼</h5><pre><code class="JS">setup() {  const capacity = ref(3);  const attending = ref(['tim', 'Bob', 'Joe']);  watch(capacity, () =&gt; {    console.log('capacity changed!');  });  watch(attending, () =&gt; {    console.log('attending changed!');  });  onMounted(() =&gt; {    capacity.value += 1; // capacity changed!    attending.value[0] = 'Jack'; // ?    // é€šè¿‡refå°è£…çš„å“åº”å¼å¯¹è±¡æ— æ³•è¿›è¡Œæ·±å±‚ç›‘å¬  });  return {    capacity  };}</code></pre><h5 id="reactive-è®©ä¼ å…¥çš„å¯¹è±¡æˆä¸ºå“åº”å¼å¯¹è±¡"><a href="#reactive-è®©ä¼ å…¥çš„å¯¹è±¡æˆä¸ºå“åº”å¼å¯¹è±¡" class="headerlink" title="reactive: è®©ä¼ å…¥çš„å¯¹è±¡æˆä¸ºå“åº”å¼å¯¹è±¡"></a>reactive: è®©ä¼ å…¥çš„å¯¹è±¡æˆä¸ºå“åº”å¼å¯¹è±¡</h5><pre><code class="JS">setup() {  const event = reactive({    capacity: 3,    attending: ['tim', 'Bob', 'Joe'],  });  watch(event, () =&gt; {    console.log('something changed!');  });  onMounted(() =&gt; {    event.attending[0] = 'Jack'; // something changed!  });  return {    event  };}</code></pre><p>Vue3çš„å“åº”å¼ç›‘å¬çš„å®ç°æ–¹å¼ä¸Vue2æœ‰å¾ˆå¤§ä¸åŒï¼Œå¹¶æŒ£è„±äº†Vue2ä¸­æ— æ³•ç›‘å¬åŠ¨æ€å¢åŠ å¯¹è±¡å±æ€§ä¸æ•°ç»„å…ƒç´ ç›´æ¥èµ‹å€¼çš„æŸç¼šã€‚</p><p>ç‚¹è¿™é‡ŒæŸ¥çœ‹<a href="https://github.com/LaiTaoGDUT/learnVue3/blob/master/public/reactive.html">ç®€ç•¥ç‰ˆæœ¬çš„æ–°å“åº”å¼ç›‘å¬å®ç°</a></p><h4 id="å…¶ä»–API"><a href="#å…¶ä»–API" class="headerlink" title="å…¶ä»–API"></a>å…¶ä»–API</h4><h5 id="watchEffect"><a href="#watchEffect" class="headerlink" title="watchEffect"></a>watchEffect</h5><pre><code class="JS">setup() {  const capacity = ref(3);  const attending = ref(['tim', 'Bob', 'Joe']);  const stop = watchEffect(() =&gt; {    console.log(capacity.value + attending.value.length);  })  onMounted(() =&gt; {    capacity.value += 1; // 7  });  return {    capacity,    attending,    stop  };}stop(); // åœæ­¢ç›‘å¬</code></pre><p><a href="https://vue3js.cn/docs/zh/api/">æ›´å¤šAPIè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£</a></p><h4 id="compisition-APIçš„ä¸‹ä¸€æ­¥"><a href="#compisition-APIçš„ä¸‹ä¸€æ­¥" class="headerlink" title="compisition APIçš„ä¸‹ä¸€æ­¥"></a>compisition APIçš„ä¸‹ä¸€æ­¥</h4><h5 id="ç°å­˜çš„ç¼ºç‚¹"><a href="#ç°å­˜çš„ç¼ºç‚¹" class="headerlink" title="ç°å­˜çš„ç¼ºç‚¹"></a>ç°å­˜çš„ç¼ºç‚¹</h5><ol><li> refå’Œreactiveå¤ªåƒäº†ï¼Œåˆä¸Šæ‰‹æ—¶å¾ˆéš¾å†³å®šåˆ°åº•ç”¨å“ªä¸ªã€‚</li><li> æ²¡æœ‰äº†optionsçš„é™åˆ¶ï¼Œä¸€ä¸å°å¿ƒå°±å¯èƒ½ä¼šå†™å‡ºæ¯”ä½¿ç”¨option APIæ›´åŠ è‡ƒè‚¿éš¾è¯»çš„ä»£ç </li><li> ä½¿ç”¨Composition APIæ—¶ï¼Œéœ€è¦åŒºåˆ†å“ªäº›å€¼æˆ–è€…å¯¹è±¡æ˜¯å“åº”å¼çš„ï¼Œå“ªäº›ä¸æ˜¯ã€‚</li><li> é˜…è¯»æˆ–è€…ä¿®æ”¹refä¼šæœ‰ç‚¹éº»çƒ¦ï¼Œå› ä¸ºå¿…é¡»é€šè¿‡<code>.value</code>æ‰èƒ½å®ç°ã€‚</li><li> ä¸€æ—¦ç»„ä»¶éœ€è¦ä½¿ç”¨çš„æ•°æ®å¤šèµ·æ¥ï¼Œimportå’Œreturnè¯­å¥å°±ä¼šå¾ˆå†—é•¿ã€‚</li></ol><h5 id="ä¸‹ä¸€æ­¥"><a href="#ä¸‹ä¸€æ­¥" class="headerlink" title="ä¸‹ä¸€æ­¥"></a>ä¸‹ä¸€æ­¥</h5><p><a href="https://github.com/vuejs/rfcs/pull/222">New script setup and ref sugar</a></p><p>å‰é˜µå­ï¼ŒVue3.0æå‡ºäº†ä¸¤ä¸ªæ–°ææ¡ˆï¼Œåˆ†åˆ«ä¸ºscript-setupææ¡ˆä¸ref-sugerææ¡ˆ</p><p>å¯¹äºä»¥ä¸‹æºä»£ç ï¼š</p><pre><code class="HTML">&lt;script&gt;  import {    ref  } from 'vue'  export default {    setup() {      const count = ref(1)      const inc = () =&gt; {        count.value++      }      return {        count,        inc      }    }  }&lt;/script&gt;</code></pre><p><strong>ä½¿ç”¨script-setup ææ¡ˆï¼Œå°† options.setup æå–åˆ°ä»£ç é¡¶å±‚ï¼Œæ‰€æœ‰é¡¶å±‚å£°æ˜é»˜è®¤å¯¼å‡ºä¸ºæ¨¡æ¿ä½¿ç”¨</strong></p><pre><code class="HTML">&lt;script setup&gt;  import {    ref  } from 'vue'  const count = ref(0)  const inc = () =&gt; {    count.value++  }&lt;/script&gt;</code></pre><p><strong>ä½¿ç”¨ref-sugar ææ¡ˆï¼Œå°† ref.value çš„å†™æ³•ï¼Œåšè¿›ä¸€æ­¥ç®€åŒ–ï¼Œæ”¾å¼ƒ<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/label">æ ‡è®°è¯­å¥</a>çš„æ™®é€šè¯­æ³•ï¼Œå°†å…¶ä½œä¸ºrefå£°æ˜çš„è¯­æ³•ç³–ã€‚</strong></p><pre><code class="HTML">&lt;script setup&gt;  ref: count = 1  const inc = () =&gt; {    count++  }  // é€šè¿‡æ·»åŠ $å‰ç¼€æ¥è®¿é—®å“åº”å¼å¯¹è±¡  console.log($count.value)&lt;/script&gt;</code></pre><p>è¿™æ˜¯Vue3å¸¦æ¥çš„å°æ”¹è¿›è¿˜æ˜¯å¤§æŒ‘æˆ˜ ï¼Ÿ</p><h2 id="å…¶ä»–å˜åŒ–"><a href="#å…¶ä»–å˜åŒ–" class="headerlink" title="å…¶ä»–å˜åŒ–"></a>å…¶ä»–å˜åŒ–</h2><h4 id="ä¸å†æ”¯æŒkeyCodeä¿®é¥°"><a href="#ä¸å†æ”¯æŒkeyCodeä¿®é¥°" class="headerlink" title="ä¸å†æ”¯æŒkeyCodeä¿®é¥°"></a>ä¸å†æ”¯æŒkeyCodeä¿®é¥°</h4><pre><code class="HTML">&lt;input v-on:keyup.13="handleEnter"&gt;&lt;/input&gt;</code></pre><p>æ›¿æ¢ä¸º</p><pre><code class="HTML">&lt;input v-on:keyup:enter="handleEnter"&gt;&lt;/input&gt;</code></pre><h4 id="è¿‡æ¸¡ç±»åå˜æ›´"><a href="#è¿‡æ¸¡ç±»åå˜æ›´" class="headerlink" title="è¿‡æ¸¡ç±»åå˜æ›´"></a>è¿‡æ¸¡ç±»åå˜æ›´</h4><p>.v-enter =&gt; .v-enter-from</p><p>.v-leave =&gt; .v-leave-from</p><h4 id="v-modelå˜æ›´"><a href="#v-modelå˜æ›´" class="headerlink" title="v-modelå˜æ›´"></a>v-modelå˜æ›´</h4><p>å¯ä½¿ç”¨å¤šä¸ªv-model, ä¸å†éœ€è¦.syncä¿®é¥°ç¬¦æ¥è¿›è¡ŒåŒå‘ç»‘å®šäº†</p><pre><code class="HTML">&lt;ChildComponent v-model:title="pageTitle" /&gt;</code></pre><p>ç›¸å½“äº</p><pre><code class="HTML">&lt;ChildComponent :title="pageTitle" @update:title="pageTitle = $event" /&gt;</code></pre><h4 id="æ›´å¤š"><a href="#æ›´å¤š" class="headerlink" title="æ›´å¤š"></a>æ›´å¤š</h4><p>Vueè®¤ä¸º$ onï¼Œ$ off å’Œ $once å®ä¾‹æ–¹æ³•ä¸åº”è¯¥ç”±å®ƒæ¥æä¾›ï¼Œå› æ­¤Vue3å°†å®ƒä»¬ç§»é™¤äº†</p><p>è¿‡æ»¤å™¨filtersè¢«ç§»é™¤äº†ï¼Œéœ€è¦ä½¿ç”¨è®¡ç®—å±æ€§æˆ–æ–¹æ³•æ¥ä»£æ›¿</p><p>æ–°å¢Suspenceç»„ä»¶ =&gt; ç»„ä»¶loadingå®Œæˆå‰æ˜¾ç¤ºåå¤‡å†…å®¹</p><p>æ–°å¢teleportç»„ä»¶ï¼ˆportalï¼‰ =&gt; å…è®¸ä¼ é€ç»„ä»¶å†…å®¹åˆ°æ ¹èŠ‚ç‚¹ä»¥å¤–çš„ä»»ä½•åœ°æ–¹<br>â€¦</p>]]></content>
      
      
      <categories>
          
          <category> vue3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redisç¼“å­˜çš„ä¸‰å¤§é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆ</title>
      <link href="/My-Blogs/2021/01/08/Redis/%E3%80%90Redis%E3%80%91%E7%BC%93%E5%AD%98%E7%9A%84%E4%B8%89%E5%A4%A7%E9%97%AE%E9%A2%98%E5%8F%8A%E5%85%B6%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
      <url>/My-Blogs/2021/01/08/Redis/%E3%80%90Redis%E3%80%91%E7%BC%93%E5%AD%98%E7%9A%84%E4%B8%89%E5%A4%A7%E9%97%AE%E9%A2%98%E5%8F%8A%E5%85%B6%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<p>Redisç»å¸¸ç”¨äºç³»ç»Ÿä¸­çš„ç¼“å­˜ï¼Œè¿™æ ·å¯ä»¥è§£å†³ç›®å‰IOè®¾å¤‡æ— æ³•æ»¡è¶³äº’è”ç½‘åº”ç”¨æµ·é‡çš„è¯»å†™è¯·æ±‚çš„é—®é¢˜ã€‚</p><a id="more"></a><h2 id="ä¸€ã€ç¼“å­˜ç©¿é€"><a href="#ä¸€ã€ç¼“å­˜ç©¿é€" class="headerlink" title="ä¸€ã€ç¼“å­˜ç©¿é€"></a>ä¸€ã€ç¼“å­˜ç©¿é€</h2><p>ç¼“å­˜ç©¿é€æ˜¯æŒ‡ç¼“å­˜å’Œæ•°æ®åº“ä¸­éƒ½æ²¡æœ‰çš„æ•°æ®ï¼Œè€Œç”¨æˆ·ä¸æ–­å‘èµ·è¯·æ±‚ï¼Œå¦‚å‘èµ·idä¸º-1çš„æ•°æ®æˆ–è€…ç‰¹åˆ«å¤§çš„ä¸å­˜åœ¨çš„æ•°æ®ã€‚æœ‰å¯èƒ½æ˜¯é»‘å®¢åˆ©ç”¨æ¼æ´æ”»å‡»ä»è€Œå»å‹å®åº”ç”¨çš„æ•°æ®åº“ã€‚</p><h3 id="1-å¸¸è§è§£å†³æ–¹æ¡ˆ"><a href="#1-å¸¸è§è§£å†³æ–¹æ¡ˆ" class="headerlink" title="1. å¸¸è§è§£å†³æ–¹æ¡ˆ"></a>1. å¸¸è§è§£å†³æ–¹æ¡ˆ</h3><p>å¯¹äºç¼“å­˜ç©¿é€é—®é¢˜ï¼Œå¸¸è§çš„è§£å†³æ–¹æ¡ˆæœ‰ä»¥ä¸‹ä¸‰ç§ï¼š</p><ul><li>éªŒè¯æ‹¦æˆªï¼šæ¥å£å±‚è¿›è¡Œæ ¡éªŒï¼Œå¦‚é‰´å®šç”¨æˆ·æƒé™ï¼Œå¯¹IDä¹‹ç±»çš„å­—æ®µåšåŸºç¡€çš„æ ¡éªŒï¼Œå¦‚id&lt;=0çš„å­—æ®µç›´æ¥æ‹¦æˆªï¼›</li><li>ç¼“å­˜ç©ºæ•°æ®ï¼šå½“æ•°æ®åº“æŸ¥è¯¢åˆ°çš„æ•°æ®ä¸ºç©ºæ—¶ï¼Œä¹Ÿå°†è¿™æ¡æ•°æ®è¿›è¡Œç¼“å­˜ï¼Œä½†ç¼“å­˜çš„æœ‰æ•ˆæ€§è®¾ç½®å¾—è¦è¾ƒçŸ­ï¼Œä»¥å…å½±å“æ­£å¸¸æ•°æ®çš„ç¼“å­˜ï¼›</li></ul><pre><code class="JAVA">public Student getStudentsByID(Long id) {    // ä»Redisä¸­è·å–å­¦ç”Ÿä¿¡æ¯    Student student = redisTemplate.opsForValue()        .get(String.valueOf(id));    if (student != null) {        return student;    }    // ä»æ•°æ®åº“æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯ï¼Œå¹¶å­˜å…¥Redis    student = studentDao.selectByStudentId(id);    if (student != null) {        redisTemplate.opsForValue()            .set(String.valueOf(id), student, 60, TimeUnit.MINUTES);    } else {        // å³ä½¿ä¸å­˜åœ¨ï¼Œä¹Ÿå°†å…¶å­˜å…¥ç¼“å­˜ä¸­        redisTemplate.opsForValue()            .set(String.valueOf(id), null, 60, TimeUnit.SECONDS);    }    return student;}</code></pre><ul><li>ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼šå¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ç§æ¯”è¾ƒç‹¬ç‰¹æ•°æ®ç»“æ„ï¼Œæœ‰ä¸€å®šçš„è¯¯å·®ã€‚å½“å®ƒæŒ‡å®šä¸€ä¸ªæ•°æ®å­˜åœ¨æ—¶ï¼Œå®ƒä¸ä¸€å®šå­˜åœ¨ï¼Œä½†æ˜¯å½“å®ƒæŒ‡å®šä¸€ä¸ªæ•°æ®ä¸å­˜åœ¨æ—¶ï¼Œé‚£ä¹ˆå®ƒä¸€å®šæ˜¯ä¸å­˜åœ¨çš„ã€‚</li></ul><h3 id="2-å¸ƒéš†è¿‡æ»¤å™¨"><a href="#2-å¸ƒéš†è¿‡æ»¤å™¨" class="headerlink" title="2. å¸ƒéš†è¿‡æ»¤å™¨"></a>2. å¸ƒéš†è¿‡æ»¤å™¨</h3><p>å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„æ•°æ®ç»“æ„ï¼Œæœ‰ç‚¹ç±»ä¼¼ä¸HashMapï¼Œåœ¨ä¸šåŠ¡ä¸­æˆ‘ä»¬å¯èƒ½ä¼šé€šè¿‡ä½¿ç”¨HashMapæ¥åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦å­˜åœ¨ï¼Œå®ƒå¯ä»¥åœ¨<code>O(1)</code>æ—¶é—´å¤æ‚åº¦å†…è¿”å›ç»“æœï¼Œæ•ˆç‡æé«˜ï¼Œä½†æ˜¯å—é™äºå­˜å‚¨å®¹é‡ï¼Œå¦‚æœå¯èƒ½éœ€è¦å»åˆ¤æ–­çš„å€¼è¶…è¿‡äº¿çº§åˆ«ï¼Œé‚£ä¹ˆHashMapæ‰€å çš„å†…å­˜å°±å¾ˆå¯è§‚äº†ã€‚<br>è€Œ<code>BloomFilter</code>è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ¡ˆå¾ˆç®€å•ã€‚é¦–å…ˆç”¨å¤šä¸ªbitä½å»ä»£æ›¿HashMapä¸­çš„æ•°ç»„ï¼Œè¿™æ ·çš„è¯å‚¨å­˜ç©ºé—´å°±ä¸‹æ¥äº†ï¼Œä¹‹åå°±æ˜¯å¯¹ Key è¿›è¡Œå¤šæ¬¡å“ˆå¸Œï¼Œå°† Key å“ˆå¸Œåçš„å€¼æ‰€å¯¹åº”çš„ bit ä½ç½®ä¸º1ã€‚<br>å½“åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨æ—¶ï¼Œå°±å»åˆ¤æ–­è¿™ä¸ªå€¼å“ˆå¸Œå‡ºæ¥çš„æ¯”ç‰¹ä½æ˜¯å¦éƒ½ä¸º1ï¼Œå¦‚æœéƒ½ä¸º1ï¼Œé‚£ä¹ˆå¯èƒ½å­˜åœ¨ï¼Œä¹Ÿå¯èƒ½ä¸å­˜åœ¨ï¼ˆå¦‚ä¸‹å›¾Fï¼‰ã€‚ä½†æ˜¯å¦‚æœæœ‰ä¸€ä¸ªbitä½ä¸ä¸º1ï¼Œé‚£ä¹ˆè¿™ä¸ªKeyå°±è‚¯å®šä¸å­˜åœ¨ã€‚</p><p><img src="/My-Blogs/images/%E3%80%90Redis%E3%80%91%E7%BC%93%E5%AD%98%E7%9A%84%E4%B8%89%E5%A4%A7%E9%97%AE%E9%A2%98%E5%8F%8A%E5%85%B6%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-01.png" alt="img"></p><br><p>æ³¨æ„ï¼š<code>BloomFilter</code>å¹¶ä¸æ”¯æŒåˆ é™¤æ“ä½œï¼Œåªæ”¯æŒæ·»åŠ æ“ä½œã€‚è¿™ä¸€ç‚¹å¾ˆå®¹æ˜“ç†è§£ï¼Œå› ä¸ºä½ å¦‚æœè¦åˆ é™¤æ•°æ®ï¼Œå°±å¾—å°†å¯¹åº”çš„bitä½ç½®ä¸º0ï¼Œä½†æ˜¯ä½ è¿™ä¸ªKeyå¯¹åº”çš„bitä½å¯èƒ½å…¶ä»–çš„Keyä¹Ÿå¯¹åº”ç€ã€‚</p><h3 id="3-ç¼“å­˜ç©ºæ•°æ®ä¸å¸ƒéš†è¿‡æ»¤å™¨çš„æ¯”è¾ƒ"><a href="#3-ç¼“å­˜ç©ºæ•°æ®ä¸å¸ƒéš†è¿‡æ»¤å™¨çš„æ¯”è¾ƒ" class="headerlink" title="3. ç¼“å­˜ç©ºæ•°æ®ä¸å¸ƒéš†è¿‡æ»¤å™¨çš„æ¯”è¾ƒ"></a>3. ç¼“å­˜ç©ºæ•°æ®ä¸å¸ƒéš†è¿‡æ»¤å™¨çš„æ¯”è¾ƒ</h3><p>ä¸Šé¢å¯¹è¿™ä¸¤ç§æ–¹æ¡ˆéƒ½è¿›è¡Œäº†ç®€å•çš„ä»‹ç»ï¼Œç¼“å­˜ç©ºæ•°æ®ä¸å¸ƒéš†è¿‡æ»¤å™¨éƒ½èƒ½æœ‰æ•ˆè§£å†³ç¼“å­˜ç©¿é€é—®é¢˜ï¼Œä½†ä½¿ç”¨åœºæ™¯æœ‰ç€äº›è®¸ä¸åŒï¼›</p><ul><li>å½“ä¸€äº›æ¶æ„æ”»å‡»æŸ¥è¯¢æŸ¥è¯¢çš„keyå„ä¸ç›¸åŒï¼Œè€Œä¸”æ•°é‡å·¨å¤šï¼Œæ­¤æ—¶ç¼“å­˜ç©ºæ•°æ®ä¸æ˜¯ä¸€ä¸ªå¥½çš„è§£å†³æ–¹æ¡ˆã€‚å› ä¸ºå®ƒéœ€è¦å­˜å‚¨æ‰€æœ‰çš„Keyï¼Œå†…å­˜ç©ºé—´å ç”¨é«˜ã€‚å¹¶ä¸”åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¾ˆå¤škeyå¯èƒ½åªç”¨ä¸€æ¬¡ï¼Œæ‰€ä»¥å­˜å‚¨ä¸‹æ¥æ²¡æœ‰æ„ä¹‰ã€‚æ‰€ä»¥å¯¹äºè¿™ç§æƒ…å†µè€Œè¨€ï¼Œä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼›</li><li>è€Œå¯¹ä¸ç©ºæ•°æ®çš„Keyæ•°é‡æœ‰é™ã€Keyé‡å¤è¯·æ±‚æ•ˆç‡è¾ƒé«˜çš„åœºæ™¯è€Œè¨€ï¼Œå¯ä»¥é€‰æ‹©ç¼“å­˜ç©ºæ•°æ®çš„æ–¹æ¡ˆã€‚</li></ul><h2 id="äºŒã€ç¼“å­˜å‡»ç©¿"><a href="#äºŒã€ç¼“å­˜å‡»ç©¿" class="headerlink" title="äºŒã€ç¼“å­˜å‡»ç©¿"></a>äºŒã€ç¼“å­˜å‡»ç©¿</h2><p>ç¼“å­˜å‡»ç©¿æ˜¯æŒ‡å½“å‰çƒ­ç‚¹æ•°æ®å­˜å‚¨åˆ°æœŸæ—¶ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶å¹¶å‘è®¿é—®çƒ­ç‚¹æ•°æ®ã€‚å› ä¸ºç¼“å­˜åˆšè¿‡æœŸï¼Œæ‰€æœ‰å¹¶å‘è¯·æ±‚éƒ½ä¼šåˆ°æ•°æ®åº“ä¸­æŸ¥è¯¢æ•°æ®ã€‚</p><h3 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><ul><li>å°†çƒ­ç‚¹æ•°æ®è®¾ç½®ä¸ºæ°¸ä¸è¿‡æœŸï¼›</li><li>åŠ äº’æ–¥é”ï¼šäº’æ–¥é”å¯ä»¥æ§åˆ¶æŸ¥è¯¢æ•°æ®åº“çš„çº¿ç¨‹è®¿é—®ï¼Œä½†è¿™ç§æ–¹æ¡ˆä¼šå¯¼è‡´ç³»ç»Ÿçš„ååé‡ä¸‹é™ï¼Œéœ€è¦æ ¹æ®å®é™…æƒ…å†µä½¿ç”¨ã€‚</li></ul><pre><code class="JAVA">public String get(key) {    String value = redis.get(key);    if (value == null) { // ä»£è¡¨ç¼“å­˜å€¼è¿‡æœŸ        // è®¾ç½®3minçš„è¶…æ—¶ï¼Œé˜²æ­¢delæ“ä½œå¤±è´¥çš„æ—¶å€™ï¼Œä¸‹æ¬¡ç¼“å­˜è¿‡æœŸä¸€ç›´ä¸èƒ½load db        if (redis.setnx(key_mutex, 1, 3 * 60) == 1) {  // ä»£è¡¨è®¾ç½®æˆåŠŸ            value = db.get(key);            redis.set(key, value, expire_secs);            redis.del(key_mutex);        } else {  // è¿™ä¸ªæ—¶å€™ä»£è¡¨åŒæ—¶å€™çš„å…¶ä»–çº¿ç¨‹å·²ç»load dbå¹¶å›è®¾åˆ°ç¼“å­˜äº†ï¼Œè¿™æ—¶å€™é‡è¯•è·å–ç¼“å­˜å€¼å³å¯            sleep(50);            get(key);  // é‡è¯•        }    } else {        return value;          }}</code></pre><h2 id="ä¸‰ã€ç¼“å­˜é›ªå´©"><a href="#ä¸‰ã€ç¼“å­˜é›ªå´©" class="headerlink" title="ä¸‰ã€ç¼“å­˜é›ªå´©"></a>ä¸‰ã€ç¼“å­˜é›ªå´©</h2><p>ç¼“å­˜é›ªå´©å‘ç”Ÿæœ‰å‡ ç§æƒ…å†µï¼Œæ¯”å¦‚å¤§é‡ç¼“å­˜é›†ä¸­åœ¨æˆ–è€…ç¼“å­˜åŒæ—¶åœ¨å¤§èŒƒå›´ä¸­å¤±æ•ˆï¼Œå‡ºç°äº†å¤§é‡è¯·æ±‚å»è®¿é—®æ•°æ®åº“ï¼Œä»è€Œå¯¼è‡´CPUå’Œå†…å­˜è¿‡è½½ï¼Œç”šè‡³åœæœºã€‚</p><p>ä¸€ä¸ªç®€å•çš„é›ªå´©è¿‡ç¨‹ï¼š</p><ol><li> Redis é›†ç¾¤äº§ç”Ÿäº†å¤§é¢ç§¯æ•…éšœï¼›</li><li> ç¼“å­˜å¤±è´¥ï¼Œæ­¤æ—¶ä»æœ‰å¤§é‡è¯·æ±‚å»è®¿é—® Redis ç¼“å­˜æœåŠ¡å™¨ï¼›</li><li> åœ¨å¤§é‡ Redis è¯·æ±‚å¤±è´¥åï¼Œè¿™äº›è¯·æ±‚å°†ä¼šå»è®¿é—®æ•°æ®åº“ï¼›</li><li> ç”±äºåº”ç”¨çš„è®¾è®¡ä¾èµ–äºæ•°æ®åº“å’Œ Redis æœåŠ¡ï¼Œå¾ˆå¿«å°±ä¼šé€ æˆæœåŠ¡å™¨é›†ç¾¤çš„é›ªå´©ï¼Œæœ€ç»ˆå¯¼è‡´æ•´ä¸ªç³»ç»Ÿçš„ç˜«ç—ªã€‚</li></ol><h3 id="è§£å†³æ–¹æ¡ˆ-1"><a href="#è§£å†³æ–¹æ¡ˆ-1" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><ul><li>ã€äº‹å‰ã€‘é«˜å¯ç”¨ç¼“å­˜ï¼šé«˜å¯ç”¨ç¼“å­˜æ˜¯é˜²æ­¢å‡ºç°æ•´ä¸ªç¼“å­˜æ•…éšœã€‚å³ä½¿ä¸ªåˆ«èŠ‚ç‚¹ï¼Œæœºå™¨ç”šè‡³æœºæˆ¿éƒ½å…³é—­ï¼Œç³»ç»Ÿä»ç„¶å¯ä»¥æä¾›æœåŠ¡ï¼ŒRedis å“¨å…µ(Sentinel) å’Œ Redis é›†ç¾¤(Cluster) éƒ½å¯ä»¥åšåˆ°é«˜å¯ç”¨ï¼›</li><li>ã€äº‹ä¸­ã€‘ç¼“å­˜é™çº§ï¼ˆä¸´æ—¶æ”¯æŒï¼‰ï¼šå½“è®¿é—®æ¬¡æ•°æ€¥å‰§å¢åŠ å¯¼è‡´æœåŠ¡å‡ºç°é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å¦‚ä½•ç¡®ä¿æœåŠ¡ä»ç„¶å¯ç”¨ã€‚åœ¨å›½å†…ä½¿ç”¨æ¯”è¾ƒå¤šçš„æ˜¯ Hystrixï¼Œå®ƒé€šè¿‡ç†”æ–­ã€é™çº§ã€é™æµä¸‰ä¸ªæ‰‹æ®µæ¥é™ä½é›ªå´©å‘ç”Ÿåçš„æŸå¤±ã€‚åªè¦ç¡®ä¿æ•°æ®åº“ä¸æ­»ï¼Œç³»ç»Ÿæ€»å¯ä»¥å“åº”è¯·æ±‚ï¼Œæ¯å¹´çš„æ˜¥èŠ‚ 12306 æˆ‘ä»¬ä¸éƒ½æ˜¯è¿™ä¹ˆè¿‡æ¥çš„å—ï¼Ÿåªè¦è¿˜å¯ä»¥å“åº”èµ·ç è¿˜æœ‰æŠ¢åˆ°ç¥¨çš„æœºä¼šï¼›</li><li>ã€äº‹åã€‘Rediså¤‡ä»½å’Œå¿«é€Ÿé¢„çƒ­ï¼šRedisæ•°æ®å¤‡ä»½å’Œæ¢å¤ã€å¿«é€Ÿç¼“å­˜é¢„çƒ­ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PWAåœ¨likeeä¸šåŠ¡çº¿çš„å®è·µ</title>
      <link href="/My-Blogs/2021/01/08/PWA/PWA%E5%9C%A8likee%E4%B8%9A%E5%8A%A1%E7%BA%BF%E7%9A%84%E5%AE%9E%E8%B7%B5/"/>
      <url>/My-Blogs/2021/01/08/PWA/PWA%E5%9C%A8likee%E4%B8%9A%E5%8A%A1%E7%BA%BF%E7%9A%84%E5%AE%9E%E8%B7%B5/</url>
      
        <content type="html"><![CDATA[<h2 id="1-ä»€ä¹ˆæ˜¯PWAï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯PWAï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯PWAï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯PWAï¼Ÿ</h2><p>PWAï¼ˆProgressive web appsï¼Œæ¸è¿›å¼ Web åº”ç”¨ï¼‰è¿ç”¨ç°ä»£çš„ Web API ä»¥åŠä¼ ç»Ÿçš„æ¸è¿›å¼å¢å¼ºç­–ç•¥æ¥åˆ›å»ºè·¨å¹³å° Web åº”ç”¨ç¨‹åºã€‚</p><a id="more"></a><p>å¦‚ä½•ç†è§£æ¸è¿›å¼ï¼Ÿ</p><ul><li>  æ¸è¿›å¼æ„å»ºã€‚æ„æˆ PWA çš„æ ‡å‡†éƒ½æ¥è‡ª Web æŠ€æœ¯ï¼Œå®ƒä»¬éƒ½æ˜¯æµè§ˆå™¨æä¾›çš„ã€å‘ä¸‹å…¼å®¹çš„ã€æ²¡æœ‰é¢å¤–è¿è¡Œæ—¶ä»£ä»·çš„æŠ€æœ¯ã€‚å› æ­¤å¯ä»¥æŠŠä»»ä½•ç°æœ‰çš„æ¡†æ¶å¼€å‘çš„ Web é¡µé¢æ”¹é€ æˆ PWAï¼Œä¸éœ€è¦å®Œå…¨é‡æ„ç°æœ‰ä»£ç ï¼Œå¯ä»¥é€æ­¥åœ°è¿ç§»å’Œæ”¹å–„ã€‚</li><li>  æ¸è¿›å¼å¢å¼ºã€‚æµè§ˆå™¨å‚å•†ä¼šé€æ­¥æä¾›å¯¹ PWA ç›¸å…³apiçš„æ”¯æŒï¼Œç°ä»£æµè§ˆå™¨çš„ç”¨æˆ·ä¼šé€æ­¥å—ç›Šï¼Œä½†ä¸ä¼šä¸ºä½¿ç”¨æ—§ç‰ˆæµè§ˆå™¨çš„ç”¨æˆ·ç ´åä»»ä½•å†…å®¹ã€‚</li></ul><h2 id="2-PWAèƒ½åšä»€ä¹ˆï¼Ÿ"><a href="#2-PWAèƒ½åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="2. PWAèƒ½åšä»€ä¹ˆï¼Ÿ"></a>2. PWAèƒ½åšä»€ä¹ˆï¼Ÿ</h2><ul><li><p>  å®‰è£…æ·»åŠ æ¡Œé¢å›¾æ ‡</p></li><li><p>  æä¾›å‰ç«¯ç½‘ç»œä»£ç†</p></li><li><p>  åˆ©ç”¨cache apiå¯¹responseè¿›è¡Œç¼“å­˜</p></li><li><p>å‘é€pushé€šçŸ¥  </p><p>  æ¥æ”¶æœåŠ¡ç«¯æ¨é€</p></li></ul><h2 id="3-PWAçš„å·¥ä½œåŸç†"><a href="#3-PWAçš„å·¥ä½œåŸç†" class="headerlink" title="3. PWAçš„å·¥ä½œåŸç†"></a>3. PWAçš„å·¥ä½œåŸç†</h2><p>PWAå®ç°ä¸Šè¿°åŠŸèƒ½ï¼Œä¾èµ–äºservice workeræä¾›çš„èƒ½åŠ›ã€‚</p><p>service workeræ˜¯web workerçš„ä¸€ç§ï¼Œæ˜¯è¿è¡Œåœ¨ç‹¬ç«‹çº¿ç¨‹ä¸­çš„jsä»£ç ã€‚ä¸€ä¸ªservice workerçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="/My-Blogs/images/PWA%E5%9C%A8likee%E4%B8%9A%E5%8A%A1%E7%BA%BF%E7%9A%84%E5%AE%9E%E8%B7%B5-01.png"></p><p>é€šå¸¸éµå¾ªä»¥ä¸‹åŸºæœ¬æ­¥éª¤æ¥ä½¿ç”¨ service workerï¼š</p><ul><li><p>  service worker URL é€šè¿‡ serviceWorkerContainer.register() æ¥è·å–å’Œæ³¨å†Œã€‚</p></li><li><p>  å¦‚æœæ³¨å†ŒæˆåŠŸï¼Œservice worker å°±åœ¨ ServiceWorkerGlobalScope ç¯å¢ƒä¸­è¿è¡Œï¼› è¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šç±»å‹çš„ worker ä¸Šä¸‹æ–‡è¿è¡Œç¯å¢ƒï¼Œä¸ä¸»è¿è¡Œçº¿ç¨‹ï¼ˆæ‰§è¡Œè„šæœ¬ï¼‰ç›¸ç‹¬ç«‹ï¼ŒåŒæ—¶ä¹Ÿæ²¡æœ‰è®¿é—® DOM çš„èƒ½åŠ›ã€‚</p></li><li><p>service worker ç°åœ¨å¯ä»¥å¤„ç†äº‹ä»¶äº†ã€‚  </p><p>  å— service worker æ§åˆ¶çš„é¡µé¢æ‰“å¼€åä¼šå°è¯•å»å®‰è£… service workerã€‚æœ€å…ˆå‘é€ç»™ service worker çš„äº‹ä»¶æ˜¯å®‰è£…äº‹ä»¶ã€‚</p></li><li><p>  å½“ oninstall äº‹ä»¶çš„å¤„ç†ç¨‹åºæ‰§è¡Œå®Œæ¯•åï¼Œå¯ä»¥è®¤ä¸º service worker å®‰è£…å®Œæˆäº†ã€‚</p></li><li><p>  ä¸‹ä¸€æ­¥æ˜¯æ¿€æ´»ã€‚å½“ service worker å®‰è£…å®Œæˆåï¼Œä¼šæ¥æ”¶åˆ°ä¸€ä¸ªæ¿€æ´»äº‹ä»¶(activate event)ã€‚onactivate ä¸»è¦ç”¨é€”æ˜¯æ¸…ç†å…ˆå‰ç‰ˆæœ¬çš„service worker è„šæœ¬ä¸­ä½¿ç”¨çš„èµ„æºã€‚</p></li><li><p>  service worker ç°åœ¨å¯ä»¥æ§åˆ¶é¡µé¢äº†ï¼Œä½†ä»…æ˜¯åœ¨ register() æˆåŠŸåçš„æ‰“å¼€çš„é¡µé¢ã€‚</p></li></ul><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="JS">navigator.serviceWorker.register(opts.url).then(function(registration) {  console.log("Service worker successfully registered.");})</code></pre><h2 id="4-å¤„ç†ä¸šåŠ¡éœ€è¦å°è£…çš„åŸºæœ¬æ–¹æ³•"><a href="#4-å¤„ç†ä¸šåŠ¡éœ€è¦å°è£…çš„åŸºæœ¬æ–¹æ³•" class="headerlink" title="4. å¤„ç†ä¸šåŠ¡éœ€è¦å°è£…çš„åŸºæœ¬æ–¹æ³•"></a>4. å¤„ç†ä¸šåŠ¡éœ€è¦å°è£…çš„åŸºæœ¬æ–¹æ³•</h2><p>ä¸ºäº†å¤„ç†ä¸šåŠ¡ï¼Œæˆ‘ä»¬å¯¹service workerç›¸å…³çš„åŸºæœ¬æ–¹æ³•è¿›è¡Œäº†å°è£…</p><p>ä¸»çº¿ç¨‹jså°è£…å¦‚ä¸‹ï¼š</p><pre><code class="JS">/** * service worker sdk *  * @param {string} opts.url [required] swæ–‡ä»¶åœ°å€ * @param {function} opts.onReady [optional] swæ³¨å†ŒæˆåŠŸ * @param {function} opts.onBeforeInstallPrompt [optional] æœªå®‰è£…pwaäº‹ä»¶è§¦å‘ * @param {function} opts.onClickInstallPrompt [optional] ç‚¹å‡»å®‰è£…ç¡®è®¤å¼¹çª— * @param {function} opts.onInstalled [optional] pwaå®‰è£…æˆåŠŸæ—¶è§¦å‘ * @param {function} opts.onNotificationPermission [optional] ç‚¹å‡»é€šçŸ¥æˆæƒç¡®è®¤å¼¹çª— *  */export function SWSdk(opts) {  /**   * åˆå§‹åŒ–sw   */  /**   * swæ³¨å†ŒæˆåŠŸ   */  /**   * æœªå®‰è£…pwaäº‹ä»¶è§¦å‘   */  /**   * pwaå®‰è£…æˆåŠŸæ—¶è§¦å‘   */  /**   * å¼¹å‡ºå®‰è£…ç¡®è®¤å¼¹çª—   */  /**   * ç›‘å¬swäº‹ä»¶   */  /**   * è§¦å‘swäº‹ä»¶   */  /**   * å¼¹å‡ºé€šçŸ¥æˆæƒç¡®è®¤å¼¹çª—   */  /**   * å‘é€ä¸€æ¡é€šçŸ¥   */  /**   * ç¼“å­˜èµ„æº   */  /**   * åˆ é™¤ç¼“å­˜èµ„æº   */}</code></pre><p>swçº¿ç¨‹jså°è£…å¦‚ä¸‹ï¼š</p><pre><code class="JS">/** * SW *  * @param {string} opts. CACHE_NAME [optional] ç¼“å­˜å‘½åç©ºé—´ï¼Œå»ºè®®æ¯ä¸ªåº”ç”¨ç‹¬ç«‹å‘½å * @param {number} opts.tickTime [optional] æ¯ä¸ªtickçš„æ—¶é—´é—´éš”ï¼Œå•ä½msï¼Œé»˜è®¤1000 * @param {function} opts.onTick [optional] æ¯ä¸ªæ—¶é—´é—´éš”è°ƒç”¨ä¸€æ¬¡ * @param {function} opts.onProxy [optional] ä»£ç†ç½‘ç»œè¯·æ±‚ * @param {function} opts.onInstall [optional] å®‰è£…äº‹ä»¶çš„å›è°ƒ * @param {function} opts.onActivate [optional] æ¿€æ´»äº‹ä»¶çš„å›è°ƒ * @param {function} opts.onPush [optional] æ”¶åˆ°æœåŠ¡ç«¯äº‹ä»¶çš„å›è°ƒ * @param {function} opts.notificationOnClick [optional] ç‚¹å‡»pushé€šçŸ¥çš„å›è°ƒ */var SW = function(opts) {  /**   * åˆå§‹åŒ–sw   */  /**   * ç›‘å¬çª—å£äº‹ä»¶   */  /**   * è§¦å‘çª—å£äº‹ä»¶   */  /**   * è®¾ç½®cache   */  /**   * è·å–cache   */  /**   * å‘é€ä¸€æ¡é€šçŸ¥   */};</code></pre><p>å¯¹service worker apiçš„å°è£…ï¼Œä½¿æˆ‘ä»¬å¯ä»¥æ›´åŠ é›†ä¸­ç²¾åŠ›å¤„ç†ä¸šåŠ¡ã€‚</p><p>å°è£…çš„åŸºæœ¬æ–¹æ³•æœ‰ï¼š</p><blockquote><p>a. çº¿ç¨‹é—´é€šè®¯ã€‚ä¸»çº¿ç¨‹å’Œservice workerçº¿ç¨‹ä¹‹é—´éœ€è¦é¢‘ç¹çš„é€šä¿¡ï¼Œå› æ­¤éœ€è¦å°è£…æ¯”è¾ƒå‹å¥½çš„é€šä¿¡æ–¹æ³•</p></blockquote><p>ä¸»çº¿ç¨‹ï¼š</p><pre><code class="JS">/** * ç›‘å¬swäº‹ä»¶ *  * @param {string} eventName [required] äº‹ä»¶åç§° * @param {function} handler [required] å¤„ç†å‡½æ•° */this.on = function(eventName, handler) {  this.eventListener.push({    eventName: eventName,    handler: handler  })};/** * è§¦å‘swäº‹ä»¶ *  * @param {string} eventName [required] äº‹ä»¶åç§° * @param {any} payload [optional] ä¼ é€’çš„æ•°æ® */this.emit = function(eventName, payload) {  const data = {    eventName: eventName,    payload: payload  };  try {    if (navigator.serviceWorker.controller) {      navigator.serviceWorker.controller.postMessage(data);    } else {      navigator.serviceWorker.addEventListener("controllerchange", () =&gt; {        navigator.serviceWorker.controller.postMessage(data);      });    }  } catch (err) {    console.error(err);  }}</code></pre><p>service workerçº¿ç¨‹ï¼š</p><pre><code class="JS">/** * ç›‘å¬çª—å£äº‹ä»¶ *  * @param {string} eventName [required] äº‹ä»¶åç§° * @param {function} handler [required] å¤„ç†å‡½æ•° */this.on = function(eventName, handler) {  this.eventListener.push({    eventName: eventName,    handler: handler  })};/** * è§¦å‘çª—å£äº‹ä»¶ *  * @param {string} eventName [required] äº‹ä»¶åç§° * @param {any} payload [optional] ä¼ é€’çš„æ•°æ® */this.emit = function(eventName, payload) {  clients.matchAll({    type: 'window',    includeUncontrolled: true  }).then(function(matchClient) {    matchClient.forEach(function(client) {      client.postMessage({        eventName: eventName,        payload: payload      });    })  });};</code></pre><blockquote><p>b. æœ¬åœ°å­˜å‚¨ã€‚åœ¨service worker çº¿ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ— æ³•ä½¿ç”¨cookieï¼ŒlocalStorageå’ŒsessionStorageï¼Œæˆ‘ä»¬åªèƒ½ä½¿ç”¨cache apiæˆ–è€…indexDBä½œä¸ºå­˜å‚¨key-valueæ•°æ®çš„è½½ä½“ã€‚</p></blockquote><pre><code class="JS">/** * è®¾ç½®cache *  * @param {string} key cacheçš„key * @param {any} value cacheçš„å€¼ */this.setCache = function(key, value) {  try {    return caches.open(this.CACHE_NAME).then(function(cache) {      return cache.put(key, new Response(value));    })  } catch (err) {    const that = this;    return new Promise(function(resolve) {      if (!that.cacheStorage[that.CACHE_NAME]) {        that.cacheStorage[that.CACHE_NAME] = {};      }      that.cacheStorage[that.CACHE_NAME][key] = value;      resolve();    })  }};/** * è·å–cache *  * @param {string} key cacheçš„key */this.getCache = function(key) {  try {    return caches.open(this.CACHE_NAME).then(function(cache) {      return cache.match(key);    }).then(function(response) {      return response ? response.text() : '';    })  } catch (err) {    const that = this;    return new Promise(function(resolve) {      resolve(new String(that.cacheStorage[that.CACHE_NAME][key]));    })  }};</code></pre><p>cache apiæ— æ³•ç›´æ¥ä¿å­˜key-valueé”®å€¼å¯¹æ•°æ®ï¼Œåªèƒ½ä¿å­˜url-responseå¯¹æ•°æ®ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨äº†ä¸€äº›å°æŠ€å·§ï¼Œä½¿å®ƒå¯ä»¥å­˜å‚¨key-valueå‹æ•°æ®</p><blockquote><p>c. é€šçŸ¥</p></blockquote><p>ä¸»çº¿ç¨‹ç”³è¯·æˆæƒ</p><pre><code class="JS">/** * å¼¹å‡ºé€šçŸ¥æˆæƒç¡®è®¤å¼¹çª— */this.requestNotificationPermission = function() {  Notification.requestPermission().then((result) =&gt; {    that.onNotificationPermission.bind(that)(result);  });};</code></pre><p>service workerçº¿ç¨‹å‘é€é€šçŸ¥</p><pre><code class="JS">/** * å‘é€ä¸€æ¡é€šçŸ¥ *  * @param {object} params [required] * @param {string} params.title [required] æ ‡é¢˜ * @param {string} params.desc [optional] æè¿° * @param {string} params.icon [optional] å›¾æ ‡ * @param {any} params.data [optional] ä¼ é€’å‚æ•° * @param {string} params.url [optional] ç‚¹å‡»è·³è½¬åœ°å€ */this.showNotification = function(params) {  try {    self.registration.showNotification(params.title, {      body: params.desc,      icon: params.icon,      image: params.image,      data: Object.assign({        url: params.url      }, params.data)    })  } catch (err) {    console.log(err);  }};</code></pre><h2 id="5-ä¸šåŠ¡éœ€æ±‚åŠå¯¹ç­–"><a href="#5-ä¸šåŠ¡éœ€æ±‚åŠå¯¹ç­–" class="headerlink" title="5. ä¸šåŠ¡éœ€æ±‚åŠå¯¹ç­–"></a>5. ä¸šåŠ¡éœ€æ±‚åŠå¯¹ç­–</h2><p>æ­¤å°èŠ‚å†…å®¹å¤ªå¤šï¼Œä¸è¯¦ç»†å±•å¼€ï¼Œæœ‰å…´è¶£å¯ä»¥ç§èŠ</p><blockquote><p>a. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼</p></blockquote><ul><li>  æœªå®‰è£…äº‹ä»¶</li><li>  å¼¹å‡ºè¯¢é—®å®‰è£…å¼¹çª—api</li></ul><blockquote><p>b. æœ¬åœ°æ¨é€é€šçŸ¥</p></blockquote><ul><li>  è¯¢é—®æˆæƒé€šçŸ¥api</li><li>  å‘é€é€šçŸ¥</li></ul><blockquote><p>c. swå†…åŸ‹ç‚¹</p></blockquote><ul><li>  Fetch api</li><li>  è¯·æ±‚æ•°æ®æ„é€ </li></ul><blockquote><p>d. æ‹‰æ´»æ¡Œé¢pwa</p></blockquote><ul><li>  éœ€è¦å®‰è£…google playæœåŠ¡</li><li>  éœ€è¦ç”±ä¸åŒåŸŸçš„é¡µé¢å‘èµ·é‡å®šå‘è·³è½¬</li><li>  ä¸pwaåŒåŸŸçš„é“¾æ¥å‡å¯æ‹‰æ´»pwaï¼Œä¸”pwaå±•ç¤ºè·³è½¬é“¾æ¥ï¼Œè€Œéstart_urlä¸­é…ç½®çš„é“¾æ¥</li><li>  ä¸­è½¬é¡µç­–ç•¥</li></ul><blockquote><p>e. è§†é¢‘é¢„åŠ è½½</p></blockquote><ul><li>  ä½¿ç”¨cache api</li></ul><blockquote><p>f. è¯†åˆ«ç”¨æˆ·è®¿é—®çš„æ˜¯webé¡µé¢è¿˜æ˜¯æ¡Œé¢pwa</p></blockquote><ul><li>  æ¡Œé¢å…¥å£æ‹‰æ´»</li><li>  é“¾æ¥æ‹‰æ´»</li></ul><h2 id="6-é‡åˆ°çš„é—®é¢˜"><a href="#6-é‡åˆ°çš„é—®é¢˜" class="headerlink" title="6. é‡åˆ°çš„é—®é¢˜"></a>6. é‡åˆ°çš„é—®é¢˜</h2><blockquote><p>a. å…¼å®¹é—®é¢˜</p></blockquote><p>pwaçš„å…¼å®¹æ€§æ˜¯æ¯”è¾ƒå·®çš„ï¼Œå‡ ä¹æ¯ä¸ªapiéƒ½æœ‰å…¼å®¹é—®é¢˜ï¼Œéœ€è¦å¯¹ä¸åŒçš„è®¾å¤‡åšé€‚é…ã€‚è¿™äº›å…¼å®¹é—®é¢˜å¾ˆå¤šæ˜¯æŸ¥çœ‹çº¿ä¸Šç»Ÿè®¡æ•°æ®åæ‰å‘ç°çš„</p><blockquote><p>b. æ•°æ®ç»Ÿè®¡</p></blockquote><p>ä¸ºäº†ç»Ÿè®¡pwaè½¬åŒ–æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦è¯†åˆ«ç”¨æˆ·è®¿é—®çš„æ˜¯webé¡µé¢è¿˜æ˜¯æ¡Œé¢çš„pwaï¼Œç„¶è€Œï¼Œæˆ‘ä»¬åªèƒ½ç»Ÿè®¡åˆ°æ¡Œé¢å›¾æ ‡æ‰“å¼€çš„ç”¨æˆ·å’Œé“¾æ¥æ‹‰æ´»çš„pwaç”¨æˆ·ï¼Œå¯¹äºpushæ‹‰æ´»ï¼Œç¬¬ä¸‰æ–¹appæ‹‰æ´»çš„åœºæ™¯ï¼Œæˆ‘ä»¬æ˜¯æ— æ³•è¯†åˆ«çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> PWA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PWA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Libuvçº¿ç¨‹æ± å¦‚ä½•æé«˜nodejsæ€§èƒ½</title>
      <link href="/My-Blogs/2021/01/08/NodeJs/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/Libuv%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98NodeJs%E6%80%A7%E8%83%BD/"/>
      <url>/My-Blogs/2021/01/08/NodeJs/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/Libuv%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98NodeJs%E6%80%A7%E8%83%BD/</url>
      
        <content type="html"><![CDATA[<p>å¦‚ä½•æé«˜NodeJSæ€§èƒ½ï¼Ÿä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»ä¸€ç§æ–¹å¼ï¼Œä¸€èµ·çœ‹çœ‹å§</p><a id="more"></a><h3 id="åŸæ–‡é“¾æ¥"><a href="#åŸæ–‡é“¾æ¥" class="headerlink" title="åŸæ–‡é“¾æ¥"></a><a href="https://hackernoon.com/how-libuv-thread-pool-can-boost-your-node-js-performance-bel3tyf">åŸæ–‡é“¾æ¥</a></h3><h3 id="Libuvçº¿ç¨‹æ± "><a href="#Libuvçº¿ç¨‹æ± " class="headerlink" title="Libuvçº¿ç¨‹æ± "></a>Libuvçº¿ç¨‹æ± </h3><p>Libuvå¯åŠ¨ä¸€ä¸ªåŒ…å«4ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œç”¨äºå°†åŒæ­¥æ“ä½œå¸è½½åˆ°è¯¥çº¿ç¨‹æ± ã€‚ä¸ºæ­¤ï¼ŒLibuvç¡®ä¿åŒæ­¥ä»»åŠ¡ä¸ä¼šä¸å¿…è¦åœ°é˜»æ­¢æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚</p><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†åˆ©ç”¨è®¾ç½®æ¥æ›´å¥½åœ°é€‚åº”æˆ‘ä»¬çš„è®¡ç®—æœºæˆ–å°†åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°çš„è™šæ‹Ÿæœºçš„è§„æ ¼ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬è¢«å…è®¸å°†4ä¸ªçº¿ç¨‹çš„é»˜è®¤å€¼æ›´æ”¹ä¸ºæœ€å¤š1024ä¸ªçº¿ç¨‹ã€‚æˆ‘ä»¬é€šè¿‡è®¾ç½®UV_THREADPOOL_SIZE Nodeå˜é‡æ¥å®ç°ã€‚</p><p>ç‰©ç†ä¸é€»è¾‘CPUå†…æ ¸</p><p>ä¸ºäº†æ›´å¥½åœ°äº†è§£å°†UV_THREADPOOL_SIZEè®¾ç½®ä¸ºä»€ä¹ˆï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£æˆ‘ä»¬çš„è®¡ç®—æœºæ­£åœ¨è¿è¡Œå¤šå°‘ä¸ªé€»è¾‘æ ¸å¿ƒã€‚å¦‚æœä»¥æˆ‘çš„MacBook Proä¸ºä¾‹ï¼Œå®ƒè¿è¡Œçš„æ˜¯6ä¸ªç‰©ç†CPUå†…æ ¸ï¼ˆè‹±ç‰¹å°”ï¼‰ã€‚</p><p>ä½†æ˜¯ï¼Œè¿™äº›å†…æ ¸å…·æœ‰è¶…çº¿ç¨‹ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªå†…æ ¸å¯ä»¥åŒæ—¶è¿è¡Œ2ä¸ªæ“ä½œã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†å…·æœ‰è¶…çº¿ç¨‹çš„1ä¸ªç‰©ç†æ ¸å¿ƒè§†ä¸º2ä¸ªé€»è¾‘æ ¸å¿ƒã€‚å°±æˆ‘è€Œè¨€ï¼Œæˆ‘çš„MacBook Proè¿è¡Œ12ä¸ªé€»è¾‘æ ¸å¿ƒã€‚</p><h3 id="å¦‚ä½•æé«˜Node-JSæ€§èƒ½"><a href="#å¦‚ä½•æé«˜Node-JSæ€§èƒ½" class="headerlink" title="å¦‚ä½•æé«˜Node JSæ€§èƒ½"></a>å¦‚ä½•æé«˜Node JSæ€§èƒ½</h3><p>å»ºè®®å°† <code>UV_THREADPOOL_SIZE</code> è®¾ç½®ä¸ºè®¡ç®—æœºæ­£åœ¨è¿è¡Œçš„é€»è¾‘æ ¸å¿ƒæ•°ã€‚å°±æˆ‘è€Œè¨€ï¼Œæˆ‘å°†çº¿ç¨‹æ± å¤§å°è®¾ç½®ä¸º12ã€‚</p><p>å°†å¤§å°è®¾ç½®ä¸ºé™¤ç¡¬ä»¶æ­£åœ¨è¿è¡Œçš„é€»è¾‘å†…æ ¸ä¹‹å¤–çš„ä»»ä½•å€¼éƒ½æ²¡æœ‰æ„ä¹‰ï¼Œå®é™…ä¸Šå¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é™ä½ã€‚</p><h3 id="å¦‚ä½•æ£€æŸ¥é€»è¾‘æ ¸å¿ƒ"><a href="#å¦‚ä½•æ£€æŸ¥é€»è¾‘æ ¸å¿ƒ" class="headerlink" title="å¦‚ä½•æ£€æŸ¥é€»è¾‘æ ¸å¿ƒ"></a>å¦‚ä½•æ£€æŸ¥é€»è¾‘æ ¸å¿ƒ</h3><p>éƒ¨ç½²æ—¶ï¼Œæœ€åè¦åšçš„æ˜¯æ‰‹åŠ¨è®¾ç½®UV_THREADPOOL_SIZEï¼Œå› ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºå¯èƒ½åœ¨å…·æœ‰ä¸åŒæœºå™¨è§„æ ¼çš„å¤šä¸ªç¯å¢ƒä¸­è¿è¡Œã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§åœ¨ç›¸å…³ç¯å¢ƒä¸­å¯åŠ¨åº”ç”¨ç¨‹åºååŠ¨æ€è®¾ç½®çº¿ç¨‹æ± å¤§å°çš„æ–¹æ³•ã€‚</p><p>å¥½æ¶ˆæ¯æ˜¯ï¼Œè¿™å¾ˆç®€å•ï¼Œä½†å¿…é¡»è°¨æ…å¯¹å¾…ã€‚ä¸ºæ­¤ï¼Œè¯·å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°Nodeåº”ç”¨ç¨‹åºçš„æ ¹JSæ–‡ä»¶çš„é¡¶éƒ¨ï¼š</p><pre><code class="JavaScript">const OS = require('os')process.env.UV_THREADPOOL_SIZE = OS.cpus().length</code></pre><p>è¯¥OSæ¨¡å—æ˜¯åŸäº§äºèŠ‚ç‚¹JSã€‚å®ƒå…·æœ‰ä¸€ä¸ªå‡½æ•°cpusï¼ˆï¼‰ï¼Œè¯¥å‡½æ•°è¿”å›è®¡ç®—æœºæ­£åœ¨è¿è¡Œçš„é€»è¾‘å†…æ ¸çš„æ€»æ•°ã€‚å¾ˆå¥½çš„æ˜¯ï¼Œå¦‚æœæ‚¨çš„CPUå†…æ ¸æ²¡æœ‰è¶…çº¿ç¨‹ï¼Œåˆ™æ­¤å‡½æ•°å°†åªè¿”å›ç‰©ç†cpuå†…æ ¸çš„æ•°é‡ï¼Œè¿™æ˜¯å®Œç¾çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> nodejs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nodejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginxé…ç½®å°ç»“</title>
      <link href="/My-Blogs/2021/01/08/nginx/Nginx%E9%85%8D%E7%BD%AE%E5%B0%8F%E7%BB%93/"/>
      <url>/My-Blogs/2021/01/08/nginx/Nginx%E9%85%8D%E7%BD%AE%E5%B0%8F%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>nginxé…ç½®æœ‰å“ªäº›å˜é‡ï¼ŸåŒ¹é…è§„åˆ™åˆæœ‰å“ªäº›ï¼Ÿè®©æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹å§</p><a id="more"></a><h2 id="å…¨å±€å˜é‡"><a href="#å…¨å±€å˜é‡" class="headerlink" title="å…¨å±€å˜é‡"></a>å…¨å±€å˜é‡</h2><pre><code class="NGINX">$args ï¼š è¿™ä¸ªå˜é‡ç­‰äºè¯·æ±‚è¡Œä¸­çš„å‚æ•°ï¼ŒåŒ$query_string$content_length ï¼š è¯·æ±‚å¤´ä¸­çš„Content-lengthå­—æ®µ$content_type ï¼š è¯·æ±‚å¤´ä¸­çš„Content-Typeå­—æ®µ$document_root ï¼š å½“å‰è¯·æ±‚åœ¨rootæŒ‡ä»¤ä¸­æŒ‡å®šçš„å€¼$host ï¼š è¯·æ±‚ä¸»æœºå¤´å­—æ®µï¼Œå¦åˆ™ä¸ºæœåŠ¡å™¨åç§°$http_user_agent ï¼š å®¢æˆ·ç«¯agentä¿¡æ¯$http_cookie ï¼š å®¢æˆ·ç«¯cookieä¿¡æ¯$limit_rate ï¼š è¿™ä¸ªå˜é‡å¯ä»¥é™åˆ¶è¿æ¥é€Ÿç‡$request_method ï¼š å®¢æˆ·ç«¯è¯·æ±‚çš„åŠ¨ä½œï¼Œé€šå¸¸ä¸ºGETæˆ–POST$remote_addr ï¼š å®¢æˆ·ç«¯çš„IPåœ°å€$remote_port ï¼š å®¢æˆ·ç«¯çš„ç«¯å£$remote_user ï¼š å·²ç»ç»è¿‡Auth Basic ModuleéªŒè¯çš„ç”¨æˆ·å$request_filename ï¼š å½“å‰è¯·æ±‚çš„æ–‡ä»¶è·¯å¾„ï¼Œç”±rootæˆ–aliasæŒ‡ä»¤ä¸URIè¯·æ±‚ç”Ÿæˆ$scheme ï¼š HTTPæ–¹æ³•ï¼ˆå¦‚httpï¼Œhttpsï¼‰$server_protocol ï¼š è¯·æ±‚ä½¿ç”¨çš„åè®®ï¼Œé€šå¸¸æ˜¯HTTP/1.0æˆ–HTTP/1.1$server_addr ï¼š æœåŠ¡å™¨åœ°å€ï¼Œåœ¨å®Œæˆä¸€æ¬¡ç³»ç»Ÿè°ƒç”¨åå¯ä»¥ç¡®å®šè¿™ä¸ªå€¼$server_name ï¼š æœåŠ¡å™¨åç§°$server_port ï¼š è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨çš„ç«¯å£å·$request_uri ï¼š åŒ…å«è¯·æ±‚å‚æ•°çš„åŸå§‹URIï¼Œä¸åŒ…å«ä¸»æœºåï¼Œå¦‚/foo/bar.php?arg=baz$uri ï¼š ä¸å¸¦è¯·æ±‚å‚æ•°çš„å½“å‰URIï¼Œ$uriä¸åŒ…å«ä¸»æœºåï¼Œå¦‚/foo/bar.html$document_uri ï¼š ä¸$uriç›¸åŒ</code></pre><p>å‡è®¾è¯·æ±‚ä¸º<a href="http://www.qq.com:8080/a/b/c.php%EF%BC%8C%E5%88%99">http://www.qq.com:8080/a/b/c.phpï¼Œåˆ™</a></p><pre><code class="NGINX">$hostï¼šwww.qq.com$server_portï¼š8080$request_uriï¼šhttp://www.qq.com:8080/a/b/c.php$document_uriï¼š/a/b/c.php$document_rootï¼š/var/www/html$request_filenameï¼š/var/www/html/a/b/c.php</code></pre><h2 id="ä¸»æœºåï¼ˆserver-nameï¼‰åŒ¹é…"><a href="#ä¸»æœºåï¼ˆserver-nameï¼‰åŒ¹é…" class="headerlink" title="ä¸»æœºåï¼ˆserver_nameï¼‰åŒ¹é…"></a>ä¸»æœºåï¼ˆserver_nameï¼‰åŒ¹é…</h2><p>ä»ä¸Šåˆ°ä¸‹çš„ä¼˜å…ˆçº§ä¸ºä»é«˜åˆ°ä½</p><ol><li> æ˜ç¡®çš„<code>server_name</code>åç§°ï¼Œå¦‚<code>www.qq.com</code></li><li> å‰ç¼€é€šé…ç¬¦ï¼Œå¦‚<code>*.qq.com</code>æˆ–<code>. qq.com</code></li><li> åç¼€é€šé…ç¬¦ï¼Œå¦‚<code>www.qq.*</code></li><li> æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¦‚<code>~[a-z]+\.qq\.com</code></li></ol><h2 id="LocationæŸ¥æ‰¾è§„åˆ™"><a href="#LocationæŸ¥æ‰¾è§„åˆ™" class="headerlink" title="LocationæŸ¥æ‰¾è§„åˆ™"></a>LocationæŸ¥æ‰¾è§„åˆ™</h2><p>ä»ä¸Šåˆ°ä¸‹çš„ä¼˜å…ˆçº§ä¸ºä»é«˜åˆ°ä½</p><ol><li> ç­‰å·ç±»å‹ï¼Œç²¾ç¡®åŒ¹é…ï¼Œå¦‚location = / {}</li><li> ^<del>ç±»å‹ï¼Œå‰ç¼€åŒ¹é…ï¼Œä¸æ”¯æŒæ­£åˆ™ï¼Œå¦‚location ^</del> /user {}</li><li> <del>å’Œ</del>*ç±»å‹ï¼Œæ­£åˆ™åŒ¹é…ï¼Œ<del>åŒºåˆ†å¤§å°å†™ï¼Œ</del>*ä¸åŒºåˆ†å¤§å°å†™ï¼Œå¦‚location ~ ^/user {}</li><li> å¸¸è§„å­—ç¬¦ä¸²åŒ¹é…ç±»å‹ï¼Œå¦‚location / {}æˆ–location /user {}</li></ol><h2 id="Try-filesè§„åˆ™"><a href="#Try-filesè§„åˆ™" class="headerlink" title="Try_filesè§„åˆ™"></a>Try_filesè§„åˆ™</h2><p>try_files $uri $uri/ /index.php<br>å‡è®¾è¯·æ±‚ä¸º<code>http://www.qq.com/test</code>ï¼Œåˆ™<code>$uri</code>ä¸º<code>test</code></p><p>æŸ¥æ‰¾<code>/$root/test</code>æ–‡ä»¶<br>æŸ¥æ‰¾<code>/$root/test/</code>ç›®å½•<br>å‘èµ·<code>/index.php</code>çš„å†…éƒ¨â€œå­è¯·æ±‚â€</p><h2 id="Rewriteè§„åˆ™"><a href="#Rewriteè§„åˆ™" class="headerlink" title="Rewriteè§„åˆ™"></a>Rewriteè§„åˆ™</h2><p>rewrite ^/images/(.*).(png|jpg|gif)$ /images?name=$1.$4 last;</p><p>ä¸Šé¢çš„<code>rewrite</code>è§„åˆ™ä¼šå°†æ–‡ä»¶åæ”¹å†™åˆ°å‚æ•°ä¸­</p><ul><li>last : ç›¸å½“äº<code>Apache</code>çš„[L]æ ‡è®°ï¼Œè¡¨ç¤ºå®Œæˆ<code>rewrite</code></li><li>break : åœæ­¢æ‰§è¡Œå½“å‰è™šæ‹Ÿä¸»æœºçš„åç»­<code>rewrite</code>æŒ‡ä»¤é›†</li><li>redirect : è¿”å›302ä¸´æ—¶é‡å®šå‘ï¼Œåœ°å€æ ä¼šæ˜¾ç¤ºè·³è½¬åçš„åœ°å€</li><li>permanent : è¿”å›301æ°¸ä¹…é‡å®šå‘ï¼Œåœ°å€æ ä¼šæ˜¾ç¤ºè·³è½¬åçš„åœ°å€</li></ul><h2 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h2><p>ä¾‹å­å¦‚ä¸‹</p><pre><code class="NGINX">upstream backend1 {    server backend1.qq.com weight=5;    server 127.0.0.1:8080 max_fails=3 fail_timeout=30s;    server unix:/tmp/backend3 backup;}upstream backend2 {    ip_hash;    server backend1.qq.com;    server backend2.qq.com;    server backend3.qq.com down;    server backend4.qq.com;}server {    location / {        proxy_pass http://backend1;    }    location /api {        proxy_pass http://backend2;    }}</code></pre><h2 id="æŸ¥çœ‹ä¸€ä¸ªå®ä¾‹"><a href="#æŸ¥çœ‹ä¸€ä¸ªå®ä¾‹" class="headerlink" title="æŸ¥çœ‹ä¸€ä¸ªå®ä¾‹"></a>æŸ¥çœ‹ä¸€ä¸ªå®ä¾‹</h2><p>ä¸‹é¢æ˜¯ä¸€ä¸ª <code>laravel</code>æ¡†æ¶<code>Nginx</code>é…ç½®çš„ä¾‹å­ï¼Œå¬è¿‡è¿™å ‚è¯¾ç»ˆäºäº†è§£äº†ä¸‹é¢çš„åŸç†ã€‚</p><pre><code class="NGINX">server {    listen 80 default_server;    listen [::]:80 default_server ipv6only=on;    # è®¾å®šç½‘ç«™æ ¹ç›®å½•    root /var/www/laravel/public;    # ç½‘ç«™é»˜è®¤é¦–é¡µ    index index.php index.html index.htm;    # æœåŠ¡å™¨åç§°ï¼Œserver_domain_or_IP è¯·æ›¿æ¢ä¸ºè‡ªå·±è®¾ç½®çš„åç§°æˆ–è€… IP åœ°å€    server_name server_domain_or_IP;    # ä¿®æ”¹ä¸º Laravel è½¬å‘è§„åˆ™ï¼Œå¦åˆ™PHPæ— æ³•è·å–$_GETä¿¡æ¯ï¼Œæç¤º404é”™è¯¯    location / {        try_files $uri $uri/ /index.php?$query_string;    }    # PHP æ”¯æŒ    location ~ \.php$ {        try_files $uri /index.php =404;        fastcgi_split_path_info ^(.+\.php)(/.+)$;        fastcgi_pass unix:/var/run/php5-fpm.sock;        fastcgi_index index.php;        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;        include fastcgi_params;    }}</code></pre><p>æˆ‘ä»¬ä¸»è¦å…³æ³¨ä¸¤ä¸ª<code>location</code>ï¼Œå‡è®¾åœ°å€æ˜¯<code>http://www.qq.com/user/info</code>ï¼Œä¼šåŒ¹é…åˆ°å¦‚ä¸‹<code>location</code></p><pre><code class="NGINX">location / {    try_files $uri $uri/ /index.php?$query_string;}</code></pre><p>ç”±äº<code>$uri</code>å’Œ<code>$uri/</code>æ˜¯ä¸å­˜åœ¨çš„ï¼Œæ‰€ä»¥ä¼šèµ°<code>/index.php?$query_string</code>ï¼Œè¿™æ—¶å€™ä¼šå‘èµ·ä¸€ä¸ªå†…éƒ¨â€œå­è¯·æ±‚â€ï¼Œâ€œå­è¯·æ±‚â€ä¼šé‡æ–°åŒ¹é…<code>location</code>ï¼Œç„¶ååŒ¹é…åˆ°å¦‚ä¸‹<code>location</code></p><pre><code class="NGINX">location ~ \.php$ {    try_files $uri /index.php =404;    fastcgi_split_path_info ^(.+\.php)(/.+)$;    fastcgi_pass unix:/var/run/php5-fpm.sock;    fastcgi_index index.php;    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;    include fastcgi_params;}</code></pre><p>è¿™æ ·è¯·æ±‚å°±ä¼šå‘é€åˆ°<code>fastcgi</code>å»åšå¤„ç†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
            <tag> devops </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginxä»£ç†proxy passé…ç½®å»é™¤å‰ç¼€é—®é¢˜</title>
      <link href="/My-Blogs/2021/01/08/nginx/Nginx%E4%BB%A3%E7%90%86proxy%20pass%E9%85%8D%E7%BD%AE%E5%8E%BB%E9%99%A4%E5%89%8D%E7%BC%80%E9%97%AE%E9%A2%98/"/>
      <url>/My-Blogs/2021/01/08/nginx/Nginx%E4%BB%A3%E7%90%86proxy%20pass%E9%85%8D%E7%BD%AE%E5%8E%BB%E9%99%A4%E5%89%8D%E7%BC%80%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>è®¾ç½®åå‘ä»£ç†çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™ç¨‹åºä¼šæ‹¿ä¸åˆ°URLåé¢çš„pathéƒ¨åˆ†ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹å§</p><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä½¿ç”¨Nginxåšä»£ç†çš„æ—¶å€™ï¼Œå¯ä»¥ç®€å•çš„ç›´æ¥æŠŠè¯·æ±‚åŸå°ä¸åŠ¨çš„è½¬å‘ç»™ä¸‹ä¸€ä¸ªæœåŠ¡ã€‚</p><p>æ¯”å¦‚ï¼Œè®¿é—®abc.com/appv2/a/b.html, è¦æ±‚è½¬å‘åˆ°localhost:8088/appv2/a/b.html</p><p>ç®€å•é…ç½®å¦‚ä¸‹ï¼š</p><pre><code class="nginx">upstream one {  server localhost:8088 weight=5;}server {    listen              80;    server_name         abc.com;    access_log  "pipe:rollback /data/log/nginx/access.log interval=1d baknum=7 maxsize=1G"  main;    location / {        proxy_set_header Host $host;        proxy_set_header  X-Real-IP        $remote_addr;        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;        proxy_set_header X-NginX-Proxy true;        proxy_pass http://one;    }}</code></pre><p>å³ï¼Œè®¾ç½® <code>proxy_pass</code> å³å¯ã€‚è¯·æ±‚åªä¼šæ›¿æ¢åŸŸåã€‚</p><p>ä½†å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®urlçš„å‰ç¼€è½¬å‘åˆ°ä¸åŒçš„æœåŠ¡ã€‚</p><p>æ¯”å¦‚</p><p>abc.com/user/profile.html è½¬å‘åˆ° ç”¨æˆ·æœåŠ¡localhost:8089/profile.html</p><p>abc.com/order/details.html è½¬å‘åˆ° è®¢å•æœåŠ¡ localhost:8090/details.html</p><p>å³ï¼Œurlçš„å‰ç¼€å¯¹ä¸‹æ¸¸çš„æœåŠ¡æ˜¯ä¸éœ€è¦çš„ï¼Œé™¤éä¸‹æ¸¸æœåŠ¡æ·»åŠ context-path, ä½†å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸å–œæ¬¢åŠ è¿™ä¸ªã€‚å¦‚æœNginxè½¬å‘çš„æ—¶å€™ï¼ŒæŠŠè¿™ä¸ªå‰ç¼€å»æ‰å°±å¥½äº†ã€‚</p><h3 id="ä¸€ä¸ªç§æ–¹æ¡ˆæ˜¯proxy-passåé¢åŠ æ ¹è·¯å¾„"><a href="#ä¸€ä¸ªç§æ–¹æ¡ˆæ˜¯proxy-passåé¢åŠ æ ¹è·¯å¾„" class="headerlink" title="ä¸€ä¸ªç§æ–¹æ¡ˆæ˜¯proxy_passåé¢åŠ æ ¹è·¯å¾„ / ."></a>ä¸€ä¸ªç§æ–¹æ¡ˆæ˜¯proxy_passåé¢åŠ æ ¹è·¯å¾„ <code>/</code> .</h3><pre><code class="nginx">server {    listen              80;    server_name         abc.com;    access_log  "pipe:rollback /data/log/nginx/access.log interval=1d baknum=7 maxsize=1G"  main;    location ^~/user/ {        proxy_set_header Host $host;        proxy_set_header  X-Real-IP        $remote_addr;        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;        proxy_set_header X-NginX-Proxy true;        proxy_pass http://user/;    }    location ^~/order/ {        proxy_set_header Host $host;        proxy_set_header  X-Real-IP        $remote_addr;        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;        proxy_set_header X-NginX-Proxy true;        proxy_pass http://order/;    }}</code></pre><p><code>^~/user/</code> è¡¨ç¤ºåŒ¹é…å‰ç¼€æ˜¯ <code>user</code> çš„è¯·æ±‚ï¼Œproxy_passçš„ç»“å°¾æœ‰/ï¼Œ åˆ™ä¼šæŠŠ <code>/user/*</code> åé¢çš„è·¯å¾„ç›´æ¥æ‹¼æ¥åˆ°åé¢ï¼Œå³ç§»é™¤user.</p><h3 id="å¦ä¸€ç§æ–¹æ¡ˆæ˜¯ä½¿ç”¨-rewrite"><a href="#å¦ä¸€ç§æ–¹æ¡ˆæ˜¯ä½¿ç”¨-rewrite" class="headerlink" title="å¦ä¸€ç§æ–¹æ¡ˆæ˜¯ä½¿ç”¨ rewrite"></a>å¦ä¸€ç§æ–¹æ¡ˆæ˜¯ä½¿ç”¨ <code>rewrite</code></h3><pre><code class="nginx">upstream user {  server localhost:8089 weight=5;}upstream order {  server localhost:8090 weight=5;}server {    listen              80;    server_name         abc.com;    access_log  "pipe:rollback /data/log/nginx/access.log interval=1d baknum=7 maxsize=1G"  main;    location ^~/user/ {        proxy_set_header Host $host;        proxy_set_header  X-Real-IP        $remote_addr;        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;        proxy_set_header X-NginX-Proxy true;        rewrite ^/user/(.*)$ /$1 break;        proxy_pass http://user;    }    location ^~/order/ {        proxy_set_header Host $host;        proxy_set_header  X-Real-IP        $remote_addr;        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;        proxy_set_header X-NginX-Proxy true;        rewrite ^/order/(.*)$ /$1 break;        proxy_pass http://order;    }}</code></pre><p>æ³¨æ„åˆ°proxy_passç»“å°¾æ²¡æœ‰ <code>/</code> , <code>rewrite</code> é‡å†™äº†urlã€‚</p><p>å…³äºrewrite</p><pre><code class="nginx">syntax: rewrite regex replacement [flag]Default: â€”Context: server, location, if</code></pre>]]></content>
      
      
      <categories>
          
          <category> nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
            <tag> devops </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx locationåŒ¹é…è§„åˆ™</title>
      <link href="/My-Blogs/2021/01/08/nginx/Nginx%20location%E5%8C%B9%E9%85%8D%E8%A7%84%E5%88%99/"/>
      <url>/My-Blogs/2021/01/08/nginx/Nginx%20location%E5%8C%B9%E9%85%8D%E8%A7%84%E5%88%99/</url>
      
        <content type="html"><![CDATA[<p>locationçš„åŒ¹é…è§„åˆ™æœ‰å“ªäº›å‘¢ï¼Ÿè®©æˆ‘ä»¬æ¥ä¸€èµ·çœ‹çœ‹å§</p><a id="more"></a><h3 id="urlåŒ¹é…è§„åˆ™"><a href="#urlåŒ¹é…è§„åˆ™" class="headerlink" title="urlåŒ¹é…è§„åˆ™"></a>urlåŒ¹é…è§„åˆ™</h3><pre><code class="nginx">location [=|~|~*|^~|@] /uri/ {  ...} </code></pre><ul><li><code>=</code> : è¡¨ç¤ºç²¾ç¡®åŒ¹é…åé¢çš„url</li><li><code>~</code> : è¡¨ç¤ºæ­£åˆ™åŒ¹é…ï¼Œä½†æ˜¯åŒºåˆ†å¤§å°å†™</li><li><code>~*</code> : æ­£åˆ™åŒ¹é…ï¼Œä¸åŒºåˆ†å¤§å°å†™</li><li><code>^~</code> : è¡¨ç¤ºæ™®é€šå­—ç¬¦åŒ¹é…ï¼Œå¦‚æœè¯¥é€‰é¡¹åŒ¹é…ï¼ŒåªåŒ¹é…è¯¥é€‰é¡¹ï¼Œä¸åŒ¹é…åˆ«çš„é€‰é¡¹ï¼Œä¸€èˆ¬ç”¨æ¥åŒ¹é…ç›®å½•</li><li><code>@</code> : â€œ@â€ å®šä¹‰ä¸€ä¸ªå‘½åçš„ locationï¼Œä½¿ç”¨åœ¨å†…éƒ¨å®šå‘æ—¶ï¼Œä¾‹å¦‚ error_page</li></ul><p>ä¸Šè¿°åŒ¹é…è§„åˆ™çš„ä¼˜å…ˆåŒ¹é…é¡ºåºï¼š</p><ol><li> = å‰ç¼€çš„æŒ‡ä»¤ä¸¥æ ¼åŒ¹é…è¿™ä¸ªæŸ¥è¯¢ã€‚å¦‚æœæ‰¾åˆ°ï¼Œåœæ­¢æœç´¢ï¼›</li><li> æ‰€æœ‰å‰©ä¸‹çš„å¸¸è§„å­—ç¬¦ä¸²ï¼Œæœ€é•¿çš„åŒ¹é…ã€‚å¦‚æœè¿™ä¸ªåŒ¹é…ä½¿ç”¨ ^~ å‰ç¼€ï¼Œæœç´¢åœæ­¢ï¼›</li><li> æ­£åˆ™è¡¨è¾¾å¼ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„é¡ºåºï¼›</li><li> å¦‚æœç¬¬ 3 æ¡è§„åˆ™äº§ç”ŸåŒ¹é…çš„è¯ï¼Œç»“æœè¢«ä½¿ç”¨ã€‚å¦åˆ™ï¼Œä½¿ç”¨ç¬¬ 2 æ¡è§„åˆ™çš„ç»“æœã€‚</li></ol><h3 id="ç›®æ ‡åœ°å€å¤„ç†è§„åˆ™"><a href="#ç›®æ ‡åœ°å€å¤„ç†è§„åˆ™" class="headerlink" title="ç›®æ ‡åœ°å€å¤„ç†è§„åˆ™"></a>ç›®æ ‡åœ°å€å¤„ç†è§„åˆ™</h3><p>åŒ¹é…åˆ°uriåï¼Œæ¥ä¸‹æ¥è¦ä»£ç†åˆ°ç›®æ ‡æœåŠ¡åœ°å€ã€‚</p><pre><code class="NGINX">upstream api_server {  server 10.0.101.62:8081;  server 10.0.101.61:8082;}location / {        rewrite ^(.*)$ http://10.0.101.62:8000/my-module$1 break;}location ^~ /my-module/ {    root   /data/my-module/dist;    rewrite ^/my-module/(.*)$  /$1 break;    index  index.html index.htm;}location /my-module/api {    proxy_pass  http://api_server;    proxy_set_header Host $host;    proxy_set_header  X-Real-IP        $remote_addr;    proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;    proxy_set_header  your-custome-header    "myHeader";    proxy_set_header X-NginX-Proxy true;}</code></pre><p>ä¸Šè¿°é…ç½®ï¼Œé»˜è®¤è®¿é—® <code>/</code> ä¼šé‡å®šå‘åˆ° <code>/my-module</code> , ç„¶åç›´æ¥è¿”å› <code>/data/my-module/dist</code> ä¸‹çš„htmlç­‰é™æ€æ–‡ä»¶ã€‚</p><p>è®¿é—® <code>/my-module/api</code> åˆ™ä¼šä»£ç†åˆ°æˆ‘ä»¬apiæœåŠ¡å™¨åœ°å€ï¼Œæ˜¯ä¸€ä¸ªé»˜è®¤çš„round-robinè´Ÿè½½å‡è¡¡é…ç½®ã€‚</p><p>ä¸‹é¢æ˜¯è®¿é—®localhostçš„æ—¥å¿—, è®¿é—®é¦–é¡µä¸€å…±è¿›è¡Œäº†2æ¬¡é‡å®šå‘ã€‚</p><pre><code class="PHP">Request URL: http://10.0.101.62:8000/Request Method: GETStatus Code: 302 Moved TemporarilyLocation: http://10.0.101.62:8000/flash/Request URL: http://10.0.101.62:8000/flash/Request Method: GETStatus Code: 302 Moved TemporarilyLocation: http://10.0.101.62:8000/flash/index.htmlRequest URL: http://10.0.101.62:8000/flash/index.htmlRequest Method: GETStatus Code: 304 Not Modified</code></pre><h3 id="aliasä¸rootçš„åŒºåˆ«"><a href="#aliasä¸rootçš„åŒºåˆ«" class="headerlink" title="aliasä¸rootçš„åŒºåˆ«"></a>aliasä¸rootçš„åŒºåˆ«</h3><blockquote><p>root å®é™…è®¿é—®æ–‡ä»¶è·¯å¾„ä¼šæ‹¼æ¥URLä¸­çš„è·¯å¾„</p><p>alias å®é™…è®¿é—®æ–‡ä»¶è·¯å¾„ä¸ä¼šæ‹¼æ¥URLä¸­çš„è·¯å¾„</p></blockquote><p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><pre><code class="NGINX">location ^~ /sta/ {     alias /usr/local/nginx/html/static/;  }</code></pre><p>è¯·æ±‚ï¼š<code>http://test.com/sta/sta1.html</code><br>å®é™…è®¿é—®ï¼š<code>/usr/local/nginx/html/static/sta1.html</code> æ–‡ä»¶</p><pre><code class="NGINX">location ^~ /tea/ {     root /usr/local/nginx/html/;  }</code></pre><p>è¯·æ±‚ï¼š <code>http://test.com/tea/tea1.html</code></p><p>å®é™…è®¿é—®ï¼š <code>/usr/local/nginx/html/tea/tea1.html</code> æ–‡ä»¶</p><p>æ˜¾ç„¶ï¼Œç¬¬äºŒæ¬¡é‡å®šå‘æ˜¯ä¸éœ€è¦çš„ï¼Œæœ¬æ„æ˜¯è®¿é—®/flash/çš„æ—¶å€™ï¼Œç›´æ¥è®¿é—®å¯¹åº”ç›®å½•ä¸‹çš„htmlé™æ€æ–‡ä»¶ã€‚ ä½†å› ä¸ºrootæ‹¼æ¥flashå¯¼è‡´æ‰¾ä¸åˆ°å¯¹åº”æ–‡ä»¶ï¼Œè¦é‡å†™urlï¼Œå»æ‰flashè¿™ä¸ªæ¨¡å—å‰ç¼€ï¼Œä½¿ç”¨äº† <code>rewrite</code> , è€Œ <code>rewrite</code> ä¼šè¿”å›302é‡å®šå‘ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¿®æ”¹ <code>root</code> ä¸º <code>alias</code></p><pre><code class="NGINX">location ^~ /flash/ {    alias   /data/flash/dist/;    #rewrite ^/flash/(.*)$  /$1 break;    index  index.html index.htm;}</code></pre><p>ç›´æ¥é‡å®šå‘1æ¬¡åè¿”å›html</p><pre><code class="PHP">Request URL: http://10.0.101.62:8000/Request Method: GETStatus Code: 302 Moved TemporarilyRequest URL: http://10.0.101.62:8000/flash/Request Method: GETStatus Code: 200 OK (from disk cache)</code></pre><h3 id="last-å’Œ-breakå…³é”®å­—çš„åŒºåˆ«"><a href="#last-å’Œ-breakå…³é”®å­—çš„åŒºåˆ«" class="headerlink" title="last å’Œ breakå…³é”®å­—çš„åŒºåˆ«"></a>last å’Œ breakå…³é”®å­—çš„åŒºåˆ«</h3><p>åªç”¨åˆ°äº†breakï¼Œå³åŒ¹é…åˆ°æ­¤å¤„åä¸ä¼šç»§ç»­è·³ã€‚</p><h3 id="permanent-å’Œ-redirectå…³é”®å­—çš„åŒºåˆ«"><a href="#permanent-å’Œ-redirectå…³é”®å­—çš„åŒºåˆ«" class="headerlink" title="permanent å’Œ redirectå…³é”®å­—çš„åŒºåˆ«"></a>permanent å’Œ redirectå…³é”®å­—çš„åŒºåˆ«</h3><ul><li>rewrite â€¦ permanent æ°¸ä¹…æ€§é‡å®šå‘ï¼Œè¯·æ±‚æ—¥å¿—ä¸­çš„çŠ¶æ€ç ä¸º301</li><li>rewrite â€¦ redirect ä¸´æ—¶é‡å®šå‘ï¼Œè¯·æ±‚æ—¥å¿—ä¸­çš„çŠ¶æ€ç ä¸º302</li></ul><p>æˆ‘ä»¬å¸¸ç”¨çš„ <code>80</code> ç«¯å£è½¬ <code>443</code> ï¼Œå³httpè½¬httpsçš„ä¸€ç§é…ç½®æ–¹æ¡ˆä¸º</p><pre><code class="NGINX">server {    listen 80;    server_name demo.com;    rewrite ^(.*)$ https://${server_name}$1 permanent; }</code></pre><p>ä¼šè¿”å›301æ°¸ä¹…é‡å®šå‘åˆ°å¯¹åº”çš„httpsï¼š</p><pre><code class="PHP">Request URL: http://demo.com/flash/index.htmlRequest Method: GETStatus Code: 301 Moved PermanentlyLocation: https://demo/flash/index.html</code></pre><h3 id="ä¸€äº›ä½¿ç”¨åœºæ™¯"><a href="#ä¸€äº›ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä¸€äº›ä½¿ç”¨åœºæ™¯"></a>ä¸€äº›ä½¿ç”¨åœºæ™¯</h3><p>ä¸Šè¿°demoå·®ä¸å¤šå°±æ˜¯æˆ‘å¹³æ—¶ç”¨çš„å‰åç«¯åˆ†ç¦»çš„ä»£ç†é…ç½®æ–¹æ¡ˆã€‚ä¸‹é¢æ˜¯ä¸€äº›é‡åˆ°è¿‡çš„åœºæ™¯ã€‚</p><p>é…ç½®ä¸€ä¸ªé™æ€æ–‡ä»¶ä¸‹è½½æœåŠ¡ï¼Œæˆ‘ä»¬ä¸‹é¢è½¯ä»¶ä¼šç»å¸¸çœ‹åˆ°index /çš„é¡µé¢ã€‚</p><pre><code class="NGINX">server {        listen       8888;        #ç«¯å£        server_name  _;   #æœåŠ¡å        charset utf-8,gbk;        root    /data/download;  #æ˜¾ç¤ºçš„æ ¹ç´¢å¼•ç›®å½•        autoindex on;             #å¼€å¯ç´¢å¼•åŠŸèƒ½        autoindex_exact_size off; # å…³é—­è®¡ç®—æ–‡ä»¶ç¡®åˆ‡å¤§å°ï¼ˆå•ä½bytesï¼‰ï¼Œåªæ˜¾ç¤ºå¤§æ¦‚å¤§å°ï¼ˆå•ä½kbã€mbã€gbï¼‰        autoindex_localtime on;   # æ˜¾ç¤ºæœ¬æœºæ—¶é—´è€Œé GMT æ—¶é—´}</code></pre><p>é…ç½®httpé‡å®šå‘åˆ°https</p><pre><code class="NGINX">server {    listen 80;    server_name demo.com;    rewrite ^(.*)$ https://${server_name}$1 permanent; }server {    listen       443;    server_name  demo.com;    charset utf-8;    location / {       alias   /data/web;       index  index.html index.htm;    }}</code></pre><p>é…ç½®é™æ€å‰ç«¯é¡µé¢</p><pre><code class="NGINX">location / {    alias   /data/web;    index  index.html index.htm;}</code></pre><p>é…ç½®åå‘ä»£ç†, æ¯”å¦‚æˆ‘ä»¬è®¿é—®<a href="http://demo.com/api/aaa/bbb%EF%BC%8C%E6%88%91%E4%BB%AC%E6%83%B3%E8%A6%81%E4%BB%A3%E7%90%86%E5%88%B0http://api.com/api/aaa/bbb">http://demo.com/api/aaa/bbbï¼Œæˆ‘ä»¬æƒ³è¦ä»£ç†åˆ°http://api.com/api/aaa/bbb</a>, åªåˆ‡æ¢äº†åŸŸåï¼Œuriç›¸åŒã€‚</p><pre><code class="NGINX">upstream api_server {  server 10.0.101.62:8081;  server 10.0.101.61:8082;}location /api {    proxy_pass  http://api_server;    proxy_set_header Host $host;    proxy_set_header  X-Real-IP        $remote_addr;    proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;    proxy_set_header  your-custome-header    "myHeader";    proxy_set_header X-NginX-Proxy true;}</code></pre><p>é…ç½®åå‘ä»£ç†æ—¶ï¼Œç§»é™¤å‰ç¼€ã€‚æ¯”å¦‚æˆ‘ä»¬çš„æœåŠ¡<a href="http://demo.com/users/aaa/bbb">http://demo.com/users/aaa/bbb</a>, æˆ‘ä»¬æƒ³è¦ä»£ç†åˆ°<a href="http://users.com/aaa/bbb%EF%BC%8C%E5%8D%B3%E5%88%87%E6%8D%A2%E5%9F%9F%E5%90%8D%E7%9A%84%E5%90%8C%E6%97%B6%EF%BC%8C%E5%8E%BB%E6%8E%89users%E5%89%8D%E7%BC%80%E3%80%82%E5%8C%BA%E5%88%AB%E6%98%AFproxy_pass">http://users.com/aaa/bbbï¼Œå³åˆ‡æ¢åŸŸåçš„åŒæ—¶ï¼Œå»æ‰userså‰ç¼€ã€‚åŒºåˆ«æ˜¯proxy_pass</a> ç»“å°¾çš„ <code>/</code> .</p><pre><code class="NGINX">location ^~/users/ {    proxy_set_header Host $host;    proxy_set_header  X-Real-IP        $remote_addr;    proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;    proxy_set_header X-NginX-Proxy true;    proxy_pass http://users.com/;}</code></pre><p>åå‘ä»£ç†æ—¶ï¼Œæƒ³è¦è‡ªå®šä¹‰ä¿®æ”¹uriã€‚ä½¿ç”¨rewriteæ­£åˆ™ä¿®æ”¹ã€‚</p><pre><code class="NGINX"># ä¿®æ”¹uriï¼Œå»æ‰äº†flashçš„å‰ç¼€ï¼Œ$1è¡¨ç¤ºæ­£åˆ™åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²å†…å®¹ã€‚location ^~ /flash/ {    root   /data/flash/dist/;    rewrite ^/flash/(.*)$  /$1 break;    index  index.html index.htm;}# ä¿®æ”¹uri, é‡æ–°ä»£ç†åˆ°æ–°çš„åœ°å€location ^~/order/ {    proxy_set_header Host $host;    proxy_set_header  X-Real-IP        $remote_addr;    proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;    proxy_set_header X-NginX-Proxy true;    rewrite ^/order/(.*)$ /$1 break;    proxy_pass http://order;}</code></pre><p>ä»£ç†è·¨åŸŸ, æ¯”å¦‚bingæ¯æ—¥ä¸€å›¾ï¼Œä¸æ”¯æŒæˆ‘ä»¬ajaxè·å–å›¾ç‰‡åœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±å†™ä¸€ä¸ªæ”¯æŒçš„æ¥å£ã€‚</p><p><a href="http://101.200.218.760/proxy/bing/HPImageArchive.aspx?format=js&amp;idx=0&amp;n=1">http://101.200.218.760/proxy/bing/HPImageArchive.aspx?format=js&amp;idx=0&amp;n=1</a></p><p>ä»£ç†å¯¹è±¡ä¸ºï¼š</p><p><a href="https://cn.bing.com/HPImageArchive.aspx?format=js&amp;idx=0&amp;n=1">https://cn.bing.com/HPImageArchive.aspx?format=js&amp;idx=0&amp;n=1</a></p><pre><code class="NGINX">location ^~/proxy/bing/ {    add_header 'Access-Control-Allow-Origin' 'http://localhost:8088';    add_header 'Cache-Control' 'public, max-age=604800';    add_header 'Access-Control-Allow-Credentials' 'true';    add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';    rewrite ^/proxy/bing/(.*)$ /$1 break;    proxy_pass https://cn.bing.com/; }</code></pre><h3 id="æ¥æº"><a href="#æ¥æº" class="headerlink" title="æ¥æº"></a>æ¥æº</h3><ul><li><a href="https://www.cnblogs.com/duhuo/p/8323812.html">https://www.cnblogs.com/duhuo/p/8323812.html</a></li><li><a href="https://www.cnblogs.com/woshimrf/p/nginx-proxy-rewrite-url.html">https://www.cnblogs.com/woshimrf/p/nginx-proxy-rewrite-url.html</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
            <tag> devops </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginxçš„è´Ÿè½½å‡è¡¡å®ä¾‹ï¼Œå‡è¡¡ç­–ç•¥ï¼Œsessionä¿æŒæ–¹æ¡ˆ</title>
      <link href="/My-Blogs/2021/01/08/nginx/Nginx%E7%9A%84%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%AE%9E%E4%BE%8B%EF%BC%8C%E5%9D%87%E8%A1%A1%E7%AD%96%E7%95%A5%EF%BC%8Csession%E4%BF%9D%E6%8C%81%E6%96%B9%E6%A1%88/"/>
      <url>/My-Blogs/2021/01/08/nginx/Nginx%E7%9A%84%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%AE%9E%E4%BE%8B%EF%BC%8C%E5%9D%87%E8%A1%A1%E7%AD%96%E7%95%A5%EF%BC%8Csession%E4%BF%9D%E6%8C%81%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<p>è´Ÿè½½å‡è¡¡å®šä¹‰ï¼šä»£ç†æœåŠ¡å™¨å°†æ¥æ”¶çš„è¯·æ±‚å‡è¡¡çš„åˆ†å‘åˆ°å„æœåŠ¡å™¨ä¸­<br>è´Ÿè½½å‡è¡¡ä½œç”¨ï¼šä¸»è¦è§£å†³ç½‘ç»œæ‹¥å¡é—®é¢˜ï¼Œæé«˜æœåŠ¡å™¨å“åº”é€Ÿåº¦ï¼ŒæœåŠ¡å°±è¿‘æä¾›ï¼Œè¾¾åˆ°æ›´å¥½çš„è®¿é—®è´¨é‡ï¼Œå‡å°‘åå°æœåŠ¡å™¨å¹¶å‘å‹åŠ›ã€‚</p><a id="more"></a><h2 id="è´Ÿè½½å‡è¡¡çš„é…ç½®å®ä¾‹"><a href="#è´Ÿè½½å‡è¡¡çš„é…ç½®å®ä¾‹" class="headerlink" title="è´Ÿè½½å‡è¡¡çš„é…ç½®å®ä¾‹"></a>è´Ÿè½½å‡è¡¡çš„é…ç½®å®ä¾‹</h2><p>å¯è®¿é—®çš„æœåŠ¡æœ‰ä¸¤ä¸ªï¼š</p><ul><li><a href="http://172.16.25.44:8080/rsbi">http://172.16.25.44:8080/rsbi</a></li><li><a href="http://192.168.1.138:8080/rsbi">http://192.168.1.138:8080/rsbi</a></li></ul><p>nginx.confå®Œæ•´é…ç½®å¦‚ä¸‹ï¼š</p><pre><code class="NGINX">#user &nbsp;nobody;worker_processes &nbsp;1;events {&nbsp; &nbsp; worker_connections &nbsp;1024;}http {&nbsp; &nbsp; &nbsp; &nbsp; include &nbsp; &nbsp; &nbsp; mime.types;&nbsp; &nbsp; &nbsp; &nbsp; default_type &nbsp;application/octet-stream;&nbsp; &nbsp; &nbsp; &nbsp; sendfile &nbsp; &nbsp; &nbsp; &nbsp;on;&nbsp; &nbsp; &nbsp; &nbsp; keepalive_timeout &nbsp;65;&nbsp; &nbsp; &nbsp; &nbsp; #æ­¤å¤„å®šä¹‰å¸¸é‡xd-projec&nbsp; &nbsp; &nbsp; &nbsp; upstream xd-project{&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #æ³¨æ„ æ­¤å¤„çš„serveråªèƒ½æ˜¯ip:port ä¸èƒ½æœ‰ä»»ä½•å¤šä½™çš„httpæˆ–è€…é¡¹ç›®åç§°&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; server 172.16.25.44:8080;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; server &nbsp;192.168.1.138:8080;&nbsp; &nbsp; &nbsp; &nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; server{&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; listen 8081;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; server_name &nbsp;localhost;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; location / {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #æ­¤å¤„ä½¿ç”¨ä¸Šé¢å®šä¹‰å¸¸é‡xd-projec&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; proxy_pass http://xd-project;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; location ~ .* {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; proxy_pass http://xd-project;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; proxy_set_header Host $http_host;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; proxy_set_header X-Real-IP $remote_addr;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; error_page &nbsp; 500 502 503 504 &nbsp;/50x.html;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; location = /50x.html {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; root &nbsp; html;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; include servers/*;}</code></pre><p>è¯´æ˜ï¼šä¸Šé¢çš„å‡è¡¡æ–¹å¼æ˜¯è½®è¯¢ï¼Œå³nginxçš„é»˜è®¤è´Ÿè½½å‡è¡¡æ–¹å¼</p><h2 id="nginxçš„è´Ÿè½½å‡è¡¡ç­–ç•¥åŠå…¶é€‚ç”¨åœºæ™¯"><a href="#nginxçš„è´Ÿè½½å‡è¡¡ç­–ç•¥åŠå…¶é€‚ç”¨åœºæ™¯" class="headerlink" title="nginxçš„è´Ÿè½½å‡è¡¡ç­–ç•¥åŠå…¶é€‚ç”¨åœºæ™¯"></a>nginxçš„è´Ÿè½½å‡è¡¡ç­–ç•¥åŠå…¶é€‚ç”¨åœºæ™¯</h2><h3 id="1-è½®è¯¢ï¼ˆé»˜è®¤ï¼‰"><a href="#1-è½®è¯¢ï¼ˆé»˜è®¤ï¼‰" class="headerlink" title="1.  è½®è¯¢ï¼ˆé»˜è®¤ï¼‰"></a>1.  è½®è¯¢ï¼ˆé»˜è®¤ï¼‰</h3><p>æ¯ä¸ªè¯·æ±‚æŒ‰æ—¶é—´é¡ºåºé€ä¸€åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ï¼Œå¦‚æœåç«¯æœåŠ¡å™¨downæ‰ï¼Œèƒ½è‡ªåŠ¨å‰”é™¤ã€‚ä¸»è¦ç”¨äºå¤§é‡è¯·æ±‚åœºæ™¯ä¸­ç¯èŠ‚æœåŠ¡ç«¯çš„å‹åŠ›ã€‚<br>é…ç½®å®ä¾‹ï¼š</p><pre><code class="NGINX">upstream xd-project{        #æ³¨æ„ æ­¤å¤„çš„serveråªèƒ½æ˜¯ip:port ä¸èƒ½æœ‰ä»»ä½•å¤šä½™çš„httpæˆ–è€…é¡¹ç›®åç§°        server 172.16.25.44:8080;        server  192.168.1.138:8080;} </code></pre><h3 id="2-weight"><a href="#2-weight" class="headerlink" title="2.  weight"></a>2.  weight</h3><p>æŒ‡å®šè½®è¯¢å‡ ç‡ï¼Œweightå’Œè®¿é—®æ¯”ç‡æˆæ­£æ¯”ï¼Œç”¨äºåç«¯æœåŠ¡å™¨æ€§èƒ½ä¸å‡çš„æƒ…å†µã€‚<br>é…ç½®å®ä¾‹</p><pre><code class="NGINX">upstream xd-project{  #æ³¨æ„ æ­¤å¤„çš„serveråªèƒ½æ˜¯ip:port ä¸èƒ½æœ‰ä»»ä½•å¤šä½™çš„httpæˆ–è€…é¡¹ç›®åç§°  server 172.16.25.44:8080 weight=1;  server  192.168.1.138:8080 weight=2;}</code></pre><p>è¯´æ˜ï¼šå‡è®¾æœ‰ä¸‰æ¬¡è®¿é—®ï¼Œå› ä¸ºweightçš„å€¼ï¼Œä¼šæœ‰ä¸€æ¬¡è½åœ¨172.16.25.44:8080ï¼Œä¸¤æ¬¡è½åœ¨192.168.1.138:8080<br>åº”ç”¨åœºæ™¯ï¼šåç«¯æœåŠ¡å™¨æ€§èƒ½ä¸å‡çš„æƒ…å†µ</p><h3 id="3-ip-hash"><a href="#3-ip-hash" class="headerlink" title="3.  ip_hash"></a>3.  ip_hash</h3><p>æ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—®ipçš„hashç»“æœåˆ†é…ï¼Œè¿™æ ·æ¯ä¸ªè®¿å®¢å›ºå®šè®¿é—®ä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œå¯ä»¥è§£å†³sessionçš„é—®é¢˜ã€‚<br>é…ç½®å®ä¾‹ï¼š</p><pre><code class="NGINX">upstream xd-project{        ip_hash;        server 172.16.25.44:8080;        server  192.168.1.138:8080;}</code></pre><p>åº”ç”¨åœºæ™¯ï¼šå½“ä½ æœåŠ¡ç«¯çš„ä¸€ä¸ªç‰¹å®šurlè·¯å¾„ä¼šè¢«åŒä¸€ä¸ªç”¨æˆ·è¿ç»­è®¿é—®æ—¶ï¼Œå¦‚æœè´Ÿè½½å‡è¡¡ç­–ç•¥è¿˜æ˜¯è½®è¯¢çš„è¯ï¼Œé‚£è¯¥ç”¨æˆ·çš„å¤šæ¬¡è®¿é—®ä¼šè¢«æ‰“åˆ°å„å°æœåŠ¡å™¨ä¸Šï¼Œè¿™æ˜¾ç„¶å¹¶ä¸é«˜æ•ˆï¼ˆä¼šå»ºç«‹å¤šæ¬¡httpé“¾æ¥ç­‰é—®é¢˜ï¼‰ã€‚ç”šè‡³è€ƒè™‘ä¸€ç§æç«¯æƒ…å†µï¼Œç”¨æˆ·éœ€è¦åˆ†ç‰‡ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨ä¸‹ï¼Œç„¶åå†ç”±æœåŠ¡å™¨å°†åˆ†ç‰‡åˆå¹¶ï¼Œè¿™æ—¶å¦‚æœç”¨æˆ·çš„è¯·æ±‚åˆ°è¾¾äº†ä¸åŒçš„æœåŠ¡å™¨ï¼Œé‚£ä¹ˆåˆ†ç‰‡å°†å­˜å‚¨äºä¸åŒçš„æœåŠ¡å™¨ç›®å½•ä¸­ï¼Œå¯¼è‡´æ— æ³•å°†åˆ†ç‰‡åˆå¹¶ã€‚</p><h3 id="4-url-hashï¼ˆç¬¬ä¸‰æ–¹ï¼‰"><a href="#4-url-hashï¼ˆç¬¬ä¸‰æ–¹ï¼‰" class="headerlink" title="4.  url_hashï¼ˆç¬¬ä¸‰æ–¹ï¼‰"></a>4.  url_hashï¼ˆç¬¬ä¸‰æ–¹ï¼‰</h3><p>æ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—®urlçš„hashç»“æœåˆ†é…ï¼Œè¿™æ ·æ¯ä¸ªurlè¯·æ±‚å›ºå®šè®¿é—®ä¸€ä¸ªåç«¯æœåŠ¡å™¨ã€‚<br>é…ç½®å®ä¾‹ï¼š</p><pre><code class="NGINX">upstream xd-project{        hash $request_uri;        server 172.16.25.44:8080;        server  192.168.1.138:8080;}</code></pre><p>åº”ç”¨åœºæ™¯ï¼š<br>ä¸€èˆ¬æ¥è®²ï¼Œè¦ç”¨åˆ°urlhashï¼Œæ˜¯è¦é…åˆç¼“å­˜å‘½ä¸­æ¥ä½¿ç”¨ã€‚ä¸¾ä¸€ä¸ªæˆ‘é‡åˆ°çš„å®ä¾‹ï¼šæœ‰ä¸€ä¸ªæœåŠ¡å™¨é›†ç¾¤Aï¼Œéœ€è¦å¯¹å¤–æä¾›æ–‡ä»¶ä¸‹è½½ï¼Œç”±äºæ–‡ä»¶ä¸Šä¼ é‡å·¨å¤§ï¼Œæ²¡æ³•å­˜å‚¨åˆ°æœåŠ¡å™¨ç£ç›˜ä¸­ï¼Œæ‰€ä»¥ç”¨åˆ°äº†ç¬¬ä¸‰æ–¹äº‘å­˜å‚¨æ¥åšæ–‡ä»¶å­˜å‚¨ã€‚æœåŠ¡å™¨é›†ç¾¤Aæ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚ä¹‹åï¼Œéœ€è¦ä»äº‘å­˜å‚¨ä¸­ä¸‹è½½æ–‡ä»¶ç„¶åè¿”å›ï¼Œä¸ºäº†çœå»ä¸å¿…è¦çš„ç½‘ç»œå¸¦å®½å’Œä¸‹è½½è€—æ—¶ï¼Œåœ¨æœåŠ¡å™¨é›†ç¾¤Aä¸Šåšäº†ä¸€å±‚ä¸´æ—¶ç¼“å­˜ï¼ˆç¼“å­˜ä¸€ä¸ªæœˆï¼‰ã€‚ç”±äºæ˜¯æœåŠ¡å™¨é›†ç¾¤ï¼Œæ‰€ä»¥åŒä¸€ä¸ªèµ„æºå¤šæ¬¡è¯·æ±‚ï¼Œå¯èƒ½ä¼šåˆ°è¾¾ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œå¯¼è‡´ä¸å¿…è¦çš„å¤šæ¬¡ä¸‹è½½ï¼Œç¼“å­˜å‘½ä¸­ç‡ä¸é«˜ï¼Œä»¥åŠä¸€äº›èµ„æºæ—¶é—´çš„æµªè´¹ã€‚åœ¨æ­¤ç±»åœºæ™¯ä¸‹ï¼Œä¸ºäº†ä½¿å¾—ç¼“å­˜å‘½ä¸­ç‡æé«˜ï¼Œå¾ˆé€‚åˆä½¿ç”¨url_hashç­–ç•¥ï¼ŒåŒä¸€ä¸ªurlï¼ˆä¹Ÿå°±æ˜¯åŒä¸€ä¸ªèµ„æºè¯·æ±‚ï¼‰ä¼šåˆ°è¾¾åŒä¸€å°æœºå™¨ï¼Œä¸€æ—¦ç¼“å­˜ä½äº†èµ„æºï¼Œå†æ­¤æ”¶åˆ°è¯·æ±‚ï¼Œå°±å¯ä»¥ä»ç¼“å­˜ä¸­è¯»å–ï¼Œæ—¢å‡å°‘äº†å¸¦å®½ï¼Œä¹Ÿå‡å°‘çš„ä¸‹è½½æ—¶é—´ã€‚</p><h3 id="5-fairï¼ˆç¬¬ä¸‰æ–¹ï¼‰"><a href="#5-fairï¼ˆç¬¬ä¸‰æ–¹ï¼‰" class="headerlink" title="5.  fairï¼ˆç¬¬ä¸‰æ–¹ï¼‰"></a>5.  fairï¼ˆç¬¬ä¸‰æ–¹ï¼‰</h3><p>æŒ‰åç«¯æœåŠ¡å™¨çš„å“åº”æ—¶é—´æ¥åˆ†é…è¯·æ±‚ï¼Œå“åº”æ—¶é—´çŸ­çš„ä¼˜å…ˆåˆ†é…ã€‚</p><h2 id="è´Ÿè½½å‡è¡¡sessionä¼šè¯ä¿æŒæ–¹æ³•"><a href="#è´Ÿè½½å‡è¡¡sessionä¼šè¯ä¿æŒæ–¹æ³•" class="headerlink" title="è´Ÿè½½å‡è¡¡sessionä¼šè¯ä¿æŒæ–¹æ³•"></a>è´Ÿè½½å‡è¡¡sessionä¼šè¯ä¿æŒæ–¹æ³•</h2><p>è´Ÿè½½å‡è¡¡æ—¶ï¼Œä¸ºäº†ä¿è¯åŒä¸€ç”¨æˆ·sessionä¼šè¢«åˆ†é…åˆ°åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š</p><ol><li> ä½¿ç”¨cookie</li></ol><p>å°†ç”¨æˆ·çš„sessionå­˜å…¥cookieé‡Œï¼Œå½“ç”¨æˆ·åˆ†é…åˆ°ä¸åŒçš„æœåŠ¡å™¨æ—¶ï¼Œå…ˆåˆ¤æ–­æœåŠ¡å™¨æ˜¯å¦å­˜åœ¨è¯¥ç”¨æˆ·çš„sessionï¼Œå¦‚æœæ²¡æœ‰å°±å…ˆæŠŠcookieé‡Œé¢çš„sessoinå­˜å…¥è¯¥æœåŠ¡å™¨ï¼Œå®ç°sessionä¼šè¯ä¿æŒã€‚ç¼ºç‚¹æ˜¯å­˜å…¥cookieæœ‰å®‰å…¨éšæ‚£ã€‚</p><ol start="2"><li> ä½¿ç”¨ç¼“å­˜</li></ol><p>åˆ©ç”¨memcacheï¼Œredisç­‰ç¼“å­˜åˆ†å¸ƒå¼çš„ç‰¹ç‚¹ï¼Œå¯ä»¥å°†æ‰€æœ‰æœåŠ¡å™¨äº§ç”Ÿçš„sessionå­˜å…¥åŒä¸€å°æœåŠ¡å™¨çš„ç¼“å­˜ä¸­ï¼Œå®ç°sessionå…±äº«ã€‚è¿™æ ·å®‰å…¨æ€§æ¯”è¾ƒé«˜ï¼Œè€Œä¸”ä»å†…å­˜ä¸­è¯»å–sessionæ¯”ä»æ–‡ä»¶ä¸­è¯»å–é€Ÿåº¦å¿«ã€‚</p><ol start="3"><li> ä½¿ç”¨ip_hash</li></ol><p>å¦‚æœæ˜¯nginxæœåŠ¡å™¨çš„è´Ÿè½½å‡è¡¡ï¼Œå¯ä»¥åœ¨upstreamé‡Œè®¾ç½®ip_hashï¼Œæ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—®ipçš„hashç»“æœåˆ†é…ï¼Œæ˜ å°„åˆ°å›ºå®šæŸä¸€å°çš„æœåŠ¡å™¨ã€‚ç¼ºç‚¹æ˜¯å¯èƒ½å¯¼è‡´è´Ÿè½½ä¸å‡è¡¡ã€‚</p><h2 id="upstreamä¸­çš„downå’Œbackup"><a href="#upstreamä¸­çš„downå’Œbackup" class="headerlink" title="upstreamä¸­çš„downå’Œbackup"></a>upstreamä¸­çš„downå’Œbackup</h2><p><img src="/My-Blogs/images/Nginx%E7%9A%84%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%AE%9E%E4%BE%8B%EF%BC%8C%E5%9D%87%E8%A1%A1%E7%AD%96%E7%95%A5%EF%BC%8Csession%E4%BF%9D%E6%8C%81%E6%96%B9%E6%A1%88-01.png" alt="alt"></p>]]></content>
      
      
      <categories>
          
          <category> nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
            <tag> devops </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VimåŸºç¡€ç¯‡â€”â€”å¿«é€Ÿç§»åŠ¨</title>
      <link href="/My-Blogs/2021/01/08/Linux/shell/%E6%96%87%E4%BB%B6/vim%E5%BF%AB%E9%80%9F%E7%A7%BB%E5%8A%A8/"/>
      <url>/My-Blogs/2021/01/08/Linux/shell/%E6%96%87%E4%BB%B6/vim%E5%BF%AB%E9%80%9F%E7%A7%BB%E5%8A%A8/</url>
      
        <content type="html"><![CDATA[<p>æœ€åˆä½¿ç”¨Vimæ—¶ï¼Œåˆå­¦è€…ç»å¸¸ä¼šæ„Ÿåˆ°ä¸é€‚åº”ï¼Œå› ä¸ºå®ƒçš„ç§»åŠ¨æ–¹å¼å’Œä¸€èˆ¬çš„ç¼–è¾‘å™¨å·®åˆ«å¾ˆå¤§ã€‚ä½†æ˜¯Vimçš„é­…åŠ›å°±åœ¨äºï¼Œå½“ä½ å­¦ä¼šVimçš„ç§»åŠ¨æ–¹å¼åï¼Œä½ èƒ½è¿…é€Ÿçš„æŠŠå…‰æ ‡ç§»åŠ¨åˆ°ä½ æƒ³è¦çš„ä½ç½®ã€‚</p><p>æœ¬æ–‡ä»‹ç»Vimä¸­çš„ç§»åŠ¨æ–¹å¼ï¼šVimä¸­ç†Ÿç»ƒçš„ç§»åŠ¨å¹¶ä¸æ˜¯æŒ‡ç”¨hjklç§»åŠ¨ï¼Œå½“ä½ è¶Šç†Ÿç»ƒçš„æŒæ¡vimçš„ç§»åŠ¨æ–¹å¼ï¼Œä½ ä¼šè¶Šå°‘çš„ä½¿ç”¨hjklç§»åŠ¨æ–¹å¼ã€‚</p><a id="more"></a><blockquote><p>hjkl are the tip of the top of the iceberg and very rarely used, at least in my case.</p></blockquote><br><h3 id="1ã€è¡Œå†…ç§»åŠ¨"><a href="#1ã€è¡Œå†…ç§»åŠ¨" class="headerlink" title="1ã€è¡Œå†…ç§»åŠ¨"></a>1ã€è¡Œå†…ç§»åŠ¨</h3><blockquote><p>Test: This is a line with example text </p></blockquote><br><h4 id="æœ€åŸºç¡€çš„ç§»åŠ¨æ–¹å¼æ˜¯w-e-b-ge"><a href="#æœ€åŸºç¡€çš„ç§»åŠ¨æ–¹å¼æ˜¯w-e-b-ge" class="headerlink" title="æœ€åŸºç¡€çš„ç§»åŠ¨æ–¹å¼æ˜¯w/e/b/ge"></a>æœ€åŸºç¡€çš„ç§»åŠ¨æ–¹å¼æ˜¯w/e/b/ge</h4><br><p>wæ˜¯å‘å‰ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„ç¬¬ä¸€ä¸ªä½ç½®ï¼Œå¤§å†™çš„Wè¡¨ç¤ºåªä½¿ç”¨ç©ºæ ¼ä½œä¸ºåˆ†éš”</p><br><pre><code class="BASH">" * ä»£è¡¨äº†å…‰æ ‡çš„åˆå§‹ä½ç½®" æ¯ä¸ªå­—æ¯ä»£è¡¨äº†å¦‚æœæŒ‰ä¸‹è¿™ä¸ªé”®ä¼šè·³è½¬çš„ä½ç½®Test: This is a line with example text*   w w    w  w w    w    w       w*     W    W  W W    W    W       W</code></pre><p>wå‰é¢å¯ä»¥åŠ ä¸Šæ•°å­—ï¼Œè¡¨ç¤ºwå‘½ä»¤é‡å¤å‡ æ¬¡ï¼Œæ¯”å¦‚3wç­‰åŒäºæŒ‰ä¸‹ä¸‰æ¬¡w</p><p>eæ˜¯å‘å‰è·³åŠ¨åˆ°ä¸‹ä¸€ä¸ªã€å•è¯çš„æœ«å°¾ã€‘ï¼Œè¿™æ„å‘³ç€å¦‚æœå½“å‰å…‰æ ‡åœ¨å•è¯çš„ä¸­é—´ï¼ŒæŒ‰ä¸‹eä¼šè·³è½¬åˆ°å½“å‰å•è¯çš„æœ«å°¾ã€‚å¤§å†™çš„Eè¡¨ç¤ºåªä½¿ç”¨ç©ºæ ¼ä½œä¸ºåˆ†éš”</p><pre><code class="BASH">" * ä»£è¡¨äº†å…‰æ ‡çš„åˆå§‹ä½ç½®" æ¯ä¸ªå­—æ¯ä»£è¡¨äº†å¦‚æœæŒ‰ä¸‹è¿™ä¸ªé”®ä¼šè·³è½¬çš„ä½ç½®Test: This is a line with example text*  ee    e  e e    e    e       e    e*   E    E  E E    E    E       E    E </code></pre><p>bæ˜¯å‘åç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªã€å•è¯çš„å¼€å¤´ã€‘ï¼Œè¿™æ„å‘³ç€å¦‚æœå½“å‰å…‰æ ‡åœ¨å•è¯çš„ä¸­é—´ï¼ŒæŒ‰ä¸‹bä¼šè·³è½¬åˆ°å½“å‰å•è¯çš„å¼€å¤´ã€‚å¤§å†™çš„Bè¡¨ç¤ºåªä½¿ç”¨ç©ºæ ¼ä½œä¸ºåˆ†éš”</p><pre><code class="BASH">" * ä»£è¡¨äº†å…‰æ ‡çš„åˆå§‹ä½ç½®" æ¯ä¸ªå­—æ¯ä»£è¡¨äº†å¦‚æœæŒ‰ä¸‹è¿™ä¸ªé”®ä¼šè·³è½¬çš„ä½ç½®Test: This is a line with example textb   b b    b  b b    b    b       b *B     B    B  B B    B    B       B *</code></pre><p>geæ˜¯å‘åç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªã€å•è¯çš„æœ«å°¾ã€‘ã€‚å¤§å†™çš„gEè¡¨ç¤ºåªä½¿ç”¨ç©ºæ ¼ä½œä¸ºåˆ†éš”</p><pre><code class="BASH">" * ä»£è¡¨äº†å…‰æ ‡çš„åˆå§‹ä½ç½®" æ¯ä¸ªå­—æ¯ä»£è¡¨äº†å¦‚æœæŒ‰ä¸‹è¿™ä¸ªé”®ä¼šè·³è½¬çš„ä½ç½®" &amp; è¡¨ç¤ºæŒ‰ä¸‹gETest: This is a line with example text  ee    e  e e    e    e       e   *   &amp;    &amp;  &amp; &amp;    &amp;    &amp;       &amp;   * </code></pre><blockquote><p>Noticeï¼šw/e/b/geéƒ½æ˜¯å¯ä»¥è·¨è¡Œç§»åŠ¨çš„ï¼</p></blockquote><br><h4 id="å¿«é€Ÿç§»åŠ¨åˆ°è¡Œçš„å¼€å§‹å’Œç»“æŸ"><a href="#å¿«é€Ÿç§»åŠ¨åˆ°è¡Œçš„å¼€å§‹å’Œç»“æŸ" class="headerlink" title="å¿«é€Ÿç§»åŠ¨åˆ°è¡Œçš„å¼€å§‹å’Œç»“æŸ"></a>å¿«é€Ÿç§»åŠ¨åˆ°è¡Œçš„å¼€å§‹å’Œç»“æŸ</h4><br><pre><code class="BASH">$ ç§»åŠ¨åˆ°è¡Œçš„æœ«å°¾0 ç§»åŠ¨åˆ°è¡Œçš„å¼€å¤´^ ç§»åŠ¨åˆ°ç¬¬ä¸€ä¸ªéç©ºç™½å­—ç¬¦g_ ç§»åŠ¨åˆ°æœ€åä¸€ä¸ªéç©ºç™½å­—ç¬¦</code></pre><br><blockquote><p>0ä¸èƒ½ä½¿ç”¨æ•°å­—å‚æ•°ï¼›ä½†æ˜¯$å¯ä»¥ï¼Œ$ç­‰åŒäº1$ï¼Œ2$è¡¨ç¤ºç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œçš„æœ«å°¾ï¼ŒåŒç†3$â€¦</p></blockquote><br><h4 id="è¡Œå†…ç§»åŠ¨åˆ°ç‰¹å®šå­—ç¬¦"><a href="#è¡Œå†…ç§»åŠ¨åˆ°ç‰¹å®šå­—ç¬¦" class="headerlink" title="è¡Œå†…ç§»åŠ¨åˆ°ç‰¹å®šå­—ç¬¦"></a>è¡Œå†…ç§»åŠ¨åˆ°ç‰¹å®šå­—ç¬¦</h4><br><p>ã€f+å­—ç¬¦ã€‘è¡¨ç¤ºç§»åŠ¨åˆ°è¡Œå†…å½“å‰å…‰æ ‡åé¢çš„ç¬¬ä¸€ä¸ªè¿™ä¸ªå­—ç¬¦</p><p>ã€t+å­—ç¬¦ã€‘è¡¨ç¤ºç§»åŠ¨åˆ°è¡Œå†…å½“å‰å…‰æ ‡åçš„çš„ç¬¬ä¸€ä¸ªè¿™ä¸ªå­—ç¬¦çš„å‰ä¸€ä¸ªä½ç½®</p><p>ã€F+å­—ç¬¦ã€‘ä¸ºã€f+å­—ç¬¦ã€‘çš„åå‘</p><p>ã€T+å­—ç¬¦ã€‘ä¸ºã€t+å­—ç¬¦ã€‘çš„åå‘</p><br><blockquote><p>è¿™ç§ç§»åŠ¨æ–¹å¼ä¸èƒ½è·¨è¡Œ</p></blockquote><br><pre><code class="BASH">" * ä»£è¡¨äº†å…‰æ ‡çš„åˆå§‹ä½ç½®" æ¯ä¸ªå­—æ¯ä»£è¡¨äº†å¦‚æœæŒ‰ä¸‹è¿™ä¸ªé”®ä¼šè·³è½¬çš„ä½ç½®" &amp; è¡¨ç¤ºæŒ‰ä¸‹fe" ! è¡¨ç¤ºæŒ‰ä¸‹teTest: This is a line with example text*&amp;                 &amp;      &amp;     &amp;  &amp; +               !</code></pre><br><p>æ³¨æ„åˆ°ä¸€ä¸ªå¥‡æ€ªçš„ç°è±¡ï¼Œåœ¨ç¬¬äºŒè¡Œæ“ä½œä¸­ï¼ŒæŒ‰ä¸‹teä¼šå®šä½åˆ°lineä¸­çš„eï¼Œå…‰æ ‡ä¼šç§»åŠ¨åˆ°eçš„å‰ä¸€ä¸ªå­—ç¬¦nï¼Œå¦‚æœå†ä¸€æ¬¡æŒ‰ä¸‹teï¼Œä¼šå®šä½åˆ°lineä¸­çš„eï¼Œå…‰æ ‡ä¼šç§»åŠ¨åˆ°eçš„å‰ä¸€ä¸ªå­—ç¬¦nï¼Œä¹Ÿå°±æ˜¯è¯´å…‰æ ‡ä¸ä¼šç§»åŠ¨ã€‚</p><br><p>è¿™æ ·å°±å‘Šè¯‰æˆ‘ä»¬ï¼šè¿ç»­æŒ‰ä¸‹ä¸¤æ¬¡ã€t+å­—ç¬¦ã€‘å’ŒæŒ‰ä¸‹ä¸€æ¬¡åˆ°è¾¾çš„ä½ç½®ä¸€å®šæ˜¯ä¸€æ ·çš„ã€‚</p><blockquote><p>f/t/F/Tå‡å¯ä»¥æ¥å—æ•°å­—å‚æ•°ï¼Œ3feç›¸å½“äºæŒ‰ä¸‹ä¸‰æ¬¡fe</p></blockquote><p>äº‹å®ä¸Šï¼Œé‡å¤æ“ä½œæœ‰å¦ä¸€ç§æ–¹å¼ï¼šã€; ã€‘ä»£è¡¨äº†é‡å¤æŸ¥æ‰¾å­—ç¬¦ï¼Œã€, ã€‘æ˜¯ã€; ã€‘çš„åå‘ï¼š</p><blockquote><p>ã€fe; ã€‘ç­‰åŒäºã€fefeã€‘ç­‰åŒäºã€2feã€‘ã€fe, ã€‘ç­‰åŒäºã€feFeã€‘</p></blockquote><br><h3 id="2ã€è¡Œé—´ç§»åŠ¨"><a href="#2ã€è¡Œé—´ç§»åŠ¨" class="headerlink" title="2ã€è¡Œé—´ç§»åŠ¨"></a>2ã€è¡Œé—´ç§»åŠ¨</h3><br><h4 id="æ»šåŠ¨å±å¹•"><a href="#æ»šåŠ¨å±å¹•" class="headerlink" title="æ»šåŠ¨å±å¹•"></a>æ»šåŠ¨å±å¹•</h4><pre><code class="BASH">&lt;Ctrl-b&gt; å‘ä¸‹ç§»åŠ¨ä¸€ä¸ªå±å¹•&lt;Ctrl-f&gt; å‘ä¸Šç§»åŠ¨ä¸€ä¸ªå±å¹•&lt;Ctrl-u&gt; å‘ä¸‹ç§»åŠ¨åŠä¸ªå±å¹•&lt;Ctrl-d&gt; å‘ä¸Šç§»åŠ¨åŠä¸ªå±å¹•</code></pre><h4 id="æ–‡ä»¶ä½ç½®ç§»åŠ¨"><a href="#æ–‡ä»¶ä½ç½®ç§»åŠ¨" class="headerlink" title="æ–‡ä»¶ä½ç½®ç§»åŠ¨"></a>æ–‡ä»¶ä½ç½®ç§»åŠ¨</h4><br><p>ã€æ•°å­—+Gã€‘è¡¨ç¤ºç§»åŠ¨åˆ°æ–‡ä»¶çš„ç‰¹å®šè¡Œ</p><p>æ¯”å¦‚30Gè¡¨ç¤ºç§»åŠ¨åˆ°ç¬¬ä¸‰åè¡Œ</p><p>ggè¡¨ç¤ºç§»åŠ¨åˆ°æ–‡ä»¶çš„ç¬¬ä¸€è¡Œ</p><p>Gè¡¨ç¤ºç§»åŠ¨åˆ°æ–‡ä»¶çš„æœ€åä¸€è¡Œ</p><br><h3 id="3ã€å…¶ä»–ç§»åŠ¨æ–¹å¼"><a href="#3ã€å…¶ä»–ç§»åŠ¨æ–¹å¼" class="headerlink" title="3ã€å…¶ä»–ç§»åŠ¨æ–¹å¼"></a>3ã€å…¶ä»–ç§»åŠ¨æ–¹å¼</h3><br><p>ã€%ã€‘ï¼šæ‰¾åˆ°å½“å‰å…‰æ ‡ ä¸‹æˆ–è€…ä¹‹å çš„ç¬¬ä¸€ä¸ªæ‹¬å·ï¼Œå¹¶ç§»åŠ¨åˆ°å®ƒåŒ¹é…çš„æ‹¬å·çš„ä½ç½®</p><blockquote><p>æ‹¬å·åŒ…æ‹¬ï¼š</p></blockquote><p>([{}])<br>/* */<br>#if, #ifdef, #else, #elif, #endif</p><br><pre><code class="BASH">" * ä»£è¡¨äº†å…‰æ ‡çš„åˆå§‹ä½ç½®" æ¯ä¸ªå­—æ¯ä»£è¡¨äº†å¦‚æœæŒ‰ä¸‹è¿™ä¸ªé”®ä¼šè·³è½¬çš„ä½ç½®int f(1, g(2, 3))*              %   %          *     *      %       % *</code></pre>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> shell </tag>
            
            <tag> æ–‡ä»¶å¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sftpå‘½ä»¤åŸºæœ¬ä½¿ç”¨</title>
      <link href="/My-Blogs/2021/01/08/Linux/shell/%E6%96%87%E4%BB%B6/sftp%E5%91%BD%E4%BB%A4%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
      <url>/My-Blogs/2021/01/08/Linux/shell/%E6%96%87%E4%BB%B6/sftp%E5%91%BD%E4%BB%A4%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p><code>sftp</code> æ˜¯ SSH æä¾›çš„ä¸€ä¸ªå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºï¼Œä¸»è¦ç”¨æ¥å®‰å…¨åœ°è®¿é—® FTPã€‚å› ä¸º FTP æ˜¯ä¸åŠ å¯†åè®®ï¼Œå¾ˆä¸å®‰å…¨ï¼Œ<code>sftp</code>å°±ç›¸å½“äºå°† FTP æ”¾å…¥äº† SSHã€‚</p><a id="more"></a><p>ä¸‹é¢çš„å‘½ä»¤è¿æ¥ FTP ä¸»æœº</p><pre><code class="BASH">sftp username@hostname</code></pre><p>æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ï¼Œä¼šè¦æ±‚è¾“å…¥ FTP çš„å¯†ç ã€‚å¯†ç éªŒè¯æˆåŠŸä»¥åï¼Œå°±ä¼šå‡ºç° FTP çš„æç¤ºç¬¦<code>sftp&gt;</code>ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><pre><code class="BASH">sftp USER@penguin.example.comUSER@penguin.example.com's password:Connected to penguin.example.com.sftp&gt;</code></pre><p>FTP çš„æç¤ºç¬¦ä¸‹é¢ï¼Œå°±å¯ä»¥è¾“å…¥å„ç§ FTP å‘½ä»¤äº†ï¼Œè¿™éƒ¨åˆ†å®Œå…¨è·Ÿä¼ ç»Ÿçš„ FTP ç”¨æ³•å®Œå…¨ä¸€æ ·ã€‚</p><ul><li><code>ls [directory]</code>: åˆ—å‡ºä¸€ä¸ªè¿œç¨‹ç›®å½•çš„å†…å®¹ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šç›®æ ‡ç›®å½•ï¼Œåˆ™é»˜è®¤åˆ—å‡ºå½“å‰ç›®å½•ã€‚</li><li><code>cd directory</code>: ä»å½“å‰ç›®å½•æ”¹åˆ°æŒ‡å®šç›®å½•ã€‚</li><li><code>mkdir directory</code>: åˆ›å»ºä¸€ä¸ªè¿œç¨‹ç›®å½•ã€‚</li><li><code>rmdir path</code>: åˆ é™¤ä¸€ä¸ªè¿œç¨‹ç›®å½•ã€‚</li><li><code>put localfile [remotefile]</code>: æœ¬åœ°æ–‡ä»¶ä¼ è¾“åˆ°è¿œç¨‹ä¸»æœºã€‚</li><li><code>get remotefile [localfile]</code>: è¿œç¨‹æ–‡ä»¶ä¼ è¾“åˆ°æœ¬åœ°ã€‚</li><li><code>help</code>: æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ã€‚</li><li><code>bye</code>: é€€å‡º sftpã€‚</li><li><code>quit</code>: é€€å‡º sftpã€‚</li><li><code>exit</code>: é€€å‡º sftpã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> shell </tag>
            
            <tag> æ–‡ä»¶å¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>scpå‘½ä»¤çš„åŸºæœ¬ä½¿ç”¨</title>
      <link href="/My-Blogs/2021/01/08/Linux/shell/%E6%96%87%E4%BB%B6/scp%E5%91%BD%E4%BB%A4%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
      <url>/My-Blogs/2021/01/08/Linux/shell/%E6%96%87%E4%BB%B6/scp%E5%91%BD%E4%BB%A4%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p><code>scp</code> æ˜¯ secure copy çš„ç¼©å†™ï¼Œç›¸å½“äº <code>cp</code> å‘½ä»¤ + SSHã€‚å®ƒçš„åº•å±‚æ˜¯ SSH åè®®ï¼Œé»˜è®¤ç«¯å£æ˜¯22ï¼Œç›¸å½“äºå…ˆä½¿ç”¨ <code>ssh</code> å‘½ä»¤ç™»å½•è¿œç¨‹ä¸»æœºï¼Œç„¶åå†æ‰§è¡Œæ‹·è´æ“ä½œ</p><a id="more"></a><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p><code>scp</code> ä¸»è¦ç”¨äºä»¥ä¸‹ä¸‰ç§å¤åˆ¶æ“ä½œã€‚</p><ul><li>æœ¬åœ°å¤åˆ¶åˆ°è¿œç¨‹ã€‚</li><li>è¿œç¨‹å¤åˆ¶åˆ°æœ¬åœ°ã€‚</li><li>ä¸¤ä¸ªè¿œç¨‹ç³»ç»Ÿä¹‹é—´çš„å¤åˆ¶ã€‚</li></ul><p>ä½¿ç”¨ <code>scp</code> ä¼ è¾“æ•°æ®æ—¶ï¼Œæ–‡ä»¶å’Œå¯†ç éƒ½æ˜¯åŠ å¯†çš„ï¼Œä¸ä¼šæ³„æ¼æ•æ„Ÿä¿¡æ¯ã€‚</p><h2 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h2><p><code>scp</code> çš„è¯­æ³•ç±»ä¼¼ <code>cp</code> çš„è¯­æ³•ã€‚</p><pre><code class="BASH">scp source destination</code></pre><p>ä¸Šé¢å‘½ä»¤ä¸­ï¼Œ <code>source</code> æ˜¯æ–‡ä»¶å½“å‰çš„ä½ç½®ï¼Œ <code>destination</code> æ˜¯æ–‡ä»¶æ‰€è¦å¤åˆ¶åˆ°çš„ä½ç½®ã€‚å®ƒä»¬éƒ½å¯ä»¥åŒ…å«ç”¨æˆ·åå’Œä¸»æœºåã€‚</p><pre><code class="BASH">scp user@host:foo.txt bar.txt</code></pre><p>ä¸Šé¢å‘½ä»¤å°†è¿œç¨‹ä¸»æœºï¼ˆ <code>user@host</code> ï¼‰ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„ <code>foo.txt</code> ï¼Œå¤åˆ¶ä¸ºæœ¬æœºå½“å‰ç›®å½•çš„ <code>bar.txt</code> ã€‚å¯ä»¥çœ‹åˆ°ï¼Œä¸»æœºä¸æ–‡ä»¶ä¹‹é—´è¦ä½¿ç”¨å†’å·ï¼ˆ <code>:</code> ï¼‰åˆ†éš”ã€‚</p><p><code>scp</code> ä¼šå…ˆç”¨ SSH ç™»å½•åˆ°è¿œç¨‹ä¸»æœºï¼Œç„¶ååœ¨åŠ å¯†è¿æ¥ä¹‹ä¸­å¤åˆ¶æ–‡ä»¶ã€‚å®¢æˆ·ç«¯å‘èµ·è¿æ¥åï¼Œä¼šæç¤ºç”¨æˆ·è¾“å…¥å¯†ç ï¼Œè¿™éƒ¨åˆ†æ˜¯è·Ÿ SSH çš„ç”¨æ³•ä¸€è‡´çš„ã€‚</p><p>ç”¨æˆ·åå’Œä¸»æœºåéƒ½æ˜¯å¯ä»¥çœç•¥çš„ã€‚ç”¨æˆ·åçš„é»˜è®¤å€¼æ˜¯æœ¬æœºçš„å½“å‰ç”¨æˆ·åï¼Œä¸»æœºåé»˜è®¤ä¸ºå½“å‰ä¸»æœºã€‚æ³¨æ„ï¼Œ <code>scp</code> ä¼šä½¿ç”¨ SSH å®¢æˆ·ç«¯çš„é…ç½®æ–‡ä»¶ <code>.ssh/config</code> ï¼Œå¦‚æœé…ç½®æ–‡ä»¶é‡Œé¢å®šä¹‰äº†ä¸»æœºçš„åˆ«åï¼Œè¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨åˆ«åè¿æ¥ã€‚</p><p><code>scp</code> æ”¯æŒä¸€æ¬¡å¤åˆ¶å¤šä¸ªæ–‡ä»¶ã€‚</p><pre><code class="BASH">scp source1 source2 destination</code></pre><p>ä¸Šé¢å‘½ä»¤ä¼šå°† <code>source1</code> å’Œ <code>source2</code> ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¤åˆ¶åˆ° <code>destination</code> ã€‚</p><p>æ³¨æ„ï¼Œå¦‚æœæ‰€è¦å¤åˆ¶çš„æ–‡ä»¶ï¼Œåœ¨ç›®æ ‡ä½ç½®å·²ç»å­˜åœ¨åŒåæ–‡ä»¶ï¼Œ <code>scp</code> ä¼šåœ¨æ²¡æœ‰è­¦å‘Šçš„æƒ…å†µä¸‹è¦†ç›–åŒåæ–‡ä»¶ã€‚</p><h2 id="ç”¨æ³•ç¤ºä¾‹"><a href="#ç”¨æ³•ç¤ºä¾‹" class="headerlink" title="ç”¨æ³•ç¤ºä¾‹"></a>ç”¨æ³•ç¤ºä¾‹</h2><h3 id="æœ¬åœ°æ–‡ä»¶å¤åˆ¶åˆ°è¿œç¨‹"><a href="#æœ¬åœ°æ–‡ä»¶å¤åˆ¶åˆ°è¿œç¨‹" class="headerlink" title="æœ¬åœ°æ–‡ä»¶å¤åˆ¶åˆ°è¿œç¨‹"></a>æœ¬åœ°æ–‡ä»¶å¤åˆ¶åˆ°è¿œç¨‹</h3><p>å¤åˆ¶æœ¬æœºæ–‡ä»¶åˆ°è¿œç¨‹ç³»ç»Ÿçš„ç”¨æ³•å¦‚ä¸‹ã€‚</p><pre><code class="BASH"># è¯­æ³•$ scp SourceFile user@host:directory/TargetFile# ç¤ºä¾‹$ scp file.txt remote_username@10.10.0.2:/remote/directory</code></pre><p>ä¸‹é¢æ˜¯å¤åˆ¶æ•´ä¸ªç›®å½•çš„ä¾‹å­ã€‚</p><pre><code class="BASH"># å°†æœ¬æœºçš„ documents ç›®å½•æ‹·è´åˆ°è¿œç¨‹ä¸»æœºï¼Œ# ä¼šåœ¨è¿œç¨‹ä¸»æœºåˆ›å»º documents ç›®å½•$ scp -r documents username@server_ip:/path_to_remote_directory# å°†æœ¬æœºæ•´ä¸ªç›®å½•æ‹·è´åˆ°è¿œç¨‹ç›®å½•ä¸‹$ scp -r localmachine/path_to_the_directory username@server_ip:/path_to_remote_directory/# å°†æœ¬æœºç›®å½•ä¸‹çš„æ‰€æœ‰å†…å®¹æ‹·è´åˆ°è¿œç¨‹ç›®å½•ä¸‹$ scp -r localmachine/path_to_the_directory/* username@server_ip:/path_to_remote_directory/</code></pre><h3 id="è¿œç¨‹æ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ°"><a href="#è¿œç¨‹æ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ°" class="headerlink" title="è¿œç¨‹æ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ°"></a>è¿œç¨‹æ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ°</h3><p>ä»è¿œç¨‹ä¸»æœºå¤åˆ¶æ–‡ä»¶åˆ°æœ¬åœ°çš„ç”¨æ³•å¦‚ä¸‹ã€‚</p><pre><code class="BASH"># è¯­æ³•$ scp user@host:directory/SourceFile TargetFile# ç¤ºä¾‹$ scp remote_username@10.10.0.2:/remote/file.txt /local/directory</code></pre><p>ä¸‹é¢æ˜¯å¤åˆ¶æ•´ä¸ªç›®å½•çš„ä¾‹å­ã€‚</p><pre><code class="BASH"># æ‹·è´ä¸€ä¸ªè¿œç¨‹ç›®å½•åˆ°æœ¬æœºç›®å½•ä¸‹$ scp -r username@server_ip:/path_to_remote_directory local-machine/path_to_the_directory/# æ‹·è´è¿œç¨‹ç›®å½•ä¸‹çš„æ‰€æœ‰å†…å®¹ï¼Œåˆ°æœ¬æœºç›®å½•ä¸‹$ scp -r username@server_ip:/path_to_remote_directory/* local-machine/path_to_the_directory/$ scp -r user@host:directory/SourceFolder TargetFolder</code></pre><h3 id="ä¸¤ä¸ªè¿œç¨‹ç³»ç»Ÿä¹‹é—´çš„å¤åˆ¶"><a href="#ä¸¤ä¸ªè¿œç¨‹ç³»ç»Ÿä¹‹é—´çš„å¤åˆ¶" class="headerlink" title="ä¸¤ä¸ªè¿œç¨‹ç³»ç»Ÿä¹‹é—´çš„å¤åˆ¶"></a>ä¸¤ä¸ªè¿œç¨‹ç³»ç»Ÿä¹‹é—´çš„å¤åˆ¶</h3><p>æœ¬æœºå‘å‡ºæŒ‡ä»¤ï¼Œä»è¿œç¨‹ä¸»æœº A æ‹·è´åˆ°è¿œç¨‹ä¸»æœº B çš„ç”¨æ³•å¦‚ä¸‹ã€‚</p><pre><code class="BASH"># è¯­æ³•$ scp user@host1:directory/SourceFile user@host2:directory/SourceFile# ç¤ºä¾‹$ scp user1@host1.com:/files/file.txt user2@host2.com:/files</code></pre><p>ç³»ç»Ÿå°†æç¤ºä½ è¾“å…¥ä¸¤ä¸ªè¿œç¨‹å¸æˆ·çš„å¯†ç ã€‚æ•°æ®å°†ç›´æ¥ä»ä¸€ä¸ªè¿œç¨‹ä¸»æœºä¼ è¾“åˆ°å¦ä¸€ä¸ªè¿œç¨‹ä¸»æœºã€‚</p><h2 id="é…ç½®é¡¹"><a href="#é…ç½®é¡¹" class="headerlink" title="é…ç½®é¡¹"></a>é…ç½®é¡¹</h2><h3 id="c"><a href="#c" class="headerlink" title="-c"></a>-c</h3><p><code>-c</code>å‚æ•°ç”¨æ¥æŒ‡å®šæ–‡ä»¶æ‹·è´æ•°æ®ä¼ è¾“çš„åŠ å¯†ç®—æ³•</p><pre><code class="BASH">scp -c blowfish some_file your_username@remotehost.edu:~</code></pre><p>ä¸Šé¢ä»£ç æŒ‡å®šåŠ å¯†ç®—æ³•ä¸º <code>blowfish</code> ã€‚</p><h3 id="C"><a href="#C" class="headerlink" title="-C"></a>-C</h3><p><code>-C</code> å‚æ•°è¡¨ç¤ºæ˜¯å¦åœ¨ä¼ è¾“æ—¶å‹ç¼©æ–‡ä»¶ã€‚</p><pre><code class="BASH">scp -c blowfish -C local_file your_username@remotehost.edu:~</code></pre><h3 id="F"><a href="#F" class="headerlink" title="-F"></a>-F</h3><p><code>-F</code> å‚æ•°ç”¨æ¥æŒ‡å®š ssh_config æ–‡ä»¶ï¼Œä¾› ssh ä½¿ç”¨ã€‚</p><pre><code class="BASH">scp -F /home/pungki/proxy_ssh_config Label.pdf root@172.20.10.8:/root</code></pre><h3 id="i"><a href="#i" class="headerlink" title="-i"></a>-i</h3><p><code>-i</code> å‚æ•°ç”¨æ¥æŒ‡å®šå¯†é’¥ã€‚</p><pre><code class="BASH">scp -vCq -i private_key.pem ~/test.txt root@192.168.1.3:/some/path/test.txt</code></pre><h3 id="l"><a href="#l" class="headerlink" title="-l"></a>-l</h3><p><code>-l</code> å‚æ•°ç”¨æ¥é™åˆ¶ä¼ è¾“æ•°æ®çš„å¸¦å®½é€Ÿç‡ï¼Œå•ä½æ˜¯ Kbit/secã€‚å¯¹äºå¤šäººåˆ†äº«çš„å¸¦å®½ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥ç•™å‡ºä¸€éƒ¨åˆ†å¸¦å®½ä¾›å…¶ä»–äººä½¿ç”¨ã€‚</p><pre><code class="BASH">scp -l 80 yourusername@yourserver:/home/yourusername/* .</code></pre><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ <code>scp</code> å‘½ä»¤å ç”¨çš„å¸¦å®½é™åˆ¶ä¸ºæ¯ç§’ 80K æ¯”ç‰¹ä½ï¼Œå³æ¯ç§’ 10K å­—èŠ‚ã€‚</p><h3 id="p"><a href="#p" class="headerlink" title="-p"></a>-p</h3><p><code>-p</code> å‚æ•°ç”¨æ¥ä¿ç•™ä¿®æ”¹æ—¶é—´ï¼ˆmodification timeï¼‰ã€è®¿é—®æ—¶é—´ï¼ˆaccess timeï¼‰ã€æ–‡ä»¶çŠ¶æ€ï¼ˆmodeï¼‰ç­‰åŸå§‹æ–‡ä»¶çš„ä¿¡æ¯ã€‚</p><pre><code class="BASH">scp -p ~/test.txt root@192.168.1.3:/some/path/test.txt</code></pre><h3 id="P"><a href="#P" class="headerlink" title="-P"></a>-P</h3><p><code>-P</code> å‚æ•°ç”¨æ¥æŒ‡å®šè¿œç¨‹ä¸»æœºçš„ SSH ç«¯å£ã€‚å¦‚æœè¿œç¨‹ä¸»æœºä½¿ç”¨é»˜è®¤ç«¯å£22ï¼Œå¯ä»¥ä¸ç”¨æŒ‡å®šï¼Œå¦åˆ™éœ€è¦ç”¨-På‚æ•°åœ¨å‘½ä»¤ä¸­æŒ‡å®šã€‚</p><pre><code class="BASH">scp -P 2222 user@host:directory/SourceFile TargetFile</code></pre><h3 id="q"><a href="#q" class="headerlink" title="-q"></a>-q</h3><p><code>-q</code> å‚æ•°ç”¨æ¥å…³é—­æ˜¾ç¤ºæ‹·è´çš„è¿›åº¦æ¡ã€‚</p><pre><code class="BASH">scp -q Label.pdf mrarianto@202.x.x.x:.</code></pre><h3 id="r"><a href="#r" class="headerlink" title="-r"></a>-r</h3><p><code>-r</code> å‚æ•°è¡¨ç¤ºæ˜¯å¦ä»¥é€’å½’æ–¹å¼å¤åˆ¶ç›®å½•ã€‚</p><h3 id="v"><a href="#v" class="headerlink" title="-v"></a>-v</h3><p><code>-v</code> å‚æ•°ç”¨æ¥æ˜¾ç¤ºè¯¦ç»†çš„è¾“å‡ºã€‚</p><pre><code class="BASH">scp -v ~/test.txt root@192.168.1.3:/root/help2356.txt</code></pre>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> shell </tag>
            
            <tag> æ–‡ä»¶å¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rsyncçš„åŸºæœ¬ä½¿ç”¨</title>
      <link href="/My-Blogs/2021/01/08/Linux/shell/%E6%96%87%E4%BB%B6/rsync%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
      <url>/My-Blogs/2021/01/08/Linux/shell/%E6%96%87%E4%BB%B6/rsync%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p><code>rsync</code> å¯ä»¥ç”¨äºæœ¬åœ°è®¡ç®—æœºçš„ä¸¤ä¸ªç›®å½•ä¹‹é—´çš„åŒæ­¥ã€‚ä¸‹é¢å°±ç”¨æœ¬åœ°åŒæ­¥ä¸¾ä¾‹ï¼Œé¡ºä¾¿è®²è§£ <code>rsync</code> å‡ ä¸ªä¸»è¦å‚æ•°çš„ç”¨æ³•ã€‚</p><a id="more"></a><h2 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h2><h3 id="r-å‚æ•°"><a href="#r-å‚æ•°" class="headerlink" title="-r å‚æ•°"></a><code>-r</code> å‚æ•°</h3><p>æœ¬æœºä½¿ç”¨ <code>rsync</code> å‘½ä»¤æ—¶ï¼Œå¯ä»¥ä½œä¸º <code>cp</code> å’Œ <code>mv</code> å‘½ä»¤çš„æ›¿ä»£æ–¹æ³•ï¼Œå°†æºç›®å½•æ‹·è´åˆ°ç›®æ ‡ç›®å½•ã€‚</p><pre><code class="BASH">rsync -r source destination</code></pre><p>ä¸Šé¢å‘½ä»¤ä¸­ï¼Œ <code>-r</code> è¡¨ç¤ºé€’å½’ï¼Œå³åŒ…å«å­ç›®å½•ã€‚æ³¨æ„ï¼Œ <code>-r</code> æ˜¯å¿…é¡»çš„ï¼Œå¦åˆ™ rsync è¿è¡Œä¸ä¼šæˆåŠŸã€‚ <code>source</code> ç›®å½•è¡¨ç¤ºæºç›®å½•ï¼Œ <code>destination</code> è¡¨ç¤ºç›®æ ‡ç›®å½•ã€‚ä¸Šé¢å‘½ä»¤æ‰§è¡Œä»¥åï¼Œç›®æ ‡ç›®å½•ä¸‹å°±ä¼šå‡ºç° <code>destination/source</code> è¿™ä¸ªå­ç›®å½•</p><p>å¦‚æœæœ‰å¤šä¸ªæ–‡ä»¶æˆ–ç›®å½•éœ€è¦åŒæ­¥ï¼Œå¯ä»¥å†™æˆä¸‹é¢è¿™æ ·</p><pre><code class="BASH">rsync -r source1 source2 destination</code></pre><p>ä¸Šé¢å‘½ä»¤ä¸­ï¼Œ <code>source1</code> ã€ <code>source2</code> éƒ½ä¼šè¢«åŒæ­¥åˆ° <code>destination</code> ç›®å½•</p><h3 id="a-å‚æ•°"><a href="#a-å‚æ•°" class="headerlink" title="-a å‚æ•°"></a><code>-a</code> å‚æ•°</h3><p><code>-a</code> å‚æ•°å¯ä»¥æ›¿ä»£ <code>-r</code> ï¼Œé™¤äº†å¯ä»¥é€’å½’åŒæ­¥ä»¥å¤–ï¼Œè¿˜å¯ä»¥åŒæ­¥å…ƒä¿¡æ¯ï¼ˆæ¯”å¦‚ä¿®æ”¹æ—¶é—´ã€æƒé™ç­‰ï¼‰ã€‚ç”±äº rsync é»˜è®¤ä½¿ç”¨æ–‡ä»¶å¤§å°å’Œä¿®æ”¹æ—¶é—´å†³å®šæ–‡ä»¶æ˜¯å¦éœ€è¦æ›´æ–°ï¼Œæ‰€ä»¥ <code>-a</code> æ¯” <code>-r</code> æ›´æœ‰ç”¨ã€‚ä¸‹é¢çš„ç”¨æ³•æ‰æ˜¯å¸¸è§çš„å†™æ³•</p><pre><code class="BASH">rsync -a source destination</code></pre><p>ç›®æ ‡ç›®å½• <code>destination</code> å¦‚æœä¸å­˜åœ¨ï¼Œrsync ä¼šè‡ªåŠ¨åˆ›å»ºã€‚æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤åï¼Œæºç›®å½• <code>source</code> è¢«å®Œæ•´åœ°å¤åˆ¶åˆ°äº†ç›®æ ‡ç›®å½• <code>destination</code> ä¸‹é¢ï¼Œå³å½¢æˆäº† <code>destination/source</code> çš„ç›®å½•ç»“æ„ã€‚</p><p>å¦‚æœåªæƒ³åŒæ­¥æºç›®å½• <code>source</code> é‡Œé¢çš„å†…å®¹åˆ°ç›®æ ‡ç›®å½• <code>destination</code> ï¼Œåˆ™éœ€è¦åœ¨æºç›®å½•åé¢åŠ ä¸Šæ–œæ .</p><pre><code class="BASH">rsync -a source/ destination</code></pre><p>ä¸Šé¢å‘½ä»¤æ‰§è¡Œåï¼Œ <code>source</code> ç›®å½•é‡Œé¢çš„å†…å®¹ï¼Œå°±éƒ½è¢«å¤åˆ¶åˆ°äº† <code>destination</code> ç›®å½•é‡Œé¢ï¼Œå¹¶ä¸ä¼šåœ¨ <code>destination</code> ä¸‹é¢åˆ›å»ºä¸€ä¸ª <code>source</code> å­ç›®å½•ã€‚</p><h3 id="n-å‚æ•°"><a href="#n-å‚æ•°" class="headerlink" title="-n å‚æ•°"></a><code>-n</code> å‚æ•°</h3><p>å¦‚æœä¸ç¡®å®š rsync æ‰§è¡Œåä¼šäº§ç”Ÿä»€ä¹ˆç»“æœï¼Œå¯ä»¥å…ˆç”¨-næˆ–â€“dry-runå‚æ•°æ¨¡æ‹Ÿæ‰§è¡Œçš„ç»“æœ</p><pre><code class="BASH">rsync -anv source/ destination</code></pre><p>ä¸Šé¢å‘½ä»¤ä¸­ï¼Œ <code>-n</code> å‚æ•°æ¨¡æ‹Ÿå‘½ä»¤æ‰§è¡Œçš„ç»“æœï¼Œå¹¶ä¸çœŸçš„æ‰§è¡Œå‘½ä»¤ã€‚ <code>-v</code> å‚æ•°åˆ™æ˜¯å°†ç»“æœè¾“å‡ºåˆ°ç»ˆç«¯ï¼Œè¿™æ ·å°±å¯ä»¥çœ‹åˆ°å“ªäº›å†…å®¹ä¼šè¢«åŒæ­¥</p><h3 id="â€“deleteå‚æ•°"><a href="#â€“deleteå‚æ•°" class="headerlink" title="â€“deleteå‚æ•°"></a>â€“deleteå‚æ•°</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œrsync åªç¡®ä¿æºç›®å½•çš„æ‰€æœ‰å†…å®¹ï¼ˆæ˜ç¡®æ’é™¤çš„æ–‡ä»¶é™¤å¤–ï¼‰éƒ½å¤åˆ¶åˆ°ç›®æ ‡ç›®å½•ã€‚å®ƒä¸ä¼šä½¿ä¸¤ä¸ªç›®å½•ä¿æŒç›¸åŒï¼Œå¹¶ä¸”ä¸ä¼šåˆ é™¤æ–‡ä»¶ã€‚å¦‚æœè¦ä½¿å¾—ç›®æ ‡ç›®å½•æˆä¸ºæºç›®å½•çš„é•œåƒå‰¯æœ¬ï¼Œåˆ™å¿…é¡»ä½¿ç”¨â€“deleteå‚æ•°ï¼Œè¿™å°†åˆ é™¤åªå­˜åœ¨äºç›®æ ‡ç›®å½•ã€ä¸å­˜åœ¨äºæºç›®å½•çš„æ–‡ä»¶ã€‚</p><pre><code class="BASH">rsync -av --delete source/ destination</code></pre><p>ä¸Šé¢å‘½ä»¤ä¸­ï¼Œ <code>--delete</code> å‚æ•°ä¼šä½¿å¾— <code>destination</code> æˆä¸º <code>source</code> çš„ä¸€ä¸ªé•œåƒ</p><h3 id="â€“excludeå‚æ•°"><a href="#â€“excludeå‚æ•°" class="headerlink" title="â€“excludeå‚æ•°"></a>â€“excludeå‚æ•°</h3><p>æœ‰æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›åŒæ­¥æ—¶æ’é™¤æŸäº›æ–‡ä»¶æˆ–ç›®å½•ï¼Œè¿™æ—¶å¯ä»¥ç”¨â€“excludeå‚æ•°æŒ‡å®šæ’é™¤æ¨¡å¼</p><pre><code class="BASH">$ rsync -av --exclude='*.txt' source/ destination# æˆ–è€…$ rsync -av --exclude '*.txt' source/ destination</code></pre><p>ä¸Šé¢å‘½ä»¤æ’é™¤äº†æ‰€æœ‰ TXT æ–‡ä»¶ã€‚</p><p>æ³¨æ„ï¼Œrsync ä¼šåŒæ­¥ä»¥â€œç‚¹â€å¼€å¤´çš„éšè—æ–‡ä»¶ï¼Œå¦‚æœè¦æ’é™¤éšè—æ–‡ä»¶ï¼Œå¯ä»¥è¿™æ ·å†™ <code>--exclude=".*"</code> ã€‚</p><p>å¦‚æœè¦æ’é™¤æŸä¸ªç›®å½•é‡Œé¢çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä½†ä¸å¸Œæœ›æ’é™¤ç›®å½•æœ¬èº«ï¼Œå¯ä»¥å†™æˆä¸‹é¢è¿™æ ·ã€‚</p><pre><code class="BASH">$ rsync -av --exclude 'dir1/*' source/ destination</code></pre><p>å¤šä¸ªæ’é™¤æ¨¡å¼ï¼Œå¯ä»¥ç”¨å¤šä¸ª <code>--exclude</code> å‚æ•°</p><pre><code class="BASH">rsync -av --exclude 'file1.txt' --exclude 'dir1/*' source/ destination</code></pre><p>å¤šä¸ªæ’é™¤æ¨¡å¼ä¹Ÿå¯ä»¥åˆ©ç”¨ Bash çš„å¤§æ‰©å·çš„æ‰©å±•åŠŸèƒ½ï¼Œåªç”¨ä¸€ä¸ª <code>--exclude</code> å‚æ•°</p><pre><code class="BASH">rsync -av --exclude={'file1.txt','dir1/*'} source/ destination</code></pre><p>å¦‚æœæ’é™¤æ¨¡å¼å¾ˆå¤šï¼Œå¯ä»¥å°†å®ƒä»¬å†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ªæ¨¡å¼ä¸€è¡Œï¼Œç„¶åç”¨ <code>--exclude-from</code> å‚æ•°æŒ‡å®šè¿™ä¸ªæ–‡ä»¶ã€‚</p><pre><code class="BASH">rsync -av --exclude-from='exclude-file.txt' source/ destination</code></pre><h3 id="â€“includeå‚æ•°"><a href="#â€“includeå‚æ•°" class="headerlink" title="â€“includeå‚æ•°"></a>â€“includeå‚æ•°</h3><p><code>--include</code> å‚æ•°ç”¨æ¥æŒ‡å®šå¿…é¡»åŒæ­¥çš„æ–‡ä»¶æ¨¡å¼ï¼Œå¾€å¾€ä¸ <code>--exclude</code> ç»“åˆä½¿ç”¨</p><pre><code class="BASH">rsync -av --include="*.txt" --exclude='*' source/ destination</code></pre><p>ä¸Šé¢å‘½ä»¤æŒ‡å®šåŒæ­¥æ—¶ï¼Œæ’é™¤æ‰€æœ‰æ–‡ä»¶ï¼Œä½†æ˜¯ä¼šåŒ…æ‹¬ TXT æ–‡ä»¶</p><h2 id="è¿œç¨‹åŒæ­¥"><a href="#è¿œç¨‹åŒæ­¥" class="headerlink" title="è¿œç¨‹åŒæ­¥"></a>è¿œç¨‹åŒæ­¥</h2><h3 id="SSH-åè®®"><a href="#SSH-åè®®" class="headerlink" title="SSH åè®®"></a>SSH åè®®</h3><p>rsync é™¤äº†æ”¯æŒæœ¬åœ°ä¸¤ä¸ªç›®å½•ä¹‹é—´çš„åŒæ­¥ï¼Œä¹Ÿæ”¯æŒè¿œç¨‹åŒæ­¥ã€‚å®ƒå¯ä»¥å°†æœ¬åœ°å†…å®¹ï¼ŒåŒæ­¥åˆ°è¿œç¨‹æœåŠ¡å™¨</p><pre><code class="BASH">rsync -av source/ username@remote_host:destination</code></pre><p>ä¹Ÿå¯ä»¥å°†è¿œç¨‹å†…å®¹åŒæ­¥åˆ°æœ¬åœ°</p><pre><code class="BASH">rsync -av username@remote_host:source/ destination</code></pre><p>rsync é»˜è®¤ä½¿ç”¨ SSH è¿›è¡Œè¿œç¨‹ç™»å½•å’Œæ•°æ®ä¼ è¾“ã€‚</p><p>ç”±äºæ—©æœŸ rsync ä¸ä½¿ç”¨ SSH åè®®ï¼Œéœ€è¦ç”¨ <code>-e</code> å‚æ•°æŒ‡å®šåè®®ï¼Œåæ¥æ‰æ”¹çš„ã€‚æ‰€ä»¥ï¼Œä¸‹é¢ <code>-e ssh</code> å¯ä»¥çœç•¥</p><pre><code class="BASH">rsync -av -e ssh source/ user@remote_host:/destination</code></pre><p>ä½†æ˜¯ï¼Œå¦‚æœ ssh å‘½ä»¤æœ‰é™„åŠ çš„å‚æ•°ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ <code>-e</code> å‚æ•°æŒ‡å®šæ‰€è¦æ‰§è¡Œçš„ SSH å‘½ä»¤</p><pre><code class="BASH">rsync -av -e 'ssh -p 2234' source/ user@remote_host:/destination</code></pre><p>ä¸Šé¢å‘½ä»¤ä¸­ï¼Œ <code>-e</code> å‚æ•°æŒ‡å®š SSH ä½¿ç”¨2234ç«¯å£</p><h3 id="rsync-åè®®"><a href="#rsync-åè®®" class="headerlink" title="rsync åè®®"></a>rsync åè®®</h3><p>é™¤äº†ä½¿ç”¨ SSHï¼Œå¦‚æœå¦ä¸€å°æœåŠ¡å™¨å®‰è£…å¹¶è¿è¡Œäº† rsync å®ˆæŠ¤ç¨‹åºï¼Œåˆ™ä¹Ÿå¯ä»¥ç”¨ <code>rsync://</code> åè®®ï¼ˆé»˜è®¤ç«¯å£873ï¼‰è¿›è¡Œä¼ è¾“ã€‚å…·ä½“å†™æ³•æ˜¯æœåŠ¡å™¨ä¸ç›®æ ‡ç›®å½•ä¹‹é—´ä½¿ç”¨åŒå†’å·åˆ†éš” <code>::</code></p><pre><code class="BASH">rsync -av source/ 192.168.122.32::module/destination</code></pre><p>æ³¨æ„ï¼Œä¸Šé¢åœ°å€ä¸­çš„ <code>module</code> å¹¶ä¸æ˜¯å®é™…è·¯å¾„åï¼Œè€Œæ˜¯ rsync å®ˆæŠ¤ç¨‹åºæŒ‡å®šçš„ä¸€ä¸ªèµ„æºåï¼Œç”±ç®¡ç†å‘˜åˆ†é…ã€‚</p><p>å¦‚æœæƒ³çŸ¥é“ rsync å®ˆæŠ¤ç¨‹åºåˆ†é…çš„æ‰€æœ‰ module åˆ—è¡¨ï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢å‘½ä»¤ã€‚</p><pre><code class="BASH">rsync rsync://192.168.122.32</code></pre><p>rsync åè®®é™¤äº†ä½¿ç”¨åŒå†’å·ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨rsync://åè®®æŒ‡å®šåœ°å€ã€‚</p><pre><code class="BASH">rsync -av source/ rsync://192.168.122.32/module/destination</code></pre><h2 id="å¢é‡å¤‡ä»½"><a href="#å¢é‡å¤‡ä»½" class="headerlink" title="å¢é‡å¤‡ä»½"></a>å¢é‡å¤‡ä»½</h2><p>rsync çš„æœ€å¤§ç‰¹ç‚¹å°±æ˜¯å®ƒå¯ä»¥å®Œæˆå¢é‡å¤‡ä»½ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤åªå¤åˆ¶æœ‰å˜åŠ¨çš„æ–‡ä»¶ã€‚</p><p>é™¤äº†æºç›®å½•ä¸ç›®æ ‡ç›®å½•ç›´æ¥æ¯”è¾ƒï¼Œrsync è¿˜æ”¯æŒä½¿ç”¨åŸºå‡†ç›®å½•ï¼Œå³å°†æºç›®å½•ä¸åŸºå‡†ç›®å½•ä¹‹é—´å˜åŠ¨çš„éƒ¨åˆ†ï¼ŒåŒæ­¥åˆ°ç›®æ ‡ç›®å½•ã€‚</p><p>å…·ä½“åšæ³•æ˜¯ï¼Œç¬¬ä¸€æ¬¡åŒæ­¥æ˜¯å…¨é‡å¤‡ä»½ï¼Œæ‰€æœ‰æ–‡ä»¶åœ¨åŸºå‡†ç›®å½•é‡Œé¢åŒæ­¥ä¸€ä»½ã€‚ä»¥åæ¯ä¸€æ¬¡åŒæ­¥éƒ½æ˜¯å¢é‡å¤‡ä»½ï¼ŒåªåŒæ­¥æºç›®å½•ä¸åŸºå‡†ç›®å½•ä¹‹é—´æœ‰å˜åŠ¨çš„éƒ¨åˆ†ï¼Œå°†è¿™éƒ¨åˆ†ä¿å­˜åœ¨ä¸€ä¸ªæ–°çš„ç›®æ ‡ç›®å½•ã€‚è¿™ä¸ªæ–°çš„ç›®æ ‡ç›®å½•ä¹‹ä¸­ï¼Œä¹Ÿæ˜¯åŒ…å«æ‰€æœ‰æ–‡ä»¶ï¼Œä½†å®é™…ä¸Šï¼Œåªæœ‰é‚£äº›å˜åŠ¨è¿‡çš„æ–‡ä»¶æ˜¯å­˜åœ¨äºè¯¥ç›®å½•ï¼Œå…¶ä»–æ²¡æœ‰å˜åŠ¨çš„æ–‡ä»¶éƒ½æ˜¯æŒ‡å‘åŸºå‡†ç›®å½•æ–‡ä»¶çš„ç¡¬é“¾æ¥ã€‚</p><p><code>--link-dest</code> å‚æ•°ç”¨æ¥æŒ‡å®šåŒæ­¥æ—¶çš„åŸºå‡†ç›®å½•</p><pre><code class="BASH">rsync -a --delete --link-dest /compare/path /source/path /target/path</code></pre><p>ä¸Šé¢å‘½ä»¤ä¸­ï¼Œ <code>--link-dest</code> å‚æ•°æŒ‡å®šåŸºå‡†ç›®å½• <code>/compare/path</code> ï¼Œç„¶åæºç›®å½• <code>/source/path</code> è·ŸåŸºå‡†ç›®å½•è¿›è¡Œæ¯”è¾ƒï¼Œæ‰¾å‡ºå˜åŠ¨çš„æ–‡ä»¶ï¼Œå°†å®ƒä»¬æ‹·è´åˆ°ç›®æ ‡ç›®å½• <code>/target/path</code> ã€‚é‚£äº›æ²¡å˜åŠ¨çš„æ–‡ä»¶åˆ™ä¼šç”Ÿæˆç¡¬é“¾æ¥ã€‚è¿™ä¸ªå‘½ä»¤çš„ç¬¬ä¸€æ¬¡å¤‡ä»½æ—¶æ˜¯å…¨é‡å¤‡ä»½ï¼Œåé¢å°±éƒ½æ˜¯å¢é‡å¤‡ä»½äº†</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªè„šæœ¬ç¤ºä¾‹ï¼Œå¤‡ä»½ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚</p><pre><code class="BASH">#!/bin/bash# A script to perform incremental backups using rsyncset -o errexitset -o nounsetset -o pipefailreadonly SOURCE_DIR="${HOME}"readonly BACKUP_DIR="/mnt/data/backups"readonly DATETIME="$(date '+%Y-%m-%d_%H:%M:%S')"readonly BACKUP_PATH="${BACKUP_DIR}/${DATETIME}"readonly LATEST_LINK="${BACKUP_DIR}/latest"mkdir -p "${BACKUP_DIR}"rsync -av --delete \  "${SOURCE_DIR}/" \  --link-dest "${LATEST_LINK}" \  --exclude=".cache" \  "${BACKUP_PATH}"rm -rf "${LATEST_LINK}"ln -s "${BACKUP_PATH}" "${LATEST_LINK}"</code></pre><p>ä¸Šé¢è„šæœ¬ä¸­ï¼Œæ¯ä¸€æ¬¡åŒæ­¥éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°ç›®å½• <code>${BACKUP_DIR}/${DATETIME}</code> ï¼Œå¹¶å°†è½¯é“¾æ¥ <code>${BACKUP_DIR}/latest</code> æŒ‡å‘è¿™ä¸ªç›®å½•ã€‚ä¸‹ä¸€æ¬¡å¤‡ä»½æ—¶ï¼Œå°±å°† <code>${BACKUP_DIR}/latest</code> ä½œä¸ºåŸºå‡†ç›®å½•ï¼Œç”Ÿæˆæ–°çš„å¤‡ä»½ç›®å½•ã€‚æœ€åï¼Œå†å°†è½¯é“¾æ¥ <code>${BACKUP_DIR}/latest</code> æŒ‡å‘æ–°çš„å¤‡ä»½ç›®å½•</p><h2 id="é…ç½®é¡¹"><a href="#é…ç½®é¡¹" class="headerlink" title="é…ç½®é¡¹"></a>é…ç½®é¡¹</h2><p><code>-a</code> ã€ <code>--archive</code> å‚æ•°è¡¨ç¤ºå­˜æ¡£æ¨¡å¼ï¼Œä¿å­˜æ‰€æœ‰çš„å…ƒæ•°æ®ï¼Œæ¯”å¦‚ä¿®æ”¹æ—¶é—´ï¼ˆmodification timeï¼‰ã€æƒé™ã€æ‰€æœ‰è€…ç­‰ï¼Œå¹¶ä¸”è½¯é“¾æ¥ä¹Ÿä¼šåŒæ­¥è¿‡å»ã€‚</p><p><code>--append</code> å‚æ•°æŒ‡å®šæ–‡ä»¶æ¥ç€ä¸Šæ¬¡ä¸­æ–­çš„åœ°æ–¹ï¼Œç»§ç»­ä¼ è¾“ã€‚</p><p><code>--append-verify</code> å‚æ•°è·Ÿ <code>--append</code> å‚æ•°ç±»ä¼¼ï¼Œä½†ä¼šå¯¹ä¼ è¾“å®Œæˆåçš„æ–‡ä»¶è¿›è¡Œä¸€æ¬¡æ ¡éªŒã€‚å¦‚æœæ ¡éªŒå¤±è´¥ï¼Œå°†é‡æ–°å‘é€æ•´ä¸ªæ–‡ä»¶ã€‚</p><p><code>-b</code> ã€ <code>--backup</code> å‚æ•°æŒ‡å®šåœ¨åˆ é™¤æˆ–æ›´æ–°ç›®æ ‡ç›®å½•å·²ç»å­˜åœ¨çš„æ–‡ä»¶æ—¶ï¼Œå°†è¯¥æ–‡ä»¶æ›´ååè¿›è¡Œå¤‡ä»½ï¼Œé»˜è®¤è¡Œä¸ºæ˜¯åˆ é™¤ã€‚æ›´åè§„åˆ™æ˜¯æ·»åŠ ç”± <code>--suffix</code> å‚æ•°æŒ‡å®šçš„æ–‡ä»¶åç¼€åï¼Œé»˜è®¤æ˜¯~ã€‚</p><p><code>--backup-dir</code> å‚æ•°æŒ‡å®šæ–‡ä»¶å¤‡ä»½æ—¶å­˜æ”¾çš„ç›®å½•ï¼Œæ¯”å¦‚ <code>--backup-dir=/path/to/backups</code> ã€‚</p><p><code>--bwlimit</code> å‚æ•°æŒ‡å®šå¸¦å®½é™åˆ¶ï¼Œé»˜è®¤å•ä½æ˜¯ KB/sï¼Œæ¯”å¦‚ <code>--bwlimit=100</code> ã€‚</p><p><code>-c</code> ã€ <code>--checksum</code> å‚æ•°æ”¹å˜rsyncçš„æ ¡éªŒæ–¹å¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œrsync åªæ£€æŸ¥æ–‡ä»¶çš„å¤§å°å’Œæœ€åä¿®æ”¹æ—¥æœŸæ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œå¦‚æœå‘ç”Ÿå˜åŒ–ï¼Œå°±é‡æ–°ä¼ è¾“ï¼›ä½¿ç”¨è¿™ä¸ªå‚æ•°ä»¥åï¼Œåˆ™é€šè¿‡åˆ¤æ–­æ–‡ä»¶å†…å®¹çš„æ ¡éªŒå’Œï¼Œå†³å®šæ˜¯å¦é‡æ–°ä¼ è¾“ã€‚</p><p><code>--delete</code> å‚æ•°åˆ é™¤åªå­˜åœ¨äºç›®æ ‡ç›®å½•ã€ä¸å­˜åœ¨äºæºç›®æ ‡çš„æ–‡ä»¶ï¼Œå³ä¿è¯ç›®æ ‡ç›®å½•æ˜¯æºç›®æ ‡çš„é•œåƒã€‚</p><p><code>-e</code> å‚æ•°æŒ‡å®šä½¿ç”¨ SSH åè®®ä¼ è¾“æ•°æ®ã€‚</p><p><code>--exclude</code> å‚æ•°æŒ‡å®šæ’é™¤ä¸è¿›è¡ŒåŒæ­¥çš„æ–‡ä»¶ï¼Œæ¯”å¦‚ <code>--exclude="*.iso"</code> ã€‚</p><p><code>--exclude-from</code> å‚æ•°æŒ‡å®šä¸€ä¸ªæœ¬åœ°æ–‡ä»¶ï¼Œé‡Œé¢æ˜¯éœ€è¦æ’é™¤çš„æ–‡ä»¶æ¨¡å¼ï¼Œæ¯ä¸ªæ¨¡å¼ä¸€è¡Œã€‚</p><p><code>--existing</code> ã€ <code>--ignore-non-existing</code> å‚æ•°è¡¨ç¤ºä¸åŒæ­¥ç›®æ ‡ç›®å½•ä¸­ä¸å­˜åœ¨çš„æ–‡ä»¶å’Œç›®å½•ã€‚</p><p><code>-h</code> å‚æ•°è¡¨ç¤ºä»¥äººç±»å¯è¯»çš„æ ¼å¼è¾“å‡ºã€‚</p><p><code>-h</code> ã€ <code>--help</code> å‚æ•°è¿”å›å¸®åŠ©ä¿¡æ¯ã€‚</p><p><code>-i</code> å‚æ•°è¡¨ç¤ºè¾“å‡ºæºç›®å½•ä¸ç›®æ ‡ç›®å½•ä¹‹é—´æ–‡ä»¶å·®å¼‚çš„è¯¦ç»†æƒ…å†µã€‚</p><p><code>--ignore-existing</code> å‚æ•°è¡¨ç¤ºåªè¦è¯¥æ–‡ä»¶åœ¨ç›®æ ‡ç›®å½•ä¸­å·²ç»å­˜åœ¨ï¼Œå°±è·³è¿‡å»ï¼Œä¸å†åŒæ­¥è¿™äº›æ–‡ä»¶ã€‚</p><p><code>--include</code> å‚æ•°æŒ‡å®šåŒæ­¥æ—¶è¦åŒ…æ‹¬çš„æ–‡ä»¶ï¼Œä¸€èˆ¬ä¸ <code>--exclude</code> ç»“åˆä½¿ç”¨ã€‚</p><p><code>--link-dest</code> å‚æ•°æŒ‡å®šå¢é‡å¤‡ä»½çš„åŸºå‡†ç›®å½•ã€‚</p><p><code>-m</code> å‚æ•°æŒ‡å®šä¸åŒæ­¥ç©ºç›®å½•ã€‚</p><p><code>--max-size</code> å‚æ•°è®¾ç½®ä¼ è¾“çš„æœ€å¤§æ–‡ä»¶çš„å¤§å°é™åˆ¶ï¼Œæ¯”å¦‚ä¸è¶…è¿‡200KBï¼ˆ <code>--max-size='200k'</code> ï¼‰ã€‚</p><p><code>--min-size</code> å‚æ•°è®¾ç½®ä¼ è¾“çš„æœ€å°æ–‡ä»¶çš„å¤§å°é™åˆ¶ï¼Œæ¯”å¦‚ä¸å°äº10KBï¼ˆ <code>--min-size=10k</code> ï¼‰ã€‚</p><p><code>-n</code> å‚æ•°æˆ– <code>--dry-run</code> å‚æ•°æ¨¡æ‹Ÿå°†è¦æ‰§è¡Œçš„æ“ä½œï¼Œè€Œå¹¶ä¸çœŸçš„æ‰§è¡Œã€‚é…åˆ <code>-v</code> å‚æ•°ä½¿ç”¨ï¼Œå¯ä»¥çœ‹åˆ°å“ªäº›å†…å®¹ä¼šè¢«åŒæ­¥è¿‡å»ã€‚</p><p><code>-P</code> å‚æ•°æ˜¯ <code>--progress</code> å’Œ <code>--partial</code> è¿™ä¸¤ä¸ªå‚æ•°çš„ç»“åˆã€‚</p><p><code>--partial</code> å‚æ•°å…è®¸æ¢å¤ä¸­æ–­çš„ä¼ è¾“ã€‚ä¸ä½¿ç”¨è¯¥å‚æ•°æ—¶ï¼Œrsyncä¼šåˆ é™¤ä¼ è¾“åˆ°ä¸€åŠè¢«æ‰“æ–­çš„æ–‡ä»¶ï¼›ä½¿ç”¨è¯¥å‚æ•°åï¼Œä¼ è¾“åˆ°ä¸€åŠçš„æ–‡ä»¶ä¹Ÿä¼šåŒæ­¥åˆ°ç›®æ ‡ç›®å½•ï¼Œä¸‹æ¬¡åŒæ­¥æ—¶å†æ¢å¤ä¸­æ–­çš„ä¼ è¾“ã€‚ä¸€èˆ¬éœ€è¦ä¸ <code>--append</code> æˆ– <code>--append-verify</code> é…åˆä½¿ç”¨ã€‚</p><p><code>--partial-dir</code> å‚æ•°æŒ‡å®šå°†ä¼ è¾“åˆ°ä¸€åŠçš„æ–‡ä»¶ä¿å­˜åˆ°ä¸€ä¸ªä¸´æ—¶ç›®å½•ï¼Œæ¯”å¦‚ <code>--partial-dir=.rsync-partial</code> ã€‚ä¸€èˆ¬éœ€è¦ä¸ <code>--append</code> æˆ– <code>--append-verify</code> é…åˆä½¿ç”¨ã€‚</p><p><code>--progress</code> å‚æ•°è¡¨ç¤ºæ˜¾ç¤ºè¿›å±•ã€‚</p><p><code>-r</code> å‚æ•°è¡¨ç¤ºé€’å½’ï¼Œå³åŒ…å«å­ç›®å½•ã€‚</p><p><code>--remove-source-files</code> å‚æ•°è¡¨ç¤ºä¼ è¾“æˆåŠŸåï¼Œåˆ é™¤å‘é€æ–¹çš„æ–‡ä»¶ã€‚</p><p><code>--size-only</code> å‚æ•°è¡¨ç¤ºåªåŒæ­¥å¤§å°æœ‰å˜åŒ–çš„æ–‡ä»¶ï¼Œä¸è€ƒè™‘æ–‡ä»¶ä¿®æ”¹æ—¶é—´çš„å·®å¼‚ã€‚</p><p><code>--suffix</code> å‚æ•°æŒ‡å®šæ–‡ä»¶åå¤‡ä»½æ—¶ï¼Œå¯¹æ–‡ä»¶åæ·»åŠ çš„åç¼€ï¼Œé»˜è®¤æ˜¯~ã€‚</p><p><code>-u</code> ã€ <code>--update</code> å‚æ•°è¡¨ç¤ºåŒæ­¥æ—¶è·³è¿‡ç›®æ ‡ç›®å½•ä¸­ä¿®æ”¹æ—¶é—´æ›´æ–°çš„æ–‡ä»¶ï¼Œå³ä¸åŒæ­¥è¿™äº›æœ‰æ›´æ–°çš„æ—¶é—´æˆ³çš„æ–‡ä»¶ã€‚</p><p><code>-v</code> å‚æ•°è¡¨ç¤ºè¾“å‡ºç»†èŠ‚ã€‚ <code>-vv</code> è¡¨ç¤ºè¾“å‡ºæ›´è¯¦ç»†çš„ä¿¡æ¯ï¼Œ <code>-vvv</code> è¡¨ç¤ºè¾“å‡ºæœ€è¯¦ç»†çš„ä¿¡æ¯ã€‚</p><p><code>--version</code> å‚æ•°è¿”å› <code>rsync</code> çš„ç‰ˆæœ¬ã€‚</p><p><code>-z</code> å‚æ•°æŒ‡å®šåŒæ­¥æ—¶å‹ç¼©æ•°æ®</p><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://www.digitalocean.com/community/tutorials/how-to-use-rsync-to-sync-local-and-remote-directories-on-a-vps">How To Use Rsync to Sync Local and Remote Directories on a VPS</a>, Justin Ellingwood</li><li><a href="https://www.howtoforge.com/mirroring_with_rsync">Mirror Your Web Site With rsync</a>, Falko Timme</li><li><a href="https://linuxconfig.org/examples-on-how-to-use-rsync-for-local-and-remote-data-backups-and-synchonization">Examples on how to use Rsync</a>, Egidio Docile</li><li><a href="https://linuxconfig.org/how-to-create-incremental-backups-using-rsync-on-linux">How to create incremental backups using rsync on Linux</a>, Egidio Docile</li></ul>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> shell </tag>
            
            <tag> æ–‡ä»¶å¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>awkç»Ÿè®¡æ–‡æœ¬ä¸­åŒä¸€æ•°æ®å‡ºç°çš„æ¬¡æ•°æ’åº</title>
      <link href="/My-Blogs/2021/01/08/Linux/shell/%E6%96%87%E4%BB%B6/awk%E7%BB%9F%E8%AE%A1%E6%96%87%E6%9C%AC%E4%B8%AD%E5%90%8C%E4%B8%80%E6%95%B0%E6%8D%AE%E5%87%BA%E7%8E%B0%E7%9A%84%E6%AC%A1%E6%95%B0%E6%8E%92%E5%BA%8F/"/>
      <url>/My-Blogs/2021/01/08/Linux/shell/%E6%96%87%E4%BB%B6/awk%E7%BB%9F%E8%AE%A1%E6%96%87%E6%9C%AC%E4%B8%AD%E5%90%8C%E4%B8%80%E6%95%B0%E6%8D%AE%E5%87%BA%E7%8E%B0%E7%9A%84%E6%AC%A1%E6%95%B0%E6%8E%92%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<p>çªç„¶å‘ç°awkåŸæ¥å¯ä»¥ç»Ÿè®¡åŒä¸€æ•°æ®åœ¨è¦å¤„ç†çš„æ–‡ä»¶ä¸­æ‰€å‡ºç°çš„æ¬¡æ•°. åŸæ¥çš„æ—¶å€™ ä¸ºäº†åˆ†ææ•°æ®è¿˜è‡ªå·±å†™ç¨‹åº, å“, æ— è¯­, å½“æ—¶è¿˜ä»¥ä¸ºè‡ªå·±å¤šå¼º, æ‰‹å·¥åˆ†æä¸è¿‡æ¥çš„ä¸œè¥¿å†™ç¨‹åºå¤„ç†. ç°åœ¨æƒ³æ¥å®åœ¨æ˜¯å¹´å°‘è½»ç‹‚. è§£å†³é—®é¢˜å˜›, ä¸è®²ç©¶æ–¹å¼, åªè¦å¿«é€Ÿ é«˜æ•ˆçš„å®Œæˆä»»åŠ¡å°±OKäº†.</p><a id="more"></a><p>å¥½, ä»Šå¤©å°è¯•ç‰›åˆ€ç»Ÿè®¡äº†ä¸€ä¸‹passwdæ–‡ä»¶ä¸­shelléƒ¨åˆ†é‡å¤çš„shellåå’Œå‡ºç°çš„æ¬¡æ•°, çœ‹å‘½ä»¤:</p><pre><code class="BASH">$awk -F: '{a[$7]++}END{for (i in a) print i" "a[i]}' /etc/passwd/bin/false 13/bin/sh 18/bin/bash 2/usr/sbin/nologin 1/bin/sync 1</code></pre><h3 id="è§£è¯´ä¸€ä¸‹"><a href="#è§£è¯´ä¸€ä¸‹" class="headerlink" title="è§£è¯´ä¸€ä¸‹"></a>è§£è¯´ä¸€ä¸‹</h3><ul><li>-F: ä»¥: åˆ†å‰²å­—æ®µ</li><li>a[7]++å®šä¹‰äº†ä¸ªåç§°ä¸ºaçš„æ•°ç»„7]++å®šä¹‰äº†ä¸ªåç§°ä¸ºaçš„æ•°ç»„7åœ¨passwdæ–‡ä»¶ä¸­æ˜¯shellåï¼Œåœ¨è¿™é‡Œæ˜¯æ•°ç»„ç´¢å¼•.awkçš„æ•°æ®- ç´¢å¼•å¯ä»¥æ˜¯æ˜¯å­—ç¬¦ç±»å‹è¿™ç‚¹çœŸ æ˜¯å¤ªå¸…äº†.</li><li>for (i in a) print iâ€ â€œa[i]</li><li>ç”¨forå¾ªç¯å–å‡ºæ•°æ®æ¥, è¿™æ—¶å€™iå–çš„æ—¶ä¸‹æ ‡, a[i]æ˜¯é‡Œé¢å­˜å‚¨çš„æ•°æ®</li><li>æ˜¯$7å‡ºç°çš„æ¬¡æ•°, ç‹ !</li><li>éƒé—·äº†, è¿™åŠæ³•å¤ªå¼ºäº†, ä»¥åå†é‡åˆ°é—®é¢˜è¿˜æ˜¯å…ˆbaidu, å†googleç„¶åå†è‡ªå·±åŠ¨æ‰‹å§!</li></ul><h3 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h3><p>åæ¥å‘ç°ï¼Œå¦‚æœawkç©å¾—ä¸å’‹ç†Ÿæ‚‰çš„è¯ï¼Œç”¨å‘½ä»¤ç»„åˆä¹Ÿå¯ä»¥å®ç°åŒæ ·çš„åŠŸèƒ½</p><pre><code class="BASH"> awk -F: '{print $7}'|sort|uniq -c /etc/passwd</code></pre><p><strong>å¿«é€Ÿç»Ÿè®¡æ—¥å¿—æ–‡ä»¶é‡Œç‚¹å‡»é‡å‰åä½çš„URL</strong></p><p>å…³äºshellå‘½ä»¤ï¼Œç½‘ä¸Šæµä¼ ç€å¾ˆå¤šå¥‡æŠ€æ·«å·§ï¼Œæ¯”å¦‚è¯´å¿«é€Ÿç»Ÿè®¡æ—¥å¿—æ–‡ä»¶é‡Œç‚¹å‡»é‡å‰åä½çš„URLï¼š</p><pre><code class="BASH">awk â€˜{print $7}â€™ /path/to/log | sort | uniq -c | sort -nr | head -n 10</code></pre>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> shell </tag>
            
            <tag> æ–‡ä»¶å¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>awkå‘½ä»¤çš„åŸºæœ¬ä½¿ç”¨</title>
      <link href="/My-Blogs/2021/01/08/Linux/shell/%E6%96%87%E4%BB%B6/awk%E5%91%BD%E4%BB%A4%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
      <url>/My-Blogs/2021/01/08/Linux/shell/%E6%96%87%E4%BB%B6/awk%E5%91%BD%E4%BB%A4%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>Awk  pattern scanning and processing languageï¼Œå¯¹æ–‡æœ¬å’Œæ•°æ®è¿›è¡Œå¤„ç†ã€‚</p><p>awk æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼Œç”¨äºåœ¨linux/unixä¸‹å¯¹æ–‡æœ¬å’Œæ•°æ®è¿›è¡Œå¤„ç†ã€‚æ•°æ®å¯ä»¥æ¥è‡ªæ ‡å‡†è¾“(stdin)ã€ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼Œæˆ–å…¶å®ƒå‘½ä»¤çš„è¾“å‡ºã€‚å®ƒåœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ï¼Œä½†æ›´å¤šæ˜¯ä½œä¸ºè„šæœ¬æ¥ä½¿ç”¨ã€‚awkæœ‰å¾ˆå¤šå†…å»ºçš„åŠŸèƒ½ï¼Œæ¯”å¦‚æ•°ç»„ã€å‡½æ•°ç­‰ï¼Œè¿™æ˜¯å®ƒå’ŒCè¯­è¨€çš„ç›¸åŒä¹‹å¤„ï¼Œçµæ´»æ€§æ˜¯awkæœ€å¤§çš„ä¼˜åŠ¿ã€‚</p><a id="more"></a><h2 id="è¯­æ³•æ ¼å¼"><a href="#è¯­æ³•æ ¼å¼" class="headerlink" title="è¯­æ³•æ ¼å¼"></a>è¯­æ³•æ ¼å¼</h2><pre><code class="BASH">awk&nbsp;[options]&nbsp;'scripts'&nbsp;var=value&nbsp;filename</code></pre><h2 id="å¸¸ç”¨å‚æ•°"><a href="#å¸¸ç”¨å‚æ•°" class="headerlink" title="å¸¸ç”¨å‚æ•°"></a>å¸¸ç”¨å‚æ•°</h2><pre><code class="BASH">-F&nbsp;æŒ‡å®šåˆ†éš”ç¬¦ï¼ˆå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ï¼‰-f&nbsp;ä»è„šæœ¬æ–‡ä»¶ä¸­è¯»å–awkå‘½ä»¤-v&nbsp;var=value&nbsp;èµ‹å€¼å˜é‡ï¼Œå°†å¤–éƒ¨å˜é‡ä¼ é€’ç»™awk</code></pre><h2 id="è„šæœ¬åŸºæœ¬ç»“æ„"><a href="#è„šæœ¬åŸºæœ¬ç»“æ„" class="headerlink" title="è„šæœ¬åŸºæœ¬ç»“æ„"></a>è„šæœ¬åŸºæœ¬ç»“æ„</h2><pre><code class="BASH">awk&nbsp;'BEGIN{&nbsp;print&nbsp;"start"&nbsp;}&nbsp;pattern{&nbsp;commands&nbsp;}&nbsp;END{&nbsp;print&nbsp;"end"&nbsp;}'&nbsp;filename</code></pre><p>ä¸€ä¸ªawkè„šæœ¬é€šå¸¸ç”±BEGINè¯­å¥+æ¨¡å¼åŒ¹é…+ENDè¯­å¥ä¸‰éƒ¨åˆ†ç»„æˆ, è¿™ä¸‰éƒ¨åˆ†éƒ½æ˜¯å¯é€‰é¡¹.</p><p>å·¥ä½œåŸç†:</p><ul><li>ç¬¬ä¸€æ­¥æ‰§è¡ŒBEGIN è¯­å¥</li><li>ç¬¬äºŒæ­¥ä»æ–‡ä»¶æˆ–æ ‡å‡†è¾“å…¥è¯»å–ä¸€è¡Œï¼Œç„¶åå†æ‰§è¡Œpatternè¯­å¥ï¼Œé€è¡Œæ‰«ææ–‡ä»¶åˆ°æ–‡ä»¶å…¨éƒ¨è¢«è¯»å–</li><li>ç¬¬ä¸‰æ­¥æ‰§è¡ŒENDè¯­å¥</li></ul><p>å®ä¾‹å±•ç¤º:</p><pre><code class="BASH">echo&nbsp;"hello&nbsp;"&nbsp;|&nbsp;awk&nbsp;'BEGIN{&nbsp;print&nbsp;"welcome"&nbsp;}&nbsp;END{&nbsp;print&nbsp;"2017-08-08"&nbsp;}'welcome2017-08-08echo&nbsp;-e&nbsp;"hello"&nbsp;|&nbsp;awk&nbsp;'BEGIN{&nbsp;print&nbsp;"welcome"&nbsp;}&nbsp;{print}&nbsp;END{&nbsp;print&nbsp;"2017-08-08"&nbsp;}'welcomehello2017-08-08#ä¸åŠ printå‚æ•°æ—¶é»˜è®¤åªæ‰“å°å½“å‰çš„è¡Œecho|awk&nbsp;'{&nbsp;a="hello";&nbsp;b="nihao";&nbsp;c="mingongge";&nbsp;print&nbsp;a,b,c;&nbsp;}'hello&nbsp;nihao&nbsp;mingongge#ä½¿ç”¨printä»¥é€—å·åˆ†éš”æ—¶ï¼Œæ‰“å°åˆ™æ˜¯ä»¥ç©ºæ ¼åˆ†ç•Œecho|awk&nbsp;'{&nbsp;a="mgg";&nbsp;b="mingg";&nbsp;c="mingongge";&nbsp;print&nbsp;a"&nbsp;is&nbsp;"b"&nbsp;or&nbsp;"c;&nbsp;}'mgg&nbsp;is&nbsp;mingg&nbsp;or&nbsp;mingongge#awkçš„printè¯­å¥ä¸­åŒå¼•å·å…¶å®å°±æ˜¯ä¸ªæ‹¼æ¥ä½œç”¨</code></pre><h2 id="Awkçš„å˜é‡"><a href="#Awkçš„å˜é‡" class="headerlink" title="Awkçš„å˜é‡"></a>Awkçš„å˜é‡</h2><h3 id="å†…ç½®å˜é‡"><a href="#å†…ç½®å˜é‡" class="headerlink" title="å†…ç½®å˜é‡"></a>å†…ç½®å˜é‡</h3><pre><code class="BASH">$0&nbsp;&nbsp;&nbsp;#å½“å‰è®°å½•$1~$n&nbsp;#å½“å‰è®°å½•çš„ç¬¬Nä¸ªå­—æ®µFS&nbsp;&nbsp;&nbsp;#è¾“å…¥å­—æ®µåˆ†éš”ç¬¦ï¼ˆ-Fç›¸åŒä½œç”¨ï¼‰é»˜è®¤ç©ºæ ¼RS&nbsp;&nbsp;&nbsp;#è¾“å…¥è®°å½•åˆ†å‰²ç¬¦ï¼Œé»˜è®¤æ¢è¡Œç¬¦NF&nbsp;&nbsp;&nbsp;#å­—æ®µä¸ªæ•°å°±æ˜¯åˆ— NR&nbsp;&nbsp;&nbsp;#è®°å½•æ•°ï¼Œå°±æ˜¯è¡Œå·ï¼Œé»˜è®¤ä»1å¼€å§‹OFS&nbsp;&nbsp;#è¾“å‡ºå­—æ®µåˆ†éš”ç¬¦ï¼Œé»˜è®¤ç©ºæ ¼ORS&nbsp;&nbsp;#è¾“å‡ºè®°å½•åˆ†å‰²ç¬¦ï¼Œé»˜è®¤æ¢è¡Œç¬¦ </code></pre><p>å¤–éƒ¨å˜é‡</p><pre><code class="BASH">[mingongge@&nbsp;~]#a=100[mingongge@&nbsp;~]#b=100[mingongge@&nbsp;~]#echo&nbsp;|awk&nbsp;'{print&nbsp;v1*v2&nbsp;}'&nbsp;v1=$a&nbsp;v2=$b10000</code></pre><h2 id="Awkè¿ç®—ä¸åˆ¤æ–­"><a href="#Awkè¿ç®—ä¸åˆ¤æ–­" class="headerlink" title="Awkè¿ç®—ä¸åˆ¤æ–­"></a>Awkè¿ç®—ä¸åˆ¤æ–­</h2><h3 id="ç®—æœ¯è¿ç®—ç¬¦"><a href="#ç®—æœ¯è¿ç®—ç¬¦" class="headerlink" title="ç®—æœ¯è¿ç®—ç¬¦"></a>ç®—æœ¯è¿ç®—ç¬¦</h3><pre><code class="BASH">+&nbsp;-&nbsp;åŠ å‡*&nbsp;/&nbsp;&amp;&nbsp;ä¹˜&nbsp;é™¤&nbsp;æ±‚ä½™^&nbsp;*&nbsp;&nbsp;æ±‚å¹‚++&nbsp;--&nbsp;å¢åŠ æˆ–å‡å°‘ï¼Œä½œä¸ºå‰ç¼€æˆ–åç¼€</code></pre><pre><code class="BASH">[mingongge@&nbsp;~]#awk&nbsp;'BEGIN{a="b";print&nbsp;a,a++,a--,++a;}'b&nbsp;0&nbsp;1&nbsp;1[mingongge@&nbsp;~]#awk&nbsp;'BEGIN{a="0";print&nbsp;a,a++,a--,++a;}'0&nbsp;0&nbsp;1&nbsp;1[mingongge@&nbsp;~]#awk&nbsp;'BEGIN{a="0";print&nbsp;a,a++,--a,++a;}'0&nbsp;0&nbsp;0&nbsp;1#å’Œå…¶å®ƒç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼Œæ‰€æœ‰ç”¨ä½œç®—æœ¯è¿ç®—ç¬¦è¿›è¡Œæ“ä½œï¼Œæ“ä½œæ•°è‡ªåŠ¨è½¬ä¸ºæ•°å€¼ï¼Œæ‰€æœ‰éæ•°å€¼éƒ½å˜ä¸º0</code></pre><h3 id="èµ‹å€¼è¿ç®—ç¬¦"><a href="#èµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="èµ‹å€¼è¿ç®—ç¬¦"></a>èµ‹å€¼è¿ç®—ç¬¦</h3><pre><code class="BASH">=&nbsp;+=&nbsp;-=&nbsp;*=&nbsp;/=&nbsp;%=&nbsp;^=&nbsp;**=</code></pre><h3 id="æ­£åˆ™è¿ç®—ç¬¦"><a href="#æ­£åˆ™è¿ç®—ç¬¦" class="headerlink" title="æ­£åˆ™è¿ç®—ç¬¦"></a>æ­£åˆ™è¿ç®—ç¬¦</h3><pre><code class="BASH">~&nbsp;!~&nbsp;&nbsp;åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼/ä¸åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼</code></pre><h3 id="é€»è¾‘è¿ç®—ç¬¦"><a href="#é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="é€»è¾‘è¿ç®—ç¬¦"></a>é€»è¾‘è¿ç®—ç¬¦</h3><pre><code class="BASH">||&nbsp;&nbsp;&amp;&amp;&nbsp;&nbsp;é€»è¾‘æˆ–&nbsp;&nbsp;é€»è¾‘ä¸</code></pre><h3 id="å…³ç³»è¿ç®—ç¬¦"><a href="#å…³ç³»è¿ç®—ç¬¦" class="headerlink" title="å…³ç³»è¿ç®—ç¬¦"></a>å…³ç³»è¿ç®—ç¬¦</h3><pre><code class="BASH">&lt;&nbsp;&lt;=&nbsp;&gt;&nbsp;&gt;=&nbsp;!=&nbsp;= </code></pre><h3 id="å…¶å®ƒè¿ç®—ç¬¦"><a href="#å…¶å®ƒè¿ç®—ç¬¦" class="headerlink" title="å…¶å®ƒè¿ç®—ç¬¦"></a>å…¶å®ƒè¿ç®—ç¬¦</h3><pre><code class="BASH">$&nbsp;&nbsp;&nbsp;å­—æ®µå¼•ç”¨&nbsp;ç©ºæ ¼&nbsp;å­—ç¬¦ä¸²é“¾æ¥ç¬¦?:&nbsp;&nbsp;&nbsp;ä¸‰ç›®è¿ç®—ç¬¦ln&nbsp;&nbsp;&nbsp;æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨æŸé”®å€¼</code></pre><h2 id="Awkæ­£åˆ™"><a href="#Awkæ­£åˆ™" class="headerlink" title="Awkæ­£åˆ™"></a>Awkæ­£åˆ™</h2><pre><code class="BASH">^&nbsp;&nbsp;&nbsp;&nbsp;è¡Œé¦–å®šä½ç¬¦$&nbsp;&nbsp;&nbsp;&nbsp;è¡Œå°¾å®šä½ç¬¦.&nbsp;&nbsp;&nbsp;&nbsp;åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦*&nbsp;&nbsp;&nbsp;&nbsp;åŒ¹é…0ä¸ªæˆ–å¤šä¸ªå‰å¯¼å­—ç¬¦ï¼ˆåŒ…æ‹¬å›è½¦ï¼‰+&nbsp;&nbsp;&nbsp;&nbsp;åŒ¹é…1ä¸ªæˆ–å¤šä¸ªå‰å¯¼å­—ç¬¦?&nbsp;&nbsp;&nbsp;&nbsp;åŒ¹é…0ä¸ªæˆ–1ä¸ªå‰å¯¼å­—ç¬¦&nbsp;[]&nbsp;&nbsp;&nbsp;åŒ¹é…æŒ‡å®šå­—ç¬¦ç»„å†…çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦/^[ab][^]&nbsp;&nbsp;åŒ¹é…ä¸åœ¨æŒ‡å®šå­—ç¬¦ç»„å†…çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦()&nbsp;&nbsp;&nbsp;å­è¡¨è¾¾å¼|&nbsp;&nbsp;&nbsp;&nbsp;æˆ–è€…&nbsp;&nbsp;&nbsp;&nbsp;è½¬ä¹‰ç¬¦~,!~&nbsp;åŒ¹é…æˆ–ä¸åŒ¹é…çš„æ¡ä»¶è¯­å¥x{m}&nbsp;xå­—ç¬¦é‡å¤mæ¬¡x{m,}&nbsp;xå­—ç¬¦è‡³å°‘é‡å¤mæ¬¡X{m,n}&nbsp;xå­—ç¬¦è‡³å°‘é‡å¤mæ¬¡ä½†ä¸èµ·è¿‡næ¬¡ï¼ˆéœ€æŒ‡å®šå‚æ•°-posixæˆ–--re-intervalï¼‰</code></pre><h2 id="Awkå®ä¾‹ä»‹ç»"><a href="#Awkå®ä¾‹ä»‹ç»" class="headerlink" title="Awkå®ä¾‹ä»‹ç»"></a>Awkå®ä¾‹ä»‹ç»</h2><pre><code class="BASH">awk&nbsp;â€“F&nbsp;:&nbsp;â€˜{print&nbsp;$2}â€™&nbsp;datafile#ä»¥:åˆ†éš”æ‰“å°ç¬¬äºŒåˆ—awk&nbsp;â€“F&nbsp;:&nbsp;â€˜/^Dan/{print&nbsp;$2}â€™&nbsp;datafile#ä»¥:åˆ†éš”æ‰“å°ä»¥Danå¼€å¤´è¡Œçš„ç¬¬äºŒåˆ—å†…å®¹awk&nbsp;â€“F&nbsp;:&nbsp;â€˜/^[CE]/{print&nbsp;$1}â€™&nbsp;datafile&nbsp;#æ‰“å°ä»¥Cæˆ–Eå¼€å¤´è¡Œçš„ç¬¬ä¸€åˆ—awk&nbsp;â€“F&nbsp;:&nbsp;â€˜{if(length($1)&nbsp;==&nbsp;4)&nbsp;print&nbsp;$1}â€™&nbsp;datafile&nbsp;#æ‰“å°ä»¥:åˆ†éš”ä¸”é•¿åº¦ä¸º4å­—ç¬¦çš„ç¬¬ä¸€åˆ—å†…å®¹awk&nbsp;â€“F&nbsp;:&nbsp;â€˜/[916]/{print&nbsp;$1}â€™&nbsp;datafile#åŒ¹é…916çš„è¡Œä»¥:åˆ†éš”æ‰“å°ç¬¬ä¸€åˆ—awk&nbsp;-F&nbsp;:&nbsp;'/^Vinh/{print&nbsp;"a"$5}'&nbsp;2.txt#æ˜¾ç¤ºä»¥Danå¼€å¤´è¡Œå¹¶åœ¨ç¬¬äº”åˆ—å‰åŠ ä¸Šaawk&nbsp;â€“F&nbsp;:&nbsp;â€˜{print&nbsp;$2â€,â€$1}â€™&nbsp;&nbsp;datafile#æ‰“å°ç¬¬äºŒåˆ—ç¬¬ä¸€åˆ—å¹¶ä»¥,åˆ†éš”awk&nbsp;-F&nbsp;:&nbsp;'($5&nbsp;==&nbsp;68900)&nbsp;{print&nbsp;$1}'&nbsp;2.txt#ä»¥:åˆ†éš”æ‰“å°ç¬¬äº”åˆ—æ˜¯68900çš„è¡Œç¬¬ä¸€åˆ— awk&nbsp;-F&nbsp;:&nbsp;'{if(length($1)&nbsp;==&nbsp;11)&nbsp;print&nbsp;$1}'&nbsp;2.txt#æ‰“å°ä»¥:åˆ†éš”ä¸”é•¿åº¦ä¸º4å­—ç¬¦çš„ç¬¬ä¸€åˆ—å†…å®¹awk&nbsp;-F&nbsp;:&nbsp;'$1~/Tommy&nbsp;Savage/&nbsp;{print&nbsp;$5}'&nbsp;2.txtawk&nbsp;-F&nbsp;:&nbsp;'($1&nbsp;==&nbsp;"Tommy&nbsp;Savage")&nbsp;{print&nbsp;$5}'&nbsp;2.txt#æ‰“å°ä»¥:åˆ†éš”ä¸”ç¬¬ä¸€åˆ—ä¸ºTommy&nbsp;Savageçš„ç¬¬äº”åˆ—å†…å®¹ll&nbsp;|awk&nbsp;'BEGIN&nbsp;{size=0;}&nbsp;{size=size+$5;}&nbsp;END{print&nbsp;"[end]size&nbsp;is&nbsp;",size}'#ç»Ÿè®¡ç›®å½•ä¸ªçš„æ–‡ä»¶æ‰€æœ‰çš„å­—èŠ‚æ•°awk&nbsp;'BEGIN{size=0;}&nbsp;{size=size+$5;}&nbsp;END{print&nbsp;"[end]size&nbsp;is&nbsp;",size/1024/1024,"M"}'&nbsp;#ä»¥Mä¸ºå•ä½æ˜¾ç¤ºç›®å½•ä¸‹çš„æ‰€æœ‰å­—èŠ‚æ•°awk&nbsp;'BEGIN{a=10;a+=10;print&nbsp;a}'20&nbsp;#a+10ç­‰ä»·äº&nbsp;a=a+10echo|awk&nbsp;'BEGIN{a="100testaaa"}a~/test/{print&nbsp;"ok"}'&nbsp;#æ­£åˆ™åŒ¹é…a&nbsp;æ˜¯å¦æœ‰testå­—ç¬¦ï¼Œæˆç«‹æ‰“å°okawk&nbsp;'BEGIN{a="b";print&nbsp;a=="b"?"ok":"err"}'okawk&nbsp;'BEGIN{a="b";print&nbsp;a=="c"?"ok":"err"}'err#ä¸‰ç›®è¿ç®—ç¬¦?:awk&nbsp;'/root/{print&nbsp;$0}'&nbsp;passwd&nbsp;#åŒ¹é…æ‰€æœ‰åŒ…å«rootçš„è¡Œawk&nbsp;-F:&nbsp;'$5~/root/{print&nbsp;$0}'&nbsp;passwd&nbsp;#&nbsp;ä»¥åˆ†å·ä½œä¸ºåˆ†éš”ç¬¦ï¼ŒåŒ¹é…ç¬¬5ä¸ªå­—æ®µæ˜¯rootçš„è¡Œifconfig&nbsp;eth0|awk&nbsp;'BEGIN{FS="[[:space:]:]+"}&nbsp;NR==2{print&nbsp;$4}'#æ‰“å°IPåœ°å€awk&nbsp;'{print&nbsp;toupper($0)}'&nbsp;test.txt#toupperæ˜¯awkå†…ç½®å‡½æ•°ï¼Œå°†æ‰€å°å†™å­—æ¯è½¬æ¢æˆå¤§å†™</code></pre>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> shell </tag>
            
            <tag> æ–‡ä»¶å¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cronåŸºæœ¬çš„ä½¿ç”¨</title>
      <link href="/My-Blogs/2021/01/08/Linux/shell/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/cron%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/"/>
      <url>/My-Blogs/2021/01/08/Linux/shell/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/cron%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>å…ˆæ¥çœ‹ä¸€å¼ å›¾</p><a id="more"></a><p><img src="/My-Blogs/images/cron%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-01.png"></p><pre><code class="BASH">#ç¼–è¾‘crontabä»»åŠ¡vim /etc/crontab# å¯åŠ¨crontabsudo /etc/init.d/cron start#åœæ­¢crontabsudo /etc/init.d/cron stop#é‡å¯crontabsudo /etc/init.d/cron restart#é‡è½½/etc/crontabé…ç½®sudo /etc/init.d/cron reload# å¼ºåˆ¶é‡è½½/etc/crontabé…ç½®sudo /etc/init.d/cron force-reload# æŸ¥çœ‹crontabæœåŠ¡çŠ¶æ€sudo /etc/init.d/cron status# æŸ¥çœ‹crontabè¿è¡Œè®°å½•tail -f /var/log/cron.log# æŸ¥çœ‹æœ€è¿‘åè¡Œcrontabè¿è¡Œè®°å½•tail -n /var/log/cron.log</code></pre><h2 id="é—®é¢˜æ€»ç»“"><a href="#é—®é¢˜æ€»ç»“" class="headerlink" title="é—®é¢˜æ€»ç»“"></a>é—®é¢˜æ€»ç»“</h2><h3 id="crontabä¸è¿è¡Œ"><a href="#crontabä¸è¿è¡Œ" class="headerlink" title="crontabä¸è¿è¡Œ"></a>crontabä¸è¿è¡Œ</h3><ol><li> æŸ¥çœ‹é…ç½®æ˜¯å¦æ­£ç¡® æ¯”å¦‚æœ‰æ²¡â€™ç­‰ç‰¹æ®Šç¬¦å· æ—¶é—´è®¾ç½®æ˜¯å¦æœ‰é”™</li><li> æŸ¥çœ‹crontabæœåŠ¡çŠ¶æ€</li></ol>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> shell </tag>
            
            <tag> å®šæ—¶ä»»åŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetes ç»„ä»¶ä»‹ç»</title>
      <link href="/My-Blogs/2021/01/08/k8s/Kubernetes%E7%BB%84%E4%BB%B6/"/>
      <url>/My-Blogs/2021/01/08/k8s/Kubernetes%E7%BB%84%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="Kubernetes-ç»„ä»¶"><a href="#Kubernetes-ç»„ä»¶" class="headerlink" title="Kubernetes ç»„ä»¶"></a>Kubernetes ç»„ä»¶</h2><a id="more"></a><p><strong>Kubernetes é›†ç¾¤ç”±ä»£è¡¨æ§åˆ¶å¹³é¢çš„ç»„ä»¶å’Œä¸€ç»„ç§°ä¸ºèŠ‚ç‚¹çš„æœºå™¨ç»„æˆã€‚</strong></p><p>å½“ä½ éƒ¨ç½²å®Œ Kubernetes, å³æ‹¥æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„é›†ç¾¤ã€‚</p><p>ä¸€ä¸ª Kubernetes é›†ç¾¤åŒ…å« é›†ç¾¤ç”±ä¸€ç»„è¢«ç§°ä½œèŠ‚ç‚¹çš„æœºå™¨ç»„æˆã€‚è¿™äº›èŠ‚ç‚¹ä¸Šè¿è¡Œ Kubernetes æ‰€ç®¡ç†çš„å®¹å™¨åŒ–åº”ç”¨ã€‚é›†ç¾¤å…·æœ‰è‡³å°‘ä¸€ä¸ªå·¥ä½œèŠ‚ç‚¹ã€‚</p><p>å·¥ä½œèŠ‚ç‚¹æ‰˜ç®¡ä½œä¸ºåº”ç”¨è´Ÿè½½çš„ç»„ä»¶çš„ Pod ã€‚æ§åˆ¶å¹³é¢ç®¡ç†é›†ç¾¤ä¸­çš„å·¥ä½œèŠ‚ç‚¹å’Œ Pod ã€‚ ä¸ºé›†ç¾¤æä¾›æ•…éšœè½¬ç§»å’Œé«˜å¯ç”¨æ€§ï¼Œè¿™äº›æ§åˆ¶å¹³é¢ä¸€èˆ¬è·¨å¤šä¸»æœºè¿è¡Œï¼Œé›†ç¾¤è·¨å¤šä¸ªèŠ‚ç‚¹è¿è¡Œã€‚</p><p>æœ¬æ–‡æ¡£æ¦‚è¿°äº†äº¤ä»˜æ­£å¸¸è¿è¡Œçš„ Kubernetes é›†ç¾¤æ‰€éœ€çš„å„ç§ç»„ä»¶ã€‚</p><p>è¿™å¼ å›¾è¡¨å±•ç¤ºäº†åŒ…å«æ‰€æœ‰ç›¸äº’å…³è”ç»„ä»¶çš„ Kubernetes é›†ç¾¤ã€‚</p><p>![Kubernetes ç»„ä»¶](/images/Kubernetes ç»„ä»¶-01.svg)</p><h3 id="æ§åˆ¶å¹³é¢ç»„ä»¶ï¼ˆControl-Plane-Componentsï¼‰"><a href="#æ§åˆ¶å¹³é¢ç»„ä»¶ï¼ˆControl-Plane-Componentsï¼‰" class="headerlink" title="æ§åˆ¶å¹³é¢ç»„ä»¶ï¼ˆControl Plane Componentsï¼‰"></a>æ§åˆ¶å¹³é¢ç»„ä»¶ï¼ˆControl Plane Componentsï¼‰<a href="#control-plane-components"></a></h3><p>æ§åˆ¶å¹³é¢çš„ç»„ä»¶å¯¹é›†ç¾¤åšå‡ºå…¨å±€å†³ç­–(æ¯”å¦‚è°ƒåº¦)ï¼Œä»¥åŠæ£€æµ‹å’Œå“åº”é›†ç¾¤äº‹ä»¶ï¼ˆä¾‹å¦‚ï¼Œå½“ä¸æ»¡è¶³éƒ¨ç½²çš„ <code>replicas</code> å­—æ®µæ—¶ï¼Œå¯åŠ¨æ–°çš„ <a href="/docs/concepts/workloads/pods/pod-overview/">pod</a>ï¼‰ã€‚</p><p>æ§åˆ¶å¹³é¢ç»„ä»¶å¯ä»¥åœ¨é›†ç¾¤ä¸­çš„ä»»ä½•èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚ ç„¶è€Œï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œè®¾ç½®è„šæœ¬é€šå¸¸ä¼šåœ¨åŒä¸€ä¸ªè®¡ç®—æœºä¸Šå¯åŠ¨æ‰€æœ‰æ§åˆ¶å¹³é¢ç»„ä»¶ï¼Œå¹¶ä¸”ä¸ä¼šåœ¨æ­¤è®¡ç®—æœºä¸Šè¿è¡Œç”¨æˆ·å®¹å™¨ã€‚ è¯·å‚é˜…<a href="/zh/docs/setup/production-environment/tools/kubeadm/high-availability/">æ„å»ºé«˜å¯ç”¨æ€§é›†ç¾¤</a> ä¸­å¯¹äºå¤šä¸»æœº VM çš„è®¾ç½®ç¤ºä¾‹ã€‚</p><h4 id="kube-apiserver"><a href="#kube-apiserver" class="headerlink" title="kube-apiserver"></a>kube-apiserver<a href="#kube-apiserver"></a></h4><p>API æœåŠ¡å™¨æ˜¯ Kubernetes <a href="/zh/docs/reference/glossary/?all=true#term-control-plane">æ§åˆ¶é¢</a>çš„ç»„ä»¶ï¼Œ è¯¥ç»„ä»¶å…¬å¼€äº† Kubernetes APIã€‚ API æœåŠ¡å™¨æ˜¯ Kubernetes æ§åˆ¶é¢çš„å‰ç«¯ã€‚</p><p>Kubernetes API æœåŠ¡å™¨çš„ä¸»è¦å®ç°æ˜¯ <a href="/zh/docs/reference/command-line-tools-reference/kube-apiserver/">kube-apiserver</a>ã€‚ kube-apiserver è®¾è®¡ä¸Šè€ƒè™‘äº†æ°´å¹³ä¼¸ç¼©ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¯é€šè¿‡éƒ¨ç½²å¤šä¸ªå®ä¾‹è¿›è¡Œä¼¸ç¼©ã€‚ ä½ å¯ä»¥è¿è¡Œ kube-apiserver çš„å¤šä¸ªå®ä¾‹ï¼Œå¹¶åœ¨è¿™äº›å®ä¾‹ä¹‹é—´å¹³è¡¡æµé‡ã€‚</p><h4 id="etcd"><a href="#etcd" class="headerlink" title="etcd"></a>etcd<a href="#etcd"></a></h4><p>etcd æ˜¯å…¼å…·ä¸€è‡´æ€§å’Œé«˜å¯ç”¨æ€§çš„é”®å€¼æ•°æ®åº“ï¼Œå¯ä»¥ä½œä¸ºä¿å­˜ Kubernetes æ‰€æœ‰é›†ç¾¤æ•°æ®çš„åå°æ•°æ®åº“ã€‚</p><p>æ‚¨çš„ Kubernetes é›†ç¾¤çš„ etcd æ•°æ®åº“é€šå¸¸éœ€è¦æœ‰ä¸ªå¤‡ä»½è®¡åˆ’ã€‚</p><p>è¦äº†è§£ etcd æ›´æ·±å±‚æ¬¡çš„ä¿¡æ¯ï¼Œè¯·å‚è€ƒ <a href="https://etcd.io/docs/">etcd æ–‡æ¡£</a>ã€‚</p><h4 id="kube-scheduler"><a href="#kube-scheduler" class="headerlink" title="kube-scheduler"></a>kube-scheduler<a href="#kube-scheduler"></a></h4><p>ä¸»èŠ‚ç‚¹ä¸Šçš„ç»„ä»¶ï¼Œè¯¥ç»„ä»¶ç›‘è§†é‚£äº›æ–°åˆ›å»ºçš„æœªæŒ‡å®šè¿è¡ŒèŠ‚ç‚¹çš„ Podï¼Œå¹¶é€‰æ‹©èŠ‚ç‚¹è®© Pod åœ¨ä¸Šé¢è¿è¡Œã€‚</p><p>è°ƒåº¦å†³ç­–è€ƒè™‘çš„å› ç´ åŒ…æ‹¬å•ä¸ª Pod å’Œ Pod é›†åˆçš„èµ„æºéœ€æ±‚ã€ç¡¬ä»¶/è½¯ä»¶/ç­–ç•¥çº¦æŸã€äº²å’Œæ€§å’Œåäº²å’Œæ€§è§„èŒƒã€æ•°æ®ä½ç½®ã€å·¥ä½œè´Ÿè½½é—´çš„å¹²æ‰°å’Œæœ€åæ—¶é™ã€‚</p><h4 id="kube-controller-manager"><a href="#kube-controller-manager" class="headerlink" title="kube-controller-manager"></a>kube-controller-manager<a href="#kube-controller-manager"></a></h4><p>åœ¨ä¸»èŠ‚ç‚¹ä¸Šè¿è¡Œ <a href="/zh/docs/concepts/architecture/controller/">æ§åˆ¶å™¨</a> çš„ç»„ä»¶ã€‚</p><p>ä»é€»è¾‘ä¸Šè®²ï¼Œæ¯ä¸ª<a href="/zh/docs/concepts/architecture/controller/">æ§åˆ¶å™¨</a>éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹ï¼Œ ä½†æ˜¯ä¸ºäº†é™ä½å¤æ‚æ€§ï¼Œå®ƒä»¬éƒ½è¢«ç¼–è¯‘åˆ°åŒä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­è¿è¡Œã€‚</p><p>è¿™äº›æ§åˆ¶å™¨åŒ…æ‹¬:</p><ul><li>  èŠ‚ç‚¹æ§åˆ¶å™¨ï¼ˆNode Controllerï¼‰: è´Ÿè´£åœ¨èŠ‚ç‚¹å‡ºç°æ•…éšœæ—¶è¿›è¡Œé€šçŸ¥å’Œå“åº”ã€‚</li><li>  å‰¯æœ¬æ§åˆ¶å™¨ï¼ˆReplication Controllerï¼‰: è´Ÿè´£ä¸ºç³»ç»Ÿä¸­çš„æ¯ä¸ªå‰¯æœ¬æ§åˆ¶å™¨å¯¹è±¡ç»´æŠ¤æ­£ç¡®æ•°é‡çš„ Podã€‚</li><li>  ç«¯ç‚¹æ§åˆ¶å™¨ï¼ˆEndpoints Controllerï¼‰: å¡«å……ç«¯ç‚¹(Endpoints)å¯¹è±¡(å³åŠ å…¥ Service ä¸ Pod)ã€‚</li><li>  æœåŠ¡å¸æˆ·å’Œä»¤ç‰Œæ§åˆ¶å™¨ï¼ˆService Account &amp; Token Controllersï¼‰: ä¸ºæ–°çš„å‘½åç©ºé—´åˆ›å»ºé»˜è®¤å¸æˆ·å’Œ API è®¿é—®ä»¤ç‰Œ.</li></ul><h4 id="cloud-controller-manager"><a href="#cloud-controller-manager" class="headerlink" title="cloud-controller-manager"></a>cloud-controller-manager<a href="#cloud-controller-manager"></a></h4><p>äº‘æ§åˆ¶å™¨ç®¡ç†å™¨æ˜¯æŒ‡åµŒå…¥ç‰¹å®šäº‘çš„æ§åˆ¶é€»è¾‘çš„ <a href="/zh/docs/reference/glossary/?all=true#term-control-plane">æ§åˆ¶å¹³é¢</a>ç»„ä»¶ã€‚ äº‘æ§åˆ¶å™¨ç®¡ç†å™¨å…è®¸æ‚¨é“¾æ¥èšåˆåˆ°äº‘æä¾›å•†çš„åº”ç”¨ç¼–ç¨‹æ¥å£ä¸­ï¼Œ å¹¶åˆ†ç¦»å‡ºç›¸äº’ä½œç”¨çš„ç»„ä»¶ä¸æ‚¨çš„é›†ç¾¤äº¤äº’çš„ç»„ä»¶ã€‚</p><p><code>cloud-controller-manager</code> ä»…è¿è¡Œç‰¹å®šäºäº‘å¹³å°çš„æ§åˆ¶å›è·¯ã€‚ å¦‚æœä½ åœ¨è‡ªå·±çš„ç¯å¢ƒä¸­è¿è¡Œ Kubernetesï¼Œæˆ–è€…åœ¨æœ¬åœ°è®¡ç®—æœºä¸­è¿è¡Œå­¦ä¹ ç¯å¢ƒï¼Œ æ‰€éƒ¨ç½²çš„ç¯å¢ƒä¸­ä¸éœ€è¦äº‘æ§åˆ¶å™¨ç®¡ç†å™¨ã€‚</p><p>ä¸ <code>kube-controller-manager</code> ç±»ä¼¼ï¼Œ <code>cloud-controller-manager</code> å°†è‹¥å¹²é€»è¾‘ä¸Šç‹¬ç«‹çš„ æ§åˆ¶å›è·¯ç»„åˆåˆ°åŒä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œä¾›ä½ ä»¥åŒä¸€è¿›ç¨‹çš„æ–¹å¼è¿è¡Œã€‚ ä½ å¯ä»¥å¯¹å…¶æ‰§è¡Œæ°´å¹³æ‰©å®¹ï¼ˆè¿è¡Œä¸æ­¢ä¸€ä¸ªå‰¯æœ¬ï¼‰ä»¥æå‡æ€§èƒ½æˆ–è€…å¢å¼ºå®¹é”™èƒ½åŠ›ã€‚</p><p>ä¸‹é¢çš„æ§åˆ¶å™¨éƒ½åŒ…å«å¯¹äº‘å¹³å°é©±åŠ¨çš„ä¾èµ–ï¼š</p><ul><li>  èŠ‚ç‚¹æ§åˆ¶å™¨ï¼ˆNode Controllerï¼‰: ç”¨äºåœ¨èŠ‚ç‚¹ç»ˆæ­¢å“åº”åæ£€æŸ¥äº‘æä¾›å•†ä»¥ç¡®å®šèŠ‚ç‚¹æ˜¯å¦å·²è¢«åˆ é™¤</li><li>  è·¯ç”±æ§åˆ¶å™¨ï¼ˆRoute Controllerï¼‰: ç”¨äºåœ¨åº•å±‚äº‘åŸºç¡€æ¶æ„ä¸­è®¾ç½®è·¯ç”±</li><li>  æœåŠ¡æ§åˆ¶å™¨ï¼ˆService Controllerï¼‰: ç”¨äºåˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤äº‘æä¾›å•†è´Ÿè½½å‡è¡¡å™¨</li></ul><h3 id="Node-ç»„ä»¶"><a href="#Node-ç»„ä»¶" class="headerlink" title="Node ç»„ä»¶"></a>Node ç»„ä»¶<a href="#node-components"></a></h3><p>èŠ‚ç‚¹ç»„ä»¶åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œç»´æŠ¤è¿è¡Œçš„ Pod å¹¶æä¾› Kubernetes è¿è¡Œç¯å¢ƒã€‚</p><h4 id="kubelet"><a href="#kubelet" class="headerlink" title="kubelet"></a>kubelet<a href="#kubelet"></a></h4><p>ä¸€ä¸ªåœ¨é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œçš„ä»£ç†ã€‚å®ƒä¿è¯å®¹å™¨éƒ½è¿è¡Œåœ¨ Pod ä¸­ã€‚</p><p>kubelet æ¥æ”¶ä¸€ç»„é€šè¿‡å„ç±»æœºåˆ¶æä¾›ç»™å®ƒçš„ PodSpecsï¼Œç¡®ä¿è¿™äº› PodSpecs ä¸­æè¿°çš„å®¹å™¨å¤„äºè¿è¡ŒçŠ¶æ€ä¸”å¥åº·ã€‚kubelet ä¸ä¼šç®¡ç†ä¸æ˜¯ç”± Kubernetes åˆ›å»ºçš„å®¹å™¨ã€‚</p><h4 id="kube-proxy"><a href="#kube-proxy" class="headerlink" title="kube-proxy"></a>kube-proxy<a href="#kube-proxy"></a></h4><p><a href="/zh/docs/reference/command-line-tools-reference/kube-proxy/">kube-proxy</a> æ˜¯é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œçš„ç½‘ç»œä»£ç†ï¼Œ å®ç° Kubernetes <a href="/zh/docs/concepts/services-networking/service/">æœåŠ¡ï¼ˆServiceï¼‰</a> æ¦‚å¿µçš„ä¸€éƒ¨åˆ†ã€‚</p><p>kube-proxy ç»´æŠ¤èŠ‚ç‚¹ä¸Šçš„ç½‘ç»œè§„åˆ™ã€‚è¿™äº›ç½‘ç»œè§„åˆ™å…è®¸ä»é›†ç¾¤å†…éƒ¨æˆ–å¤–éƒ¨çš„ç½‘ç»œä¼šè¯ä¸ Pod è¿›è¡Œç½‘ç»œé€šä¿¡ã€‚</p><p>å¦‚æœæ“ä½œç³»ç»Ÿæä¾›äº†æ•°æ®åŒ…è¿‡æ»¤å±‚å¹¶å¯ç”¨çš„è¯ï¼Œkube-proxy ä¼šé€šè¿‡å®ƒæ¥å®ç°ç½‘ç»œè§„åˆ™ã€‚å¦åˆ™ï¼Œ kube-proxy ä»…è½¬å‘æµé‡æœ¬èº«ã€‚</p><h4 id="å®¹å™¨è¿è¡Œæ—¶ï¼ˆContainer-Runtimeï¼‰"><a href="#å®¹å™¨è¿è¡Œæ—¶ï¼ˆContainer-Runtimeï¼‰" class="headerlink" title="å®¹å™¨è¿è¡Œæ—¶ï¼ˆContainer Runtimeï¼‰"></a>å®¹å™¨è¿è¡Œæ—¶ï¼ˆContainer Runtimeï¼‰<a href="#container-runtime"></a></h4><p>å®¹å™¨è¿è¡Œç¯å¢ƒæ˜¯è´Ÿè´£è¿è¡Œå®¹å™¨çš„è½¯ä»¶ã€‚</p><p>Kubernetes æ”¯æŒå¤šä¸ªå®¹å™¨è¿è¡Œç¯å¢ƒ: <a href="/zh/docs/reference/kubectl/docker-cli-to-kubectl/">Docker</a>ã€ <a href="https://containerd.io/docs/">containerd</a>ã€<a href="https://cri-o.io/#what-is-cri-o">CRI-O</a> ä»¥åŠä»»ä½•å®ç° <a href="https://github.com/kubernetes/community/blob/master/contributors/devel/sig-node/container-runtime-interface.md">Kubernetes CRI (å®¹å™¨è¿è¡Œç¯å¢ƒæ¥å£)</a>ã€‚</p><h3 id="æ’ä»¶ï¼ˆAddonsï¼‰"><a href="#æ’ä»¶ï¼ˆAddonsï¼‰" class="headerlink" title="æ’ä»¶ï¼ˆAddonsï¼‰"></a>æ’ä»¶ï¼ˆAddonsï¼‰<a href="#addons"></a></h3><p>æ’ä»¶ä½¿ç”¨ Kubernetes èµ„æºï¼ˆ<a href="/zh/docs/concepts/workloads/controllers/daemonset/">DaemonSet</a>ã€ <a href="/zh/docs/concepts/workloads/controllers/deployment/">Deployment</a>ç­‰ï¼‰å®ç°é›†ç¾¤åŠŸèƒ½ã€‚ å› ä¸ºè¿™äº›æ’ä»¶æä¾›é›†ç¾¤çº§åˆ«çš„åŠŸèƒ½ï¼Œæ’ä»¶ä¸­å‘½åç©ºé—´åŸŸçš„èµ„æºå±äº <code>kube-system</code> å‘½åç©ºé—´ã€‚</p><p>ä¸‹é¢æè¿°ä¼—å¤šæ’ä»¶ä¸­çš„å‡ ç§ã€‚æœ‰å…³å¯ç”¨æ’ä»¶çš„å®Œæ•´åˆ—è¡¨ï¼Œè¯·å‚è§ <a href="/zh/docs/concepts/cluster-administration/addons/">æ’ä»¶ï¼ˆAddonsï¼‰</a>ã€‚</p><h4 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS<a href="#dns"></a></h4><p>å°½ç®¡å…¶ä»–æ’ä»¶éƒ½å¹¶éä¸¥æ ¼æ„ä¹‰ä¸Šçš„å¿…éœ€ç»„ä»¶ï¼Œä½†å‡ ä¹æ‰€æœ‰ Kubernetes é›†ç¾¤éƒ½åº”è¯¥ æœ‰<a href="/zh/docs/concepts/services-networking/dns-pod-service/">é›†ç¾¤ DNS</a>ï¼Œ å› ä¸ºå¾ˆå¤šç¤ºä¾‹éƒ½éœ€è¦ DNS æœåŠ¡ã€‚</p><p>é›†ç¾¤ DNS æ˜¯ä¸€ä¸ª DNS æœåŠ¡å™¨ï¼Œå’Œç¯å¢ƒä¸­çš„å…¶ä»– DNS æœåŠ¡å™¨ä¸€èµ·å·¥ä½œï¼Œå®ƒä¸º Kubernetes æœåŠ¡æä¾› DNS è®°å½•ã€‚</p><p>Kubernetes å¯åŠ¨çš„å®¹å™¨è‡ªåŠ¨å°†æ­¤ DNS æœåŠ¡å™¨åŒ…å«åœ¨å…¶ DNS æœç´¢åˆ—è¡¨ä¸­ã€‚</p><h4 id="Web-ç•Œé¢ï¼ˆä»ªè¡¨ç›˜ï¼‰"><a href="#Web-ç•Œé¢ï¼ˆä»ªè¡¨ç›˜ï¼‰" class="headerlink" title="Web ç•Œé¢ï¼ˆä»ªè¡¨ç›˜ï¼‰"></a>Web ç•Œé¢ï¼ˆä»ªè¡¨ç›˜ï¼‰<a href="#web-%E7%95%8C%E9%9D%A2-%E4%BB%AA%E8%A1%A8%E7%9B%98"></a></h4><p><a href="/zh/docs/tasks/access-application-cluster/web-ui-dashboard/">Dashboard</a> æ˜¯Kubernetes é›†ç¾¤çš„é€šç”¨çš„ã€åŸºäº Web çš„ç”¨æˆ·ç•Œé¢ã€‚ å®ƒä½¿ç”¨æˆ·å¯ä»¥ç®¡ç†é›†ç¾¤ä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºä»¥åŠé›†ç¾¤æœ¬èº«å¹¶è¿›è¡Œæ•…éšœæ’é™¤ã€‚</p><h4 id="å®¹å™¨èµ„æºç›‘æ§"><a href="#å®¹å™¨èµ„æºç›‘æ§" class="headerlink" title="å®¹å™¨èµ„æºç›‘æ§"></a>å®¹å™¨èµ„æºç›‘æ§<a href="#%E5%AE%B9%E5%99%A8%E8%B5%84%E6%BA%90%E7%9B%91%E6%8E%A7"></a></h4><p><a href="/zh/docs/tasks/debug-application-cluster/resource-usage-monitoring/">å®¹å™¨èµ„æºç›‘æ§</a> å°†å…³äºå®¹å™¨çš„ä¸€äº›å¸¸è§çš„æ—¶é—´åºåˆ—åº¦é‡å€¼ä¿å­˜åˆ°ä¸€ä¸ªé›†ä¸­çš„æ•°æ®åº“ä¸­ï¼Œå¹¶æä¾›ç”¨äºæµè§ˆè¿™äº›æ•°æ®çš„ç•Œé¢ã€‚</p><h4 id="é›†ç¾¤å±‚é¢æ—¥å¿—"><a href="#é›†ç¾¤å±‚é¢æ—¥å¿—" class="headerlink" title="é›†ç¾¤å±‚é¢æ—¥å¿—"></a>é›†ç¾¤å±‚é¢æ—¥å¿—<a href="#%E9%9B%86%E7%BE%A4%E5%B1%82%E9%9D%A2%E6%97%A5%E5%BF%97"></a></h4><p><a href="/zh/docs/concepts/cluster-administration/logging/">é›†ç¾¤å±‚é¢æ—¥å¿—</a> æœºåˆ¶è´Ÿè´£å°†å®¹å™¨çš„æ—¥å¿—æ•°æ® ä¿å­˜åˆ°ä¸€ä¸ªé›†ä¸­çš„æ—¥å¿—å­˜å‚¨ä¸­ï¼Œè¯¥å­˜å‚¨èƒ½å¤Ÿæä¾›æœç´¢å’Œæµè§ˆæ¥å£ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> k8s </category>
          
      </categories>
      
      
        <tags>
            
            <tag> k8s </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ƒå¼ å›¾äº†è§£k8så†…éƒ¨çš„æ¶æ„</title>
      <link href="/My-Blogs/2021/01/08/k8s/%E4%B8%83%E5%BC%A0%E5%9B%BE%E4%BA%86%E8%A7%A3k8s%E5%86%85%E9%83%A8%E7%9A%84%E6%9E%B6%E6%9E%84/"/>
      <url>/My-Blogs/2021/01/08/k8s/%E4%B8%83%E5%BC%A0%E5%9B%BE%E4%BA%86%E8%A7%A3k8s%E5%86%85%E9%83%A8%E7%9A%84%E6%9E%B6%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<p>ä¸ƒå¼ å›¾ï¼Œå¸¦ä½ èµ°è¿›k8sçš„ä¸–ç•Œ</p><a id="more"></a><h3 id="Kubernetesæ¶æ„å’Œç»„æˆ"><a href="#Kubernetesæ¶æ„å’Œç»„æˆ" class="headerlink" title="Kubernetesæ¶æ„å’Œç»„æˆ"></a>Kubernetesæ¶æ„å’Œç»„æˆ</h3><p><code>Kubernetes</code> å…·æœ‰å»ä¸­å¿ƒåŒ–çš„æ¶æ„ï¼Œä¸ä¼šçº¿æ€§å¤„ç†ä»»åŠ¡ã€‚å®ƒåŸºäºå£°æ˜æ€§æ¨¡å‹è¿è¡Œå¹¶å®ç°â€æ‰€éœ€çŠ¶æ€â€çš„æ¦‚å¿µã€‚ä¸‹é¢è¿™äº›æ­¥éª¤è¯´æ˜äº† <code>Kubernetes</code> çš„åŸºæœ¬è¿‡ç¨‹:</p><ul><li>ç®¡ç†å‘˜åˆ›å»ºåº”ç”¨ç¨‹åºçš„æ‰€éœ€çŠ¶æ€å¹¶å°†å…¶æ”¾å…¥æ¸…å•æ–‡ä»¶manifest.ymlä¸­ã€‚</li><li>ä½¿ç”¨CLIæˆ–æä¾›çš„ç”¨æˆ·ç•Œé¢å°†æ¸…å•æ–‡ä»¶æä¾›ç»™ <code>Kubernetes API Server</code>ã€‚ <code>Kubernetes</code>çš„é»˜è®¤å‘½ä»¤è¡Œå·¥å…·ç§°ä¸ºkubectlã€‚</li><li><code>Kubernetes</code>å°†æ¸…å•æ–‡ä»¶ï¼ˆæè¿°äº†åº”ç”¨ç¨‹åºçš„æœŸæœ›çŠ¶æ€ï¼‰å­˜å‚¨åœ¨ç§°ä¸ºé”®å€¼å­˜å‚¨ï¼ˆetcdï¼‰çš„æ•°æ®åº“ä¸­ã€‚</li><li><code>Kubernetes</code>éšååœ¨é›†ç¾¤å†…çš„æ‰€æœ‰ç›¸å…³åº”ç”¨ç¨‹åºä¸Šå®ç°æ‰€éœ€çš„çŠ¶æ€ã€‚</li><li><code>Kubernetes</code>æŒç»­ç›‘æ§é›†ç¾¤çš„å…ƒç´ ï¼Œä»¥ç¡®ä¿åº”ç”¨ç¨‹åºçš„å½“å‰çŠ¶æ€ä¸ä¼šä¸æ‰€éœ€çŠ¶æ€æœ‰æ‰€ä¸åŒã€‚</li></ul><p><img src="/My-Blogs/images/%E4%B8%83%E5%BC%A0%E5%9B%BE%E4%BA%86%E8%A7%A3k8s%E5%86%85%E9%83%A8%E7%9A%84%E6%9E%B6%E6%9E%84-01.png" alt="image"></p><h3 id="ä¸»èŠ‚ç‚¹"><a href="#ä¸»èŠ‚ç‚¹" class="headerlink" title="ä¸»èŠ‚ç‚¹"></a>ä¸»èŠ‚ç‚¹</h3><p><code>Kubernetes</code> çš„ä¸»èŠ‚ç‚¹é€šè¿‡APIä»CLIï¼ˆå‘½ä»¤è¡Œç•Œé¢ï¼‰æˆ–UIï¼ˆç”¨æˆ·ç•Œé¢ï¼‰æ¥æ”¶è¾“å…¥ã€‚è¿™äº›æ˜¯ä½ æä¾›ç»™ <code>Kubernetes</code> çš„å‘½ä»¤ã€‚</p><p>ä½ å¯ä»¥å®šä¹‰æƒ³è¦è®© <code>Kubernetes</code> ç»´æŠ¤çš„Podï¼Œå‰¯æœ¬é›†å’ŒServiceã€‚ä¾‹å¦‚ï¼Œè¦ä½¿ç”¨çš„å®¹å™¨é•œåƒï¼Œè¦å…¬å¼€çš„ç«¯å£ä»¥åŠè¦è¿è¡Œçš„Podå‰¯æœ¬æ•°é‡ã€‚è¿˜å¯ä»¥ä¸ºè¯¥é›†ç¾¤ä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºæä¾›â€æ‰€éœ€çŠ¶æ€â€çš„å‚æ•°ã€‚</p><p><img src="/My-Blogs/images/%E4%B8%83%E5%BC%A0%E5%9B%BE%E4%BA%86%E8%A7%A3k8s%E5%86%85%E9%83%A8%E7%9A%84%E6%9E%B6%E6%9E%84-02.png" alt="image"></p><h4 id="API-Server"><a href="#API-Server" class="headerlink" title="API Server"></a>API Server</h4><p>API Serveræ˜¯Kubernetesæ§åˆ¶ç¨‹åºçš„å‰ç«¯ï¼Œä¹Ÿæ˜¯ç”¨æˆ·å”¯ä¸€å¯ä»¥ç›´æ¥è¿›è¡Œäº¤äº’çš„Kubernetesç»„ä»¶ï¼Œå†…éƒ¨ç³»ç»Ÿç»„ä»¶ä»¥åŠå¤–éƒ¨ç”¨æˆ·ç»„ä»¶å‡é€šè¿‡ç›¸åŒçš„APIè¿›è¡Œé€šä¿¡ã€‚</p><h4 id="é”®å€¼å­˜å‚¨etcd"><a href="#é”®å€¼å­˜å‚¨etcd" class="headerlink" title="é”®å€¼å­˜å‚¨etcd"></a>é”®å€¼å­˜å‚¨etcd</h4><p>é”®å€¼å­˜å‚¨ï¼ˆä¹Ÿç§°ä¸ºetcdï¼‰æ˜¯Kubernetesç”¨æ¥å¤‡ä»½æ‰€æœ‰é›†ç¾¤æ•°æ®çš„æ•°æ®åº“ã€‚å®ƒå­˜å‚¨é›†ç¾¤çš„æ•´ä¸ªé…ç½®å’ŒçŠ¶æ€ã€‚ä¸»èŠ‚ç‚¹æŸ¥è¯¢etcdä»¥æ£€ç´¢èŠ‚ç‚¹ï¼Œå®¹å™¨å’Œå®¹å™¨çš„çŠ¶æ€å‚æ•°ã€‚</p><h4 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h4><p>æ§åˆ¶å™¨çš„ä½œç”¨æ˜¯ä»API Serverè·å¾—æ‰€éœ€çŠ¶æ€ã€‚å®ƒæ£€æŸ¥è¦æ§åˆ¶çš„èŠ‚ç‚¹çš„å½“å‰çŠ¶æ€ï¼Œç¡®å®šæ˜¯å¦ä¸æ‰€éœ€çŠ¶æ€å­˜åœ¨ä»»ä½•å·®å¼‚ï¼Œå¹¶è§£å†³å®ƒä»¬ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚</p><h4 id="Scheduler"><a href="#Scheduler" class="headerlink" title="Scheduler"></a>Scheduler</h4><p>è°ƒåº¦ç¨‹åºä¼šç›‘è§†æ¥è‡ªAPI Serverçš„æ–°è¯·æ±‚ï¼Œå¹¶å°†å…¶åˆ†é…ç»™è¿è¡ŒçŠ¶å†µè‰¯å¥½çš„èŠ‚ç‚¹ã€‚å®ƒå¯¹èŠ‚ç‚¹çš„è´¨é‡è¿›è¡Œæ’åï¼Œå¹¶å°†Podéƒ¨ç½²åˆ°æœ€é€‚åˆçš„èŠ‚ç‚¹ã€‚å¦‚æœæ²¡æœ‰åˆé€‚çš„èŠ‚ç‚¹ï¼Œåˆ™å°†Podç½®äºæŒ‚èµ·çŠ¶æ€ï¼Œç›´åˆ°å‡ºç°åˆé€‚çš„èŠ‚ç‚¹ã€‚</p><blockquote><p>æ³¨æ„ï¼šæœ€å¥½ä¸è¦åœ¨ä¸»èŠ‚ç‚¹ä¸Šè¿è¡Œç”¨æˆ·åº”ç”¨ç¨‹åºã€‚è®©Kubernetesä¸»èŠ‚ç‚¹å¯ä»¥å®Œå…¨ä¸“æ³¨äºç®¡ç†é›†ç¾¤ã€‚</p></blockquote><h3 id="å·¥ä½œèŠ‚ç‚¹"><a href="#å·¥ä½œèŠ‚ç‚¹" class="headerlink" title="å·¥ä½œèŠ‚ç‚¹"></a>å·¥ä½œèŠ‚ç‚¹</h3><p>å·¥ä½œèŠ‚ç‚¹ç›‘å¬API Serverå‘é€è¿‡æ¥çš„æ–°çš„å·¥ä½œåˆ†é…ï¼›ä»–ä»¬ä¼šæ‰§è¡Œåˆ†é…ç»™ä»–ä»¬çš„å·¥ä½œï¼Œç„¶åå°†ç»“æœæŠ¥å‘Šç»™Kubernetesä¸»èŠ‚ç‚¹ã€‚</p><p><img src="/My-Blogs/images/%E4%B8%83%E5%BC%A0%E5%9B%BE%E4%BA%86%E8%A7%A3k8s%E5%86%85%E9%83%A8%E7%9A%84%E6%9E%B6%E6%9E%84-03.png" alt="image"></p><h4 id="Kubelet"><a href="#Kubelet" class="headerlink" title="Kubelet"></a>Kubelet</h4><p>kubeletåœ¨ç¾¤é›†ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œã€‚å®ƒæ˜¯Kuberneteså†…éƒ¨çš„ä¸»è¦ä»£ç†ã€‚é€šè¿‡å®‰è£…kubeletï¼ŒèŠ‚ç‚¹çš„CPUï¼ŒRAMå’Œå­˜å‚¨æˆä¸ºæ‰€å¤„é›†ç¾¤çš„ä¸€éƒ¨åˆ†ã€‚å®ƒç›‘è§†ä»API Serverå‘é€æ¥çš„ä»»åŠ¡ï¼Œæ‰§è¡Œä»»åŠ¡ï¼Œå¹¶æŠ¥å‘Šç»™ä¸»èŠ‚ç‚¹ã€‚å®ƒè¿˜ä¼šç›‘è§†Podï¼Œå¦‚æœPodä¸èƒ½å®Œå…¨æ­£å¸¸è¿è¡Œï¼Œåˆ™ä¼šå‘æ§åˆ¶ç¨‹åºæŠ¥å‘Šã€‚ç„¶åï¼ŒåŸºäºè¯¥ä¿¡æ¯ï¼Œä¸»æœåŠ¡å™¨å¯ä»¥å†³å®šå¦‚ä½•åˆ†é…ä»»åŠ¡å’Œèµ„æºä»¥è¾¾åˆ°æ‰€éœ€çŠ¶æ€ã€‚</p><h4 id="Container-Runtime"><a href="#Container-Runtime" class="headerlink" title="Container Runtime"></a>Container Runtime</h4><p>å®¹å™¨è¿è¡Œæ—¶ä»å®¹å™¨é•œåƒåº“ä¸­æ‹‰å–é•œåƒï¼Œç„¶åå¯åŠ¨å’Œåœæ­¢å®¹å™¨ã€‚å®¹å™¨è¿è¡Œæ—¶ç”±ç¬¬ä¸‰æ–¹è½¯ä»¶æˆ–æ’ä»¶ï¼ˆä¾‹å¦‚Dockerï¼‰æ‹…å½“ã€‚</p><h4 id="Kube-proxy"><a href="#Kube-proxy" class="headerlink" title="Kube-proxy"></a>Kube-proxy</h4><p>kube-proxyç¡®ä¿æ¯ä¸ªèŠ‚ç‚¹éƒ½è·å¾—å…¶IPåœ°å€ï¼Œå®ç°æœ¬åœ°iptableså’Œè§„åˆ™ä»¥å¤„ç†è·¯ç”±å’Œæµé‡è´Ÿè½½å‡è¡¡ã€‚</p><h4 id="Pod"><a href="#Pod" class="headerlink" title="Pod"></a>Pod</h4><p>åœ¨Kubernetesä¸­ï¼ŒPodæ˜¯è°ƒåº¦çš„æœ€å°å…ƒç´ ã€‚æ²¡æœ‰å®ƒï¼Œå®¹å™¨å°±ä¸èƒ½æˆä¸ºé›†ç¾¤çš„ä¸€éƒ¨åˆ†ã€‚å¦‚æœä½ éœ€è¦æ‰©å±•åº”ç”¨ç¨‹åºï¼Œåˆ™åªèƒ½é€šè¿‡æ·»åŠ æˆ–åˆ é™¤Podæ¥å®ç°ã€‚</p><p>Podæ˜¯Kubernetesä¸­ä¸€ä¸ªæŠ½è±¡åŒ–æ¦‚å¿µï¼Œç”±ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ç»„åˆåœ¨ä¸€èµ·å¾—å…±äº«èµ„æºã€‚æ ¹æ®èµ„æºçš„å¯ç”¨æ€§ï¼Œä¸»èŠ‚ç‚¹ä¼šæŠŠPodè°ƒåº¦åˆ°ç‰¹å®šå·¥ä½œèŠ‚ç‚¹ä¸Šï¼Œå¹¶ä¸å®¹å™¨è¿è¡Œæ—¶åè°ƒä»¥å¯åŠ¨å®¹å™¨ã€‚</p><p><img src="/My-Blogs/images/%E4%B8%83%E5%BC%A0%E5%9B%BE%E4%BA%86%E8%A7%A3k8s%E5%86%85%E9%83%A8%E7%9A%84%E6%9E%B6%E6%9E%84-04.png" alt="image"></p><p>åœ¨Podæ„å¤–æ— æ³•æ‰§è¡Œä»»åŠ¡çš„æƒ…å†µä¸‹ï¼ŒKubernetesä¸ä¼šå°è¯•ä¿®å¤å®ƒä»¬ã€‚ç›¸åï¼Œå®ƒä¼šåœ¨å…¶ä½ç½®åˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªæ–°Podã€‚è¿™ä¸ªæ–°Podæ˜¯åŸæ¥çš„å‰¯æœ¬ï¼Œé™¤äº†DNSå’ŒIPåœ°å€éƒ½å’Œä»¥å‰çš„Podä¸€æ ·ã€‚æ­¤åŠŸèƒ½å¯¹å¼€å‘äººå‘˜è®¾è®¡åº”ç”¨ç¨‹åºçš„æ–¹å¼äº§ç”Ÿäº†æ·±è¿œçš„å½±å“ã€‚</p><p>ç”±äºKubernetesæ¶æ„çš„çµæ´»æ€§ï¼Œä¸å†éœ€è¦å°†åº”ç”¨ç¨‹åºç»‘å®šåˆ°Podçš„ç‰¹å®šå®ä¾‹ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œéœ€è¦å¯¹åº”ç”¨ç¨‹åºè¿›è¡Œè®¾è®¡ï¼Œä»¥ä¾¿åœ¨é›†ç¾¤å†…ä»»ä½•ä½ç½®åˆ›å»ºçš„å…¨æ–°Podå¯ä»¥æ— ç¼å–ä»£æ—§Podã€‚Kubernetesä¼šä½¿ç”¨Serviceæ¥ååŠ©æ­¤è¿‡ç¨‹ã€‚</p><h3 id="Kubernetes-Service"><a href="#Kubernetes-Service" class="headerlink" title="Kubernetes Service"></a>Kubernetes Service</h3><p>Podä¸æ˜¯æ’å®šçš„ã€‚ Kubernetesæä¾›çš„æœ€ä½³åŠŸèƒ½ä¹‹ä¸€æ˜¯æ— æ³•æ­£å¸¸è¿è¡Œçš„Podä¼šè‡ªåŠ¨è¢«æ–°çš„Podå–ä»£ã€‚</p><p>ä½†æ˜¯ï¼Œè¿™äº›æ–°çš„Podå…·æœ‰ä¸€ç»„ä¸åŒçš„IPã€‚è¿™å¯èƒ½å¯¼è‡´å¤„ç†é—®é¢˜ï¼Œå¹¶ä¸”ç”±äºIPä¸å†åŒ¹é…ï¼ŒIPæµå¤±ã€‚å¦‚æœæ— äººçœ‹ç®¡ï¼Œæ­¤å±æ€§å°†ä½¿åŠèˆ±é«˜åº¦ä¸å¯é ã€‚</p><p>ä¸ºäº†å°†ç¨³å®šçš„IPåœ°å€å’ŒDNSåç§°å¼•å…¥åˆ°ä¸ç¨³å®šçš„Podä¸–ç•Œä¸­ï¼ŒKuberneteså¼•å…¥äº†Serviceæ¥æä¾›å¯é çš„ç½‘ç»œè¿æ¥ã€‚</p><p>é€šè¿‡æ§åˆ¶è¿›å‡ºPodçš„æµé‡ï¼ŒServiceæä¾›äº†ç¨³å®šçš„ç½‘ç»œç»ˆç»“ç‚¹-å›ºå®šçš„IPï¼ŒDNSå’Œç«¯å£ã€‚æœ‰äº†Serviceï¼Œå¯ä»¥æ·»åŠ æˆ–åˆ é™¤ä»»ä½•Podï¼Œè€Œä¸å¿…æ‹…å¿ƒåŸºæœ¬ç½‘ç»œä¿¡æ¯ä¼šæ”¹å˜ã€‚</p><h4 id="Serviceæ˜¯æ€ä¹ˆå·¥ä½œçš„"><a href="#Serviceæ˜¯æ€ä¹ˆå·¥ä½œçš„" class="headerlink" title="Serviceæ˜¯æ€ä¹ˆå·¥ä½œçš„"></a>Serviceæ˜¯æ€ä¹ˆå·¥ä½œçš„</h4><p>Podé€šè¿‡ç§°ä¸ºæ ‡ç­¾ï¼ˆLabelï¼‰å’Œé€‰æ‹©å™¨ï¼ˆSelectorï¼‰çš„é”®å€¼å¯¹ä¸Serviceç›¸å…³è”ã€‚Serviceä¼šè‡ªåŠ¨å‘ç°å¸¦æœ‰ä¸é€‰æ‹©å™¨åŒ¹é…çš„æ ‡ç­¾çš„æ–°Podã€‚</p><p>æ­¤è¿‡ç¨‹æ— ç¼åœ°å°†æ–°çš„Podæ·»åŠ åˆ°Serviceï¼ŒåŒæ—¶ï¼Œä»ç¾¤é›†ä¸­åˆ é™¤å·²ç»ˆæ­¢çš„Podã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœæ‰€éœ€çŠ¶æ€å®šä¹‰äº†éœ€è¦ä¸€ä¸ªPodçš„ä¸‰ä¸ªå‰¯æœ¬ï¼Œè€Œè¿è¡Œä¸€ä¸ªå‰¯æœ¬çš„èŠ‚ç‚¹å‘ç”Ÿæ•…éšœï¼Œåˆ™å½“å‰çŠ¶æ€å°†å‡å°‘ä¸ºä¸¤ä¸ªPodã€‚Kubernetesè§‚å¯Ÿåˆ°æ‰€éœ€çš„çŠ¶æ€æ˜¯ä¸‰ä¸ªPodã€‚ç„¶åï¼Œå®ƒä¼šè°ƒåº¦ä¸€ä¸ªæ–°å‰¯æœ¬æ¥ä»£æ›¿å‘ç”Ÿæ•…éšœçš„Podï¼Œå¹¶å°†å…¶åˆ†é…ç»™é›†ç¾¤ä¸­çš„å¦ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p><p>é€šè¿‡æ·»åŠ æˆ–åˆ é™¤å®¹å™¨æ¥æ›´æ–°æˆ–ç¼©æ”¾åº”ç”¨ç¨‹åºæ—¶ï¼ŒåŒæ ·é€‚ç”¨ã€‚ä¸€æ—¦æˆ‘ä»¬æ›´æ–°äº†æ‰€éœ€çŠ¶æ€çš„å®šä¹‰ï¼ŒKuberneteså°±ä¼šæ³¨æ„åˆ°å·®å¼‚å¹¶æ·»åŠ æˆ–åˆ é™¤Podä»¥åŒ¹é…æ¸…å•æ–‡ä»¶manifest.ymlé‡Œå®šä¹‰çš„æ‰€éœ€çŠ¶æ€ã€‚Kubernetesæ§åˆ¶é¢æ¿è®°å½•ï¼Œå®ç°å’Œè¿è¡Œåå°åè°ƒå¾ªç¯ï¼Œè¯¥å¾ªç¯ä¼šä¸æ–­æ£€æŸ¥ç¯å¢ƒæ˜¯å¦ç¬¦åˆç”¨æˆ·å®šä¹‰çš„ç¯å¢ƒè¦æ±‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p><img src="/My-Blogs/images/%E4%B8%83%E5%BC%A0%E5%9B%BE%E4%BA%86%E8%A7%A3k8s%E5%86%85%E9%83%A8%E7%9A%84%E6%9E%B6%E6%9E%84-05.svg" alt="image"></p>]]></content>
      
      
      <categories>
          
          <category> k8s </category>
          
      </categories>
      
      
        <tags>
            
            <tag> k8s </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>èŠèŠå‰ç«¯å¤§æ–‡ä»¶ä¸Šä¼ </title>
      <link href="/My-Blogs/2021/01/08/JavaScript/%E8%81%8A%E8%81%8A%E5%89%8D%E7%AB%AF%E5%A4%A7%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"/>
      <url>/My-Blogs/2021/01/08/JavaScript/%E8%81%8A%E8%81%8A%E5%89%8D%E7%AB%AF%E5%A4%A7%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/</url>
      
        <content type="html"><![CDATA[<p>å‰ç«¯æ–‡ä»¶ä¸Šä¼ ä¼¼ä¹æ˜¯ä¸ªè¯´ä¸å®Œçš„è¯é¢˜ï¼Œè®©æˆ‘ä»¬æ¥æ€»ç»“ä¸‹ç›®å‰ä¸»è¦çš„ä¸€äº›ä¸Šä¼ æ–¹å¼å§</p><a id="more"></a><h2 id="æ–‡ä»¶ä¸Šä¼ çš„å‡ ç§æ–¹å¼"><a href="#æ–‡ä»¶ä¸Šä¼ çš„å‡ ç§æ–¹å¼" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ çš„å‡ ç§æ–¹å¼"></a>æ–‡ä»¶ä¸Šä¼ çš„å‡ ç§æ–¹å¼</h2><h3 id="æ™®é€šè¡¨å•ä¸Šä¼ "><a href="#æ™®é€šè¡¨å•ä¸Šä¼ " class="headerlink" title="æ™®é€šè¡¨å•ä¸Šä¼ "></a>æ™®é€šè¡¨å•ä¸Šä¼ </h3><p>ä½¿ç”¨PHPæ¥å±•ç¤ºå¸¸è§„çš„è¡¨å•ä¸Šä¼ æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚é¦–å…ˆæ„å»ºæ–‡ä»¶ä¸Šä¼ çš„è¡¨å•ï¼Œå¹¶æŒ‡å®šè¡¨å•çš„æäº¤å†…å®¹ç±»å‹ä¸ºenctype=â€multipart/form-dataâ€ï¼Œè¡¨æ˜è¡¨å•éœ€è¦ä¸Šä¼ äºŒè¿›åˆ¶æ•°æ®ã€‚</p><pre><code class="HTML">&lt;form action="/index.php" method="POST" enctype="multipart/form-data"&gt;  &lt;input type="file" name="myfile"&gt;  &lt;input type="submit"&gt;&lt;/form&gt;</code></pre><p>ç„¶åç¼–å†™index.phpä¸Šä¼ æ–‡ä»¶æ¥æ”¶ä»£ç ï¼Œä½¿ç”¨move_uploaded_fileæ–¹æ³•å³å¯(phpå¤§æ³•å¥½â€¦)</p><pre><code class="PHP">$imgName = 'IMG'.time().'.'.str_replace('image/','',$_FILES["myfile"]['type']);$fileName =  'upload/'.$imgName;// ç§»åŠ¨ä¸Šä¼ æ–‡ä»¶è‡³æŒ‡å®šuploadæ–‡ä»¶å¤¹ä¸‹ï¼Œå¹¶æ ¹æ®è¿”å›å€¼åˆ¤æ–­æ“ä½œæ˜¯å¦æˆåŠŸif (move_uploaded_file($_FILES['myfile']['tmp_name'], $fileName)){    echo $fileName;}else {    echo "nonn";}</code></pre><p>formè¡¨å•ä¸Šä¼ å¤§æ–‡ä»¶æ—¶ï¼Œå¾ˆå®¹æ˜“é‡è§æœåŠ¡å™¨è¶…æ—¶çš„é—®é¢˜ã€‚é€šè¿‡xhrï¼Œå‰ç«¯ä¹Ÿå¯ä»¥è¿›è¡Œå¼‚æ­¥ä¸Šä¼ æ–‡ä»¶çš„æ“ä½œï¼Œä¸€èˆ¬ç”±ä¸¤ä¸ªæ€è·¯ã€‚</p><h3 id="æ–‡ä»¶ç¼–ç ä¸Šä¼ "><a href="#æ–‡ä»¶ç¼–ç ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ç¼–ç ä¸Šä¼ "></a>æ–‡ä»¶ç¼–ç ä¸Šä¼ </h3><p>ç¬¬ä¸€ä¸ªæ€è·¯æ˜¯å°†æ–‡ä»¶è¿›è¡Œç¼–ç ï¼Œç„¶ååœ¨æœåŠ¡ç«¯è¿›è¡Œè§£ç ï¼Œä¹‹å‰å†™è¿‡ä¸€ç¯‡åœ¨å‰ç«¯å®ç°å›¾ç‰‡å‹ç¼©ä¸Šä¼ çš„åšå®¢ï¼Œå…¶ä¸»è¦å®ç°åŸç†å°±æ˜¯å°†å›¾ç‰‡è½¬æ¢æˆbase64è¿›è¡Œä¼ é€’</p><pre><code class="js">var imgURL = URL.createObjectURL(file);ctx.drawImage(imgURL, 0, 0);// è·å–å›¾ç‰‡çš„ç¼–ç ï¼Œç„¶åå°†å›¾ç‰‡å½“åšæ˜¯ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²è¿›è¡Œä¼ é€’var data = canvas.toDataURL("image/jpeg", 0.5); </code></pre><p>åœ¨æœåŠ¡ç«¯éœ€è¦åšçš„äº‹æƒ…ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œé¦–å…ˆè§£ç base64ï¼Œç„¶åä¿å­˜å›¾ç‰‡å³å¯</p><pre><code class="PHP">$imgData = $_REQUEST['imgData'];$base64 = explode(',', $imgData)[1];$img = base64_decode($base64);$url = './test.jpg';if (file_put_contents($url, $img)) {    exit(json_encode(array(        url =&gt; $url    )));}</code></pre><p>base64ç¼–ç çš„ç¼ºç‚¹åœ¨äºå…¶ä½“ç§¯æ¯”åŸå›¾ç‰‡æ›´å¤§ï¼ˆå› ä¸ºBase64å°†ä¸‰ä¸ªå­—èŠ‚è½¬åŒ–æˆå››ä¸ªå­—èŠ‚ï¼Œå› æ­¤ç¼–ç åçš„æ–‡æœ¬ï¼Œä¼šæ¯”åŸæ–‡æœ¬å¤§å‡ºä¸‰åˆ†ä¹‹ä¸€å·¦å³ï¼‰ï¼Œå¯¹äºä½“ç§¯å¾ˆå¤§çš„æ–‡ä»¶æ¥è¯´ï¼Œä¸Šä¼ å’Œè§£æçš„æ—¶é—´ä¼šæ˜æ˜¾å¢åŠ ã€‚</p><p>æ›´å¤šå…³äºbase64çš„çŸ¥è¯†ï¼Œå¯ä»¥å‚è€ƒBase64ç¬”è®°ã€‚</p><p>é™¤äº†è¿›è¡Œbase64ç¼–ç ï¼Œè¿˜å¯ä»¥åœ¨å‰ç«¯ç›´æ¥è¯»å–æ–‡ä»¶å†…å®¹åä»¥äºŒè¿›åˆ¶æ ¼å¼ä¸Šä¼ </p><pre><code class="JS">// è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶function readBinary(text){   var data = new ArrayBuffer(text.length);   var ui8a = new Uint8Array(data, 0);   for (var i = 0; i &lt; text.length; i++){      ui8a[i] = (text.charCodeAt(i) &amp; 0xff);   }   console.log(ui8a)}var reader = new FileReader();reader.onload = function(){      readBinary(this.result) // è¯»å–resultæˆ–ç›´æ¥ä¸Šä¼ }// æŠŠä»inputé‡Œè¯»å–çš„æ–‡ä»¶å†…å®¹ï¼Œæ”¾åˆ°fileReaderçš„resultå­—æ®µé‡Œreader.readAsBinaryString(file);</code></pre><h3 id="formDataå¼‚æ­¥ä¸Šä¼ "><a href="#formDataå¼‚æ­¥ä¸Šä¼ " class="headerlink" title="formDataå¼‚æ­¥ä¸Šä¼ "></a>formDataå¼‚æ­¥ä¸Šä¼ </h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/FormData/Using_FormData_Objects">FormData</a><br>å¯¹è±¡ä¸»è¦ç”¨æ¥ç»„è£…ä¸€ç»„ç”¨ XMLHttpRequestå‘é€è¯·æ±‚çš„é”®/å€¼å¯¹ï¼Œå¯ä»¥æ›´åŠ çµæ´»åœ°å‘é€Ajaxè¯·æ±‚ã€‚å¯ä»¥ä½¿ç”¨FormDataæ¥æ¨¡æ‹Ÿè¡¨å•æäº¤ã€‚</p><pre><code class="JS">let files = e.target.files // è·å–inputçš„fileå¯¹è±¡let formData = new FormData();formData.append('file', file);axios.post(url, formData);</code></pre><p>æœåŠ¡ç«¯å¤„ç†æ–¹å¼ä¸ç›´æ¥formè¡¨å•è¯·æ±‚åŸºæœ¬ç›¸åŒã€‚</p><h3 id="iframeæ— åˆ·æ–°é¡µé¢"><a href="#iframeæ— åˆ·æ–°é¡µé¢" class="headerlink" title="iframeæ— åˆ·æ–°é¡µé¢"></a>iframeæ— åˆ·æ–°é¡µé¢</h3><p>åœ¨ä½ç‰ˆæœ¬çš„æµè§ˆå™¨ï¼ˆå¦‚IEï¼‰ä¸Šï¼Œxhræ˜¯ä¸æ”¯æŒç›´æ¥ä¸Šä¼ formdataçš„ï¼Œå› æ­¤åªèƒ½ç”¨formæ¥ä¸Šä¼ æ–‡ä»¶ï¼Œè€Œformæäº¤æœ¬èº«ä¼šè¿›è¡Œé¡µé¢è·³è½¬ï¼Œè¿™æ˜¯å› ä¸ºformè¡¨å•çš„<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/form">target</a>å±æ€§å¯¼è‡´çš„ï¼Œå…¶å–å€¼æœ‰</p><ul><li>_selfï¼Œé»˜è®¤å€¼ï¼Œåœ¨ç›¸åŒçš„çª—å£ä¸­æ‰“å¼€å“åº”é¡µé¢</li><li>_blankï¼Œåœ¨æ–°çª—å£æ‰“å¼€</li><li>_parentï¼Œåœ¨çˆ¶çª—å£æ‰“å¼€</li><li>_topï¼Œåœ¨æœ€é¡¶å±‚çš„çª—å£æ‰“å¼€</li><li>framenameï¼Œåœ¨æŒ‡å®šåå­—çš„iframeä¸­æ‰“å¼€</li></ul><p>å¦‚æœéœ€è¦è®©ç”¨æˆ·ä½“éªŒå¼‚æ­¥ä¸Šä¼ æ–‡ä»¶çš„æ„Ÿè§‰ï¼Œå¯ä»¥é€šè¿‡framenameæŒ‡å®š<code>iframe</code>æ¥å®ç°ã€‚æŠŠformçš„targetå±æ€§è®¾ç½®ä¸ºä¸€ä¸ªçœ‹ä¸è§çš„iframeï¼Œé‚£ä¹ˆè¿”å›çš„æ•°æ®å°±ä¼šè¢«è¿™ä¸ªiframeæ¥å—ï¼Œå› æ­¤åªæœ‰è¯¥iframeä¼šè¢«åˆ·æ–°ï¼Œè‡³äºè¿”å›ç»“æœï¼Œä¹Ÿå¯ä»¥é€šè¿‡è§£æè¿™ä¸ªiframeå†…çš„æ–‡æœ¬æ¥è·å–ã€‚</p><pre><code class="JS">function upload(){    var now = +new Date()    var id = 'frame' + now    $("body").append(`&lt;iframe  name="${id}" id="${id}" /&gt;`);    var $form = $("#myForm")    $form.attr({        "action": '/index.php',        "method": "post",        "enctype": "multipart/form-data",        "encoding": "multipart/form-data",        "target": id    }).submit()    $("#"+id).on("load", function(){        var content = $(this).contents().find("body").text()        try{            var data = JSON.parse(content)        }catch(e){            console.log(e)        }    })}</code></pre><h2 id="å¤§æ–‡ä»¶ä¸Šä¼ "><a href="#å¤§æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="å¤§æ–‡ä»¶ä¸Šä¼ "></a>å¤§æ–‡ä»¶ä¸Šä¼ </h2><p>ç°åœ¨æ¥çœ‹çœ‹åœ¨ä¸Šé¢æåˆ°çš„å‡ ç§ä¸Šä¼ æ–¹å¼ä¸­å®ç°å¤§æ–‡ä»¶ä¸Šä¼ ä¼šé‡è§çš„è¶…æ—¶é—®é¢˜ï¼Œ</p><ul><li>è¡¨å•ä¸Šä¼ å’Œiframeæ— åˆ·æ–°é¡µé¢ä¸Šä¼ ï¼Œå®é™…ä¸Šéƒ½æ˜¯é€šè¿‡formæ ‡ç­¾è¿›è¡Œä¸Šä¼ æ–‡ä»¶ï¼Œè¿™ç§æ–¹å¼å°†æ•´ä¸ªè¯·æ±‚å®Œå…¨äº¤ç»™æµè§ˆå™¨å¤„ç†ï¼Œå½“ä¸Šä¼ å¤§æ–‡ä»¶æ—¶ï¼Œå¯èƒ½ä¼šé‡è§è¯·æ±‚è¶…æ—¶çš„æƒ…å½¢</li><li>é€šè¿‡fromDataï¼Œå…¶å®é™…ä¹Ÿæ˜¯åœ¨xhrä¸­å°è£…ä¸€ç»„è¯·æ±‚å‚æ•°ï¼Œç”¨æ¥æ¨¡æ‹Ÿè¡¨å•è¯·æ±‚ï¼Œæ— æ³•é¿å…å¤§æ–‡ä»¶ä¸Šä¼ è¶…æ—¶çš„é—®é¢˜</li><li>ç¼–ç ä¸Šä¼ ï¼Œæˆ‘ä»¬å¯ä»¥æ¯”è¾ƒçµæ´»åœ°æ§åˆ¶ä¸Šä¼ çš„å†…å®¹</li></ul><p>å¤§æ–‡ä»¶ä¸Šä¼ æœ€ä¸»è¦çš„é—®é¢˜å°±åœ¨äºï¼š<strong>åœ¨åŒä¸€ä¸ªè¯·æ±‚ä¸­ï¼Œè¦ä¸Šä¼ å¤§é‡çš„æ•°æ®ï¼Œå¯¼è‡´æ•´ä¸ªè¿‡ç¨‹ä¼šæ¯”è¾ƒæ¼«é•¿ï¼Œä¸”å¤±è´¥åéœ€è¦é‡å¤´å¼€å§‹ä¸Šä¼ </strong>ã€‚è¯•æƒ³ï¼Œå¦‚æœæˆ‘ä»¬å°†è¿™ä¸ªè¯·æ±‚æ‹†åˆ†æˆå¤šä¸ªè¯·æ±‚ï¼Œæ¯ä¸ªè¯·æ±‚çš„æ—¶é—´å°±ä¼šç¼©çŸ­ï¼Œä¸”å¦‚æœæŸä¸ªè¯·æ±‚å¤±è´¥ï¼Œåªéœ€è¦é‡æ–°å‘é€è¿™ä¸€æ¬¡è¯·æ±‚å³å¯ï¼Œæ— éœ€ä»å¤´å¼€å§‹ï¼Œè¿™æ ·æ˜¯å¦å¯ä»¥è§£å†³å¤§æ–‡ä»¶ä¸Šä¼ çš„é—®é¢˜å‘¢ï¼Ÿ</p><p>ç»¼åˆä¸Šé¢çš„é—®é¢˜ï¼Œçœ‹æ¥å¤§æ–‡ä»¶ä¸Šä¼ éœ€è¦å®ç°ä¸‹é¢å‡ ä¸ªéœ€æ±‚</p><ul><li>æ”¯æŒæ‹†åˆ†ä¸Šä¼ è¯·æ±‚(å³åˆ‡ç‰‡)</li><li>æ”¯æŒæ–­ç‚¹ç»­ä¼ </li><li>æ”¯æŒæ˜¾ç¤ºä¸Šä¼ è¿›åº¦å’Œæš‚åœä¸Šä¼ </li></ul><p>æ¥ä¸‹æ¥è®©æˆ‘ä»¬ä¾æ¬¡å®ç°è¿™äº›åŠŸèƒ½ï¼Œçœ‹èµ·æ¥æœ€ä¸»è¦çš„åŠŸèƒ½åº”è¯¥å°±æ˜¯åˆ‡ç‰‡äº†</p><h3 id="æ–‡ä»¶åˆ‡ç‰‡"><a href="#æ–‡ä»¶åˆ‡ç‰‡" class="headerlink" title="æ–‡ä»¶åˆ‡ç‰‡"></a>æ–‡ä»¶åˆ‡ç‰‡</h3><p>å‚è€ƒï¼š <a href="https://blog.csdn.net/baochao95/article/details/52812876">å¤§æ–‡ä»¶åˆ‡å‰²ä¸Šä¼ </a></p><p>ç¼–ç æ–¹å¼ä¸Šä¼ ä¸­ï¼Œåœ¨å‰ç«¯æˆ‘ä»¬åªè¦å…ˆè·å–æ–‡ä»¶çš„äºŒè¿›åˆ¶å†…å®¹ï¼Œç„¶åå¯¹å…¶å†…å®¹è¿›è¡Œæ‹†åˆ†ï¼Œæœ€åå°†æ¯ä¸ªåˆ‡ç‰‡ä¸Šä¼ åˆ°æœåŠ¡ç«¯å³å¯ã€‚</p><p>åœ¨JavaScriptä¸­ï¼Œæ–‡ä»¶FIleå¯¹è±¡æ˜¯Blobå¯¹è±¡çš„å­ç±»ï¼ŒBlobå¯¹è±¡åŒ…å«ä¸€ä¸ªé‡è¦çš„æ–¹æ³•<code>slice</code>ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹äºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡Œæ‹†åˆ†ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ‹†åˆ†æ–‡ä»¶çš„ç¤ºä¾‹</p><pre><code class="JS">function slice(file, piece = 1024 * 1024 * 5) {  let totalSize = file.size; // æ–‡ä»¶æ€»å¤§å°  let start = 0; // æ¯æ¬¡ä¸Šä¼ çš„å¼€å§‹å­—èŠ‚  let end = start + piece; // æ¯æ¬¡ä¸Šä¼ çš„ç»“å°¾å­—èŠ‚  let chunks = []  while (start &lt; totalSize) {    // æ ¹æ®é•¿åº¦æˆªå–æ¯æ¬¡éœ€è¦ä¸Šä¼ çš„æ•°æ®    // Fileå¯¹è±¡ç»§æ‰¿è‡ªBlobå¯¹è±¡ï¼Œå› æ­¤åŒ…å«sliceæ–¹æ³•    let blob = file.slice(start, end);     chunks.push(blob)    start = end;    end = start + piece;  }  return chunks}</code></pre><p>å°†æ–‡ä»¶æ‹†åˆ†æˆ<code>piece</code>å¤§å°çš„åˆ†å—ï¼Œç„¶åæ¯æ¬¡è¯·æ±‚åªéœ€è¦ä¸Šä¼ è¿™ä¸€ä¸ªéƒ¨åˆ†çš„åˆ†å—å³å¯</p><pre><code class="JS">let file =  document.querySelector("[name=file]").files[0];const LENGTH = 1024 * 1024 * 0.1;let chunks = slice(file, LENGTH); // é¦–å…ˆæ‹†åˆ†åˆ‡ç‰‡chunks.forEach(chunk=&gt;{  let fd = new FormData();  fd.append("file", chunk);  post('/mkblk.php', fd)})</code></pre><p>æœåŠ¡å™¨æ¥æ”¶åˆ°è¿™äº›åˆ‡ç‰‡åï¼Œå†å°†ä»–ä»¬æ‹¼æ¥èµ·æ¥å°±å¯ä»¥äº†ï¼Œä¸‹é¢æ˜¯PHPæ‹¼æ¥åˆ‡ç‰‡çš„ç¤ºä¾‹ä»£ç </p><pre><code class="JS">$filename = './upload/' . $_POST['filename'];//ç¡®å®šä¸Šä¼ çš„æ–‡ä»¶å//ç¬¬ä¸€æ¬¡ä¸Šä¼ æ—¶æ²¡æœ‰æ–‡ä»¶ï¼Œå°±åˆ›å»ºæ–‡ä»¶ï¼Œæ­¤åä¸Šä¼ åªéœ€è¦æŠŠæ•°æ®è¿½åŠ åˆ°æ­¤æ–‡ä»¶ä¸­if(!file_exists($filename)){    move_uploaded_file($_FILES['file']['tmp_name'],$filename);}else{    file_put_contents($filename,file_get_contents($_FILES['file']['tmp_name']),FILE_APPEND);    echo $filename;}</code></pre><p>æµ‹è¯•æ—¶è®°å¾—ä¿®æ”¹nginxçš„serveré…ç½®ï¼Œå¦åˆ™å¤§æ–‡ä»¶å¯èƒ½ä¼šæç¤º<code>413 Request Entity Too Large</code>çš„é”™è¯¯ã€‚</p><pre><code class="NGINX">server {    // ...    client_max_body_size 50m;}</code></pre><p>ä¸Šé¢è¿™ç§æ–¹å¼æ¥å­˜åœ¨ä¸€äº›é—®é¢˜</p><ul><li>æ— æ³•è¯†åˆ«ä¸€ä¸ªåˆ‡ç‰‡æ˜¯å±äºå“ªä¸€ä¸ªåˆ‡ç‰‡çš„ï¼Œå½“åŒæ—¶å‘ç”Ÿå¤šä¸ªè¯·æ±‚æ—¶ï¼Œè¿½åŠ çš„æ–‡ä»¶å†…å®¹ä¼šå‡ºé”™</li><li>åˆ‡ç‰‡ä¸Šä¼ æ¥å£æ˜¯å¼‚æ­¥çš„ï¼Œæ— æ³•ä¿è¯æœåŠ¡å™¨æ¥æ”¶åˆ°çš„åˆ‡ç‰‡æ˜¯æŒ‰ç…§è¯·æ±‚é¡ºåºæ‹¼æ¥çš„<br>å› æ­¤æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹åº”è¯¥å¦‚ä½•åœ¨æœåŠ¡ç«¯è¿˜åŸåˆ‡ç‰‡ã€‚</li></ul><h3 id="è¿˜åŸåˆ‡ç‰‡"><a href="#è¿˜åŸåˆ‡ç‰‡" class="headerlink" title="è¿˜åŸåˆ‡ç‰‡"></a>è¿˜åŸåˆ‡ç‰‡</h3><p>åœ¨åç«¯éœ€è¦å°†å¤šä¸ªç›¸åŒæ–‡ä»¶çš„åˆ‡ç‰‡è¿˜åŸæˆä¸€ä¸ªæ–‡ä»¶ï¼Œä¸Šé¢è¿™ç§å¤„ç†åˆ‡ç‰‡çš„åšæ³•å­˜åœ¨ä¸‹é¢å‡ ä¸ªé—®é¢˜</p><ul><li><p>å¦‚ä½•è¯†åˆ«å¤šä¸ªåˆ‡ç‰‡æ˜¯æ¥è‡ªäºåŒä¸€ä¸ªæ–‡ä»¶çš„ï¼Œè¿™ä¸ªå¯ä»¥åœ¨æ¯ä¸ªåˆ‡ç‰‡è¯·æ±‚ä¸Šä¼ é€’ä¸€ä¸ªç›¸åŒæ–‡ä»¶çš„<code>context</code>å‚æ•°</p></li><li><p>å¦‚ä½•å°†å¤šä¸ªåˆ‡ç‰‡è¿˜åŸæˆä¸€ä¸ªæ–‡ä»¶</p><ul><li>ç¡®è®¤æ‰€æœ‰åˆ‡ç‰‡éƒ½å·²ä¸Šä¼ ï¼Œè¿™ä¸ªå¯ä»¥é€šè¿‡å®¢æˆ·ç«¯åœ¨åˆ‡ç‰‡å…¨éƒ¨ä¸Šä¼ åè°ƒç”¨mkfileæ¥å£æ¥é€šçŸ¥æœåŠ¡ç«¯è¿›è¡Œæ‹¼æ¥</li><li>æ‰¾åˆ°åŒä¸€ä¸ªcontextä¸‹çš„æ‰€æœ‰åˆ‡ç‰‡ï¼Œç¡®è®¤æ¯ä¸ªåˆ‡ç‰‡çš„é¡ºåºï¼Œè¿™ä¸ªå¯ä»¥åœ¨æ¯ä¸ªåˆ‡ç‰‡ä¸Šæ ‡è®°ä¸€ä¸ªä½ç½®ç´¢å¼•å€¼</li><li>æŒ‰é¡ºåºæ‹¼æ¥åˆ‡ç‰‡ï¼Œè¿˜åŸæˆæ–‡ä»¶<br>ä¸Šé¢æœ‰ä¸€ä¸ªé‡è¦çš„å‚æ•°ï¼Œå³<code>context</code>ï¼Œæˆ‘ä»¬éœ€è¦è·å–ä¸ºä¸€ä¸ªæ–‡ä»¶çš„å”¯ä¸€æ ‡è¯†ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢ä¸¤ç§æ–¹å¼è·å–</li></ul></li><li><p>æ ¹æ®æ–‡ä»¶åã€æ–‡ä»¶é•¿åº¦ç­‰åŸºæœ¬ä¿¡æ¯è¿›è¡Œæ‹¼æ¥ï¼Œä¸ºäº†é¿å…å¤šä¸ªç”¨æˆ·ä¸Šä¼ ç›¸åŒçš„æ–‡ä»¶ï¼Œå¯ä»¥å†é¢å¤–æ‹¼æ¥ç”¨æˆ·ä¿¡æ¯å¦‚uidç­‰ä¿è¯å”¯ä¸€æ€§</p></li><li><p>æ ¹æ®æ–‡ä»¶çš„äºŒè¿›åˆ¶å†…å®¹è®¡ç®—æ–‡ä»¶çš„hashï¼Œè¿™æ ·åªè¦æ–‡ä»¶å†…å®¹ä¸ä¸€æ ·ï¼Œåˆ™æ ‡è¯†ä¹Ÿä¼šä¸ä¸€æ ·ï¼Œç¼ºç‚¹åœ¨äºè®¡ç®—é‡æ¯”è¾ƒå¤§.</p></li></ul><p>ä¿®æ”¹ä¸Šä¼ ä»£ç ï¼Œå¢åŠ ç›¸å…³å‚æ•°</p><pre><code class="JS">// è·å–contextï¼ŒåŒä¸€ä¸ªæ–‡ä»¶ä¼šè¿”å›ç›¸åŒçš„å€¼function createContext(file) {     return file.name + file.length}let file = document.querySelector("[name=file]").files[0];const LENGTH = 1024 * 1024 * 0.1;let chunks = slice(file, LENGTH);// è·å–å¯¹äºåŒä¸€ä¸ªæ–‡ä»¶ï¼Œè·å–å…¶çš„contextlet context = createContext(file);let tasks = [];chunks.forEach((chunk, index) =&gt; {  let fd = new FormData();  fd.append("file", chunk);  // ä¼ é€’context  fd.append("context", context);  // ä¼ é€’åˆ‡ç‰‡ç´¢å¼•å€¼  fd.append("chunk", index + 1);  tasks.push(post("/mkblk.php", fd));});// æ‰€æœ‰åˆ‡ç‰‡ä¸Šä¼ å®Œæ¯•åï¼Œè°ƒç”¨mkfileæ¥å£Promise.all(tasks).then(res =&gt; {  let fd = new FormData();  fd.append("context", context);  fd.append("chunks", chunks.length);  post("/mkfile.php", fd).then(res =&gt; {    console.log(res);  });});</code></pre><p>åœ¨<code>mkblk.php</code>æ¥å£ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡<code>context</code>æ¥ä¿å­˜åŒä¸€ä¸ªæ–‡ä»¶ç›¸å…³çš„åˆ‡ç‰‡</p><pre><code class="PHP">// mkblk.php$context = $_POST['context'];$path = './upload/' . $context;if(!is_dir($path)){    mkdir($path);}// æŠŠåŒä¸€ä¸ªæ–‡ä»¶çš„åˆ‡ç‰‡æ”¾åœ¨ç›¸åŒçš„ç›®å½•ä¸‹$filename = $path .'/'. $_POST['chunk'];$res = move_uploaded_file($_FILES['file']['tmp_name'],$filename);</code></pre><p>é™¤äº†ä¸Šé¢è¿™ç§ç®€å•é€šè¿‡ç›®å½•åŒºåˆ†åˆ‡ç‰‡çš„æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜å¯ä»¥å°†åˆ‡ç‰‡ä¿¡æ¯ä¿å­˜åœ¨æ•°æ®åº“æ¥è¿›è¡Œç´¢å¼•ã€‚æ¥ä¸‹æ¥æ˜¯<code>mkfile.php</code>æ¥å£çš„å®ç°ï¼Œè¿™ä¸ªæ¥å£ä¼šåœ¨æ‰€æœ‰åˆ‡ç‰‡ä¸Šä¼ åè°ƒç”¨</p><pre><code class="PHP">// mkfile.php$context = $_POST['context'];$chunks = (int)$_POST['chunks'];//åˆå¹¶åçš„æ–‡ä»¶å$filename = './upload/' . $context . '/file.jpg'; for($i = 1; $i &lt;= $chunks; ++$i){    $file = './upload/'.$context. '/' .$i; // è¯»å–å•ä¸ªåˆ‡å—    $content = file_get_contents($file);    if(!file_exists($filename)){        $fd = fopen($filename, "w+");    }else{        $fd = fopen($filename, "a");    }    fwrite($fd, $content); // å°†åˆ‡å—åˆå¹¶åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸Š}echo $filename;</code></pre><p>è¿™æ ·å°±è§£å†³äº†ä¸Šé¢çš„ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li>è¯†åˆ«åˆ‡ç‰‡æ¥æº</li><li>ä¿è¯åˆ‡ç‰‡æ‹¼æ¥é¡ºåº</li></ul><h3 id="æ–­ç‚¹ç»­ä¼ "><a href="#æ–­ç‚¹ç»­ä¼ " class="headerlink" title="æ–­ç‚¹ç»­ä¼ "></a>æ–­ç‚¹ç»­ä¼ </h3><p>å³ä½¿å°†å¤§æ–‡ä»¶æ‹†åˆ†æˆåˆ‡ç‰‡ä¸Šä¼ ï¼Œæˆ‘ä»¬ä»éœ€ç­‰å¾…æ‰€æœ‰åˆ‡ç‰‡ä¸Šä¼ å®Œæ¯•ï¼Œåœ¨ç­‰å¾…è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½å‘ç”Ÿä¸€ç³»åˆ—å¯¼è‡´éƒ¨åˆ†åˆ‡ç‰‡ä¸Šä¼ å¤±è´¥çš„æƒ…å½¢ï¼Œå¦‚ç½‘ç»œæ•…éšœã€é¡µé¢å…³é—­ç­‰ã€‚ç”±äºåˆ‡ç‰‡æœªå…¨éƒ¨ä¸Šä¼ ï¼Œå› æ­¤æ— æ³•é€šçŸ¥æœåŠ¡ç«¯åˆæˆæ–‡ä»¶ã€‚è¿™ç§æƒ…å†µä¸‹å¯ä»¥é€šè¿‡<strong>æ–­ç‚¹ç»­ä¼ </strong>æ¥è¿›è¡Œå¤„ç†ã€‚</p><p>æ–­ç‚¹ç»­ä¼ æŒ‡çš„æ˜¯ï¼šå¯ä»¥ä»å·²ç»ä¸Šä¼ éƒ¨åˆ†å¼€å§‹ç»§ç»­ä¸Šä¼ æœªå®Œæˆçš„éƒ¨åˆ†ï¼Œè€Œæ²¡æœ‰å¿…è¦ä»å¤´å¼€å§‹ä¸Šä¼ ï¼ŒèŠ‚çœä¸Šä¼ æ—¶é—´ã€‚</p><p>ç”±äºæ•´ä¸ªä¸Šä¼ è¿‡ç¨‹æ˜¯æŒ‰åˆ‡ç‰‡ç»´åº¦è¿›è¡Œçš„ï¼Œä¸”<code>mkfile</code>æ¥å£æ˜¯åœ¨æ‰€æœ‰åˆ‡ç‰‡ä¸Šä¼ å®Œæˆåç”±å®¢æˆ·ç«¯ä¸»åŠ¨è°ƒç”¨çš„ï¼Œå› æ­¤æ–­ç‚¹ç»­ä¼ çš„å®ç°ä¹Ÿååˆ†ç®€å•ï¼š</p><ul><li>åœ¨åˆ‡ç‰‡ä¸Šä¼ æˆåŠŸåï¼Œä¿å­˜å·²ä¸Šä¼ çš„åˆ‡ç‰‡ä¿¡æ¯</li><li>å½“ä¸‹æ¬¡ä¼ è¾“ç›¸åŒæ–‡ä»¶æ—¶ï¼Œéå†åˆ‡ç‰‡åˆ—è¡¨ï¼Œåªé€‰æ‹©æœªä¸Šä¼ çš„åˆ‡ç‰‡è¿›è¡Œä¸Šä¼ </li><li>æ‰€æœ‰åˆ‡ç‰‡ä¸Šä¼ å®Œæ¯•åï¼Œå†è°ƒç”¨<code>mkfile</code>æ¥å£é€šçŸ¥æœåŠ¡ç«¯è¿›è¡Œæ–‡ä»¶åˆå¹¶</li></ul><p>å› æ­¤é—®é¢˜å°±è½åœ¨äº†å¦‚ä½•ä¿å­˜å·²ä¸Šä¼ åˆ‡ç‰‡çš„ä¿¡æ¯äº†ï¼Œä¿å­˜ä¸€èˆ¬æœ‰ä¸¤ç§ç­–ç•¥</p><ul><li>å¯ä»¥é€šè¿‡locaStorageç­‰æ–¹å¼ä¿å­˜åœ¨å‰ç«¯æµè§ˆå™¨ä¸­ï¼Œè¿™ç§æ–¹å¼ä¸ä¾èµ–äºæœåŠ¡ç«¯ï¼Œå®ç°èµ·æ¥ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿ï¼Œç¼ºç‚¹åœ¨äºå¦‚æœç”¨æˆ·æ¸…é™¤äº†æœ¬åœ°æ–‡ä»¶ï¼Œä¼šå¯¼è‡´ä¸Šä¼ è®°å½•ä¸¢å¤±</li><li>æœåŠ¡ç«¯æœ¬èº«çŸ¥é“å“ªäº›åˆ‡ç‰‡å·²ç»ä¸Šä¼ ï¼Œå› æ­¤å¯ä»¥ç”±æœåŠ¡ç«¯é¢å¤–æä¾›ä¸€ä¸ªæ ¹æ®æ–‡ä»¶contextæŸ¥è¯¢å·²ä¸Šä¼ åˆ‡ç‰‡çš„æ¥å£ï¼Œåœ¨ä¸Šä¼ æ–‡ä»¶å‰è°ƒç”¨è¯¥æ–‡ä»¶çš„å†å²ä¸Šä¼ è®°å½•</li></ul><p>ä¸‹é¢è®©æˆ‘ä»¬é€šè¿‡åœ¨æœ¬åœ°ä¿å­˜å·²ä¸Šä¼ åˆ‡ç‰‡è®°å½•ï¼Œæ¥å®ç°æ–­ç‚¹ä¸Šä¼ çš„åŠŸèƒ½</p><pre><code class="JS"> // è·å–å·²ä¸Šä¼ åˆ‡ç‰‡è®°å½•function getUploadSliceRecord(context){  let record = localStorage.getItem(context)  if(!record){    return []  }else {    try{      return JSON.parse(record)    }catch(e){}  }}// ä¿å­˜å·²ä¸Šä¼ åˆ‡ç‰‡function saveUploadSliceRecord(context, sliceIndex){  let list = getUploadSliceRecord(context)  list.push(sliceIndex)  localStorage.setItem(context, JSON.stringify(list))}</code></pre><p>ç„¶åå¯¹ä¸Šä¼ é€»è¾‘ç¨ä½œä¿®æ”¹ï¼Œä¸»è¦æ˜¯å¢åŠ ä¸Šä¼ å‰æ£€æµ‹æ˜¯å·²ç»ä¸Šä¼ ã€ä¸Šä¼ åä¿å­˜è®°å½•çš„é€»è¾‘</p><pre><code class="JS">let context = createContext(file);// è·å–ä¸Šä¼ è®°å½•let record = getUploadSliceRecord(context);let tasks = [];chunks.forEach((chunk, index) =&gt; {  // å·²ä¸Šä¼ çš„åˆ‡ç‰‡åˆ™ä¸å†é‡æ–°ä¸Šä¼   if(record.includes(index)){    return  }  let fd = new FormData();  fd.append("file", chunk);  fd.append("context", context);  fd.append("chunk", index + 1);  let task = post("/mkblk.php", fd).then(res=&gt;{    // ä¸Šä¼ æˆåŠŸåä¿å­˜å·²ä¸Šä¼ åˆ‡ç‰‡è®°å½•    saveUploadSliceRecord(context, index)    record.push(index)  })  tasks.push(task);});</code></pre><p>æ­¤æ—¶ä¸Šä¼ æ—¶åˆ·æ–°é¡µé¢æˆ–è€…å…³é—­æµè§ˆå™¨ï¼Œå†æ¬¡ä¸Šä¼ ç›¸åŒæ–‡ä»¶æ—¶ï¼Œä¹‹å‰å·²ç»ä¸Šä¼ æˆåŠŸçš„åˆ‡ç‰‡å°±ä¸ä¼šå†é‡æ–°ä¸Šä¼ äº†ã€‚</p><p>æœåŠ¡ç«¯å®ç°æ–­ç‚¹ç»­ä¼ çš„é€»è¾‘åŸºæœ¬ç›¸ä¼¼ï¼Œåªè¦åœ¨<code>getUploadSliceRecord</code>å†…éƒ¨è°ƒç”¨æœåŠ¡ç«¯çš„æŸ¥è¯¢æ¥å£è·å–å·²ä¸Šä¼ åˆ‡ç‰‡çš„è®°å½•å³å¯ï¼Œå› æ­¤è¿™é‡Œä¸å†å±•å¼€ã€‚</p><p>æ­¤å¤–æ–­ç‚¹ç»­ä¼ è¿˜éœ€è¦è€ƒè™‘åˆ‡ç‰‡è¿‡æœŸçš„æƒ…å†µï¼šå¦‚æœè°ƒç”¨äº†<code>mkfile</code>æ¥å£ï¼Œåˆ™ç£ç›˜ä¸Šçš„åˆ‡ç‰‡å†…å®¹å°±å¯ä»¥æ¸…é™¤æ‰äº†ï¼Œå¦‚æœå®¢æˆ·ç«¯ä¸€ç›´ä¸è°ƒç”¨<code>mkfile</code>çš„æ¥å£ï¼Œæ”¾ä»»è¿™äº›åˆ‡ç‰‡ä¸€ç›´ä¿å­˜åœ¨ç£ç›˜æ˜¾ç„¶æ˜¯ä¸å¯é çš„ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåˆ‡ç‰‡ä¸Šä¼ éƒ½æœ‰ä¸€æ®µæ—¶é—´çš„æœ‰æ•ˆæœŸï¼Œè¶…è¿‡è¯¥æœ‰æ•ˆæœŸï¼Œå°±ä¼šè¢«æ¸…é™¤æ‰ã€‚åŸºäºä¸Šè¿°åŸå› ï¼Œæ–­ç‚¹ç»­ä¼ ä¹Ÿå¿…é¡»åŒæ­¥åˆ‡ç‰‡è¿‡æœŸçš„å®ç°é€»è¾‘ã€‚</p><h3 id="ä¸Šä¼ è¿›åº¦å’Œæš‚åœ"><a href="#ä¸Šä¼ è¿›åº¦å’Œæš‚åœ" class="headerlink" title="ä¸Šä¼ è¿›åº¦å’Œæš‚åœ"></a>ä¸Šä¼ è¿›åº¦å’Œæš‚åœ</h3><p>é€šè¿‡<a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/upload">xhr.upload</a>ä¸­çš„progressæ–¹æ³•å¯ä»¥å®ç°ç›‘æ§æ¯ä¸€ä¸ªåˆ‡ç‰‡ä¸Šä¼ è¿›åº¦ã€‚</p><p>ä¸Šä¼ æš‚åœçš„å®ç°ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œé€šè¿‡xhr.abortå¯ä»¥å–æ¶ˆå½“å‰æœªå®Œæˆä¸Šä¼ åˆ‡ç‰‡çš„ä¸Šä¼ ï¼Œå®ç°ä¸Šä¼ æš‚åœçš„æ•ˆæœï¼Œæ¢å¤ä¸Šä¼ å°±è·Ÿæ–­ç‚¹ç»­ä¼ ç±»ä¼¼ï¼Œå…ˆè·å–å·²ä¸Šä¼ çš„åˆ‡ç‰‡åˆ—è¡¨ï¼Œç„¶åé‡æ–°å‘é€æœªä¸Šä¼ çš„åˆ‡ç‰‡ã€‚</p><p>ç”±äºç¯‡å¹…å…³ç³»ï¼Œä¸Šä¼ è¿›åº¦å’Œæš‚åœçš„åŠŸèƒ½è¿™é‡Œå°±å…ˆä¸å®ç°äº†ã€‚</p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>ç›®å‰ç¤¾åŒºå·²ç»å­˜åœ¨ä¸€äº›æˆç†Ÿçš„å¤§æ–‡ä»¶ä¸Šä¼ è§£å†³æ–¹æ¡ˆï¼Œå¦‚<a href="https://github.com/qiniu">ä¸ƒç‰›SDK</a>ï¼Œ<a href="https://cloud.tencent.com/document/product/266/9239">è…¾è®¯äº‘SDK</a>ç­‰ï¼Œä¹Ÿè®¸å¹¶ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»å®ç°ä¸€ä¸ªç®€é™‹çš„å¤§æ–‡ä»¶ä¸Šä¼ åº“ï¼Œä½†æ˜¯äº†è§£å…¶åŸç†è¿˜æ˜¯ååˆ†æœ‰å¿…è¦çš„ã€‚</p><p>æœ¬æ–‡é¦–å…ˆæ•´ç†äº†å‰ç«¯æ–‡ä»¶ä¸Šä¼ çš„å‡ ç§æ–¹å¼ï¼Œç„¶åè®¨è®ºäº†å¤§æ–‡ä»¶ä¸Šä¼ çš„å‡ ç§åœºæ™¯ï¼Œä»¥åŠå¤§æ–‡ä»¶ä¸Šä¼ éœ€è¦å®ç°çš„å‡ ä¸ªåŠŸèƒ½</p><p>é€šè¿‡Blobå¯¹è±¡çš„<code>slice</code>æ–¹æ³•å°†æ–‡ä»¶æ‹†åˆ†æˆåˆ‡ç‰‡<br>æ•´ç†äº†æœåŠ¡ç«¯è¿˜åŸæ–‡ä»¶æ‰€éœ€æ¡ä»¶å’Œå‚æ•°ï¼Œæ¼”ç¤ºäº†PHPå°†åˆ‡ç‰‡è¿˜åŸæˆæ–‡ä»¶<br>é€šè¿‡ä¿å­˜å·²ä¸Šä¼ åˆ‡ç‰‡çš„è®°å½•æ¥å®ç°æ–­ç‚¹ç»­ä¼ <br>è¿˜ç•™ä¸‹äº†ä¸€äº›é—®é¢˜ï¼Œå¦‚ï¼šåˆå¹¶æ–‡ä»¶æ—¶é¿å…å†…å­˜æº¢å‡ºã€åˆ‡ç‰‡å¤±æ•ˆç­–ç•¥ã€ä¸Šä¼ è¿›åº¦æš‚åœç­‰åŠŸèƒ½ï¼Œå¹¶æ²¡æœ‰å»æ·±å…¥æˆ–ä¸€ä¸€å®ç°ï¼Œç»§ç»­å­¦ä¹ å§~</p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> æ–‡ä»¶ä¸Šä¼  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†·çŸ¥è¯†ä¹‹JSç¯‡</title>
      <link href="/My-Blogs/2021/01/08/JavaScript/%E5%86%B7%E7%9F%A5%E8%AF%86%E4%B9%8BJS%E7%AF%87/"/>
      <url>/My-Blogs/2021/01/08/JavaScript/%E5%86%B7%E7%9F%A5%E8%AF%86%E4%B9%8BJS%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<p>å…³äºJavaScriptçš„å†·çŸ¥è¯†åˆæœ‰å“ªäº›å‘¢ï¼Ÿè®©æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹å§</p><a id="more"></a><h3 id="æµ®ç‚¹æ•°å¿«é€Ÿå‘ä¸‹å–æ•´"><a href="#æµ®ç‚¹æ•°å¿«é€Ÿå‘ä¸‹å–æ•´" class="headerlink" title="æµ®ç‚¹æ•°å¿«é€Ÿå‘ä¸‹å–æ•´"></a>æµ®ç‚¹æ•°å¿«é€Ÿå‘ä¸‹å–æ•´</h3><p>JavaScriptä¸­æ˜¯æ²¡æœ‰æ•´å‹æ¦‚å¿µçš„ï¼Œä½†åˆ©ç”¨å¥½ä½æ“ä½œç¬¦å¯ä»¥è½»æ¾å¤„ç†ï¼ŒåŒæ—¶è·å¾—æ•ˆç‡ä¸Šçš„æå‡ã€‚</p><br><p>|0å’Œ~~æ˜¯å¾ˆå¥½çš„ä¸€ä¸ªä¾‹å­ï¼Œä½¿ç”¨è¿™ä¸¤è€…å¯ä»¥å°†æµ®ç‚¹è½¬æˆæ•´å‹ä¸”æ•ˆç‡æ–¹é¢è¦æ¯”åŒç±»çš„parseInt, Math.round è¦å¿«ã€‚åœ¨å¤„ç†åƒç´ åŠåŠ¨ç”»ä½ç§»ç­‰æ•ˆæœçš„æ—¶å€™ä¼šå¾ˆæœ‰ç”¨ã€‚</p><pre><code class="JavaScript">(12.4 / 4.13) | 0    // =&gt; 3    ~~(12.4 / 4.13)// =&gt; 3</code></pre><h3 id="ç”Ÿæˆéšæœºå­—ç¬¦ä¸²"><a href="#ç”Ÿæˆéšæœºå­—ç¬¦ä¸²" class="headerlink" title="ç”Ÿæˆéšæœºå­—ç¬¦ä¸²"></a>ç”Ÿæˆéšæœºå­—ç¬¦ä¸²</h3><p>ç”Ÿæˆéšæœºå­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬ç¬¬ä¸€æƒ³åˆ°çš„ï¼Œå¯èƒ½æ˜¯å…ˆå®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œç„¶åé€šè¿‡éšæœºå–æ•°ç»„ä¸­çš„å­—ç¬¦è¿›è€Œæ‹¼æ¥æˆä¸€ä¸ªéšæœºé•¿åº¦çš„å­—ç¬¦ä¸²ã€‚<br>ä½†æ˜¯ä¸‹é¢è¿˜æœ‰ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="js">function generateRandomAlphaNum(len) {    var rdmString = "";    for (; rdmString.length &lt; len; rdmString += Math.random().toString(36).substr(2));    return rdmString.substr(0, len);}</code></pre><blockquote><p>ä¸»è¦æ˜¯åˆ©ç”¨äº†toString() æ–¹æ³•çš„ç‰¹æ€§</p></blockquote><p><img src="/My-Blogs/images/toString.png" alt="image"></p><h3 id="copy"><a href="#copy" class="headerlink" title="copy"></a>copy</h3><p>åˆ©ç”¨copyæ–¹æ³•å¤åˆ¶Consoleæ§åˆ¶å°çš„å˜é‡</p><pre><code class="js">var temp1 = 1111;copy(temp1);</code></pre><h3 id="console-table"><a href="#console-table" class="headerlink" title="console.table"></a>console.table</h3><p>Chromeä¸“å±ï¼ŒIEç»•é“çš„consoleæ–¹æ³•ã€‚å¯ä»¥å°†JavaScriptå…³è”æ•°ç»„ä»¥è¡¨æ ¼å½¢å¼è¾“å‡ºåˆ°æµè§ˆå™¨consoleï¼Œæ•ˆæœå¾ˆæƒŠèµï¼Œç•Œé¢å¾ˆç¾è§‚ã€‚</p><pre><code class="js">//é‡‡è´­æƒ…å†µvar data = [{    'å“å': 'æœé›·æ–¯',    'æ•°é‡': 4}, {    'å“å': 'å†ˆæœ¬',    'æ•°é‡': 3}];console.table(data);</code></pre><p><img src="/My-Blogs/images/console.table.png" alt="image"></p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Intersection Observeræ¥å£å®ç°å¯è§†åŒºåŸŸæ¸²æŸ“</title>
      <link href="/My-Blogs/2021/01/08/JavaScript/%E4%BD%BF%E7%94%A8Intersection%20Observer%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0%E5%8F%AF%E8%A7%86%E5%8C%BA%E5%9F%9F%E6%B8%B2%E6%9F%93/"/>
      <url>/My-Blogs/2021/01/08/JavaScript/%E4%BD%BF%E7%94%A8Intersection%20Observer%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0%E5%8F%AF%E8%A7%86%E5%8C%BA%E5%9F%9F%E6%B8%B2%E6%9F%93/</url>
      
        <content type="html"><![CDATA[<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Intersection_Observer_API">Intersection Observer</a>å¤§å®¶æœ‰äº†è§£è¿‡ä¹ˆï¼Ÿ</p><a id="more"></a><h2 id="ä½¿ç”¨Intersection-Observeræ¥å£å®ç°å¯è§†åŒºåŸŸæ¸²æŸ“"><a href="#ä½¿ç”¨Intersection-Observeræ¥å£å®ç°å¯è§†åŒºåŸŸæ¸²æŸ“" class="headerlink" title="ä½¿ç”¨Intersection Observeræ¥å£å®ç°å¯è§†åŒºåŸŸæ¸²æŸ“"></a>ä½¿ç”¨Intersection Observeræ¥å£å®ç°å¯è§†åŒºåŸŸæ¸²æŸ“</h2><p>ç”±äºå®¢æˆ·ç«¯ä½¿ç”¨çš„webviewå†…æ ¸åœ¨è¾ƒä½é…ç½®çš„Androidæ‰‹æœºä¸Šæ‰“å¼€å¤šå›¾é¡µé¢æ—¶å‡ºç°å†…å­˜æš´æ¶¨ï¼Œæ— æ³•å›æ”¶å¯¼è‡´å®¢æˆ·ç«¯å´©æºƒçš„æƒ…å†µï¼Œæˆ‘ä»¬ä½¿ç”¨Android studioè¿›è¡Œåˆ†æå‘ç°ï¼Œé—®é¢˜å‡ºåœ¨äº†webviewçš„å›¾å±‚æ¸²æŸ“å¼•æ“ã€‚<br>æˆ‘ä»¬å‘ç°ï¼Œéšç€æˆ‘ä»¬ä¸‹æ‹‰åŠ è½½è¶Šå¤šï¼Œå›¾ç‰‡é‡å¢å¤šæ—¶ï¼Œå›¾å±‚æ¸²æŸ“<br>Graphicséƒ¨åˆ†å†…å­˜æŒç»­ä¸Šæ¶¨ï¼Œä¸”ä¸å­˜åœ¨å›æ”¶çš„æƒ…å†µã€‚å› æ­¤ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨å›¾ç‰‡æ‡’åŠ è½½å·²ç»<br>ä¸èƒ½è§£å†³é—®é¢˜äº†ã€‚<br>ç»è¿‡è°ƒç ”ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†<code>Intersection Observer</code> å®ç°è™šæ‹Ÿæ¸²æŸ“çš„æ–¹æ¡ˆï¼Œå³<br>åªåœ¨å¯è§†åŒºåŸŸæ‰è¿›è¡Œå›¾ç‰‡çš„æ¸²æŸ“ã€‚</p><h2 id="ä¸ºä»€ä¹ˆä½¿ç”¨Intersection-Observer-æ¥å£"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨Intersection-Observer-æ¥å£" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨Intersection Observer æ¥å£"></a>ä¸ºä»€ä¹ˆä½¿ç”¨Intersection Observer æ¥å£</h2><p><code>Intersection Observer</code> APIæä¾›äº†ä¸€ç§å¼‚æ­¥æ£€æµ‹ç›®æ ‡å…ƒç´ ä¸ç¥–å…ˆå…ƒç´ æˆ–viewportç›¸äº¤å˜åŒ–æƒ…å†µçš„æ–¹æ³•ï¼ˆMDNï¼‰ã€‚<br>æ¢å¥è¯è¯´ï¼Œä¹‹å‰æ£€æµ‹å…ƒç´ æ˜¯å¦å¯è§ï¼Œå…ƒç´ ä¸å…ƒç´ æ˜¯å¦ç›¸äº¤æ˜¯ä¸å®¹æ˜“çš„ï¼Œå¯èƒ½çš„å‡ ä¸ªæ–¹æ³•æ˜¯åŸºäºç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œå†ç»“åˆä½¿ç”¨å…ƒç´ çš„å®½é«˜å±æ€§ï¼Œä»¥è®¡ç®—å…ƒç´ å½“å‰æ‰€å¤„ä½ç½®è¿™ç§è€—æ€§èƒ½çš„æ–¹å¼ã€‚å‰è¿°ç±»å‹çš„æ–¹æ³•ï¼Œåœ¨ç›‘å¬æ»šåŠ¨äº‹ä»¶çš„è¿‡ç¨‹ä¸­, é¢‘ç¹è°ƒç”¨Element.getBoundingClientRectæ–¹æ³•ï¼Œä¼šä½¿å¾—æµè§ˆå™¨é‡å¤å¤šæ¬¡è®¡ç®—å…ƒç´ çš„å®½é«˜å±æ€§ã€‚<br>äº‹ä»¶ç›‘å¬å’Œè°ƒç”¨Element.getBoundingClientRectéƒ½æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œï¼Œè¿™æ · å¯èƒ½ä¼šé˜»å¡åç»­jsä»£ç çš„æ‰§è¡Œï¼Œé€ æˆæ€§èƒ½é—®é¢˜ã€‚<br>å¦‚æœä½¿ç”¨<code>Intersection Observer</code>æ¥å£ï¼Œæˆ‘ä»¬ä¸ä½†çœå»äº†è‡ªå·±ç¼–å†™ä»£ç è®¡ç®—ä½<br>ç½®çš„åŠŸå¤«ï¼Œè€Œä¸”å› è¯¥æ¥å£æ˜¯å¼‚æ­¥çš„ï¼Œè¿˜ä½¿å¾—æˆ‘ä»¬åœ¨æ‰§è¡Œè¯¥æ¥å£è¿›è¡Œç›‘æµ‹çš„æ—¶å€™ä¸ä¼šé˜»å¡jsçº¿ç¨‹çš„æ‰§è¡Œï¼Œå¯ä»¥è¯´æ˜¯ä¸€ä¸¾ä¸¤å¾—ã€‚</p><h2 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h2><p><code>Intersection Observer</code> æ¥å£é€šè¿‡è§‚æµ‹æ ¹å…ƒç´ å’Œç›®æ ‡å…ƒç´ çš„ç›¸å¯¹ä½ç½®ï¼Œåœ¨å¼€å‘è€…è®¾å®šçš„ç›®æ ‡å…ƒç´ ä¸æ ¹å…ƒç´ ç›¸äº¤è§¦å‘ç‚¹<br>è§¦å‘å›è°ƒå‡½æ•°ï¼Œä»¥å®ç°å¼€å‘è€…çš„ä¸šåŠ¡ç›®çš„ã€‚å¼€å‘è€…å¯ä»¥è®¾ç½®ä¸€äº›æ•°å€¼æ¥æŒ‡å®šç›®æ ‡å…ƒç´ è¿›å…¥åˆ°æ ¹å…ƒç´ çš„ç™¾åˆ†ä¹‹å‡ æ—¶è§¦å‘å›è°ƒå‡½æ•°ã€‚</p><p><img src="/My-Blogs/images/%E4%BD%BF%E7%94%A8IntersectionObserver%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0%E5%8F%AF%E8%A7%86%E5%8C%BA%E5%9F%9F%E6%B8%B2%E6%9F%93-01.gif" alt="img"></p><p>åœ¨ä¸Šé¢çš„gifä¸­ï¼Œæ ¹å…ƒç´ æ˜¯ç™½è‰²çš„è§†çª—ï¼Œç›®æ ‡å…ƒç´ ä¸ºç»¿è‰²çš„å°æ–¹å—ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå½“æ»šåŠ¨å±å¹•æ—¶ï¼Œç»¿è‰²æ–¹å—é€æ¸å‡ºç°åœ¨è§†å£ä¸­ï¼Œåˆ†åˆ«åœ¨ç»¿è‰²æ–¹å—ä¸è§†å£ç›¸äº¤æ¯”ä¾‹è¾¾åˆ°25%, 50%, 75%, 100%æ—¶è§¦å‘äº†å›è°ƒå‡½æ•°ã€‚<br>å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä»»æ„ä¸€ä¸ªç›®æ ‡å…ƒç´ çš„ç¥–å…ˆå…ƒç´ å½“ä½œæ ¹å…ƒç´ ï¼Œè¿™å¯¹äºæ‡’åŠ è½½ï¼Œè§†é¢‘æ’­æ”¾ç­‰éƒ½æœ‰é‡è¦çš„æ„ä¹‰ã€‚</p><h2 id="æ€ä¹ˆä½¿ç”¨-Intersection-Observer-API"><a href="#æ€ä¹ˆä½¿ç”¨-Intersection-Observer-API" class="headerlink" title="æ€ä¹ˆä½¿ç”¨ Intersection Observer API"></a>æ€ä¹ˆä½¿ç”¨ Intersection Observer API</h2><p>1ã€æ–°å»ºä¸€ä¸ªè§‚å¯Ÿå™¨</p><pre><code class="JS">const callback = (entries) =&gt; {};const options = () =&gt; {};const observer = new IntersectionObserver(callback, options);</code></pre><p>callback ä¸ºç›¸äº¤æ—¶çš„å¤„ç†å‡½æ•°, æ¯å½“è¢«è§‚æµ‹çš„å…ƒç´ ä¸æŒ‡å®šçš„æ ¹å…ƒç´ æˆ–è§†çª—ç›¸äº¤æ—¶ä¾¿ä¼šè¢«æ‰§è¡Œã€‚å…¶å‚æ•°ä¸ºIntersectionObserverEntryå¯¹è±¡ï¼Œè¯¥å¯¹è±¡è®°å½•äº†ç›¸äº¤æ—¶çš„ä¸€äº›çŠ¶æ€ä¿¡æ¯ï¼Œå¦‚å…ƒç´ çš„å®½é«˜ï¼Œç›¸äº¤æ¯”ç‡<br>ç­‰ä¿¡æ¯ã€‚<br>options, ç”¨äºæŒ‡å®šå›è°ƒå‡½æ•°æ‰§è¡Œæ—¶è¢«è§‚æµ‹å…ƒç´ çš„çš„ç¯å¢ƒã€‚å¦‚æŒ‡å®šæ ¹å…ƒç´ root, æŒ‡å®šè¢«è§‚æµ‹å…ƒç´ ä½äºå“ªä¸ªä½ç½®æ—¶è§¦å‘ç›¸äº¤å¤„ç†å‡½æ•°rootMargin, å…·ä½“å¯è§<a href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API">MDN</a></p><p>2ã€æŒ‡å®šç›¸äº¤æ—¶çš„å¤„ç†å‡½æ•°</p><pre><code class="JS">const callback = (entries) =&gt; {  entries.forEach(entry =&gt; {    if (entry.isIntersecting) { // å½“trueæ—¶ï¼Œè¡¨ç¤ºè¢«è§‚æµ‹å…ƒç´ ä¸æŒ‡å®šå…ƒç´ ç›¸äº¤äº†      // æ‰§è¡Œä½ è¦çš„æ“ä½œ    }  })}</code></pre><p>3ã€å¯¹ç›®æ ‡å…ƒç´ è¿›è¡Œè§‚å¯Ÿ</p><pre><code class="JS">const ele = document.getElementById('target');observer.observe(ele);</code></pre><p>4ã€<code>Intersection Observer</code>å¯ç”¨çš„æ–¹æ³•</p><pre><code class="JS">1. observe(ele): ç”¨äºå¼€å§‹è§‚å¯ŸæŸä¸ªæŒ‡å®šçš„ç›®æ ‡å…ƒç´ ï¼Œ è§‚å¯Ÿè€…å¯ä»¥å¤šæ¬¡è°ƒç”¨æ­¤æ–¹æ³•å¯¹ä¸åŒçš„å…ƒç´ è¿›è¡Œè§‚æµ‹ã€‚2. unobserve(ele): å¯ç”¨æ¥å–æ¶ˆå¯¹æŸä¸ªå…ƒç´ çš„è§‚å¯Ÿã€‚3. disconnect(): ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œ å¯ä»¥å–æ¶ˆå¯¹æ‰€æœ‰å…ƒç´ çš„è§‚æµ‹ï¼Œ å³ä¹‹å‰é€šè¿‡observeræ–¹æ³•è§‚æµ‹çš„å…ƒç´ ä¸å†å—åˆ°è§‚æµ‹ï¼Œç›¸åº”çš„å¤„ç†å‡½æ•°ä¹Ÿä¸ä¼šå¾—åˆ°æ‰§è¡Œã€‚</code></pre><h2 id="å®ç°å¯è§†åŒºåŸŸæ¸²æŸ“"><a href="#å®ç°å¯è§†åŒºåŸŸæ¸²æŸ“" class="headerlink" title="å®ç°å¯è§†åŒºåŸŸæ¸²æŸ“"></a>å®ç°å¯è§†åŒºåŸŸæ¸²æŸ“</h2><h3 id="å®ç°æ€è·¯"><a href="#å®ç°æ€è·¯" class="headerlink" title="å®ç°æ€è·¯"></a>å®ç°æ€è·¯</h3><p>æˆ‘ä»¬æŠŠè§†å£å½“ä½œæ ¹å…ƒç´ ï¼Œå°†å¤´åƒå®¹å™¨å…ƒç´ ä½œä¸ºç›®æ ‡å…ƒç´ ï¼Œè®¾å®šå½“å¤´åƒå®¹å™¨çš„é¢ç§¯å‡ºç°åœ¨è§†å£ï¼ˆå³ä¸è§†å£ç›¸äº¤ï¼‰çš„æ¯”ä¾‹è¶…è¿‡50%æ—¶ï¼Œ å°±è§¦å‘ä¸€æ¬¡æˆ‘ä»¬çš„å›è°ƒå‡½æ•°ï¼Œç¦»å¼€æ—¶ä¹Ÿè§¦å‘æˆ‘ä»¬çš„å›è°ƒå‡½æ•°ã€‚<br>å›è°ƒå‡½æ•°çš„åŠŸèƒ½ä¸ºï¼Œå½“ç›¸äº¤ä¸”ç›®æ ‡å…ƒç´ å¯è§æ—¶ï¼Œå°†å¤´åƒurlåœ°å€èµ‹å€¼ç»™å¤´åƒå…ƒç´ çš„èƒŒæ™¯ï¼ˆä½ ä¹Ÿå¯ä»¥ç”¨imgæ¥å®ç°ï¼‰urlï¼Œå½“ç¦»å¼€æ—¶åˆ™å°†ç›®æ ‡å…ƒç´ çš„èƒŒæ™¯urlç½®ç©ºï¼Œä»¥ä¿è¯å›¾åƒæ¸²æŸ“å±‚ä¿å­˜çš„å›¾ç‰‡ä»…æ˜¯ç›®å‰å¯è§†åŒºåŸŸçš„å›¾ç‰‡ï¼Œä»¥è¾¾åˆ°æ§åˆ¶å›¾åƒæ¸²æŸ“å¼•æ“å†…å­˜å ç”¨çš„ç›®çš„ã€‚</p><h3 id="å…·ä½“å®ç°"><a href="#å…·ä½“å®ç°" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h3><ol><li> é¦–å…ˆï¼Œæ–°å»ºä¸€ä¸ªè§‚å¯Ÿè€…</li></ol><pre><code class="JS">let hasInterSection;try {  require('intersection-observer');  hasInterSection = true;} catch (e) {  hasInterSection = false;  console.log(e);}const observer = hasInterSection &amp;&amp; (new IntersectionObserver((entries, options) =&gt; {  entries.forEach(isIntersectHandler);}, {  rootMargin: '0px 0px 0px 0px',  threshold: [0.5],  trackVisibility: true,  delay: 300}));</code></pre><blockquote><p>åœ¨æ–°å»ºä¸€ä¸ªobserverä¹‹å‰ï¼Œå…ˆå°è¯•å¼•å…¥intersection-observeræ’ä»¶ï¼Œè¿™æ˜¯<code>Intersection Observer</code><br>çš„polyfillï¼Œæ˜¯ä¸ºäº†å…¼å®¹ä¸€äº›æš‚æ—¶ä¸æ”¯æŒè¯¥æ¥å£çš„æµè§ˆå™¨ã€‚<br>å¼•å…¥åï¼Œåœ¨æ–°å»ºçš„è§‚å¯Ÿå™¨ä¸­ï¼Œæˆ‘ä»¬ä¼ å…¥äº†ä¸€äº›é…ç½®ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ ¹å…ƒç´ å°±æ˜¯è§†å£å…ƒç´ ï¼Œä¸”æ²¡æœ‰å¯¹è§†å£çš„èŒƒå›´è¿›è¡Œæ‰©å……ï¼ˆrootMargin: â€˜0px 0px 0px 0pxâ€™, ï¼‰, å¦‚æœè¦å¯¹è§†å£çš„èŒƒå›´è¿›è¡Œæ‰©å……æˆ–ç¼©å°ï¼Œåˆ™å¯ä»¥æ”¹å˜rootMarginçš„å€¼ã€‚<br>è¿™é‡Œï¼Œç›¸äº¤æ¯”ä¾‹è¾¾åˆ°0.5æ—¶ï¼Œæˆ‘ä»¬æ‰è®©å®ƒæ˜¾ç¤ºå¤´åƒï¼Œç¦»å¼€æ—¶ä¹Ÿæ˜¯è¾¾åˆ°0.5æ‰ä¼šéšè—å¤´åƒï¼Œå…³äºthresholdçš„ç†è§£ï¼Œmdnæœ‰ä¸€<br>ä¸ªå¾ˆå¥½çš„ä¾‹å­: <code>threshold</code>.<br>è‡³äºæˆ‘ä»¬ä¾‹å­ä¸­ä¸ºä»€ä¹ˆè®¾ç½®äº†0.5çš„æ¯”ä¾‹ï¼Œä¸»è¦è¿˜æ˜¯å‡ºäºä¸šåŠ¡éœ€è¦ï¼Œå› ä¸ºåœ¨æ»šåŠ¨å±å¹•è¿‡ç¨‹ä¸­ï¼Œå½“ä¸€ä¸ªç›®æ ‡å…ƒç´ è¿›å…¥åˆ°è§†å£æ—¶ï¼Œå¦‚æœæ²¡æœ‰è¾¾åˆ°50%çš„æ¯”ä¾‹ï¼Œåˆ™è®¤ä¸ºè¿˜æ²¡å‡ºç°ï¼Œåˆ™ä¸å¯¹å…¶å¤´åƒè¿›è¡Œèµ‹å€¼ã€‚trackVisibilityè®¾ç½®ä¸ºtrueï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬æœ‰å¯¹å…ƒç´ æ˜¯å¦å¯è§è¿›è¡Œä¸€ä¸ªåˆ¤æ–­çš„éœ€è¦ã€‚å›è°ƒå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯¹entriesé€ä¸€è¿›è¡Œå¤„ç†ï¼Œå› ä¸ºobserverå¯ä»¥ç›‘æµ‹å¤šä¸ªå…ƒç´ ï¼Œæ‰€ä»¥entriesæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œéœ€è¦é€ä¸€å¤„ç†ã€‚</p></blockquote><ol start="2"><li> å›è°ƒå‡½æ•°çš„å¤„ç†å‡½æ•°</li></ol><pre><code class="JS">function isIntersectHandler(entry) {  const target = entry.target;  const isIntersecting = entry.isIntersecting;  if (isIntersecting) {    const src = target.dataset.src;    const ele = target.getElementsByClassName('user-item-thump-icon')[0];    if (src &amp;&amp; entry.isVisible) {      const styleStr = `url(${src}), url("${defaultAvatar}")`;      ele.style.backgroundImage = styleStr;    } else {      ele.style.backgroundImage = '';    }  } else {    const ele = target.getElementsByClassName('user-item-thump-icon')[0];    ele &amp;&amp; (ele.style.backgroundImage = '');  }}</code></pre><blockquote><p>å›è°ƒå‡½æ•°çš„å¤„ç†å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯¹å•ä¸ªentryè¿›è¡Œå¤„ç†ã€‚é¦–å…ˆæˆ‘ä»¬åˆ¤æ–­å…ƒç´ æ˜¯å¦ç›¸äº¤ï¼ˆæ­£å¸¸æ¥è¯´èƒ½è§¦å‘è¿™ä¸ªå‡½æ•°çš„<br>éƒ½æ˜¯å·²ç»ç›¸äº¤äº†çš„ï¼‰ï¼Œç›¸äº¤çš„æ—¶å€™åˆ™ä»ç›®æ ‡å…ƒç´ çš„datasetä¸­æ‹¿åˆ°å¤´åƒurlå¹¶åˆ¤æ–­æ˜¯å¦å¯è§ï¼Œä»è€Œèµ‹å€¼åˆ°èƒŒæ™¯url, ä»¥ä½¿å¾—å¤´åƒè¢«æ¸²æŸ“ã€‚å½“ç¦»å¼€æ—¶ï¼Œåˆ™å¯¹èƒŒæ™¯urlè¿›è¡Œç½®ç©ºæ“ä½œï¼Œä½¿å¾—å…¶ä¸è¢«æ¸²æŸ“ã€‚</p></blockquote><ol start="3"><li> å¼€å§‹è§‚å¯Ÿå…ƒç´ </li></ol><pre><code class="JS">mounted() {  observer.observe(this.$refs.thump);}</code></pre><blockquote><p>å¼€å§‹ç›‘æµ‹åå³å¯å¯¹å…ƒç´ çš„èƒŒæ™¯urlè¿›è¡Œè‡ªå®šä¹‰çš„æ“ä½œäº†ã€‚</p></blockquote><ol start="4"><li> åœæ­¢è§‚å¯Ÿå…ƒç´ </li></ol><pre><code class="JS">beforeDestroy() {  observer.unobserve(this.$refs.thump);}</code></pre><h3 id="å‡ ä¸ªæ³¨æ„ç‚¹"><a href="#å‡ ä¸ªæ³¨æ„ç‚¹" class="headerlink" title="å‡ ä¸ªæ³¨æ„ç‚¹"></a>å‡ ä¸ªæ³¨æ„ç‚¹</h3><p>è™½ç„¶ç›‘æµ‹å‡½æ•°çš„æ‰§è¡Œæ˜¯å¼‚æ­¥çš„ï¼Œä½†æ˜¯å›è°ƒå‡½æ•°çš„æ‰§è¡Œæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸Šã€‚å¦‚æœå›è°ƒå‡½æ•°é‡Œé¢å¤„ç†çš„é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œåˆ™å¯èƒ½å½±å“jsçº¿ç¨‹çš„æ‰§è¡Œï¼Œæ­¤æ—¶å»ºè®®é‡‡ç”¨ <code>window.requestIdleCallback</code> ã€‚<br>å¯¹äºç›®æ ‡å…ƒç´ çš„visibleï¼Œå—å¤šä¸ªå› ç´ å½±å“ï¼Œå¦‚opacity, translationç­‰å±æ€§éƒ½å¯èƒ½å½±å“ï¼Œå…·ä½“å¯å‚è€ƒ<a href="https://developers.google.com/web/updates/2019/02/intersectionobserver-v2">google</a>.</p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½ ä¸çŸ¥é“çš„Blob</title>
      <link href="/My-Blogs/2021/01/08/JavaScript/%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84Blob/"/>
      <url>/My-Blogs/2021/01/08/JavaScript/%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84Blob/</url>
      
        <content type="html"><![CDATA[<p>å¦‚æœä½ å…è®¸ç”¨æˆ·ä»ä½ çš„ç½‘ç«™ä¸Šä¸‹è½½æŸäº›æ–‡ä»¶ï¼Œé‚£ä½ å¯èƒ½ä¼šé‡åˆ° Blob ç±»å‹ã€‚ä¸ºäº†å®ç°ä¸Šè¿°çš„åŠŸèƒ½ï¼Œä½ å¯ä»¥å¾ˆå®¹æ˜“ä»ç½‘ä¸Šæ‰¾åˆ°ç›¸å…³çš„ç¤ºä¾‹ï¼Œå¹¶æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œé€‚å½“çš„è°ƒæ•´ã€‚å¯¹äºéƒ¨åˆ†å¼€å‘è€…æ¥è¯´ï¼Œåœ¨å®Œæˆä¸Šè¿°åŠŸèƒ½ä¹‹åï¼Œä»–ä»¬å¹¶ä¸ä¼šç»§ç»­æ€è€ƒ Blob æ˜¯ä»€ä¹ˆï¼Ÿ</p><a id="more"></a><p>è¿™å°±å¯¼è‡´äº†ä¸€äº›å¼€å‘è€…ï¼Œè¿˜æ˜¯åœç•™åœ¨ç†Ÿç»ƒä½¿ç”¨ API çš„å±‚é¢ï¼Œå½“é‡åˆ°æ¯”è¾ƒæ£˜æ‰‹çš„é—®é¢˜æ—¶ï¼Œå°±æŸæ‰‹æ— ç­–ã€‚<strong>æ¢å¥è¯è¯´ï¼Œå¦‚æœå½“ä½ åœ¨ç†Ÿæ‚‰ API çš„ä½¿ç”¨ä¹‹åï¼Œè¿˜èƒ½ç»§ç»­å¤šé—®å‡ ä¸ªä¸ºä»€ä¹ˆï¼Œç»§ç»­æ¢ç©¶ä¸‹å»ï¼Œä¸ä»…èƒ½åŠ æ·±å¯¹çŸ¥è¯†çš„ç†è§£ï¼Œè¿˜èƒ½è§¦ç±»æ—é€šï¼Œæ‹“å±•è‡ªå·±çš„çŸ¥è¯†é¢æé«˜è‡ªå·±ã€‚</strong></p><p>å¥½äº†ï¼Œå¦‚æœä½ æƒ³ç»§ç»­äº†è§£ä»€ä¹ˆæ˜¯ Blobï¼Œé‚£ä¹ˆå°±è·Ÿä¸Šæˆ‘çš„è„šæ­¥ï¼Œæ¥ä¸€ä¸ª Blob Web API æ¢ç´¢ä¹‹æ—…ã€‚è¿˜åœ¨çŠ¹è±«ä»€ä¹ˆï¼ŒLetâ€™s goï¼</p><p>è¯»å®Œæœ¬æ–‡ä½ å°†äº†è§£åˆ°ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li><p>Blob æ˜¯ä»€ä¹ˆ</p></li><li><p>Blob API ç®€ä»‹</p></li><li><p>æ„é€ å‡½æ•°</p></li><li><p>å±æ€§å’Œæ–¹æ³•</p></li><li><p>Blob ä½¿ç”¨åœºæ™¯</p></li><li><p>åˆ†ç‰‡ä¸Šä¼ </p></li><li><p>ä»äº’è”ç½‘ä¸‹è½½æ•°æ®</p></li><li><p>Blob ç”¨ä½œ URL</p></li><li><p>Blob è½¬æ¢ä¸º Base64</p></li><li><p>å›¾ç‰‡å‹ç¼©</p></li><li><p>ç”Ÿæˆ PDF</p></li><li><p>Blob ä¸ ArrayBuffer çš„åŒºåˆ«</p></li></ul><h3 id="ä¸€ã€Blob-æ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€Blob-æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€Blob æ˜¯ä»€ä¹ˆ"></a><span style="display: none; "></span>ä¸€ã€Blob æ˜¯ä»€ä¹ˆ<span style="display: none; "></span></h3><p>Blobï¼ˆBinary Large Objectï¼‰è¡¨ç¤ºäºŒè¿›åˆ¶ç±»å‹çš„å¤§å¯¹è±¡ã€‚åœ¨æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­ï¼Œå°†äºŒè¿›åˆ¶æ•°æ®å­˜å‚¨ä¸ºä¸€ä¸ªå•ä¸€ä¸ªä½“çš„é›†åˆã€‚Blob é€šå¸¸æ˜¯å½±åƒã€å£°éŸ³æˆ–å¤šåª’ä½“æ–‡ä»¶ã€‚<strong>åœ¨ JavaScript ä¸­ Blob ç±»å‹çš„å¯¹è±¡è¡¨ç¤ºä¸å¯å˜çš„ç±»ä¼¼æ–‡ä»¶å¯¹è±¡çš„åŸå§‹æ•°æ®ã€‚</strong> ä¸ºäº†æ›´ç›´è§‚çš„æ„Ÿå— Blob å¯¹è±¡ï¼Œæˆ‘ä»¬å…ˆæ¥ä½¿ç”¨ Blob æ„é€ å‡½æ•°ï¼Œåˆ›å»ºä¸€ä¸ª myBlob å¯¹è±¡ï¼Œå…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/My-Blogs/images/blobInfo.webp"></p><p>å¦‚ä½ æ‰€è§ï¼ŒmyBlob å¯¹è±¡å«æœ‰ä¸¤ä¸ªå±æ€§ï¼šsize å’Œ typeã€‚å…¶ä¸­ <code>size</code> å±æ€§ç”¨äºè¡¨ç¤ºæ•°æ®çš„å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ï¼Œ <code>type</code> æ˜¯ MIME ç±»å‹çš„å­—ç¬¦ä¸²ã€‚Blob è¡¨ç¤ºçš„ä¸ä¸€å®šæ˜¯ JavaScript åŸç”Ÿæ ¼å¼çš„æ•°æ®ã€‚æ¯”å¦‚ <code>File</code> æ¥å£åŸºäº <code>Blob</code> ï¼Œç»§æ‰¿äº† blob çš„åŠŸèƒ½å¹¶å°†å…¶æ‰©å±•ä½¿å…¶æ”¯æŒç”¨æˆ·ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ã€‚</p><h3 id="äºŒã€Blob-API-ç®€ä»‹"><a href="#äºŒã€Blob-API-ç®€ä»‹" class="headerlink" title="äºŒã€Blob API ç®€ä»‹"></a><span style="display: none; "></span>äºŒã€Blob API ç®€ä»‹<span style="display: none; "></span></h3><p><code>Blob</code> ç”±ä¸€ä¸ªå¯é€‰çš„å­—ç¬¦ä¸² <code>type</code> ï¼ˆé€šå¸¸æ˜¯ MIME ç±»å‹ï¼‰å’Œ <code>blobParts</code> ç»„æˆï¼š</p><p><img src="/My-Blogs/images/blobInfo2.webp"></p><blockquote><p>MIMEï¼ˆMultipurpose Internet Mail Extensionsï¼‰å¤šç”¨é€”äº’è”ç½‘é‚®ä»¶æ‰©å±•ç±»å‹ï¼Œæ˜¯è®¾å®šæŸç§æ‰©å±•åçš„æ–‡ä»¶ç”¨ä¸€ç§åº”ç”¨ç¨‹åºæ¥æ‰“å¼€çš„æ–¹å¼ç±»å‹ï¼Œå½“è¯¥æ‰©å±•åæ–‡ä»¶è¢«è®¿é—®çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨ä½¿ç”¨æŒ‡å®šåº”ç”¨ç¨‹åºæ¥æ‰“å¼€ã€‚å¤šç”¨äºæŒ‡å®šä¸€äº›å®¢æˆ·ç«¯è‡ªå®šä¹‰çš„æ–‡ä»¶åï¼Œä»¥åŠä¸€äº›åª’ä½“æ–‡ä»¶æ‰“å¼€æ–¹å¼ã€‚</p><p>å¸¸è§çš„ MIME ç±»å‹æœ‰ï¼šè¶…æ–‡æœ¬æ ‡è®°è¯­è¨€æ–‡æœ¬ .html text/htmlã€PNGå›¾åƒ .png image/pngã€æ™®é€šæ–‡æœ¬ .txt text/plain ç­‰ã€‚</p></blockquote><h4 id="2-1-æ„é€ å‡½æ•°"><a href="#2-1-æ„é€ å‡½æ•°" class="headerlink" title="2.1 æ„é€ å‡½æ•°"></a><span style="display: none; "></span>2.1 æ„é€ å‡½æ•°<span style="display: none; "></span></h4><p>Blob æ„é€ å‡½æ•°çš„è¯­æ³•ä¸ºï¼š</p><pre><code class="js">var aBlob = new Blob(blobParts, options);</code></pre><p>ç›¸å…³çš„å‚æ•°è¯´æ˜å¦‚ä¸‹ï¼š</p><ul><li><p>blobPartsï¼šå®ƒæ˜¯ä¸€ä¸ªç”± ArrayBufferï¼ŒArrayBufferViewï¼ŒBlobï¼ŒDOMString ç­‰å¯¹è±¡æ„æˆçš„æ•°ç»„ã€‚DOMStrings ä¼šè¢«ç¼–ç ä¸º UTF-8ã€‚</p></li><li><p>optionsï¼šä¸€ä¸ªå¯é€‰çš„å¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹ä¸¤ä¸ªå±æ€§ï¼š</p></li><li><p>type â€”â€” é»˜è®¤å€¼ä¸º <code>""</code>ï¼Œå®ƒä»£è¡¨äº†å°†ä¼šè¢«æ”¾å…¥åˆ° blob ä¸­çš„æ•°ç»„å†…å®¹çš„ MIME ç±»å‹ã€‚</p></li><li><p>endings â€”â€” é»˜è®¤å€¼ä¸º <code>"transparent"</code>ï¼Œç”¨äºæŒ‡å®šåŒ…å«è¡Œç»“æŸç¬¦ <code>\n</code> çš„å­—ç¬¦ä¸²å¦‚ä½•è¢«å†™å…¥ã€‚å®ƒæ˜¯ä»¥ä¸‹ä¸¤ä¸ªå€¼ä¸­çš„ä¸€ä¸ªï¼š<code>"native"</code>ï¼Œä»£è¡¨è¡Œç»“æŸç¬¦ä¼šè¢«æ›´æ”¹ä¸ºé€‚åˆå®¿ä¸»æ“ä½œç³»ç»Ÿæ–‡ä»¶ç³»ç»Ÿçš„æ¢è¡Œç¬¦ï¼Œæˆ–è€… <code>"transparent"</code>ï¼Œä»£è¡¨ä¼šä¿æŒ blob ä¸­ä¿å­˜çš„ç»“æŸç¬¦ä¸å˜ã€‚</p></li></ul><p><strong>ç¤ºä¾‹ä¸€ï¼šä»å­—ç¬¦ä¸²åˆ›å»º Blob</strong></p><pre><code class="js">let myBlobParts = ['&lt;html&gt;&lt;h2&gt;Hello&nbsp;Semlinker&lt;/h2&gt;&lt;/html&gt;']; //&nbsp;an&nbsp;array&nbsp;consisting&nbsp;of&nbsp;a&nbsp;single&nbsp;DOMStringlet myBlob = new Blob(myBlobParts, {    type: 'text/html',    endings: "transparent"}); //the&nbsp;blobconsole.log(myBlob.size + "&nbsp;bytes&nbsp;size"); //&nbsp;Output:&nbsp;37&nbsp;bytes&nbsp;sizeconsole.log(myBlob.type + "&nbsp;is&nbsp;the&nbsp;type"); //&nbsp;Output:&nbsp;text/html&nbsp;is&nbsp;the&nbsp;type</code></pre><p><strong>ç¤ºä¾‹äºŒï¼šä»ç±»å‹åŒ–æ•°ç»„å’Œå­—ç¬¦ä¸²åˆ›å»º Blob</strong></p><pre><code class="js">let hello = new Uint8Array([72, 101, 108, 108, 111]); //&nbsp;äºŒè¿›åˆ¶æ ¼å¼çš„&nbsp;"hello"let blob = new Blob([hello, '&nbsp;', 'semlinker'], {    type: 'text/plain'});</code></pre><p>ä»‹ç»å®Œ Blob æ„é€ å‡½æ•°ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥åˆ†åˆ«ä»‹ç» Blob ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼š</p><p><img src="/My-Blogs/images/blobInfo3.webp"></p><h4 id="2-2-å±æ€§"><a href="#2-2-å±æ€§" class="headerlink" title="2.2 å±æ€§"></a><span style="display: none; "></span>2.2 å±æ€§<span style="display: none; "></span></h4><p>å‰é¢æˆ‘ä»¬å·²ç»çŸ¥é“ Blob å¯¹è±¡åŒ…å«ä¸¤ä¸ªå±æ€§ï¼š</p><ul><li><p>sizeï¼ˆåªè¯»ï¼‰ï¼šè¡¨ç¤º <code>Blob</code> å¯¹è±¡ä¸­æ‰€åŒ…å«æ•°æ®çš„å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚</p></li><li><p>typeï¼ˆåªè¯»ï¼‰ï¼šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨æ˜è¯¥ <code>Blob</code> å¯¹è±¡æ‰€åŒ…å«æ•°æ®çš„ MIME ç±»å‹ã€‚å¦‚æœç±»å‹æœªçŸ¥ï¼Œåˆ™è¯¥å€¼ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</p></li></ul><h4 id="2-3-æ–¹æ³•"><a href="#2-3-æ–¹æ³•" class="headerlink" title="2.3 æ–¹æ³•"></a><span style="display: none; "></span>2.3 æ–¹æ³•<span style="display: none; "></span></h4><ul><li><p>slice([start[, end[, contentType]]])ï¼šè¿”å›ä¸€ä¸ªæ–°çš„ Blob å¯¹è±¡ï¼ŒåŒ…å«äº†æº Blob å¯¹è±¡ä¸­æŒ‡å®šèŒƒå›´å†…çš„æ•°æ®ã€‚</p></li><li><p>stream()ï¼šè¿”å›ä¸€ä¸ªèƒ½è¯»å– blob å†…å®¹çš„ <code>ReadableStream</code>ã€‚</p></li><li><p>text()ï¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ä¸”åŒ…å« blob æ‰€æœ‰å†…å®¹çš„ UTF-8 æ ¼å¼çš„ <code>USVString</code>ã€‚</p></li><li><p>arrayBuffer()ï¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ä¸”åŒ…å« blob æ‰€æœ‰å†…å®¹çš„äºŒè¿›åˆ¶æ ¼å¼çš„ <code>ArrayBuffer</code>ã€‚</p></li></ul><p>è¿™é‡Œæˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ** <code>Blob</code> å¯¹è±¡æ˜¯ä¸å¯æ”¹å˜çš„**ã€‚æˆ‘ä»¬ä¸èƒ½ç›´æ¥åœ¨ä¸€ä¸ª Blob ä¸­æ›´æ”¹æ•°æ®ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å¯¹ä¸€ä¸ª Blob è¿›è¡Œåˆ†å‰²ï¼Œä»å…¶ä¸­åˆ›å»ºæ–°çš„ Blob å¯¹è±¡ï¼Œå°†å®ƒä»¬æ··åˆåˆ°ä¸€ä¸ªæ–°çš„ Blob ä¸­ã€‚è¿™ç§è¡Œä¸ºç±»ä¼¼äº JavaScript å­—ç¬¦ä¸²ï¼šæˆ‘ä»¬æ— æ³•æ›´æ”¹å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ï¼Œä½†å¯ä»¥åˆ›å»ºæ–°çš„æ›´æ­£åçš„å­—ç¬¦ä¸²ã€‚</p><h3 id="ä¸‰ã€Blob-ä½¿ç”¨åœºæ™¯"><a href="#ä¸‰ã€Blob-ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä¸‰ã€Blob ä½¿ç”¨åœºæ™¯"></a><span style="display: none; "></span>ä¸‰ã€Blob ä½¿ç”¨åœºæ™¯<span style="display: none; "></span></h3><h4 id="3-1-åˆ†ç‰‡ä¸Šä¼ "><a href="#3-1-åˆ†ç‰‡ä¸Šä¼ " class="headerlink" title="3.1 åˆ†ç‰‡ä¸Šä¼ "></a><span style="display: none; "></span>3.1 åˆ†ç‰‡ä¸Šä¼ <span style="display: none; "></span></h4><p>File å¯¹è±¡æ˜¯ç‰¹æ®Šç±»å‹çš„ Blobï¼Œä¸”å¯ä»¥ç”¨åœ¨ä»»æ„çš„ Blob ç±»å‹çš„ä¸Šä¸‹æ–‡ä¸­ã€‚æ‰€ä»¥é’ˆå¯¹å¤§æ–‡ä»¶ä¼ è¾“çš„åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ slice æ–¹æ³•å¯¹å¤§æ–‡ä»¶è¿›è¡Œåˆ‡å‰²ï¼Œç„¶ååˆ†ç‰‡è¿›è¡Œä¸Šä¼ ï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><pre><code class="js">const file = new File(["a".repeat(1000000)], "test.txt");const chunkSize = 40000;const url = "https://httpbin.org/post";async function chunkedUpload() {    for (let start = 0; start &lt; file.size; start += chunkSize) {        const chunk = file.slice(start, start + chunkSize + 1);        const fd = new FormData();        fd.append("data", chunk);        await fetch(url, {            method: "post",            body: fd        }).then((res) =&gt; res.text());    }}</code></pre><h4 id="3-2-ä»äº’è”ç½‘ä¸‹è½½æ•°æ®"><a href="#3-2-ä»äº’è”ç½‘ä¸‹è½½æ•°æ®" class="headerlink" title="3.2 ä»äº’è”ç½‘ä¸‹è½½æ•°æ®"></a><span style="display: none; "></span>3.2 ä»äº’è”ç½‘ä¸‹è½½æ•°æ®<span style="display: none; "></span></h4><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ä»äº’è”ç½‘ä¸Šä¸‹è½½æ•°æ®å¹¶å°†æ•°æ®å­˜å‚¨åˆ° Blob å¯¹è±¡ä¸­ï¼Œæ¯”å¦‚ï¼š</p><pre><code class="js">const downloadBlob = (url, callback) =&gt; {    const xhr = new XMLHttpRequest()    xhr.open('GET', url)    xhr.responseType = 'blob'    xhr.onload = () =&gt; {        callback(xhr.response)    }    xhr.send(null)}</code></pre><p>å½“ç„¶é™¤äº†ä½¿ç”¨ <code>XMLHttpRequest</code> API ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>fetch</code> API æ¥å®ç°ä»¥æµçš„æ–¹å¼è·å–äºŒè¿›åˆ¶æ•°æ®ã€‚è¿™é‡Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ fetch API è·å–çº¿ä¸Šå›¾ç‰‡å¹¶æœ¬åœ°æ˜¾ç¤ºï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š</p><pre><code class="js">const myImage = document.querySelector('img');const myRequest = new Request('flowers.jpg');fetch(myRequest)    .then(function(response) {        return response.blob();    })    .then(function(myBlob) {        let objectURL = URL.createObjectURL(myBlob);        myImage.src = objectURL;    });</code></pre><p>å½“ fetch è¯·æ±‚æˆåŠŸçš„æ—¶å€™ï¼Œæˆ‘ä»¬è°ƒç”¨ response å¯¹è±¡çš„ <code>blob()</code> æ–¹æ³•ï¼Œä» response å¯¹è±¡ä¸­è¯»å–ä¸€ä¸ª Blob å¯¹è±¡ï¼Œç„¶åä½¿ç”¨ <code>createObjectURL()</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ª objectURLï¼Œç„¶åæŠŠå®ƒèµ‹å€¼ç»™ <code>img</code> å…ƒç´ çš„ <code>src</code> å±æ€§ä»è€Œæ˜¾ç¤ºè¿™å¼ å›¾ç‰‡ã€‚</p><h4 id="3-3-Blob-ç”¨ä½œ-URL"><a href="#3-3-Blob-ç”¨ä½œ-URL" class="headerlink" title="3.3 Blob ç”¨ä½œ URL"></a><span style="display: none; "></span>3.3 Blob ç”¨ä½œ URL<span style="display: none; "></span></h4><p>Blob å¯ä»¥å¾ˆå®¹æ˜“çš„ä½œä¸º <code>&lt;a&gt;</code> ã€ <code>&lt;img&gt;</code> æˆ–å…¶ä»–æ ‡ç­¾çš„ URLï¼Œå¤šäºäº† <code>type</code> å±æ€§ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸Šä¼ /ä¸‹è½½ <code>Blob</code> å¯¹è±¡ã€‚ä¸‹é¢æˆ‘ä»¬å°†ä¸¾ä¸€ä¸ª Blob æ–‡ä»¶ä¸‹è½½çš„ç¤ºä¾‹ï¼Œä¸è¿‡åœ¨çœ‹å…·ä½“ç¤ºä¾‹å‰æˆ‘ä»¬å¾—ç®€å•ä»‹ç»ä¸€ä¸‹ Blob URLã€‚</p><p><strong>1. Blob URL/Object URL</strong></p><p>Blob URL/Object URL æ˜¯ä¸€ç§ä¼ªåè®®ï¼Œå…è®¸ Blob å’Œ File å¯¹è±¡ç”¨ä½œå›¾åƒï¼Œä¸‹è½½äºŒè¿›åˆ¶æ•°æ®é“¾æ¥ç­‰çš„ URL æºã€‚åœ¨æµè§ˆå™¨ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>URL.createObjectURL</code> æ–¹æ³•æ¥åˆ›å»º Blob URLï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ª <code>Blob</code> å¯¹è±¡ï¼Œå¹¶ä¸ºå…¶åˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„ URLï¼Œå…¶å½¢å¼ä¸º <code>blob:&lt;origin&gt;/&lt;uuid&gt;</code> ï¼Œå¯¹åº”çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><pre><code class="html">blob:https://example.org/40a5fb5a-d56d-4a33-b4e2-0acf6a8e5f641</code></pre><p>æµè§ˆå™¨å†…éƒ¨ä¸ºæ¯ä¸ªé€šè¿‡ <code>URL.createObjectURL</code> ç”Ÿæˆçš„ URL å­˜å‚¨äº†ä¸€ä¸ª URL â†’ Blob æ˜ å°„ã€‚å› æ­¤ï¼Œæ­¤ç±» URL è¾ƒçŸ­ï¼Œä½†å¯ä»¥è®¿é—® <code>Blob</code> ã€‚ç”Ÿæˆçš„ URL ä»…åœ¨å½“å‰æ–‡æ¡£æ‰“å¼€çš„çŠ¶æ€ä¸‹æ‰æœ‰æ•ˆã€‚å®ƒå…è®¸å¼•ç”¨ <code>&lt;img&gt;</code> ã€ <code>&lt;a&gt;</code> ä¸­çš„ <code>Blob</code> ï¼Œä½†å¦‚æœä½ è®¿é—®çš„ Blob URL ä¸å†å­˜åœ¨ï¼Œåˆ™ä¼šä»æµè§ˆå™¨ä¸­æ”¶åˆ° 404 é”™è¯¯ã€‚</p><p>ä¸Šè¿°çš„ Blob URL çœ‹ä¼¼å¾ˆä¸é”™ï¼Œä½†å®é™…ä¸Šå®ƒä¹Ÿæœ‰å‰¯ä½œç”¨ã€‚è™½ç„¶å­˜å‚¨äº† URL â†’ Blob çš„æ˜ å°„ï¼Œä½† Blob æœ¬èº«ä»é©»ç•™åœ¨å†…å­˜ä¸­ï¼Œæµè§ˆå™¨æ— æ³•é‡Šæ”¾å®ƒã€‚æ˜ å°„åœ¨æ–‡æ¡£å¸è½½æ—¶è‡ªåŠ¨æ¸…é™¤ï¼Œå› æ­¤ Blob å¯¹è±¡éšåè¢«é‡Šæ”¾ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœåº”ç”¨ç¨‹åºå¯¿å‘½å¾ˆé•¿ï¼Œé‚£ä¸ä¼šå¾ˆå¿«å‘ç”Ÿã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª Blob URLï¼Œå³ä½¿ä¸å†éœ€è¦è¯¥ Blobï¼Œå®ƒä¹Ÿä¼šå­˜åœ¨å†…å­˜ä¸­ã€‚</p><p>é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ <code>URL.revokeObjectURL(url)</code> æ–¹æ³•ï¼Œä»å†…éƒ¨æ˜ å°„ä¸­åˆ é™¤å¼•ç”¨ï¼Œä»è€Œå…è®¸åˆ é™¤ Blobï¼ˆå¦‚æœæ²¡æœ‰å…¶ä»–å¼•ç”¨ï¼‰ï¼Œå¹¶é‡Šæ”¾å†…å­˜ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ Blob æ–‡ä»¶ä¸‹è½½çš„å…·ä½“ç¤ºä¾‹ã€‚</p><p><strong>2. Blob æ–‡ä»¶ä¸‹è½½ç¤ºä¾‹</strong></p><p><strong>index.html</strong></p><pre><code class="html">&lt;!DOCTYPE&nbsp;html&gt;&lt;html&gt;&nbsp;&nbsp;&lt;head&gt;&nbsp;&nbsp;&nbsp;    &lt;meta&nbsp;charset="UTF-8"&nbsp; /&gt;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;title&gt;Blob&nbsp;æ–‡ä»¶ä¸‹è½½ç¤ºä¾‹&lt;/title&gt;&nbsp;&nbsp;&lt;/head&gt;&nbsp;&nbsp;&lt;body&gt;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;button&nbsp;id="downloadBtn"&gt;æ–‡ä»¶ä¸‹è½½&lt;/button&gt;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;script&nbsp;src="index.js"&gt;&lt;/script&gt;&nbsp;&nbsp;&lt;/body&gt;&lt;/html&gt;</code></pre><p><strong>index.js</strong></p><pre><code class="js">const download = (fileName, blob) =&gt; {    const link = document.createElement("a");    link.href = URL.createObjectURL(blob);    link.download = fileName;    link.click();    link.remove();    URL.revokeObjectURL(link.href);};const downloadBtn = document.querySelector("#downloadBtn");downloadBtn.addEventListener("click", (event) =&gt; {    const fileName = "blob.txt";    const myBlob = new Blob(["ä¸€æ–‡å½»åº•æŒæ¡&nbsp;Blob&nbsp;Web&nbsp;API"], {        type: "text/plain"    });    download(fileName, myBlob);});</code></pre><p>åœ¨ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨ Blob çš„æ„é€ å‡½æ•°æ¥åˆ›å»ºç±»å‹ä¸º <strong>â€œtext/plainâ€</strong> çš„ Blob å¯¹è±¡ï¼Œç„¶åé€šè¿‡åŠ¨æ€åˆ›å»º <code>a</code> æ ‡ç­¾æ¥å®ç°æ–‡ä»¶çš„ä¸‹è½½ã€‚</p><h4 id="3-4-Blob-è½¬æ¢ä¸º-Base64"><a href="#3-4-Blob-è½¬æ¢ä¸º-Base64" class="headerlink" title="3.4 Blob è½¬æ¢ä¸º Base64"></a><span style="display: none; "></span>3.4 Blob è½¬æ¢ä¸º Base64<span style="display: none; "></span></h4><p><code>URL.createObjectURL</code> çš„ä¸€ä¸ªæ›¿ä»£æ–¹æ³•æ˜¯ï¼Œå°† <code>Blob</code> è½¬æ¢ä¸º base64 ç¼–ç çš„å­—ç¬¦ä¸²ã€‚<strong>Base64</strong> æ˜¯ä¸€ç§åŸºäº 64 ä¸ªå¯æ‰“å°å­—ç¬¦æ¥è¡¨ç¤ºäºŒè¿›åˆ¶æ•°æ®çš„è¡¨ç¤ºæ–¹æ³•ï¼Œ<strong>å®ƒå¸¸ç”¨äºåœ¨å¤„ç†æ–‡æœ¬æ•°æ®çš„åœºåˆï¼Œè¡¨ç¤ºã€ä¼ è¾“ã€å­˜å‚¨ä¸€äº›äºŒè¿›åˆ¶æ•°æ®ï¼ŒåŒ…æ‹¬ MIME çš„ç”µå­é‚®ä»¶åŠ XML çš„ä¸€äº›å¤æ‚æ•°æ®ã€‚</strong></p><p>åœ¨ MIME æ ¼å¼çš„ç”µå­é‚®ä»¶ä¸­ï¼Œbase64 å¯ä»¥ç”¨æ¥å°†äºŒè¿›åˆ¶çš„å­—èŠ‚åºåˆ—æ•°æ®ç¼–ç æˆ ASCII å­—ç¬¦åºåˆ—æ„æˆçš„æ–‡æœ¬ã€‚ä½¿ç”¨æ—¶ï¼Œåœ¨ä¼ è¾“ç¼–ç æ–¹å¼ä¸­æŒ‡å®š base64ã€‚ä½¿ç”¨çš„å­—ç¬¦åŒ…æ‹¬å¤§å°å†™æ‹‰ä¸å­—æ¯å„ 26 ä¸ªã€æ•°å­— 10 ä¸ªã€åŠ å· + å’Œæ–œæ  /ï¼Œå…± 64 ä¸ªå­—ç¬¦ï¼Œç­‰å· = ç”¨æ¥ä½œä¸ºåç¼€ç”¨é€”ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»å¦‚ä½•åœ¨ HTML ä¸­åµŒå…¥ base64 ç¼–ç çš„å›¾ç‰‡ã€‚åœ¨ç¼–å†™ HTML ç½‘é¡µæ—¶ï¼Œå¯¹äºä¸€äº›ç®€å•å›¾ç‰‡ï¼Œé€šå¸¸ä¼šé€‰æ‹©å°†å›¾ç‰‡å†…å®¹ç›´æ¥å†…åµŒåœ¨ç½‘é¡µä¸­ï¼Œä»è€Œå‡å°‘ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚ï¼Œä½†æ˜¯å›¾ç‰‡æ•°æ®æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œè¯¥æ€ä¹ˆåµŒå…¥å‘¢ï¼Ÿç»å¤§å¤šæ•°ç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒä¸€ç§åä¸º <code>Data URLs</code> çš„ç‰¹æ€§ï¼Œå…è®¸ä½¿ç”¨ base64 å¯¹å›¾ç‰‡æˆ–å…¶ä»–æ–‡ä»¶çš„äºŒè¿›åˆ¶æ•°æ®è¿›è¡Œç¼–ç ï¼Œå°†å…¶ä½œä¸ºæ–‡æœ¬å­—ç¬¦ä¸²åµŒå…¥ç½‘é¡µä¸­ã€‚</p><p>Data URLs ç”±å››ä¸ªéƒ¨åˆ†ç»„æˆï¼šå‰ç¼€ï¼ˆ <code>data:</code> ï¼‰ã€æŒ‡ç¤ºæ•°æ®ç±»å‹çš„ MIME ç±»å‹ã€å¦‚æœéæ–‡æœ¬åˆ™ä¸ºå¯é€‰çš„ <code>base64</code> æ ‡è®°ã€æ•°æ®æœ¬èº«ï¼š</p><pre><code class="html">data:[&lt;mediatype&gt;][;base64],&lt;data&gt;</code></pre><p><code>mediatype</code> æ˜¯ä¸ª MIME ç±»å‹çš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ â€œ <code>image/jpeg</code> â€œ è¡¨ç¤º JPEG å›¾åƒæ–‡ä»¶ã€‚å¦‚æœè¢«çœç•¥ï¼Œåˆ™é»˜è®¤å€¼ä¸º <code>text/plain;charset=US-ASCII</code> ã€‚å¦‚æœæ•°æ®æ˜¯æ–‡æœ¬ç±»å‹ï¼Œä½ å¯ä»¥ç›´æ¥å°†æ–‡æœ¬åµŒå…¥ï¼ˆæ ¹æ®æ–‡æ¡£ç±»å‹ï¼Œä½¿ç”¨åˆé€‚çš„å®ä½“å­—ç¬¦æˆ–è½¬ä¹‰å­—ç¬¦ï¼‰ã€‚å¦‚æœæ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œä½ å¯ä»¥å°†æ•°æ®è¿›è¡Œ base64 ç¼–ç ä¹‹åå†è¿›è¡ŒåµŒå…¥ã€‚æ¯”å¦‚åµŒå…¥ä¸€å¼ å›¾ç‰‡ï¼š</p><pre><code class="html">&lt;img&nbsp;alt="logo"&nbsp;src="data:image /png;base64,iVBORw0KGgoAAAANSUhEUg..."&gt;</code></pre><p><strong>ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¦‚æœå›¾ç‰‡è¾ƒå¤§ï¼Œå›¾ç‰‡çš„è‰²å½©å±‚æ¬¡æ¯”è¾ƒä¸°å¯Œï¼Œåˆ™ä¸é€‚åˆä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå› ä¸ºè¯¥å›¾ç‰‡ç»è¿‡ base64 ç¼–ç åçš„å­—ç¬¦ä¸²éå¸¸å¤§ï¼Œä¼šæ˜æ˜¾å¢å¤§ HTML é¡µé¢çš„å¤§å°ï¼Œä»è€Œå½±å“åŠ è½½é€Ÿåº¦ã€‚</strong> é™¤æ­¤ä¹‹å¤–ï¼Œåˆ©ç”¨ FileReader APIï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ–¹ä¾¿çš„å®ç°å›¾ç‰‡æœ¬åœ°é¢„è§ˆåŠŸèƒ½ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="html">&lt;input&nbsp;type="file"&nbsp;accept="image /*"&nbsp;onchange="loadFile(event)"&gt;&lt;img&nbsp;id="output" /&gt;&lt;script&gt;    const loadFile = function(event) {        const reader = new FileReader();        reader.onload = function() {            const output = document.querySelector('output');            output.src = reader.result;        };        reader.readAsDataURL(event.target.files[0]);    };&lt;/script&gt;</code></pre><p>åœ¨ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¸º file ç±»å‹è¾“å…¥æ¡†ç»‘å®š <code>onchange</code> äº‹ä»¶å¤„ç†å‡½æ•° <code>loadFile</code> ï¼Œåœ¨è¯¥å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª FileReader å¯¹è±¡å¹¶ä¸ºè¯¥å¯¹è±¡ç»‘å®š <code>onload</code> ç›¸åº”çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œç„¶åè°ƒç”¨ FileReader å¯¹è±¡çš„ <code>readAsDataURL()</code> æ–¹æ³•ï¼ŒæŠŠæœ¬åœ°å›¾ç‰‡å¯¹åº”çš„ File å¯¹è±¡è½¬æ¢ä¸º Data URLã€‚</p><p>åœ¨å®Œæˆæœ¬åœ°å›¾ç‰‡é¢„è§ˆä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠå›¾ç‰‡å¯¹åº”çš„ Data URLs æ•°æ®æäº¤åˆ°æœåŠ¡å™¨ã€‚é’ˆå¯¹è¿™ç§æƒ…å½¢ï¼ŒæœåŠ¡ç«¯éœ€è¦åšä¸€äº›ç›¸å…³å¤„ç†ï¼Œæ‰èƒ½æ­£å¸¸ä¿å­˜ä¸Šä¼ çš„å›¾ç‰‡ï¼Œè¿™é‡Œä»¥ Express ä¸ºä¾‹ï¼Œå…·ä½“å¤„ç†ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="js">const app = require('express')();app.post('/upload', function(req, res) {    let imgData = req.body.imgData; //&nbsp;è·å–POSTè¯·æ±‚ä¸­çš„base64å›¾ç‰‡æ•°æ®&nbsp;&nbsp;&nbsp;&nbsp;    let base64Data = imgData.replace(/^data:image\/\w+;base64,/, "");    let dataBuffer = Buffer.from(base64Data, 'base64');    fs.writeFile("image.png", dataBuffer, function(err) {        if (err) {            res.send(err);        } else {            res.send("å›¾ç‰‡ä¸Šä¼ æˆåŠŸï¼");        }    });});</code></pre><p>å¯¹äº FileReader å¯¹è±¡æ¥è¯´ï¼Œé™¤äº†æ”¯æŒæŠŠ Blob/File å¯¹è±¡è½¬æ¢ä¸º Data URL ä¹‹å¤–ï¼Œå®ƒè¿˜æä¾›äº† <code>readAsArrayBuffer()</code> å’Œ <code>readAsText()</code> æ–¹æ³•ï¼Œç”¨äºæŠŠ Blob/File å¯¹è±¡è½¬æ¢ä¸ºå…¶å®ƒçš„æ•°æ®æ ¼å¼ã€‚è¿™é‡Œæˆ‘ä»¬æ¥çœ‹ä¸ª <code>readAsArrayBuffer()</code> çš„ä½¿ç”¨ç¤ºä¾‹ï¼š</p><pre><code class="js">//&nbsp;ä»&nbsp;blob&nbsp;è·å–&nbsp;arrayBufferlet fileReader = new FileReader();fileReader.onload = function(event) {    let arrayBuffer = fileReader.result;};fileReader.readAsArrayBuffer(blob);</code></pre><h4 id="3-5-å›¾ç‰‡å‹ç¼©"><a href="#3-5-å›¾ç‰‡å‹ç¼©" class="headerlink" title="3.5 å›¾ç‰‡å‹ç¼©"></a><span style="display: none; "></span>3.5 å›¾ç‰‡å‹ç¼©<span style="display: none; "></span></h4><p>åœ¨ä¸€äº›åœºåˆä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ä¸Šä¼ æœ¬åœ°å›¾ç‰‡æ—¶ï¼Œå…ˆå¯¹å›¾ç‰‡è¿›è¡Œä¸€å®šçš„å‹ç¼©ï¼Œç„¶åå†æäº¤åˆ°æœåŠ¡å™¨ï¼Œä»è€Œå‡å°‘ä¼ è¾“çš„æ•°æ®é‡ã€‚åœ¨å‰ç«¯è¦å®ç°å›¾ç‰‡å‹ç¼©ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Canvas å¯¹è±¡æä¾›çš„ <code>toDataURL()</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ <code>type</code> å’Œ <code>encoderOptions</code> ä¸¤ä¸ªå¯é€‰å‚æ•°ã€‚</p><p>å…¶ä¸­ <code>type</code> è¡¨ç¤ºå›¾ç‰‡æ ¼å¼ï¼Œé»˜è®¤ä¸º <code>image/png</code> ã€‚è€Œ <code>encoderOptions</code> ç”¨äºè¡¨ç¤ºå›¾ç‰‡çš„è´¨é‡ï¼Œåœ¨æŒ‡å®šå›¾ç‰‡æ ¼å¼ä¸º <code>image/jpeg</code> æˆ– <code>image/webp</code> çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä» 0 åˆ° 1 çš„åŒºé—´å†…é€‰æ‹©å›¾ç‰‡çš„è´¨é‡ã€‚å¦‚æœè¶…å‡ºå–å€¼èŒƒå›´ï¼Œå°†ä¼šä½¿ç”¨é»˜è®¤å€¼ <code>0.92</code> ï¼Œå…¶ä»–å‚æ•°ä¼šè¢«å¿½ç•¥ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å…·ä½“å¦‚ä½•å®ç°å›¾ç‰‡å‹ç¼©ï¼š</p><pre><code class="js">//&nbsp;compress.jsconst MAX_WIDTH = 800; //&nbsp;å›¾ç‰‡æœ€å¤§å®½åº¦function compress(base64, quality, mimeType) {    let canvas = document.createElement("canvas");    let img = document.createElement("img");    img.crossOrigin = "anonymous";    return new Promise((resolve, reject) =&gt; {        img.src = base64;        img.onload = () =&gt; {            let targetWidth, targetHeight;            if (img.width &gt; MAX_WIDTH) {                targetWidth = MAX_WIDTH;                targetHeight = (img.height * MAX_WIDTH) / img.width;            } else {                targetWidth = img.width;                targetHeight = img.height;            }            canvas.width = targetWidth;            canvas.height = targetHeight;            let ctx = canvas.getContext("2d");            ctx.clearRect(0, 0, targetWidth, targetHeight); //&nbsp;æ¸…é™¤ç”»å¸ƒ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);            let imageData = canvas.toDataURL(mimeType, quality / 100);            resolve(imageData);        };    });}</code></pre><p>å¯¹äºè¿”å›çš„ Data URL æ ¼å¼çš„å›¾ç‰‡æ•°æ®ï¼Œä¸ºäº†è¿›ä¸€æ­¥å‡å°‘ä¼ è¾“çš„æ•°æ®é‡ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒè½¬æ¢ä¸º Blob å¯¹è±¡ï¼š</p><pre><code class="js">function dataUrlToBlob(base64, mimeType) {    let bytes = window.atob(base64.split(",")[1]);    let ab = new ArrayBuffer(bytes.length);    let ia = new Uint8Array(ab);    for (let i = 0; i &lt; bytes.length; i++) {        ia[i] = bytes.charCodeAt(i);    }    return new Blob([ia], {        type: mimeType    });}</code></pre><p>åœ¨è½¬æ¢å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥å‹ç¼©åçš„å›¾ç‰‡å¯¹åº”çš„ Blob å¯¹è±¡å°è£…åœ¨ FormData å¯¹è±¡ä¸­ï¼Œç„¶åå†é€šè¿‡ AJAX æäº¤åˆ°æœåŠ¡å™¨ä¸Šï¼š</p><pre><code class="js">function uploadFile(url, blob) {    let formData = new FormData();    let request = new XMLHttpRequest();    formData.append("image", blob);    request.open("POST", url, true);    request.send(formData);}</code></pre><p>å…¶å® Canvas å¯¹è±¡é™¤äº†æä¾› <code>toDataURL()</code> æ–¹æ³•ä¹‹å¤–ï¼Œå®ƒè¿˜æä¾›äº†ä¸€ä¸ª <code>toBlob()</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„è¯­æ³•å¦‚ä¸‹ï¼š</p><blockquote><p>canvas.toBlob(callback, mimeType, qualityArgument)</p></blockquote><p>å’Œ <code>toDataURL()</code> æ–¹æ³•ç›¸æ¯”ï¼Œ <code>toBlob()</code> æ–¹æ³•æ˜¯å¼‚æ­¥çš„ï¼Œå› æ­¤å¤šäº†ä¸ª <code>callback</code> å‚æ•°ï¼Œè¿™ä¸ª <code>callback</code> å›è°ƒæ–¹æ³•é»˜è®¤çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯è½¬æ¢å¥½çš„ <code>blob</code> æ–‡ä»¶ä¿¡æ¯ã€‚</p><p>ä»‹ç»å®Œä¸Šè¿°çš„å†…å®¹ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æœ¬åœ°å›¾ç‰‡å‹ç¼©å®Œæ•´çš„ç¤ºä¾‹ï¼š</p><pre><code class="html">&lt;!DOCTYPE&nbsp;html&gt;&lt;html&gt;&nbsp;&nbsp;&lt;head&gt;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;meta&nbsp;charset="UTF-8"&nbsp; /&gt;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;meta&nbsp;name="viewport"&nbsp;content="width=device-width,&nbsp;initial-scale=1.0"&nbsp; /&gt;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;title&gt;æœ¬åœ°å›¾ç‰‡å‹ç¼©&lt;/title&gt;&nbsp;&nbsp;&lt;/head&gt;&nbsp;&nbsp;&lt;body&gt;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;input&nbsp;type="file"&nbsp;accept="image /*"&nbsp;onchange="loadFile(event)" &nbsp; /&gt;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;script&nbsp;src=". /compress.js"&gt;&lt;/script&gt;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;script&gt;        const loadFile = function(event) {            const reader = new FileReader();            reader.onload = async function() {                let compressedDataURL = await compress(                    reader.result,                    90,                    "image/jpeg"                );                let compressedImageBlob = dataUrlToBlob(compressedDataURL);                uploadFile("https://httpbin.org/post", compressedImageBlob);            };            reader.readAsDataURL(event.target.files[0]);        };    &lt;/script&gt;&nbsp;&nbsp;&lt;/body&gt;&lt;/html&gt;</code></pre><h4 id="3-6-ç”Ÿæˆ-PDF-æ–‡æ¡£"><a href="#3-6-ç”Ÿæˆ-PDF-æ–‡æ¡£" class="headerlink" title="3.6 ç”Ÿæˆ PDF æ–‡æ¡£"></a><span style="display: none; "></span>3.6 ç”Ÿæˆ PDF æ–‡æ¡£<span style="display: none; "></span></h4><p>PDFï¼ˆä¾¿æºå¼æ–‡ä»¶æ ¼å¼ï¼ŒPortable Document Formatï¼‰æ˜¯ç”± Adobe Systems åœ¨ 1993 å¹´ç”¨äºæ–‡ä»¶äº¤æ¢æ‰€å‘å±•å‡ºçš„æ–‡ä»¶æ ¼å¼ã€‚åœ¨æµè§ˆå™¨ç«¯ï¼Œåˆ©ç”¨ä¸€äº›ç°æˆçš„å¼€æºåº“ï¼Œæ¯”å¦‚ jsPDFï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ–¹ä¾¿åœ°ç”Ÿæˆ PDF æ–‡æ¡£ã€‚</p><pre><code class="html">&lt;!DOCTYPE&nbsp;html&gt;&lt;html&gt;&nbsp;&nbsp;&lt;head&gt;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;meta&nbsp;charset="UTF-8"&nbsp; /&gt;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;meta&nbsp;name="viewport"&nbsp;content="width=device-width,&nbsp;initial-scale=1.0"&nbsp; /&gt;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;title&gt;å®¢æˆ·ç«¯ç”Ÿæˆ&nbsp;PDF&nbsp;ç¤ºä¾‹&lt;/title&gt;&nbsp;&nbsp;&lt;/head&gt;&nbsp;&nbsp;&lt;body&gt;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;h3&gt;å®¢æˆ·ç«¯ç”Ÿæˆ&nbsp;PDF&nbsp;ç¤ºä¾‹&lt;/h3&gt;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;script&nbsp;src="https: //unpkg.com/jspdf@latest/dist/jspdf.min.js"&gt;&lt;/script&gt;&nbsp;&nbsp;&nbsp;&nbsp;    &lt;script&gt;        (function generatePdf() {            const doc = new jsPDF();            doc.text("Hello&nbsp;semlinker!", 66, 88);            const blob = new Blob([doc.output()], {                type: "application/pdf"            });            blob.text().then((blobAsText) =&gt; {                console.log(blobAsText);            });        })();    &lt;/script&gt;&nbsp;&nbsp;&lt;/body&gt;&lt;/html&gt;</code></pre><p>åœ¨ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»º PDF æ–‡æ¡£å¯¹è±¡ï¼Œç„¶åè°ƒç”¨è¯¥å¯¹è±¡ä¸Šçš„ <code>text()</code> æ–¹æ³•åœ¨æŒ‡å®šçš„åæ ‡ç‚¹ä¸Šæ·»åŠ  <code>Hello semlinker!</code> æ–‡æœ¬ï¼Œç„¶åæˆ‘ä»¬åˆ©ç”¨ç”Ÿæˆçš„ PDF å†…å®¹æ¥åˆ›å»ºå¯¹åº”çš„ Blob å¯¹è±¡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬è®¾ç½® Blob çš„ç±»å‹ä¸º <code>application/pdf</code> ï¼Œæœ€åæˆ‘ä»¬æŠŠ Blob å¯¹è±¡ä¸­ä¿å­˜çš„å†…å®¹è½¬æ¢ä¸ºæ–‡æœ¬å¹¶è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚ç”±äºå†…å®¹è¾ƒå¤šï¼Œè¿™é‡Œæˆ‘ä»¬åªåˆ—å‡ºå°‘éƒ¨åˆ†è¾“å‡ºç»“æœï¼š</p><pre><code class="js">% PDF - 1.3 % ÂºÃŸÂ¬ Ã 3 0 obj &lt;&lt; /Type&nbsp;/Page / Parent 1 0 R / Resources 2 0 R / MediaBox[0 0 595.28 841.89] / Contents 4 0 R &gt;&gt; endobj....</code></pre><p>å…¶å® jsPDF é™¤äº†æ”¯æŒçº¯æ–‡æœ¬ä¹‹å¤–ï¼Œå®ƒä¹Ÿå¯ä»¥ç”Ÿæˆå¸¦å›¾ç‰‡çš„ PDF æ–‡æ¡£ï¼Œæ¯”å¦‚ï¼š</p><pre><code class="js">let imgData = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/...';let doc = new jsPDF();doc.setFontSize(40);doc.text(35, 25, 'Paranyan&nbsp;loves&nbsp;jsPDF');doc.addImage(imgData, 'JPEG', 15, 40, 180, 160);</code></pre><p>Blob çš„åº”ç”¨åœºæ™¯è¿˜å¾ˆå¤šï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è‡ªè¡ŒæŸ¥é˜…ç›¸å…³èµ„æ–™ã€‚</p><h3 id="å››ã€Blob-ä¸-ArrayBuffer-çš„åŒºåˆ«"><a href="#å››ã€Blob-ä¸-ArrayBuffer-çš„åŒºåˆ«" class="headerlink" title="å››ã€Blob ä¸ ArrayBuffer çš„åŒºåˆ«"></a><span style="display: none; "></span>å››ã€Blob ä¸ ArrayBuffer çš„åŒºåˆ«<span style="display: none; "></span></h3><p><strong>ArrayBuffer</strong> å¯¹è±¡ç”¨äºè¡¨ç¤ºé€šç”¨çš„ï¼Œå›ºå®šé•¿åº¦çš„åŸå§‹äºŒè¿›åˆ¶æ•°æ®ç¼“å†²åŒºã€‚ä½ ä¸èƒ½ç›´æ¥æ“çºµ ArrayBuffer çš„å†…å®¹ï¼Œè€Œæ˜¯éœ€è¦åˆ›å»ºä¸€ä¸ªç±»å‹åŒ–æ•°ç»„å¯¹è±¡æˆ– DataView å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä»¥ç‰¹å®šæ ¼å¼è¡¨ç¤ºç¼“å†²åŒºï¼Œå¹¶ä½¿ç”¨è¯¥å¯¹è±¡è¯»å–å’Œå†™å…¥ç¼“å†²åŒºçš„å†…å®¹ã€‚</p><p><strong>Blob</strong> ç±»å‹çš„å¯¹è±¡è¡¨ç¤ºä¸å¯å˜çš„ç±»ä¼¼æ–‡ä»¶å¯¹è±¡çš„åŸå§‹æ•°æ®ã€‚Blob è¡¨ç¤ºçš„ä¸ä¸€å®šæ˜¯ JavaScript åŸç”Ÿæ ¼å¼çš„æ•°æ®ã€‚File æ¥å£åŸºäº Blobï¼Œç»§æ‰¿äº†Blob åŠŸèƒ½å¹¶å°†å…¶æ‰©å±•ä¸ºæ”¯æŒç”¨æˆ·ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ã€‚</p><h4 id="4-1-Blob-vs-ArrayBuffer"><a href="#4-1-Blob-vs-ArrayBuffer" class="headerlink" title="4.1 Blob vs ArrayBuffer"></a><span style="display: none; "></span>4.1 Blob vs ArrayBuffer<span style="display: none; "></span></h4><ul><li><p>é™¤éä½ éœ€è¦ä½¿ç”¨ ArrayBuffer æä¾›çš„å†™å…¥/ç¼–è¾‘çš„èƒ½åŠ›ï¼Œå¦åˆ™ Blob æ ¼å¼å¯èƒ½æ˜¯æœ€å¥½çš„ã€‚</p></li><li><p>Blob å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œè€Œ ArrayBuffer æ˜¯å¯ä»¥é€šè¿‡ TypedArrays æˆ– DataView æ¥æ“ä½œã€‚</p></li><li><p>ArrayBuffer æ˜¯å­˜åœ¨å†…å­˜ä¸­çš„ï¼Œå¯ä»¥ç›´æ¥æ“ä½œã€‚è€Œ Blob å¯ä»¥ä½äºç£ç›˜ã€é«˜é€Ÿç¼“å­˜å†…å­˜å’Œå…¶ä»–ä¸å¯ç”¨çš„ä½ç½®ã€‚</p></li><li><p>è™½ç„¶ Blob å¯ä»¥ç›´æ¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼Œæ¯”å¦‚ <code>window.URL.createObjectURL()</code>ã€‚ä½†æ˜¯ï¼Œä½ å¯èƒ½ä»éœ€è¦ FileReader ä¹‹ç±»çš„ File API æ‰èƒ½ä¸ Blob ä¸€èµ·ä½¿ç”¨ã€‚</p></li><li><p>Blob ä¸ ArrayBuffer å¯¹è±¡ä¹‹é—´æ˜¯å¯ä»¥ç›¸äº’è½¬åŒ–çš„ï¼š</p></li><li><p>ä½¿ç”¨ FileReader çš„ <code>readAsArrayBuffer()</code> æ–¹æ³•ï¼Œå¯ä»¥æŠŠ Blob å¯¹è±¡è½¬æ¢ä¸º ArrayBuffer å¯¹è±¡ï¼›</p></li><li><p>ä½¿ç”¨ Blob æ„é€ å‡½æ•°ï¼Œå¦‚ <code>new Blob([new Uint8Array(data]);</code>ï¼Œå¯ä»¥æŠŠ ArrayBuffer å¯¹è±¡è½¬æ¢ä¸º Blob å¯¹è±¡ã€‚</p></li></ul><p>å¯¹äº HTTP çš„åœºæ™¯ï¼Œæ¯”å¦‚åœ¨ AJAX åœºæ™¯ä¸‹ï¼Œ<strong>Blob</strong> å’Œ <strong>ArrayBuffer</strong> å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥ä½¿ç”¨ï¼š</p><pre><code class="js">function GET(url, callback) {    let xhr = new XMLHttpRequest();    xhr.open('GET', url, true);    xhr.responseType = 'arraybuffer'; //&nbsp;or&nbsp;xhr.responseType&nbsp;=&nbsp;"blob";&nbsp;&nbsp;    xhr.send();    xhr.onload = function(e) {            if (xhr.status != 200) {                alert("Unexpected&nbsp;status&nbsp;code&nbsp;" + xhr.status + "&nbsp;for&nbsp;" + url);                return false;            }            callback(new Uint8Array(xhr.response)); //&nbsp;or&nbsp;new&nbsp;Blob([xhr.response]);&nbsp;&nbsp;};}</code></pre><p>å¯¹äº <strong>ArrayBuffer</strong> å’Œ <strong>Uint8Array</strong> æ„Ÿå…´è¶£çš„è¯»è€…ï¼Œå¯ä»¥é˜…è¯»<a href="http://mp.weixin.qq.com/s?__biz=MzI2MjcxNTQ0Nw==&amp;mid=2247484317&amp;idx=1&amp;sn=c0b397b6bd5fdfced0c1bebc187a7c0d&amp;chksm=ea47a2c5dd302bd37b285f65dd7a92df8ca1bc213465091e82a28be08ec5808b905e9fb69bec&amp;scene=21#wechat_redirect"><strong>Deno bytes æ¨¡å—å…¨è§£æ</strong></a>è¿™ç¯‡æ–‡ç« ã€‚</p><p>äº†è§£å®Œä¸Šè¿°çš„å†…å®¹ï¼Œç›¸ä¿¡æœ‰çš„è¯»è€…å¯èƒ½ä¼šè§‰å¾—æ„çŠ¹æœªå°½ã€‚é‚£ä¹ˆï¼Œå¯¹äº Blob æ¥è¯´è¿˜æœ‰å“ªäº›å†…å®¹å¯ä»¥ç»§ç»­æ·±å…¥å­¦ä¹ çš„å‘¢ï¼Ÿæœ¬äººä¸‹ä¸€æ­¥çš„è®¡åˆ’æ˜¯åŸºäº Deno çš„æºç ï¼Œæ¥é€æ­¥åˆ†æ DenoBlob çš„å…·ä½“å®ç°ã€‚å½“ç„¶ä¹Ÿä¼šé¡ºä¾¿åˆ†æä¸€ä¸‹ <code>URL.createObjectURL()</code> æ–¹æ³•å’Œ <code>revokeObjectURL()</code> æ–¹æ³•çš„å®ç°ã€‚  </p><h3 id="äº”ã€å‚è€ƒèµ„æº"><a href="#äº”ã€å‚è€ƒèµ„æº" class="headerlink" title="äº”ã€å‚è€ƒèµ„æº"></a><span style="display: none; "></span>äº”ã€å‚è€ƒèµ„æº<span style="display: none; "></span></h3><ul><li><p>MDN - Blob</p></li><li><p>MDN - Data URLs</p></li><li><p>javascript.info - blob</p></li><li><p>flaviocopes - blob</p></li><li><p>arraybuffer-vs-blob</p></li><li><p>javascript-interview-question-what-is-a-blob</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Blob </tag>
            
            <tag> äºŒè¿›åˆ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javascriptæ¨¡å—åŒ–æ¼”è¿›åŠåŸç†æµ…æ</title>
      <link href="/My-Blogs/2021/01/08/JavaScript/javascript%E6%A8%A1%E5%9D%97%E5%8C%96%E6%BC%94%E8%BF%9B%E5%8F%8A%E5%8E%9F%E7%90%86%E6%B5%85%E6%9E%90/"/>
      <url>/My-Blogs/2021/01/08/JavaScript/javascript%E6%A8%A1%E5%9D%97%E5%8C%96%E6%BC%94%E8%BF%9B%E5%8F%8A%E5%8E%9F%E7%90%86%E6%B5%85%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h3 id="æ¨¡å—åŒ–è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#æ¨¡å—åŒ–è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="æ¨¡å—åŒ–è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>æ¨¡å—åŒ–è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h3><a id="more"></a><p>æˆ‘ä»¬ä»”ç»†æƒ³ä¸€ä¸‹ï¼ŒJavascriptç¼–ç¨‹å…¶å®å¾ˆå¤šæ—¶å€™å°±æ˜¯ç®¡ç†å˜é‡ä»¥åŠå˜é‡èµ‹å€¼è¿™ä»¶äº‹ï¼Œæ¯”å¦‚æŠŠä¸€ä¸ªvalueèµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œç»™ä¸€ä¸ªå˜é‡åŠ ä¸Šä¸€ä¸ªvalueï¼Œæˆ–è€…æŠŠä¸¤ä¸ªå˜é‡ç›¸åŠ çš„ç»“æœèµ‹å€¼ç»™å¦å¤–ä¸€ä¸ªå˜é‡ï¼Œæ€æ ·å»ç®¡ç†è¿™äº›å˜é‡å¯¹æ—¥åå¦‚ä½•ç»´æŠ¤è¿™äº›ä»£ç å°±æ˜¾å¾—è‡³å…³é‡è¦ã€‚</p><p>åœ¨å¼€å‘ä¸­å¦‚æœæˆ‘ä»¬ä¸€æ¬¡ä»…éœ€è¦è€ƒè™‘å‡ ä¸ªå˜é‡ï¼Œé‚£ä¹ˆå·¥ä½œå°±ä¼šå˜å¾—å¾ˆç®€å•ã€‚å¹¸è¿çš„æ˜¯ï¼ŒJavsScriptæœ‰ä¸ªä½œç”¨åŸŸé“¾æ¥å¸®åŠ©æˆ‘ä»¬è§£å†³å˜é‡è¿‡å¤šçš„é—®é¢˜ï¼Œå› ä¸ºä½œç”¨åŸŸé“¾çš„å­˜åœ¨ï¼Œåœ¨ä¸€ä¸ªå‡½æ•°çš„å†…éƒ¨æ— æ³•è®¿é—®å¦å¤–ä¸€ä¸ªå‡½æ•°å†…éƒ¨çš„å˜é‡ï¼Œè¿™æ ·å°±ä½¿å¾—æˆ‘ä»¬åœ¨ç¼–ç¨‹çš„æ—¶å€™åªéœ€è¦å…³æ³¨è‡ªå·±å‡½æ•°å†…éƒ¨çš„é‚£å‡ ä¸ªå˜é‡å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦è¿‡åˆ†å»æ‹…å¿ƒå…¶ä»–å‡½æ•°çš„å½±å“ï¼Œå¤´å‘ä¹Ÿå¯ä»¥å°‘æ‰å‡ æ ¹ã€‚</p><p>ä½†æ˜¯ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¸å¾—ä¸è·Ÿå…¶ä»–å‡½æ•°å…±äº«çŠ¶æ€ï¼Œè¿™æ—¶å€™æˆ‘ä»¬ä¼šå°†è¿™äº›å˜é‡å­˜å‚¨åœ¨å…¨å±€ï¼ˆwindow/globalï¼‰ä¸Šï¼Œé¡¹ç›®å°çš„æ—¶å€™å½“ç„¶é—®é¢˜ä¸å¤§ï¼Œä½†æ˜¯å½“é¡¹ç›®ä¸€å¤§ï¼Œå˜é‡ä¸€å¤šï¼Œé€šè¿‡scriptå¼•å…¥ä»£ç çš„åŠ è½½é¡ºåºç­‰ç­‰é—®é¢˜å°±å¼€å§‹è®©åæœŸç»´æŠ¤å˜å¾—å¾ˆè›‹ç–¼ï¼Œå› æ­¤äººä»¬å¼€å§‹æ€è€ƒå¦‚ä½•åœ¨æ²¡æœ‰æ¨¡å—çš„è¯­è¨€ä¸Šå»å®ç°æ¨¡å—è¿™ä¸€ä»¶äº‹æƒ…ã€‚ã€‚ã€‚</p><h3 id="åŸå§‹æ—¶æœŸ"><a href="#åŸå§‹æ—¶æœŸ" class="headerlink" title="åŸå§‹æ—¶æœŸ"></a>åŸå§‹æ—¶æœŸ</h3><h4 id="ç›´æ¥å®šä¹‰ä¾èµ–"><a href="#ç›´æ¥å®šä¹‰ä¾èµ–" class="headerlink" title="ç›´æ¥å®šä¹‰ä¾èµ–"></a>ç›´æ¥å®šä¹‰ä¾èµ–</h4><pre><code class="js">function a() {}function b() {}</code></pre><p>åœ¨åŸå§‹æ—¶æœŸï¼Œâ€œæ¨¡å—åŒ–â€ä¹Ÿå°±æ˜¯ç›´æ¥å®šä¹‰å‡½æ•°ï¼Œå…±äº«å˜é‡ï¼Œè¿™ç§åšæ³•æœ€æ˜æ˜¾çš„ç¼ºç‚¹å°±æ˜¯<strong>æ±¡æŸ“</strong>äº†å…¨å±€å˜é‡ï¼Œå˜é‡çš„é‡åä¼šå¯¼è‡´åé¢è¦†ç›–å‰é¢ï¼Œå¹¶ä¸”å„ä¸ªæ¨¡å—æˆå‘˜ä¹‹é—´çœ‹ä¸å‡ºæœ‰ä»€ä¹ˆç›´æ¥çš„å…³ç³»ã€‚</p><h4 id="é—­åŒ…æ¨¡å—åŒ–"><a href="#é—­åŒ…æ¨¡å—åŒ–" class="headerlink" title="é—­åŒ…æ¨¡å—åŒ–"></a>é—­åŒ…æ¨¡å—åŒ–</h4><pre><code class="js">var modules = (fuction(my, $) {    function privateMethod() {        // ...    }    my.moduleProperty = 1;    my.moduleMethod = function() {        //$()....        //privateMethod()...        // ...    };    return my;}(widnow.modules || {}, jQuery))</code></pre><p>é€šè¿‡ç«‹å³æ‰§è¡Œå‡½æ•°ï¼ˆIIFEï¼‰ï¼Œå¤–éƒ¨å‡½æ•°æ— æ³•è°ƒç”¨åˆ°é‡Œé¢çš„<strong>privateMethod</strong>ï¼Œè§£å†³äº†å…¨å±€å˜é‡æ±¡æŸ“çš„é—®é¢˜ã€‚åŒæ—¶è¿™ç§æ¨¡å¼è¿˜å¯ä»¥å°†ä¸€ä¸ªæ¨¡å—æ‹†åˆ†ï¼Œåœ¨é—­åŒ…å†…å¯ä»¥è°ƒç”¨æˆ–ç»§æ‰¿å…¶ä»–å­æ¨¡å—ã€æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œæ–°çš„å˜é‡ï¼Œè¿”å›æ–°çš„æ¨¡å—ã€‚ä½†æ˜¯åŒæ—¶ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼š</p><ul><li>  ä¸ºäº†åœ¨æ¨¡å—å†…éƒ¨è°ƒç”¨å…¶ä»–å…¨å±€å˜é‡ï¼Œå¿…é¡»<strong>æ˜¾ç¤ºæ³¨å…¥å…¨å±€å˜é‡</strong>ï¼Œæ¯”å¦‚ä¸Šé¢æ³¨å…¥äº†jQuery</li><li>  è·¨æ–‡ä»¶ä½¿ç”¨æ¨¡å—æ—¶ï¼Œéœ€è¦å°†æ¨¡å—æŒ‚è½½åˆ°å…¨å±€å˜é‡ä¸Šï¼ˆwindowï¼‰ä¸Š</li><li>  æ²¡æœ‰è§£å†³å¦‚ä½•ç®¡ç†è¿™äº›æ¨¡å—çš„é—®é¢˜ï¼Œå„ä¸ªæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»éœ€è¦é€šè¿‡scriptçš„å¼•å…¥é¡ºåºæ¥ä¿è¯</li></ul><h3 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>ä»1999å¹´å¼€å§‹ï¼Œjsæ¨¡å—åŒ–çš„æ¢ç´¢éƒ½æ˜¯åŸºäºè¯­è¨€å±‚é¢ä¸Šçš„ä¼˜åŒ–ï¼ŒçœŸæ­£çš„æ”¹å˜è¦ä»2009å¹´CommonJSçš„å¼•å…¥å¼€å§‹ï¼ŒNodeé‡‡ç”¨CommonJSæ¨¡å—è§„èŒƒï¼Œæ¯ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œåœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢å®šä¹‰çš„å˜é‡ã€å‡½æ•°ã€ç±»éƒ½æ˜¯ç§æœ‰äº†ã€‚</p><pre><code class="js">// package/lib is a dependency we requireconst lib = require('package/lib');// some behaviour for our modulefunction foo() {    lib.log('hello world!');}// export (expose) foo to other modulesexports.foo = foo;</code></pre><h4 id="è§„èŒƒ"><a href="#è§„èŒƒ" class="headerlink" title="è§„èŒƒ"></a>è§„èŒƒ</h4><ul><li>  moduleæ¨¡å—æœ¬èº«ï¼Œæ˜¯Moduleçš„ä¸€ä¸ªå®ä¾‹</li><li>  exportsæŒ‡å‘module.exportsï¼Œå¯ä»¥é€šè¿‡exportså‘module.exportså¯¹è±¡ä¸­æ·»åŠ å˜é‡</li><li>  requireç”¨äºåŠ è½½æ¨¡å—ï¼ˆæ ¸å¿ƒï¼‰</li></ul><h4 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h4><ul><li>  æ‰€æœ‰æ¨¡å—éƒ½è¿è¡Œåœ¨æ¨¡å—ä½œç”¨åŸŸï¼Œä¸ä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸ</li><li>  æ¨¡å—åŠ è½½çš„é¡ºåºï¼ŒæŒ‰ç…§ä»£ç ä¸­å‡ºç°çš„é¡ºåºæ‰§è¡Œï¼ˆä¹Ÿå°±æ˜¯åŒæ­¥ï¼‰</li><li>  æ¨¡å—è¾“å…¥çš„å€¼æ˜¯å¤åˆ¶ï¼ˆåŸºç¡€ç±»å‹ä¸ºå¤åˆ¶ï¼Œå¼•ç”¨ç±»å‹ä¸ºå€¼å¼•ç”¨ï¼‰ï¼Œç¬¬ä¸€æ¬¡åŠ è½½ç»“æœå°±è¢«ç¼“å­˜äº†ï¼Œä¹‹åå†åŠ è½½å°±ç›´æ¥è¯»å–ç¼“å­˜ä¸­çš„ç»“æœï¼Œå¦‚æœè¦è®©æ¨¡å—å†æ¬¡è¿è¡Œï¼Œéœ€è¦æ¸…é™¤ç¼“å­˜ã€‚æˆ–è€…ç›´æ¥å¯¼å‡ºå‡½æ•°ï¼Œæ¯æ¬¡è°ƒç”¨å‡½æ•°é‡æ–°è®¡ç®—ã€‚</li></ul><h4 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h4><p>ç”±äºç¯‡å¹…æœ‰é™ï¼Œè¿™é‡Œä¸è®¨è®ºrequireçš„åŠ è½½é€‰æ‹©è·¯å¾„ä¼˜å…ˆçº§çš„åˆ¤æ–­ï¼Œä¹Ÿä¸è®¨è®ºæ¨¡å—ç¼“å­˜çš„è¿‡ç¨‹ï¼Œå¹¶å‡å®šåŠ è½½çš„æ–‡ä»¶éƒ½æ˜¯jsæ–‡ä»¶ï¼Œä¸»è¦å®ç°ä»£ç å¦‚ä¸‹<a href="https://github.com/joyent/node/blob/master/lib/module.js">æºä»£ç </a></p><pre><code class="js">function Module(id, parent) {    this.id = id;    this.expotrs = {};    this.parent = parent;    if (parent &amp;&amp; parent.children) {        parent.children.push(this);    }    this.fileanme = null;    this.loaded = false;    this.children = [];}// è¿™é‡Œçš„moduleæ˜¯å…¨å±€å˜é‡module.exports = Module;// é€šè¿‡ä¸€ä¸ªpathåŠ è½½æ¨¡å—ï¼Œå¹¶è¿”å›exportså±æ€§Module.prototype.require = function(path) {    return Module._load(path, this);}Module._load = function(path, parent) {    const filename = path;    var module = new Module(filename, parent);    // åŠ è½½æ¨¡å—    module.load(filename);    // è¾“å‡ºæ¨¡å—çš„exportså±æ€§    return module.exports;}Module.prototype.load = function(filename) {    // é€šè¿‡ç£ç›˜ä¸­è¯»å–æ–‡ä»¶    var content = fs.readFileSync(filename, 'utf8');    module._compile(content, filename);    this.loaded = true;}// æ¨¡å—ç¼–è¯‘Module.prototype._compile = function(content, filename) {    const self = this;    const args = [self.exports, require, self, filename, dirname];    // åœ¨æ²™ç®±ä¸­æ‰§è¡Œä»£ç     return compiledWrapper.apply(self.exports, args);}</code></pre><p>ä»ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œæ¨¡å—åŠ è½½å®è´¨ä¸Šå°±æ˜¯æ³¨å…¥äº†exportsï¼Œrequireï¼Œmoduleä¸‰ä¸ªå…¨å±€å˜é‡ï¼Œç„¶åæ‰§è¡Œæ¨¡å—çš„æºç ï¼Œæœ€åå°†æ¨¡å—çš„exportsçš„å˜é‡è¾“å…¥</p><pre><code class="js">(function(exports, require, module, __filename, __dirname) {    // æ¨¡å—æºç });</code></pre><h4 id="ä¸è¶³"><a href="#ä¸è¶³" class="headerlink" title="ä¸è¶³"></a>ä¸è¶³</h4><ul><li>  ç¼ºå°‘æ¨¡å—å°è£…çš„èƒ½åŠ›ï¼ŒCommonJSè§„èŒƒä¸­æ¯ä¸ªæ¨¡å—éƒ½æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªæ–‡ä»¶åªæœ‰ä¸€ä¸ªæ¨¡å—ã€‚è¿™åœ¨æœåŠ¡å™¨ä¸Šæ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯åœ¨æµè§ˆå™¨ä¸­å°±ä¸æ˜¯å¾ˆå‹å¥½ï¼Œæµè§ˆå™¨ä¸­éœ€è¦åšåˆ°å°½å¯èƒ½å°‘çš„å‘èµ·è¯·æ±‚ã€‚</li><li>  ä½¿ç”¨åŒæ­¥çš„æ–¹å¼åŠ è½½ä¾èµ–ï¼Œåœ¨æµè§ˆå™¨ä¸­ç”±äºJSçš„åŠ è½½ä¼šé˜»å¡æ¸²æŸ“ï¼ŒåŒæ­¥åŠ è½½ä¼šå¯¼è‡´é•¿æ—¶é—´çš„ç™½å±ï¼Œå¯¹äºç”¨æˆ·ä½“éªŒæ˜¯è‡´å‘½çš„ã€‚</li><li>  CommonJSè§„èŒƒä¸­ä½¿ç”¨äº†<strong>export</strong>çš„å¯¹è±¡æ¥æš´éœ²æ¨¡å—ï¼Œå¯ä»¥è®²éœ€è¦å¯¼å‡ºçš„å˜é‡é™„åŠ åˆ°<strong>export</strong>ä¸Šï¼Œä½†æ˜¯è¦å¯¼å‡ºä¸€ä¸ªå‡½æ•°ç¡®æ˜¯èƒ½ä½¿ç”¨<strong>module.export</strong>ï¼Œè¿™ç§è¯­æ³•å®¹æ˜“è®©äººæ„Ÿåˆ°å›°æƒ‘ã€‚</li></ul><h3 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h3><h4 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>AMDï¼Œå…¨ç§°æ˜¯Asynchronous Module Definitionï¼Œå³å¼‚æ­¥æ¨¡å—åŠ è½½æœºåˆ¶ï¼Œå®ƒé‡‡ç”¨å¼‚æ­¥æ–¹å¼åŠ è½½æ¨¡å—ï¼Œæ¨¡å—çš„åŠ è½½ä¸å½±å“åé¢è¯­å¥çš„è¿è¡Œï¼ŒAMDè§„èŒƒå®šä¹‰äº†ä¸€ä¸ª<strong>define</strong>å…¨å±€æ–¹æ³•ç”¨æ¥å®šä¹‰å’ŒåŠ è½½æ¨¡å—</p><pre><code class="js">define(id ? , dependencies ? , factory);</code></pre><ul><li>  id: æ¨¡å—æ ‡è¯†ï¼Œå¯ä»¥çœç•¥</li><li>  dependencesï¼šæ‰€ä¾èµ–çš„æ¨¡å—æ•°ç»„ï¼Œå¯ä»¥çœç•¥</li><li>  factoryï¼šæ¨¡å—çš„å®ç°ï¼Œæˆ–è€…ä¸€ä¸ªå¯¹è±¡</li></ul><p>AMDä¹Ÿä½¿ç”¨äº†ä½¿ç”¨<strong>require</strong>å…¨å±€æ–¹æ³•æ¥åŠ è½½æ¨¡å—ï¼Œä½†ä¸åŒäºCommonJSï¼Œå®ƒè¦æ±‚ä¸¤ä¸ªå‚æ•°ï¼Œdependencesæ˜¯éœ€è¦å‰ç½®çš„ä¾èµ–ï¼Œåªæœ‰æ‰€æœ‰å‰ç½®ä¾èµ–éƒ½åŠ è½½å®Œäº†æ‰ä¼šè§¦å‘å›è°ƒå‡½æ•°ï¼Œdependencesçš„åŠ è½½æ˜¯<strong>é€šè¿‡åŠ¨æ€åˆ›å»ºsciprtå’Œäº‹ä»¶ç›‘å¬çš„æ–¹å¼æ¥å¼‚æ­¥åŠ è½½æ¨¡å—</strong>ï¼Œè§£å†³äº†CommonJSåŒæ­¥åŠ è½½çš„é—®é¢˜ã€‚</p><pre><code class="js">require([dependence], callback);</code></pre><h4 id="RequireJSä½¿ç”¨"><a href="#RequireJSä½¿ç”¨" class="headerlink" title="RequireJSä½¿ç”¨"></a>RequireJSä½¿ç”¨</h4><p>RequireJS æ˜¯ AMD è§„èŒƒçš„ä»£è¡¨ä¹‹ä½œï¼ŒåŸºæœ¬ä½¿ç”¨æ–¹å¼å¦‚ä¸‹</p><pre><code class="js">define(['./a', './b'], function(moduleA, moduleB) {    // ä¾èµ–å‰ç½®    moduleA.mehodA();    console.log(moduleB.dataB);    // å¯¼å‡ºæ•°æ®    return {};});</code></pre><h4 id="RequireJSçš„å®ç°"><a href="#RequireJSçš„å®ç°" class="headerlink" title="RequireJSçš„å®ç°"></a>RequireJSçš„å®ç°</h4><p>è¿™é‡ŒåŒæ ·ä¸è®¨è®ºRequireJSçš„æ¨¡å—ä¿¡æ¯é…ç½®ï¼Œç¼“å­˜çš„è¿‡ç¨‹ï¼Œä¹Ÿä¸è€ƒè™‘å„ç§é“¾æ¥è¡¥å…¨çš„æƒ…å†µï¼Œåªæ˜¯ç®€å•å®ç°æ¨¡å—çš„åŠ è½½è°ƒç”¨ï¼Œä»¥åŠæ‰€æœ‰ä¾èµ–åŠ è½½å®Œæ¯•è§¦å‘callbackå›è°ƒçš„è¿‡ç¨‹</p><blockquote><p>ä¾èµ–çš„å®šä¹‰</p></blockquote><pre><code class="js">// ç¼“å­˜å®šä¹‰çš„æ¨¡å—const defMap = {}define = (name, deps, callback) =&gt; {    defMap[name] = {        name,        deps,        callback    }}</code></pre><blockquote><p>ä¾èµ–æ¨¡å—åŠ è½½ä¸è°ƒç”¨</p></blockquote><p>æ¨¡å—åŠ è½½çš„æ—¶å€™ä¼šé¦–å…ˆé€šè¿‡<strong>Modules</strong>æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªæ¨¡å—å®ä¾‹ï¼Œç„¶åè°ƒç”¨åˆå§‹åŒ–<strong>init</strong>çš„æ–¹æ³•ä¼ å…¥éœ€è¦åŠ è½½çš„ä¾èµ–è·Ÿå›è°ƒå‡½æ•°</p><pre><code class="js">// å…¨å±€requireæ–¹æ³•req = require = (name, deps, callback) =&gt; {    const mod = new Module(name)    mod.init(deps, callback)}// æ¨¡å—åŠ è½½æ„é€ å‡½æ•°class Modules {    constructor(name) {        this.name = name        this.depCount = 0        this.deps = []        this.depExports = []        this.callback = null        this.defineFn = () =&gt; {}    }    init(deps, callback) {        this.deps = deps        this.callback = callback        // åˆ¤æ–­æ˜¯å¦æœ‰ä¾èµ–ï¼Œæœ‰ä¾èµ–å…ˆåŠ è½½ä¾èµ–        if (deps.length === 0) {            this.check()        } else {            this.enable()        }    }}</code></pre><p>å…¶ä¸­<strong>enable</strong>å‡½æ•°ç”¨æ¥éå†ä¾èµ–ï¼Œå¹¶ç»‘å®šå›è°ƒå‡½æ•°<strong>definedFn</strong></p><pre><code class="js">class Module {    ...    // åŠ è½½ä¾èµ–    enabne() {        this.deps.forEach((name, i) =&gt; {            // è®°å½•åŠ è½½çš„æ¨¡å—æ•°            this.depCount++            // å®ä¾‹åŒ–ä¾èµ–æ¨¡å—ï¼Œç»‘å®šå›è°ƒ            const mod = new Module(name)            mod.definedFn = exports =&gt; {                this.depCount--                // è¿”å›çš„ä»£ç ï¼Œå°†æ¨¡å—ä»£ç å­˜å‚¨èµ·æ¥ï¼Œå…¨éƒ¨åŠ è½½å®Œæ¯•åå½“ä½œå˜é‡ä¼ é€’ç»™çˆ¶æ¨¡å—è°ƒç”¨                this.depExports[i] = exports                // æ¯æ¬¡è¿”å›ä¸€ä¸ªå›è°ƒéƒ½checkä¸€ä¸‹æ˜¯å¦æ‰€æœ‰ä¾èµ–éƒ½åŠ è½½å®Œäº†                this.check()            }            // é€šè¿‡scriptåŠ è½½æ¨¡å—            loadModule(name)        })    }}</code></pre><p><strong>loadModule</strong>æ˜¯æºç çš„æ ¸å¿ƒï¼Œé€šè¿‡åŠ¨æ€åˆ›å»ºscirptå¼‚æ­¥åŠ è½½ä¾èµ–ï¼ŒåŠ è½½å®Œä¹‹åå†å¾ªç¯åŠ è½½å­æ¨¡å—çš„ä¾èµ–ï¼Œç›´åˆ°å…¨éƒ¨ä¾èµ–éƒ½åŠ è½½å®Œæ¯•ã€‚</p><pre><code class="js">const loadModule = (name, url) =&gt; {    const head = document.getElementsByTagName('head')[0]    const node = document.createElement('script')    node.type = 'text/javascript'    node.async = true    // è®¾ç½®ä¸€ä¸ª data å±æ€§ï¼Œä¾¿äºä¾èµ–åŠ è½½å®Œæ¯•åæ‹¿åˆ°æ¨¡å—å     node.setAttribute('data-module', name)    node.addEventListener('load', onScriptLoad, false)    node.src = url    head.appendChild(node)    return node}// èŠ‚ç‚¹ç»‘å®šçš„onloadäº‹ä»¶å‡½æ•°const onScriptLoad = evt =&gt; {    const node = evt.currentTarget    node.removeEventListener('load', onScriptLoad, false)    // è·å–æ¨¡å—å    const name = node.getAttribute('data-module')    // å®ä¾‹åŒ–å­æ¨¡å—    const mod = new Module(name)    // ä»å…¨å±€å˜é‡defMapä¸­è·å–æ¨¡å—çš„ä¾èµ–å’Œå›è°ƒ    const def = defMap[name]    // å¾ªç¯åŠ è½½å­æ¨¡å—çš„ä¾èµ–    mod.init(def.deps, def.callback)}</code></pre><p><strong>check</strong>å‡½æ•°æ£€æŸ¥ä¾èµ–æ˜¯å¦å…¨éƒ¨åŠ è½½å®Œæ¯•äº†ï¼ŒåŠ è½½å®Œæ¯•ä¹‹åæ‰§è¡Œå›è°ƒå‡½æ•°ã€‚</p><pre><code class="js">class Module {    ...    // æ£€æŸ¥ä¾èµ–æ˜¯å¦åŠ è½½å®Œæ¯•    check() {        // ä¾èµ–æ•°å°äº1ï¼Œè¡¨ç¤ºä¾èµ–å…¨éƒ¨åŠ è½½å®Œ        if (this.depCount &lt; 1) {            // è§¦å‘å›è°ƒå‡½æ•°ï¼Œå¹¶è·å–è¯¥æ¨¡å—çš„å†…å®¹            this.exports = this.callback.apply(null, this.depExports)            // æ¿€æ´»definedå›è°ƒï¼Œè¡¨ç¤ºå½“å‰æ¨¡å—åŠ è½½å®Œæˆ            this.definedFn(exports)        }    }}</code></pre><p>å¯ä»¥çœ‹å‡ºï¼ŒRequireJSæœ€æ ¸å¿ƒçš„åŸç†å°±æ˜¯<strong>é€šè¿‡åŠ¨æ€åŠ è½½scriptå¹¶ä¸”ç›‘å¬loadäº‹ä»¶çš„æ–¹å¼æ¥å®ç°å¼‚æ­¥åŠ è½½æ¨¡å—</strong></p><h3 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h3><blockquote><p>æ¦‚è¿°</p></blockquote><p>ç›¸å¯¹äºAMDçš„å¼‚æ­¥åŠ è½½ï¼ŒCMDæ›´å€¾å‘äºæ‡’åŠ è½½ï¼Œè€Œä¸”CMDçš„å†™æ³•è·ŸCommonJSæä¸ºç›¸è¿‘ï¼Œåªéœ€è¦åœ¨CommonJSå¤–å¢åŠ ä¸€ä¸ªå‡½æ•°è°ƒç”¨å³å¯ï¼Œå¦‚ä¸‹</p><pre><code class="js">// CMDdefine(function(require, exports, module) {    const $ = require('Jquery')    $('id')})</code></pre><p>AMDè§„èŒƒçš„ä»£è¡¨ä½œå“sea.jsåœ¨æ¨¡å—åŠ è½½æ–¹å¼ä¸Šä¸RequireJSçš„åŸç†ä¸€è‡´ï¼Œéƒ½æ˜¯<strong>é€šè¿‡åŠ¨æ€åŠ è½½scriptå¹¶ä¸”ç›‘å¬loadäº‹ä»¶çš„æ–¹å¼æ¥å®ç°å¼‚æ­¥åŠ è½½æ¨¡å—</strong>ï¼Œè·ŸRequireJSçš„ä¸»è¦åŒºåˆ«åœ¨ä¸ä¾èµ–å£°æ˜è·ŸåŠ è½½çš„æ—¶æœºï¼Œå…¶ä¸­RequireJSåœ¨å£°æ˜çš„æ—¶å€™å…ˆä¼˜å…ˆåŠ è½½äº†ã€‚sea.jsåˆ™ä½¿ç”¨æ‡’åŠ è½½ï¼ŒæŒ‰éœ€åŠ è½½çš„æ–¹å¼ï¼Œåªæœ‰åœ¨requireçš„åœ°æ–¹ï¼Œæ‰ä¼šçœŸæ­£åŠ è½½è¿è¡Œè¯¥æ¨¡å—ã€‚</p><blockquote><p>sea.jså®ç°åŸç†</p></blockquote><p>sea.jsçœ‹èµ·æ¥åƒæ˜¯å¾ˆç¥å¥‡ï¼ŒJSä¸æ˜¯å¼‚æ­¥çš„å—ï¼Ÿä½†æ€ä¹ˆsea.jsè°ƒç”¨æ¨¡å—çœ‹èµ·æ¥åƒæ˜¯åŒæ­¥çš„ï¼ŸåŸç†è¿™é‡Œé‡‡ç”¨äº†çŸ¥ä¹çš„ä¸€æ®µå›ç­”<a href="https://www.zhihu.com/question/20342350/answer/14828786">å¢å‹ƒ</a></p><ol><li> é€šè¿‡å›è°ƒå‡½æ•°çš„Function.toStringå‡½æ•°ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼ˆåé¢æ”¹æˆäº†çŠ¶æ€æœºè¿›è¡Œè¯æ³•åˆ†æçš„æ–¹å¼ï¼‰æ¥æ•æ‰å†…éƒ¨çš„requireå­—æ®µï¼Œæ‰¾åˆ°require(â€˜jqueryâ€™)å†…éƒ¨ä¾èµ–çš„æ¨¡å—jquery</li><li> æ ¹æ®é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°jqueryçš„jsæ–‡ä»¶çš„å®é™…è·¯å¾„</li><li> åœ¨domä¸­æ’å…¥scriptæ ‡ç­¾ï¼Œè½½å…¥æ¨¡å—æŒ‡å®šçš„jsï¼Œç»‘å®šåŠ è½½å®Œæˆçš„äº‹ä»¶ï¼Œä½¿å¾—åŠ è½½å®Œæˆåå°†jsæ–‡ä»¶ç»‘å®šåˆ°requireæ¨¡å—æŒ‡å®šçš„idï¼ˆè¿™é‡Œå°±æ˜¯jqueryè¿™ä¸ªå­—ç¬¦ä¸²ï¼‰ä¸Š</li><li> å›è°ƒå‡½æ•°å†…éƒ¨ä¾èµ–çš„jså…¨éƒ¨åŠ è½½ï¼ˆæš‚ä¸è°ƒç”¨ï¼‰å®Œåï¼Œè°ƒç”¨å›è°ƒå‡½æ•°</li><li> å½“å›è°ƒå‡½æ•°è°ƒç”¨require(â€˜jqueryâ€™)ï¼Œå³æ‰§è¡Œç»‘å®šåœ¨â€™jqueryâ€™è¿™ä¸ªidä¸Šçš„jsæ–‡ä»¶ï¼Œå³åˆ»æ‰§è¡Œï¼Œå¹¶å°†è¿”å›å€¼ä¼ ç»™$</li></ol><h3 id="UMD"><a href="#UMD" class="headerlink" title="UMD"></a>UMD</h3><p>UMDï¼ˆUniversal Module Definnitionï¼‰é€šç”¨æ¨¡å—å®šä¹‰æ¨¡å¼ï¼Œä¸»è¦ç”¨æ¥è§£å†³CommonJSæ¨¡å¼å’ŒAMDæ¨¡å¼ä»£ç ä¸èƒ½åœ¨æœåŠ¡ç«¯è·ŸWebç«¯é€šç”¨çš„é—®é¢˜ï¼Œå¹¶åŒæ—¶è¿˜æ”¯æŒè€å¼çš„å…¨å±€å˜é‡è§„èŒƒã€‚</p><pre><code class="js">(function(global, factory) {    typeof exports === 'object' &amp;&amp; typeof module !== 'undefined' ? module.exports = factory() :        typeof define === 'function' &amp;&amp; define.amd ? define(factory) :        (global = global || self, global.myBundle = factory());}(this, (function() {    const main = () =&gt; {        return 'hello world';    };    return main;})))</code></pre><p>ä¸Šé¢ä»£ç åšäº†3ä¸ªåˆ¤æ–­</p><ol><li> åˆ¤æ–­<strong>module</strong>æ˜¯å¦ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”æ˜¯å¦å­˜åœ¨<strong>module.exports</strong>æ¥åˆ¤æ–­æ˜¯å¦ä¸º<strong>CommonJS</strong>è§„èŒƒ</li><li> åˆ¤æ–­<strong>define</strong>æ˜¯å¦ä¸ºå‡½æ•°ï¼Œå¹¶ä¸”æ˜¯å¦å­˜åœ¨<strong>define.amd</strong>ï¼Œæ¥åˆ¤æ–­æ˜¯å¦ä¸ºAMDè§„èŒƒ</li><li> å¦‚æœä»¥ä¸Šä¸¤ç§éƒ½æ²¡æœ‰ï¼Œåˆ™ä¸ºåŸå§‹çš„ä»£ç è§„èŒƒ</li></ol><h3 id="ES-Modules"><a href="#ES-Modules" class="headerlink" title="ES Modules"></a>ES Modules</h3><h4 id="æ¦‚è¿°è·Ÿè¯­æ³•"><a href="#æ¦‚è¿°è·Ÿè¯­æ³•" class="headerlink" title="æ¦‚è¿°è·Ÿè¯­æ³•"></a>æ¦‚è¿°è·Ÿè¯­æ³•</h4><p>ç›¸å¯¹äºCommonJSå’ŒAMDä¸¤ç§æ¯”è¾ƒæµè¡Œçš„ç¤¾åŒºæ¨¡å—åŠ è½½æ–¹æ¡ˆï¼Œå‰è€…ä¸»è¦ç”¨äºæœåŠ¡å™¨å±‚é¢ï¼Œåè€…ä¸»è¦ç”¨äºæµè§ˆå™¨å±‚é¢ï¼ŒES 2015ç»ˆäºåœ¨è¯­è¨€æ ‡å‡†å±‚é¢ä¸Šï¼Œå®ç°äº†æ¨¡å—åŠŸèƒ½ï¼Œè€Œä¸”è¯­æ³•æ›´åŠ ç®€æ´ï¼Œæ›´åŠ äººæ€§åŒ–ã€‚</p><p>æ¨¡å—å¯¼å‡ºåªæœ‰ä¸€ä¸ªå…³é”®å­—<strong>export</strong>ï¼Œå¯ä»¥ç›´æ¥å¯¼å‡ºå˜é‡ï¼Œå‡½æ•°ï¼Œæˆ–è€…é€šè¿‡å¤§æ‹¬å·ç›´æ¥è¾“å‡ºä¸€ç»„å˜é‡ï¼Œæ›´æœ‰ç‹¬ç‰¹çš„<strong>default</strong>å¯ä»¥ç”¨æ¥ç›´æ¥å¯¼å‡ºé»˜è®¤å€¼ã€‚</p><pre><code class="js">// moduleA// ç›´æ¥å¯¼å‡ºæŸä¸ªå˜é‡è·Ÿå‡½æ•°export const name = 'chen'export function getName() {    return 'chen'}// å¯ä»¥é€šè¿‡å¤§æ‹¬å·è¾“å‡ºä¸€ç»„å˜é‡const anotherName = 'nomad'constfunction getAnotherName() {    return 'nomad'}export {    anotherName,    getAnotherName}// ä¹Ÿå¯ä»¥ç›´æ¥å¯¼å‡ºé»˜è®¤å€¼export default anotherName</code></pre><p>æ¨¡å—å¯¼å…¥å¯ä»¥é€šè¿‡<strong>import</strong>å‘½ä»¤åŠ è½½å…¶ä»–JSæ–‡ä»¶ä¸­<strong>export</strong>çš„å˜é‡ï¼ŒåŒæ ·å¯ä»¥åŒæ—¶å¯¼å…¥å…¶ä»–æ–‡ä»¶ä¸­çš„é»˜è®¤å€¼<strong>default</strong>ï¼ˆå¦‚æœå­˜åœ¨ï¼‰è·Ÿå…¶ä»–å˜é‡</p><pre><code class="js">import defaultName, {    name,    getName,    anotherName,    getAnotherName} from './moduleA'</code></pre><p>å…·ä½“è¯­æ³•åŒ…æ‹¬å¯¼å…¥å˜é‡çš„æ”¹åï¼Œå¯¼å…¥å¹¶åŒæ—¶å¯¼å‡ºçš„å¤åˆå†™æ³•ç­‰å°±ä¸å†èµ˜è¿°ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹ç½‘ä¸Šçš„æ•™ç¨‹ã€‚</p><h4 id="CommonJSè·ŸES-Modulesçš„å·®å¼‚"><a href="#CommonJSè·ŸES-Modulesçš„å·®å¼‚" class="headerlink" title="CommonJSè·ŸES Modulesçš„å·®å¼‚"></a>CommonJSè·ŸES Modulesçš„å·®å¼‚</h4><p>CommonJSæ¨¡å—çš„<strong>require</strong>æ˜¯åŒæ­¥åŠ è½½æ¨¡å—ï¼Œè€ŒESM ä¼šå¯¹é™æ€ä»£ç åˆ†æï¼Œå³åœ¨ä»£ç ç¼–è¯‘æ—¶è¿›è¡Œæ¨¡å—çš„åŠ è½½ï¼Œåœ¨è¿è¡Œæ—¶ä¹‹å‰å°±å·²ç»ç¡®å®šäº†ä¾èµ–å…³ç³»ï¼ˆå¯è§£å†³å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œåé¢åŸç†éƒ¨åˆ†æœ‰è§£é‡Šï¼‰</p><p>CommonJSæ¨¡å—è¾“å…¥çš„æ˜¯å€¼æ‹·è´ï¼ˆåŸºç¡€ç±»å‹ä¸ºå¤åˆ¶ï¼Œå¼•ç”¨ç±»å‹ä¸ºå€¼å¼•ç”¨ï¼‰</p><pre><code class="js">// CommonJS// ModuleAconst obj = {    a: 1}let b = 1setTimeout(() =&gt; {    obj.a++    b++});exports.obj = obj;exports.b = b;// ModuleBconst {    obj,    b} = require('./moduleA');console.log(`a: ${obj.a}`);console.log(`b: ${b}`);setTimeout(() =&gt; {    console.log(`a: ${obj.a}`);    console.log(`b: ${b}`);}, 100);// result// a: 1// b: 1// a: 2// b: 1</code></pre><p>ESMæ¨¡å—æ˜¯åŠ¨æ€å¼•ç”¨ï¼Œå˜é‡ä¸ä¼šè¢«ç¼“å­˜ï¼Œè€Œæ˜¯æˆä¸ºä¸€ä¸ªæŒ‡å‘åŠ è½½æ¨¡å—çš„å¼•ç”¨ï¼Œåªæœ‰çœŸæ­£å–å€¼çš„æ—¶å€™æ‰ä¼šè¿›è¡Œè®¡ç®—å–å€¼</p><pre><code class="js">// ESM// moduleAconst obj = {    a: 1}let b = 1setTimeout(() =&gt; {    obj.a++    b++});export {    obj,    b}// moduleBimport {    obj,    b} from './moduleA.mjs';console.log(`a: ${obj.a}`);console.log(`b: ${b}`);setTimeout(() =&gt; {    console.log(`a: ${obj.a}`);    console.log(`b: ${b}`);}, 100);// result// a: 1// b: 1// a: 2// b: 2</code></pre><h4 id="ESMåŠ è½½çš„è¿‡ç¨‹"><a href="#ESMåŠ è½½çš„è¿‡ç¨‹" class="headerlink" title="ESMåŠ è½½çš„è¿‡ç¨‹"></a>ESMåŠ è½½çš„è¿‡ç¨‹</h4><ol><li> æ„é€ ï¼ˆConstructionï¼‰ï¼šæ‰¾åˆ°æ–‡ä»¶ä¸‹è½½ï¼Œå¹¶è§£ææˆæ¨¡å—è®°å½•ï¼ˆmodule recordï¼‰</li><li> å®ä¾‹åŒ–ï¼ˆInstantiationï¼‰ï¼šæŠŠæ‰€æœ‰<strong>export</strong>çš„å˜é‡æ”¾å…¥åˆ°å†…å­˜ä¸­ï¼ˆæš‚æ—¶ä¸æ±‚å€¼ï¼‰ï¼Œç„¶åæŠŠç›¸å…³<strong>export</strong>è·Ÿ<strong>import</strong>éƒ½æŒ‡å‘åŒä¸€ä¸ªå†…å­˜åŒºåŸŸ</li><li> æ±‚å€¼ï¼ˆEvaluationï¼‰ï¼šè¿è¡Œä»£ç ï¼ŒæŠŠå¾—åˆ°å€¼æ”¾åˆ°æŒ‡å‘çš„å†…å­˜åŒºåŸŸ</li></ol><blockquote><p>æ„é€ ï¼ˆConstructionï¼‰</p></blockquote><p>ä»å…¥å£æ–‡ä»¶å¼€å§‹ï¼Œå¹¶é€šè¿‡ä»£ç è§£æï¼ˆmodule specifiersï¼‰æ‰¾åˆ°å…¥å£æ–‡ä»¶æ‰€ä¾èµ–çš„æ¨¡å—ï¼Œä¸€æ­¥ä¸€æ­¥æ‰¾åˆ°å…¶ä»–æ¨¡å—ï¼Œå¹¶å°†æ‰€æœ‰æ¨¡å—è§£ææˆæ¨¡å—è®°å½•ï¼ˆmodule recordï¼‰ï¼Œå¹¶ç¼“å­˜åˆ°<strong>module map</strong>ä¸­ï¼Œé‡åˆ°ä¸åŒæ–‡ä»¶è·å–ç›¸åŒä¾èµ–ï¼Œéƒ½ä¼šç›´æ¥åœ¨<strong>module map</strong>ç¼“å­˜ä¸­è·å–ï¼Œæ³¨æ„è¿™é‡Œå¹¶ä¸æ˜¯è¦æŠŠæ‰€æœ‰æ¨¡å—çš„ä¾èµ–å…³ç³»å…¨éƒ¨è§£æå®Œå†å¼€å§‹ä¸‹ä¸€æ­¥ï¼Œå› ä¸ºæµè§ˆå™¨ä¸€æ¬¡æ€§ä¸‹è½½è¿™ä¹ˆå¤šæ–‡ä»¶ä¼šè·ŸCommonJSä¸€æ ·é˜»å¡ä¸»çº¿ç¨‹ã€‚æ‰€ä»¥è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆ<strong>ESM spec</strong>è¦æŠŠ3ä¸ªåŠ è½½è¿‡ç¨‹åŒºåˆ†å¼€æ‰§è¡Œçš„åŸå› ã€‚</p><p><img src="/My-Blogs/images/module_record.png" alt="image"></p><blockquote><p>å®ä¾‹åŒ–ï¼ˆInstantiationï¼‰</p></blockquote><p>å®ä¾‹åŒ–çš„è¿‡ç¨‹å°±æ˜¯å°†ä»£ç å¯¼å‡ºçš„å˜é‡ä¸€ä¸€æŒ‡å‘å†…å­˜ã€‚JSå¼•æ“é€šè¿‡<strong>ä¼˜å…ˆæ·±åº¦ååºéå†</strong>éå†æ•´ä¸ªæ¨¡å—å…³ç³»å›¾ï¼Œå³ä»ä¾èµ–å…³ç³»çš„æœ€åä¸€ä¸ªæ¨¡å—ï¼ˆæ²¡æœ‰å¼•å…¥å…¶ä»–æ¨¡å—ï¼‰å¼€å§‹å®ä¾‹åŒ–ï¼Œå¹¶å°†æ‰€æœ‰æ¨¡å—å¯¼å‡ºçš„å˜é‡ç»‘å®šåœ¨å†…å­˜ä¸Šï¼Œç„¶åå†å°†<strong>æ‰€æœ‰æ¨¡å—å¯¼å…¥å˜é‡ç»‘å®šåˆ°ä¸å¯¼å‡ºå˜é‡åŒä¸€ä¸ªå†…å­˜åŒºåŸŸ</strong>ã€‚æ‰€ä»¥ä¸€æ—¦å¯¼å‡ºå€¼å‘ç”Ÿå˜åŒ–ï¼Œå¯¼å…¥å€¼ä¹Ÿä¼šå˜åŒ–ã€‚è¿™ä¹Ÿæ˜¯ESMå¯¼å‡ºçš„æ˜¯<strong>å€¼å¼•ç”¨</strong>çš„åŸç†ã€‚åŒæ ·ä¹Ÿ<strong>è§£å†³äº†å¾ªç¯è°ƒç”¨</strong>çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆCommonJSæ— æ³•è§£å†³å¾ªç¯è°ƒç”¨çš„è¯¦ç»†è§£é‡Šè¯·æŸ¥çœ‹<a href="https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive/">å›¾è§£ES Modules</a></p><p><img src="/My-Blogs/images/module_bindings.png" alt="image"></p><blockquote><p>æ±‚å€¼ï¼ˆEvaluationï¼‰</p></blockquote><p>æ±‚å€¼æ­¥éª¤ç›¸å¯¹ç®€å•ï¼Œåªè¦è¿è¡Œä»£ç æŠŠè®¡ç®—å‡ºæ¥çš„å€¼å¡«å…¥ä¹‹å‰è®°å½•çš„å†…å­˜åœ°å€å°±å¯ä»¥äº†ï¼Œè¿™é‡Œå°±ä¸å±•å¼€è¯´æ˜äº†ã€‚</p><h4 id="é™„å½•ï¼šå‚è€ƒ-ç¿»è¯‘"><a href="#é™„å½•ï¼šå‚è€ƒ-ç¿»è¯‘" class="headerlink" title="é™„å½•ï¼šå‚è€ƒ/ç¿»è¯‘"></a>é™„å½•ï¼šå‚è€ƒ/ç¿»è¯‘</h4><ul><li>  <a href="https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive/">ES modules: A cartoon deep-dive</a></li><li>  <a href="https://blog.shenfq.com/2019/%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E7%9A%84%E5%89%8D%E4%B8%96/">å‰ç«¯æ¨¡å—åŒ–çš„å‰ä¸–</a></li><li>  <a href="http://www.ruanyifeng.com/blog/2015/05/require.html">requireæºç è§£è¯»</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†·çŸ¥è¯†ä¹‹HTMLç¯‡</title>
      <link href="/My-Blogs/2021/01/08/HTML/%E5%86%B7%E7%9F%A5%E8%AF%86%E4%B9%8BHTML%E7%AF%87/"/>
      <url>/My-Blogs/2021/01/08/HTML/%E5%86%B7%E7%9F%A5%E8%AF%86%E4%B9%8BHTML%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<p>è¿™æœŸè®©æˆ‘ä»¬æ¥çœ‹çœ‹å…³äºHTMLçš„å†·çŸ¥è¯†éƒ½æœ‰å“ªäº›å§~</p><a id="more"></a><h3 id="æµè§ˆå™¨ç§’å˜ç¼–è¾‘å™¨"><a href="#æµè§ˆå™¨ç§’å˜ç¼–è¾‘å™¨" class="headerlink" title="æµè§ˆå™¨ç§’å˜ç¼–è¾‘å™¨"></a>æµè§ˆå™¨ç§’å˜ç¼–è¾‘å™¨</h3><p>è¿™ä¸ªè¿˜æ˜¯åœ¨æµè§ˆå™¨åœ°å€æ ä¸Šé¢åšæ–‡ç« ï¼Œå°†ä»¥ä¸‹ä»£ç å¤åˆ¶ç²˜è´´åˆ°æµè§ˆå™¨åœ°å€æ ï¼Œè¿è¡Œåæµè§ˆå™¨å°±å˜æˆäº†ä¸€ä¸ªåŸå§‹ç®€å•çš„ç¼–è¾‘å™¨ï¼Œå’Œwindowè‡ªå¸¦çš„notepadå·®ä¸å¤šï¼Œé•¿è§è¯†äº†å§ï¼Œè¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬æ¥è¯•è¯•ã€‚</p><pre><code class="JavaScript">data: text / html, &lt; html contenteditable &gt;</code></pre><p><img src="/My-Blogs/images/%E5%86%B7%E7%9F%A5%E8%AF%86%E4%B9%8BHTML%E7%AF%87-01.png" alt="image"></p><blockquote><p>å½’æ ¹ç»“åº•å¤šäºäº†HTML5ä¸­æ–°åŠ çš„contenteditableå±æ€§ï¼Œå½“å…ƒç´ æŒ‡å®šäº†è¯¥å±æ€§åï¼Œå…ƒç´ çš„å†…å®¹æˆä¸ºå¯ç¼–è¾‘çŠ¶æ€ã€‚</p></blockquote><p>åŒç†ï¼Œåœ¨æ§åˆ¶å°æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼ŒåŒæ ·å¯ä»¥å°†æ•´ä¸ªé¡µé¢å˜å¾—å¯ä»¥ç¼–è¾‘ã€‚</p><blockquote><p>document.body.contentEditable=â€™trueâ€™; </p></blockquote><p><img src="/My-Blogs/images/%E5%86%B7%E7%9F%A5%E8%AF%86%E4%B9%8BHTML%E7%AF%87-02.png" alt="image"></p><h3 id="å®æ—¶ç¼–å†™æ ·å¼çš„è¾“å…¥æ¡†"><a href="#å®æ—¶ç¼–å†™æ ·å¼çš„è¾“å…¥æ¡†" class="headerlink" title="å®æ—¶ç¼–å†™æ ·å¼çš„è¾“å…¥æ¡†"></a>å®æ—¶ç¼–å†™æ ·å¼çš„è¾“å…¥æ¡†</h3><br><p>åŒç†ï¼Œä¹Ÿæ˜¯åˆ©ç”¨äº†HTML5ä¸­çš„contenteditableå±æ€§ï¼Œå·§å¦™çš„åœ¨bodyå¢åŠ ä¸€ä¸ªå¯ç¼–è¾‘çš„styleæ ‡ç­¾ã€‚</p><br><pre><code class="html">&lt;body&gt;  &lt;style style="display:block; position: fixed;" contentEditable&gt;    body {      background: red;    }  &lt;/style&gt;&lt;/body&gt;</code></pre><p><img src="/My-Blogs/images/%E5%86%B7%E7%9F%A5%E8%AF%86%E4%B9%8BHTML%E7%AF%87-03.png" alt="image"></p><br><h3 id="åˆ©ç”¨aæ ‡ç­¾è§£æurl"><a href="#åˆ©ç”¨aæ ‡ç­¾è§£æurl" class="headerlink" title="åˆ©ç”¨aæ ‡ç­¾è§£æurl"></a>åˆ©ç”¨aæ ‡ç­¾è§£æurl</h3><br><p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬æœ‰ä»ä¸€ä¸ªURLä¸­æå–åŸŸåï¼ŒæŸ¥è¯¢å…³é”®å­—ï¼Œå˜é‡å‚æ•°å€¼ç­‰çš„éœ€è¦, ç„¶è€Œå¤„ç† url å­—ç¬¦ä¸²æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œå¯ä»¥ä½¿ç”¨ a æ ‡ç­¾è‡ªåŠ¨è§£æ urlã€‚</p><br><p>ä¸»è¦æ–¹æ³•å°±æ˜¯åœ¨JSä¸­åˆ›å»ºä¸€ä¸ªaæ ‡ç­¾ï¼Œç„¶åå°†éœ€è¦å¤„ç†çš„URLèµ‹å€¼ç»™æˆ‘ä»¬æ–°åˆ›å»ºçš„aæ ‡ç­¾çš„hrefå±æ€§ï¼Œç„¶åå°±å¯ä»¥å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„ä¸œè¥¿äº†ã€‚</p><br><pre><code class="javascript">var a = document.createElement('a');a.href = 'https://juejin.cn/user/2796746682939054/posts';console.log(a.host);</code></pre><br><p><img src="/My-Blogs/images/%E5%86%B7%E7%9F%A5%E8%AF%86%E4%B9%8BHTML%E7%AF%87-04.png" alt="image"></p><br><p>åˆ©ç”¨è¿™ä¸€æ–¹æ³•ï¼Œç¨å¾®è¿›è¡Œå°è£…ä¸€ä¸‹ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªéå¸¸å®ç”¨çš„å·¥å…·å‡½æ•°äº†ï¼Œä¸‹é¢æä¾›ä¸€ä¸ªç½‘ä¸Šå¸¸è§çš„å°è£…ç¤ºä¾‹ã€‚</p><pre><code class="javascript">function urlParse(url, key) {  var a = document.createElement('a')  a.href = url  var result = {    href: url,    protocol: a.protocol.replace(':', ''),    port: a.port,    query: a.search,    params: (function() {      var ret = {},        centArr,        seg = a.search.replace(/^\?/, '').replace(/^\?/, '').split('&amp;')      for (i = 0, len = seg.length; i &lt; len; i++) {        if (!seg[i]) {          continue        }        centArr = seg[i].split('=')        ret[centArr[0]] = centArr[1]      }      return ret    }()),    hash: a.hash,    file: (a.pathname.match(/\/([^\/?#]+)$/i) || [, ''])[1],    path: a.pathname.replace(/^([^\/])/, '/$1'),    relative: (a.href.match(/tps?:\/\/[^\/]+(.+)/) || [, ''])[1],    segments: a.pathname.replace(/^\//, '').split('/')  }  a = null  return key ? result[key] : result}</code></pre><br><blockquote><p>H5 æœ‰æ–°çš„ API URL ä¹Ÿå¯ä»¥å¿«é€Ÿçš„å¤„ç†ä¸€ä¸ªé“¾æ¥</p></blockquote><br><pre><code class="JavaScript">var url = new URL('https://www.baidu.com/')url.hash  ...</code></pre>]]></content>
      
      
      <categories>
          
          <category> HTML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
            <tag> å†·çŸ¥è¯† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®€å•ä»‹ç»2020Googleå¼€å‘è€…å¤§ä¼šwebäº®ç‚¹</title>
      <link href="/My-Blogs/2021/01/08/Google/%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D2020Google%E5%BC%80%E5%8F%91%E8%80%85%E5%A4%A7%E4%BC%9Aweb%E4%BA%AE%E7%82%B9/"/>
      <url>/My-Blogs/2021/01/08/Google/%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D2020Google%E5%BC%80%E5%8F%91%E8%80%85%E5%A4%A7%E4%BC%9Aweb%E4%BA%AE%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<a id="more"></a><h2 id="ç½‘ç»œ"><a href="#ç½‘ç»œ" class="headerlink" title="ç½‘ç»œ"></a>ç½‘ç»œ</h2><h3 id="sameSite"><a href="#sameSite" class="headerlink" title="sameSite"></a>sameSite</h3><blockquote><p>Chrome 51 å¼€å§‹ï¼Œæµè§ˆå™¨çš„ Cookie æ–°å¢åŠ äº†ä¸€ä¸ªSameSiteå±æ€§ï¼Œç”¨æ¥é˜²æ­¢ CSRF æ”»å‡»å’Œç”¨æˆ·è¿½è¸ªï¼Œåˆ†ä¸ºStrict ï¼ŒLaxï¼ŒNone</p></blockquote><ul><li><code>Strict</code>æœ€ä¸ºä¸¥æ ¼ï¼Œå®Œå…¨ç¦æ­¢ç¬¬ä¸‰æ–¹ Cookieï¼Œè·¨ç«™ç‚¹æ—¶ï¼Œä»»ä½•æƒ…å†µä¸‹éƒ½ä¸ä¼šå‘é€ Cookieã€‚æ¢è¨€ä¹‹ï¼Œåªæœ‰å½“å‰ç½‘é¡µçš„ URL ä¸è¯·æ±‚ç›®æ ‡ä¸€è‡´ï¼Œæ‰ä¼šå¸¦ä¸Š Cookie</li></ul><p><strong>è¿™ä¸ªè§„åˆ™è¿‡äºä¸¥æ ¼ï¼Œå¯èƒ½é€ æˆéå¸¸ä¸å¥½çš„ç”¨æˆ·ä½“éªŒã€‚æ¯”å¦‚ï¼Œå½“å‰ç½‘é¡µæœ‰ä¸€ä¸ª GitHub é“¾æ¥ï¼Œç”¨æˆ·ç‚¹å‡»è·³è½¬å°±ä¸ä¼šå¸¦æœ‰ GitHub çš„ Cookieï¼Œè·³è½¬è¿‡å»æ€»æ˜¯æœªç™»é™†çŠ¶æ€</strong></p><ul><li><code>Lax</code>è§„åˆ™ç¨ç¨æ”¾å®½ï¼Œå…è®¸åŒç«™è¯·æ±‚å‘é€Cookieï¼Œä½†å¤§å¤šæ•°æƒ…å†µä¹Ÿæ˜¯ä¸å‘é€ç¬¬ä¸‰æ–¹ Cookieï¼Œä½†æ˜¯å¯¼èˆªåˆ°ç›®æ ‡ç½‘å€çš„ Get è¯·æ±‚é™¤å¤–ã€‚</li><li><code>None</code>å…è®¸è·¨ç«™è¯·æ±‚ï¼Œå‰ææ˜¯å¿…é¡»åŒæ—¶è®¾ç½®Secureå±æ€§ï¼ˆCookie åªèƒ½é€šè¿‡ HTTPS åè®®å‘é€ï¼‰ï¼Œå¦åˆ™æ— æ•ˆ</li></ul><table><thead><tr><th>sameSite</th><th>HTTP â†’ HTTPS</th><th>HTTPS â†’ HTTP</th></tr></thead><tbody><tr><td>SameSite=Strict</td><td>â›” Blocked</td><td>â›” Blocked</td></tr><tr><td>SameSite=Lax</td><td>âœ“ Allowed</td><td>âœ“ Allowed</td></tr><tr><td>SameSite=None; Secure</td><td>âœ“ Allowed</td><td>â›” Blocked</td></tr></tbody></table><p><a href="https://web.dev/schemeful-samesite/">æŸ¥çœ‹æ›´å¤šä¿¡æ¯</a></p><h3 id="User-Agent-Client-Hints-UA-CH"><a href="#User-Agent-Client-Hints-UA-CH" class="headerlink" title="User-Agent Client Hints(UA-CH)"></a>User-Agent Client Hints(UA-CH)</h3><blockquote><p>ä»Chrome 85å¼€å§‹ï¼Œæ­£å¼å‘å¸ƒ</p></blockquote><table><thead><tr><th>â¬‡ï¸ ResponseAccept-CH</th><th>â¬†ï¸ Requestheader</th><th>â¬†ï¸ RequestExample value</th><th>Description</th></tr></thead><tbody><tr><td>UA</td><td>Sec-CH-UA</td><td>â€œChromiumâ€; v=â€84â€, â€œGoogle Chromeâ€; v=â€84â€</td><td>List of browser brands and their significant version.</td></tr><tr><td>UA-Mobile</td><td>Sec-CH-UA-Mobile</td><td>?1</td><td>Boolean indicating if the browser is on a mobile device (?1&nbsp;for true) or not (?0&nbsp;for false).</td></tr><tr><td>UA-Full-Version</td><td>Sec-CH-UA-Full-Version</td><td>â€œ84.0.4143.2â€</td><td>The complete version for the browser.</td></tr><tr><td>UA-Platform</td><td>Sec-CH-UA-Platform</td><td>â€œAndroidâ€</td><td>The platform for the device, usually the operating system (OS).</td></tr><tr><td>UA-Platform-Version</td><td>Sec-CH-UA-Platform-Version</td><td>â€œ10â€</td><td>The version for the platform or OS.</td></tr><tr><td>UA-Arch</td><td>Sec-CH-UA-Arch</td><td>â€œARM64â€</td><td>The underlying architecture for the device. While this may not be relevant to displaying the page, the site may want to offer a download which defaults to the right format.</td></tr><tr><td>UA-Model</td><td>Sec-CH-UA-Model</td><td>â€œPixel 3â€</td><td>The device model.</td></tr></tbody></table><h3 id="JavaScript-API"><a href="#JavaScript-API" class="headerlink" title="JavaScript API"></a>JavaScript API</h3><p>Alongside the headers, the User-Agent can also be accessed in JavaScript via navigator.userAgentData. The default Sec-CH-UA and Sec-CH-UA-Mobile header information can be accessed via the brands and mobile properties, respectively:</p><pre><code class="JavaScript">// Log the brand dataconsole.log(navigator.userAgentData.brands);// output[{    brand: 'Chromium',    version: '84',  },  {    brand: 'Google Chrome',    version: '84',  },];// Log the mobile indicatorconsole.log(navigator.userAgentData.mobile);// outputfalse;</code></pre><p><a href="https://web.dev/user-agent-client-hints/">æŸ¥çœ‹æ›´å¤šä¿¡æ¯</a></p><h2 id="CSSå¸ƒå±€"><a href="#CSSå¸ƒå±€" class="headerlink" title="CSSå¸ƒå±€"></a>CSSå¸ƒå±€</h2><blockquote><p>ä»‹ç»äº†ä¸€äº›gridæ–°ç‰¹æ€§</p></blockquote><h3 id="å¼ºå±…ä¸­"><a href="#å¼ºå±…ä¸­" class="headerlink" title="å¼ºå±…ä¸­"></a>å¼ºå±…ä¸­</h3><img src="https://user-images.githubusercontent.com/5030910/100298195-71db5c00-2fcb-11eb-89a2-f4e5ed8a4e8d.png" align="center"><h3 id="ä¸‰æ®µå¼å¸ƒå±€"><a href="#ä¸‰æ®µå¼å¸ƒå±€" class="headerlink" title="ä¸‰æ®µå¼å¸ƒå±€"></a>ä¸‰æ®µå¼å¸ƒå±€</h3><img src="https://user-images.githubusercontent.com/5030910/100298209-7a339700-2fcb-11eb-95df-49fff7c11a46.png" align="center"><h3 id="ç»å…¸å¸ƒå±€"><a href="#ç»å…¸å¸ƒå±€" class="headerlink" title="ç»å…¸å¸ƒå±€"></a>ç»å…¸å¸ƒå±€</h3><img src="https://user-images.githubusercontent.com/5030910/100298312-c8e13100-2fcb-11eb-8631-d0aba105fa86.png" align="center"><p><a href="http://1linelayouts.glitch.me/">æŸ¥çœ‹æ›´å¤šå®ä¾‹</a></p><p><strong>æ€è€ƒï¼šä¼˜åŒ–è¿è¥åå°é¡µé¢ï¼Œè‡ªé€‚åº”å¸ƒå±€ï¼Ÿ</strong></p><h2 id="æœç´¢ï¼ˆé«˜çº§SEOï¼‰"><a href="#æœç´¢ï¼ˆé«˜çº§SEOï¼‰" class="headerlink" title="æœç´¢ï¼ˆé«˜çº§SEOï¼‰"></a>æœç´¢ï¼ˆé«˜çº§SEOï¼‰</h2><blockquote><p>åˆ©ç”¨ç»“æ„åŒ–æ•°æ®è·å– Google æœç´¢çš„è‡ªç„¶æµé‡</p></blockquote><h3 id="æ„å»ºå¯Œåª’ä½“æœç´¢æ•°æ®ï¼ŒåŠ©åŠ›Bigoæµ·å¤–ç”µå•†ï¼Œç›´æ’­ï¼ŒimoJobsç­‰ä¸šåŠ¡"><a href="#æ„å»ºå¯Œåª’ä½“æœç´¢æ•°æ®ï¼ŒåŠ©åŠ›Bigoæµ·å¤–ç”µå•†ï¼Œç›´æ’­ï¼ŒimoJobsç­‰ä¸šåŠ¡" class="headerlink" title="æ„å»ºå¯Œåª’ä½“æœç´¢æ•°æ®ï¼ŒåŠ©åŠ›Bigoæµ·å¤–ç”µå•†ï¼Œç›´æ’­ï¼ŒimoJobsç­‰ä¸šåŠ¡"></a>æ„å»ºå¯Œåª’ä½“æœç´¢æ•°æ®ï¼ŒåŠ©åŠ›Bigoæµ·å¤–ç”µå•†ï¼Œç›´æ’­ï¼ŒimoJobsç­‰ä¸šåŠ¡</h3><ul><li><p><strong><a href="https://developers.google.com/search/docs/data-types/product">ç”µå•†</a></strong></p><img src="https://user-images.githubusercontent.com/5030910/100297927-bfa39480-2fca-11eb-8df7-99606a72f2cf.png" align="center"></li><li><p><strong><a href="https://developers.google.com/search/docs/data-types/video">ç›´æ’­</a></strong></p></li></ul><p><img src="https://user-images.githubusercontent.com/5030910/100444919-3a61d200-30e7-11eb-9fdb-bcf3f609608b.png" alt="image"></p><ul><li><p><strong><a href="https://developers.google.com/search/docs/data-types/job-posting">imojobs</a></strong></p><img src="https://user-images.githubusercontent.com/5030910/100225858-cfcf5b80-2f59-11eb-81fd-ecb766bfc198.png" align="center"></li></ul><p><a href="https://search.google.com/test/rich-results">æµ‹è¯•åœ°å€</a></p><h3 id="ä¸‹é¢æ˜¯ä¸€ä¸ªè´­ç‰©ä¿¡æ¯æ±‡æ€»ç½‘ç«™é¡µé¢ç¤ºä¾‹"><a href="#ä¸‹é¢æ˜¯ä¸€ä¸ªè´­ç‰©ä¿¡æ¯æ±‡æ€»ç½‘ç«™é¡µé¢ç¤ºä¾‹" class="headerlink" title="ä¸‹é¢æ˜¯ä¸€ä¸ªè´­ç‰©ä¿¡æ¯æ±‡æ€»ç½‘ç«™é¡µé¢ç¤ºä¾‹"></a>ä¸‹é¢æ˜¯ä¸€ä¸ªè´­ç‰©ä¿¡æ¯æ±‡æ€»ç½‘ç«™é¡µé¢ç¤ºä¾‹</h3><pre><code class="html"> &lt;html&gt; &lt;head&gt;   &lt;title&gt;Executive Anvil&lt;/title&gt; &lt;/head&gt; &lt;body&gt;   &lt;div&gt;     &lt;div itemtype="http://schema.org/Product" itemscope&gt;       &lt;meta itemprop="mpn" content="925872" /&gt;       &lt;meta itemprop="name" content="Executive Anvil" /&gt;       &lt;link itemprop="image" href="https://example.com/photos/16x9/photo.jpg" /&gt;       &lt;link itemprop="image" href="https://example.com/photos/4x3/photo.jpg" /&gt;       &lt;link itemprop="image" href="https://example.com/photos/1x1/photo.jpg" /&gt;       &lt;meta itemprop="description" content="Sleeker than ACME's Classic Anvil, the Executive Anvil is perfect for the business traveler looking for something to drop from a height." /&gt;       &lt;div itemprop="offers" itemtype="http://schema.org/AggregateOffer" itemscope&gt;         &lt;meta itemprop="lowPrice" content="119.99" /&gt;         &lt;meta itemprop="highPrice" content="199.99" /&gt;         &lt;meta itemprop="offerCount" content="6" /&gt;         &lt;meta itemprop="priceCurrency" content="USD" /&gt;       &lt;/div&gt;       &lt;div itemprop="aggregateRating" itemtype="http://schema.org/AggregateRating" itemscope&gt;         &lt;meta itemprop="reviewCount" content="89" /&gt;         &lt;meta itemprop="ratingValue" content="4.4" /&gt;       &lt;/div&gt;       &lt;div itemprop="review" itemtype="http://schema.org/Review" itemscope&gt;         &lt;div itemprop="author" itemtype="http://schema.org/Person" itemscope&gt;           &lt;meta itemprop="name" content="Fred Benson" /&gt;         &lt;/div&gt;         &lt;div itemprop="reviewRating" itemtype="http://schema.org/Rating" itemscope&gt;           &lt;meta itemprop="ratingValue" content="4" /&gt;           &lt;meta itemprop="bestRating" content="5" /&gt;         &lt;/div&gt;       &lt;/div&gt;       &lt;meta itemprop="sku" content="0446310786" /&gt;       &lt;div itemprop="brand" itemtype="http://schema.org/Brand" itemscope&gt;         &lt;meta itemprop="name" content="ACME" /&gt;       &lt;/div&gt;     &lt;/div&gt;   &lt;/div&gt; &lt;/body&gt; &lt;/html&gt;</code></pre><p><strong>æ€è€ƒï¼šå¯ä»¥åˆ©ç”¨Node+CDNæœåŠ¡æ­å»ºå¯Œåª’ä½“HTMLç›´å‡ºå¹³å°ï¼Œä¼˜åŒ–SEOï¼Ÿ</strong></p><h2 id="è‡ªåŠ¨åŒ–æµ‹è¯•"><a href="#è‡ªåŠ¨åŒ–æµ‹è¯•" class="headerlink" title="è‡ªåŠ¨åŒ–æµ‹è¯•"></a>è‡ªåŠ¨åŒ–æµ‹è¯•</h2><h3 id="PageSpeed-Insights-PSI"><a href="#PageSpeed-Insights-PSI" class="headerlink" title=" PageSpeed Insights(PSI)"></a><a href="https://developers.google.com/speed/pagespeed/insights/"> PageSpeed Insights(PSI)</a></h3><blockquote><p>PSI ä½œä¸ºä¸€æ¬¾ä¸“æ³¨äºæ”¹è¿›ç½‘é¡µæ€§èƒ½çš„å¼€å‘è€…å·¥å…·</p></blockquote><p><strong>å®ƒä¸»è¦å…·æœ‰ä»¥ä¸‹ä¸¤ä¸ªä¼˜åŠ¿ï¼š</strong></p><ul><li>çœŸå®çš„ç½‘é¡µè¿è¡Œé€Ÿåº¦ã€‚è¿™æ˜¯ PSI 2.0 ä¸­çš„æ–°åŠŸèƒ½ï¼ŒPSI ç»“åˆ Chrome ç”¨æˆ·ä½“éªŒæŠ¥å‘Šä¸­çš„æ•°æ®ï¼Œå‘å¼€å‘è€…å±•ç¤ºä»–ä»¬çš„ç½‘é¡µçš„å®é™…æ€§èƒ½ï¼Œè¿™ä¸€ç‚¹å¯¹äºå¼€å‘è€…æ¥è¯´æ˜¯å¾ˆæœ‰ä»·å€¼çš„ã€‚é‚£ä¹ˆï¼ŒPSI åˆ™æˆä¸ºäº†ç”¨æˆ·è·å¾—çœŸå®çš„ç½‘é¡µè¿è¡Œé€Ÿåº¦çš„çª—å£ã€‚</li><li>ä¼˜åŒ–å»ºè®®ã€‚æ ¹æ®ä¸€äº›å¸¸ç”¨çš„ç½‘é¡µæ€§èƒ½ä¼˜åŒ–è§„åˆ™(å¦‚é¿å…è¿‡å¤šçš„é‡å®šå‘)ï¼ŒPSI ä¼šåŸºäºè¯¥ç½‘é¡µçš„ä¼˜åŒ–ç©ºé—´ä¸ºç”¨æˆ·æä¾›ä¸€äº›ç½‘é¡µä¼˜åŒ–å»ºè®®ã€‚</li></ul><h3 id="Puppeteer"><a href="#Puppeteer" class="headerlink" title="Puppeteer"></a><a href="https://github.com/puppeteer/puppeteer">Puppeteer</a></h3><blockquote><p>Nodejså·¥å…·åº“ï¼Œå®ƒæä¾›äº†é«˜çº§çš„JavaScript API æ¥é€šè¿‡DevToolsæ§åˆ¶ Chromiumä¸å…¶ä»–æµè§ˆå™¨</p></blockquote><p><strong>Puppeteerèƒ½åšä»€ä¹ˆï¼Ÿ</strong></p><ul><li>ç”Ÿæˆé¡µé¢çš„å±å¹•æˆªå›¾å’ŒPDFã€‚</li><li>çˆ¬å–SPAï¼ˆå•é¡µåº”ç”¨ç¨‹åºï¼‰å¹¶ç”Ÿæˆé¢„æ¸²æŸ“çš„å†…å®¹ï¼ˆå³â€œ SSRâ€ï¼ˆæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼‰ï¼‰ã€‚</li><li>é«˜çº§çˆ¬è™«ï¼Œå¯ä»¥çˆ¬å–å¤§é‡å¼‚æ­¥æ¸²æŸ“å†…å®¹çš„ç½‘é¡µã€‚</li><li>è‡ªåŠ¨è¿›è¡Œè¡¨å•æäº¤ï¼ŒUIæµ‹è¯•ï¼Œé”®ç›˜è¾“å…¥ï¼Œæ¨¡æ‹Ÿæ—¶åŒºï¼Œæ”¹å˜æ·±è‰²ä¸»é¢˜ç­‰ã€‚</li><li>åˆ›å»ºæœ€æ–°çš„è‡ªåŠ¨åŒ–æµ‹è¯•ç¯å¢ƒã€‚ä½¿ç”¨æœ€æ–°çš„JavaScriptå’Œæµè§ˆå™¨åŠŸèƒ½ï¼Œç›´æ¥åœ¨æœ€æ–°ç‰ˆæœ¬çš„Chromeä¸­è¿è¡Œæµ‹è¯•ã€‚</li><li>æ•è·ç«™ç‚¹çš„æ—¶é—´çº¿è·Ÿè¸ªï¼Œä»¥å¸®åŠ©è¯Šæ–­æ€§èƒ½é—®é¢˜ã€‚</li><li>æµ‹è¯•Chromeæ‰©å±•ç¨‹åºã€‚</li></ul><p><strong>example.js</strong></p><pre><code class="js">const puppeteer = require('puppeteer');(async () =&gt; {  const browser = await puppeteer.launch();  const page = await browser.newPage();  await page.goto('https://example.com');  await page.screenshot({    path: 'example.png'  });  await browser.close();})();</code></pre><blockquote><p>node example.js</p></blockquote><p><strong>æœ€æ–°è¿›å±•ä»‹ç»</strong></p> <img src="https://user-images.githubusercontent.com/5030910/100229116-aebd3980-2f5e-11eb-8c5b-e85159a427d7.png " width="500" align="center"><p><strong>æ€è€ƒï¼šå¯ä»¥æ„å»ºServelessæœåŠ¡ï¼Œæ­å»ºFaaSå¹³å°ï¼ŒåŠ©åŠ›å‰ç«¯æœåŠ¡å’Œè¿è¥æœåŠ¡ï¼Ÿ</strong></p><h3 id="Web-Vitals"><a href="#Web-Vitals" class="headerlink" title="Web Vitals"></a>Web Vitals</h3><blockquote><p>ä»€ä¹ˆæ˜¯ Web Vitals ï¼ŒGoogle ç»™çš„å®šä¹‰æ˜¯ä¸€ä¸ªè‰¯å¥½ç½‘ç«™çš„åŸºæœ¬æŒ‡æ ‡ (Essential metrics for a healthy site)ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å†å®šä¹‰ä¸€ä¸ªæ–°çš„æŒ‡æ ‡é›†ï¼ŒåŸå› æ˜¯è¿‡å»è¦è¡¡é‡ä¸€ä¸ªå¥½çš„ç½‘ç«™ï¼Œéœ€è¦ä½¿ç”¨çš„æŒ‡æ ‡å¤ªå¤šï¼Œæ¨å‡º Web Vitals æ˜¯ç®€åŒ–è¿™ä¸ªå­¦ä¹ çš„æ›²çº¿ï¼Œç«™ä¸»åªè¦è§‚æ³¨ Web Vitals æŒ‡æ ‡è¡¨ç°å³å¯ã€‚</p></blockquote><h4 id="ä¸‰å¤§æŒ‡æ ‡"><a href="#ä¸‰å¤§æŒ‡æ ‡" class="headerlink" title="ä¸‰å¤§æŒ‡æ ‡"></a>ä¸‰å¤§æŒ‡æ ‡</h4><p><img src="https://user-images.githubusercontent.com/5030910/100299467-bf0cfd00-2fce-11eb-972f-48b4b8c60a3c.png" alt="image"></p><p>ä½¿ç”¨<a href="https://github.com/GoogleChrome/web-vitals">web-vitals</a>åº“ï¼Œæµ‹é‡æ¯ä¸ªæŒ‡æ ‡å°±åƒè°ƒç”¨å•ä¸ªå‡½æ•°ä¸€æ ·ç®€å•ï¼ˆæœ‰å…³å®Œæ•´ç”¨æ³•å’Œ APIè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æ–‡æ¡£ ï¼‰ï¼š</p><pre><code class="js">import {  getCLS,  getFID,  getLCP} from 'web-vitals';function sendToAnalytics(metric) {  const body = JSON.stringify(metric);  // Use `navigator.sendBeacon()` if available, falling back to `fetch()`.  (navigator.sendBeacon &amp;&amp; navigator.sendBeacon('/analytics', body)) ||  fetch('/analytics', {    body,    method: 'POST',    keepalive: true  });}getCLS(sendToAnalytics);getFID(sendToAnalytics);getLCP(sendToAnalytics);</code></pre><table><thead><tr><th>Platform</th><th>LCP</th><th>FID</th><th>CLS</th></tr></thead><tbody><tr><td><a href="https://developers.google.com/web/tools/chrome-user-experience-report">Chrome User Experience Report</a></td><td>âœ”</td><td>âœ”</td><td>âœ”</td></tr><tr><td><a href="https://developers.google.com/speed/pagespeed/insights/">PageSpeed Insights</a></td><td>âœ”</td><td>âœ”</td><td>âœ”</td></tr><tr><td><a href="https://support.google.com/webmasters/answer/9205520">Search Console (Core Web Vitals report)</a></td><td>âœ”</td><td>âœ”</td><td>âœ”</td></tr></tbody></table><p><strong>æ€è€ƒï¼šåˆ©ç”¨Web Vitalsç»“åˆpuppeteerï¼Œæ­å»ºç½‘é¡µè‡ªåŠ¨åŒ–æµ‹è¯•å¹³å°ï¼Œçˆ¬è™«å·¥å…·ï¼Ÿ</strong></p><h2 id="Chromeç›¸å…³ï¼ˆDevToolsï¼ŒLighthouseï¼‰"><a href="#Chromeç›¸å…³ï¼ˆDevToolsï¼ŒLighthouseï¼‰" class="headerlink" title="Chromeç›¸å…³ï¼ˆDevToolsï¼ŒLighthouseï¼‰"></a>Chromeç›¸å…³ï¼ˆDevToolsï¼ŒLighthouseï¼‰</h2><h3 id="æ”¯æŒCSS-in-JSæ¡†æ¶çš„æ ·å¼ç¼–è¾‘"><a href="#æ”¯æŒCSS-in-JSæ¡†æ¶çš„æ ·å¼ç¼–è¾‘" class="headerlink" title="æ”¯æŒCSS-in-JSæ¡†æ¶çš„æ ·å¼ç¼–è¾‘"></a><a href="https://developers.google.com/web/updates/images/2020/06/css-in-js.mp4">æ”¯æŒCSS-in-JSæ¡†æ¶çš„æ ·å¼ç¼–è¾‘</a></h3><p><img src="https://user-images.githubusercontent.com/5030910/100299322-60e01a00-2fce-11eb-96b6-a37621b3180a.png" alt="image"></p><h3 id="æ¨¡æ‹Ÿæ—¶åŒº"><a href="#æ¨¡æ‹Ÿæ—¶åŒº" class="headerlink" title="æ¨¡æ‹Ÿæ—¶åŒº"></a>æ¨¡æ‹Ÿæ—¶åŒº</h3><p><img src="https://user-images.githubusercontent.com/5030910/100299410-92f17c00-2fce-11eb-8447-6eb810ec5a8d.png" alt="image"></p><h3 id="åª’ä½“é¢æ¿"><a href="#åª’ä½“é¢æ¿" class="headerlink" title="åª’ä½“é¢æ¿"></a>åª’ä½“é¢æ¿</h3><p><img src="https://user-images.githubusercontent.com/5030910/100299683-35a9fa80-2fcf-11eb-9a67-cf3927b48199.png" alt="image"></p><h3 id="ä¸€é”®ä¿®å¤æ–‡å­—çš„è‰²å½©å¯¹æ¯”"><a href="#ä¸€é”®ä¿®å¤æ–‡å­—çš„è‰²å½©å¯¹æ¯”" class="headerlink" title="ä¸€é”®ä¿®å¤æ–‡å­—çš„è‰²å½©å¯¹æ¯”"></a>ä¸€é”®ä¿®å¤æ–‡å­—çš„è‰²å½©å¯¹æ¯”</h3><p><img src="https://user-images.githubusercontent.com/5030910/100299746-638f3f00-2fcf-11eb-9e12-0e2a7017c6a9.png" alt="image"></p><h3 id="åˆ©ç”¨Lighthouse-ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š"><a href="#åˆ©ç”¨Lighthouse-ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š" class="headerlink" title="åˆ©ç”¨Lighthouse ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š"></a>åˆ©ç”¨Lighthouse ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š</h3><p><img src="https://user-images.githubusercontent.com/5030910/100299914-d0a2d480-2fcf-11eb-8500-a0fdc33c45c0.png" alt="image"></p><p><strong><a href="https://developers.google.com/web/updates">æ›´å¤šå†…å®¹æŸ¥çœ‹è¿™é‡Œ</a></strong></p><h2 id="PWAä¸WebPush"><a href="#PWAä¸WebPush" class="headerlink" title="PWAä¸WebPush"></a>PWAä¸WebPush</h2><h3 id="åˆ©ç”¨PWAè§£å†³ä»¥ä¸‹é—®é¢˜"><a href="#åˆ©ç”¨PWAè§£å†³ä»¥ä¸‹é—®é¢˜" class="headerlink" title="åˆ©ç”¨PWAè§£å†³ä»¥ä¸‹é—®é¢˜"></a>åˆ©ç”¨PWAè§£å†³ä»¥ä¸‹é—®é¢˜</h3><p><img src="https://user-images.githubusercontent.com/5030910/100417600-3cfb0200-30bc-11eb-8c5b-16148406d95c.png" alt="image"></p><h3 id="WebPushæµç¨‹å›¾"><a href="#WebPushæµç¨‹å›¾" class="headerlink" title="WebPushæµç¨‹å›¾"></a>WebPushæµç¨‹å›¾</h3><p><strong>æˆæƒæµç¨‹</strong></p><p><img src="https://user-images.githubusercontent.com/5030910/100417630-50a66880-30bc-11eb-8ecc-2199dab3dc11.png" alt="Web pushæˆæƒæµç¨‹"></p><p><strong>é€šçŸ¥æµç¨‹</strong></p><p><img src="https://user-images.githubusercontent.com/5030910/100417986-eb06ac00-30bc-11eb-9ecf-6b3dd9b5a69e.png" alt="image"></p><p><strong>ä»£ç å®ç°</strong></p><p><img src="https://user-images.githubusercontent.com/5030910/100418090-17bac380-30bd-11eb-8ca5-6fe9c18deddd.png" alt="image"></p><p><strong>æˆæœ</strong></p><p><img src="https://user-images.githubusercontent.com/5030910/100418205-505a9d00-30bd-11eb-9bda-9e12c38f60f1.png" alt="image"></p><p><strong>æ€è€ƒï¼šåˆ©ç”¨Nodeï¼Œæ­å»ºPWAæ„å»ºå¹³å°ï¼ŒåŠ©åŠ›æµ·å¤–ç”µå•†ä¸šåŠ¡ï¼Œå°†è¥é”€æ¨å¹¿ç±»æ´»åŠ¨é¡µå°è£…æˆPWA</strong></p><h2 id="TensorFlow-js"><a href="#TensorFlow-js" class="headerlink" title="TensorFlow.js"></a>TensorFlow.js</h2><h3 id="æ¥åˆ†äº«ä¸€ä¸ªæœ‰æ„æ€çš„åœºæ™¯"><a href="#æ¥åˆ†äº«ä¸€ä¸ªæœ‰æ„æ€çš„åœºæ™¯" class="headerlink" title="æ¥åˆ†äº«ä¸€ä¸ªæœ‰æ„æ€çš„åœºæ™¯"></a>æ¥åˆ†äº«ä¸€ä¸ªæœ‰æ„æ€çš„åœºæ™¯</h3><p><strong><a href="https://blog.tensorflow.org/2020/09/bringing-mona-lisa-effect-to-life-tensorflow-js.html">äº¤äº’å¼ã€Šè’™å¨œä¸½èã€‹ç”»åƒ</a></strong></p><blockquote><p>ä¼ è¯´ä¸­ï¼Œä¸ç®¡ä½ ä»å“ªä¸ªè§’åº¦çœ‹ã€Šè’™å¨œä¸½èã€‹ç”»åƒï¼Œéƒ½ä¼šæ„Ÿåˆ°ç”»åƒä¸­çš„å¥³å­åœ¨çœ‹ç€ä½ ã€‚TensorFlow çš„å®˜æ–¹åšå®¢ï¼Œæ¼”ç¤ºæ€ä¹ˆç”¨ TensorFlow.jsï¼Œåˆ¶ä½œä¸€ä¸ªäº¤äº’å¼çš„ã€Šè’™å¨œä¸½èã€‹ç”»åƒï¼Œæ‘„åƒå¤´æ•æ‰è§‚çœ‹è€…çš„è§’åº¦ï¼Œç„¶åè‡ªåŠ¨æ”¹å˜ç”»åƒçš„çœ¼ç¥ã€‚</p></blockquote><p><img src="https://www.wangbase.com/blogimg/asset/202009/bg2020092603.jpg" alt="image"></p><p><img src="https://www.wangbase.com/blogimg/asset/202009/bg2020092604.jpg" alt="image"></p><h3 id="åˆ©ç”¨TensorFlow-Privacy-æ£€æŸ¥éšç§ä¿æŠ¤æªæ–½"><a href="#åˆ©ç”¨TensorFlow-Privacy-æ£€æŸ¥éšç§ä¿æŠ¤æªæ–½" class="headerlink" title="åˆ©ç”¨TensorFlow Privacy æ£€æŸ¥éšç§ä¿æŠ¤æªæ–½"></a>åˆ©ç”¨TensorFlow Privacy æ£€æŸ¥éšç§ä¿æŠ¤æªæ–½</h3><p><img src="https://user-images.githubusercontent.com/5030910/100418941-851b2400-30be-11eb-98cf-af0d5dbb1a5f.png" alt="image"></p><p><img src="https://user-images.githubusercontent.com/5030910/100419020-a3811f80-30be-11eb-9237-c33f9de6b58a.png" alt="image"></p><p><img src="https://user-images.githubusercontent.com/5030910/100419041-ada31e00-30be-11eb-88cd-0c5f8b2c89bd.png" alt="image"></p><p><strong>æ€è€ƒï¼šæˆ–è®¸å¯ä»¥åˆ©ç”¨Node+TensorFlowï¼Œå¯¹äºç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡è¿›è¡ŒäºŒæ¬¡å¤„ç†ï¼Ÿ</strong></p><ul><li><p><a href="https://www.tensorflow.org/js/?hl=zh_cn">å®˜ç½‘</a></p></li><li><p><a href="https://www.icourse163.org/learn/youdao-1460578162?tid=1461280442#/learn/content">å…¥é—¨è¯¾ç¨‹</a></p></li><li><p><a href="https://flutter.dev/web">Flutter Web</a></p></li><li><p><a href="https://space.bilibili.com/64169458/channel/detail?cid=156180">è§†é¢‘é›†åˆé“¾æ¥</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Google </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Google </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitè¿œç¨‹æ“ä½œè¯¦è§£ã€è½¬è½½ã€‘</title>
      <link href="/My-Blogs/2021/01/08/Git/Git%E8%BF%9C%E7%A8%8B%E6%93%8D%E4%BD%9C%E8%AF%A6%E8%A7%A3%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91/"/>
      <url>/My-Blogs/2021/01/08/Git/Git%E8%BF%9C%E7%A8%8B%E6%93%8D%E4%BD%9C%E8%AF%A6%E8%A7%A3%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91/</url>
      
        <content type="html"><![CDATA[<p>Gitæœ‰å¾ˆå¤šä¼˜åŠ¿ï¼Œå…¶ä¸­ä¹‹ä¸€å°±æ˜¯è¿œç¨‹æ“ä½œéå¸¸ç®€ä¾¿ã€‚æœ¬æ–‡è¯¦ç»†ä»‹ç»5ä¸ªGitå‘½ä»¤ï¼Œå®ƒä»¬çš„æ¦‚å¿µå’Œç”¨æ³•ï¼Œç†è§£äº†è¿™äº›å†…å®¹ï¼Œä½ å°±ä¼šå®Œå…¨æŒæ¡Gitè¿œç¨‹æ“ä½œã€‚</p><a id="more"></a><pre><code class="BASH">git clonegit remotegit fetchgit pullgit push</code></pre><p>æœ¬æ–‡é’ˆå¯¹åˆçº§ç”¨æˆ·ï¼Œä»æœ€ç®€å•çš„è®²èµ·ï¼Œä½†æ˜¯éœ€è¦è¯»è€…å¯¹Gitçš„åŸºæœ¬ç”¨æ³•æœ‰æ‰€äº†è§£ã€‚åŒæ—¶ï¼Œæœ¬æ–‡è¦†ç›–äº†ä¸Šé¢5ä¸ªå‘½ä»¤çš„å‡ ä¹æ‰€æœ‰çš„å¸¸ç”¨ç”¨æ³•ï¼Œæ‰€ä»¥å¯¹äºç†Ÿç»ƒç”¨æˆ·ä¹Ÿæœ‰å‚è€ƒä»·å€¼ã€‚</p><h3 id="ä¸€ã€git-clone"><a href="#ä¸€ã€git-clone" class="headerlink" title="ä¸€ã€git clone"></a>ä¸€ã€git clone</h3><p>è¿œç¨‹æ“ä½œçš„ç¬¬ä¸€æ­¥ï¼Œé€šå¸¸æ˜¯ä»è¿œç¨‹ä¸»æœºå…‹éš†ä¸€ä¸ªç‰ˆæœ¬åº“ï¼Œè¿™æ—¶å°±è¦ç”¨åˆ°git cloneå‘½ä»¤ã€‚</p><pre><code class="BASH">$ git clone &amp;lt;ç‰ˆæœ¬åº“çš„ç½‘å€&amp;gt;</code></pre><p>æ¯”å¦‚ï¼Œå…‹éš†jQueryçš„ç‰ˆæœ¬åº“ã€‚</p><pre><code class="BASH">$ git clone https://github.com/jquery/jquery.git</code></pre><p>è¯¥å‘½ä»¤ä¼šåœ¨æœ¬åœ°ä¸»æœºç”Ÿæˆä¸€ä¸ªç›®å½•ï¼Œä¸è¿œç¨‹ä¸»æœºçš„ç‰ˆæœ¬åº“åŒåã€‚å¦‚æœè¦æŒ‡å®šä¸åŒçš„ç›®å½•åï¼Œå¯ä»¥å°†ç›®å½•åä½œä¸ºgit cloneå‘½ä»¤çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚</p><pre><code class="BASH">$ git clone &amp;lt;ç‰ˆæœ¬åº“çš„ç½‘å€&amp;gt; &amp;lt;æœ¬åœ°ç›®å½•å&amp;gt;</code></pre><p>git cloneæ”¯æŒå¤šç§åè®®ï¼Œé™¤äº†HTTP(s)ä»¥å¤–ï¼Œè¿˜æ”¯æŒSSHã€Gitã€æœ¬åœ°æ–‡ä»¶åè®®ç­‰ï¼Œä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ã€‚</p><pre><code class="BASH">$ git clone http[s]://example.com/path/to/repo.git/$ git clone ssh://example.com/path/to/repo.git/$ git clone git://example.com/path/to/repo.git/$ git clone /opt/git/project.git $ git clone file:///opt/git/project.git$ git clone ftp[s]://example.com/path/to/repo.git/$ git clone rsync://example.com/path/to/repo.git/</code></pre><p>SSHåè®®è¿˜æœ‰å¦ä¸€ç§å†™æ³•ã€‚</p><pre><code class="BASH">$ git clone [user@]example.com:path/to/repo.git/</code></pre><p>é€šå¸¸æ¥è¯´ï¼ŒGitåè®®ä¸‹è½½é€Ÿåº¦æœ€å¿«ï¼ŒSSHåè®®ç”¨äºéœ€è¦ç”¨æˆ·è®¤è¯çš„åœºåˆã€‚å„ç§åè®®ä¼˜åŠ£çš„è¯¦ç»†è®¨è®ºè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚</p><h3 id="äºŒã€git-remote"><a href="#äºŒã€git-remote" class="headerlink" title="äºŒã€git remote"></a>äºŒã€git remote</h3><p>ä¸ºäº†ä¾¿äºç®¡ç†ï¼ŒGitè¦æ±‚æ¯ä¸ªè¿œç¨‹ä¸»æœºéƒ½å¿…é¡»æŒ‡å®šä¸€ä¸ªä¸»æœºåã€‚git remoteå‘½ä»¤å°±ç”¨äºç®¡ç†ä¸»æœºåã€‚</p><p>ä¸å¸¦é€‰é¡¹çš„æ—¶å€™ï¼Œgit remoteå‘½ä»¤åˆ—å‡ºæ‰€æœ‰è¿œç¨‹ä¸»æœºã€‚</p><pre><code class="BASH">$ git remote origin</code></pre><p>ä½¿ç”¨-vé€‰é¡¹ï¼Œå¯ä»¥å‚çœ‹è¿œç¨‹ä¸»æœºçš„ç½‘å€ã€‚</p><pre><code class="BASH">$ git remote -vorigin  git@github.com:jquery/jquery.git (fetch)origin  git@github.com:jquery/jquery.git (push)</code></pre><p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå½“å‰åªæœ‰ä¸€å°è¿œç¨‹ä¸»æœºï¼Œå«åšoriginï¼Œä»¥åŠå®ƒçš„ç½‘å€ã€‚</p><p>å…‹éš†ç‰ˆæœ¬åº“çš„æ—¶å€™ï¼Œæ‰€ä½¿ç”¨çš„è¿œç¨‹ä¸»æœºè‡ªåŠ¨è¢«Gitå‘½åä¸ºoriginã€‚å¦‚æœæƒ³ç”¨å…¶ä»–çš„ä¸»æœºåï¼Œéœ€è¦ç”¨git cloneå‘½ä»¤çš„-oé€‰é¡¹æŒ‡å®šã€‚</p><pre><code class="BASH">$ git clone -o jQuery https://github.com/jquery/jquery.git$ git remote</code></pre><p>jQuery</p><p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå…‹éš†çš„æ—¶å€™ï¼ŒæŒ‡å®šè¿œç¨‹ä¸»æœºå«åšjQueryã€‚</p><pre><code class="BASH">git remote showå‘½ä»¤åŠ ä¸Šä¸»æœºåï¼Œå¯ä»¥æŸ¥çœ‹è¯¥ä¸»æœºçš„è¯¦ç»†ä¿¡æ¯ã€‚$ git remote show &lt;ä¸»æœºå&gt;git remote addå‘½ä»¤ç”¨äºæ·»åŠ è¿œç¨‹ä¸»æœºã€‚$ git remote add &lt;ä¸»æœºå&gt; &lt;ç½‘å€&gt;git remote rmå‘½ä»¤ç”¨äºåˆ é™¤è¿œç¨‹ä¸»æœºã€‚$ git remote rm &lt;ä¸»æœºå&gt;git remote renameå‘½ä»¤ç”¨äºè¿œç¨‹ä¸»æœºçš„æ”¹åã€‚$ git remote rename &lt;åŸä¸»æœºå&gt; &lt;æ–°ä¸»æœºå&gt;</code></pre><h3 id="ä¸‰ã€git-fetch"><a href="#ä¸‰ã€git-fetch" class="headerlink" title="ä¸‰ã€git fetch"></a>ä¸‰ã€git fetch</h3><p>ä¸€æ—¦è¿œç¨‹ä¸»æœºçš„ç‰ˆæœ¬åº“æœ‰äº†æ›´æ–°ï¼ˆGitæœ¯è¯­å«åšcommitï¼‰ï¼Œéœ€è¦å°†è¿™äº›æ›´æ–°å–å›æœ¬åœ°ï¼Œè¿™æ—¶å°±è¦ç”¨åˆ°git fetchå‘½ä»¤ã€‚</p><pre><code class="BASH">$ git fetch &lt;è¿œç¨‹ä¸»æœºå&gt;</code></pre><p>ä¸Šé¢å‘½ä»¤å°†æŸä¸ªè¿œç¨‹ä¸»æœºçš„æ›´æ–°ï¼Œå…¨éƒ¨å–å›æœ¬åœ°ã€‚</p><p><code>git fetch</code> å‘½ä»¤é€šå¸¸ç”¨æ¥æŸ¥çœ‹å…¶ä»–äººçš„è¿›ç¨‹ï¼Œå› ä¸ºå®ƒå–å›çš„ä»£ç å¯¹ä½ æœ¬åœ°çš„å¼€å‘ä»£ç æ²¡æœ‰å½±å“ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œgit fetchå–å›æ‰€æœ‰åˆ†æ”¯ï¼ˆbranchï¼‰çš„æ›´æ–°ã€‚å¦‚æœåªæƒ³å–å›ç‰¹å®šåˆ†æ”¯çš„æ›´æ–°ï¼Œå¯ä»¥æŒ‡å®šåˆ†æ”¯åã€‚</p><pre><code class="BASH">$ git fetch &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;åˆ†æ”¯å&gt;</code></pre><p>æ¯”å¦‚ï¼Œå–å›originä¸»æœºçš„masteråˆ†æ”¯ã€‚</p><pre><code class="BASH">$ git fetch origin master</code></pre><p>æ‰€å–å›çš„æ›´æ–°ï¼Œåœ¨æœ¬åœ°ä¸»æœºä¸Šè¦ç”¨â€è¿œç¨‹ä¸»æœºå/åˆ†æ”¯åâ€çš„å½¢å¼è¯»å–ã€‚æ¯”å¦‚originä¸»æœºçš„masterï¼Œå°±è¦ç”¨origin/masterè¯»å–ã€‚</p><p>git branchå‘½ä»¤çš„-ré€‰é¡¹ï¼Œå¯ä»¥ç”¨æ¥æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ï¼Œ-aé€‰é¡¹æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ã€‚</p><pre><code class="BASH">$ git branch -rorigin/master$ git branch -a* master  remotes/origin/master</code></pre><p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œæœ¬åœ°ä¸»æœºçš„å½“å‰åˆ†æ”¯æ˜¯masterï¼Œè¿œç¨‹åˆ†æ”¯æ˜¯origin/masterã€‚</p><p>å–å›è¿œç¨‹ä¸»æœºçš„æ›´æ–°ä»¥åï¼Œå¯ä»¥åœ¨å®ƒçš„åŸºç¡€ä¸Šï¼Œä½¿ç”¨git checkoutå‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ã€‚</p><pre><code class="BASH">$ git checkout -b newBrach origin/master</code></pre><p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œåœ¨origin/masterçš„åŸºç¡€ä¸Šï¼Œåˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ã€‚</p><p>æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨git mergeå‘½ä»¤æˆ–è€…git rebaseå‘½ä»¤ï¼Œåœ¨æœ¬åœ°åˆ†æ”¯ä¸Šåˆå¹¶è¿œç¨‹åˆ†æ”¯ã€‚</p><pre><code class="BASH">$ git pull origin next:master</code></pre><p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºåœ¨å½“å‰åˆ†æ”¯ä¸Šï¼Œåˆå¹¶origin/masterã€‚</p><h3 id="å››ã€git-pull"><a href="#å››ã€git-pull" class="headerlink" title="å››ã€git pull"></a>å››ã€git pull</h3><p>git pullå‘½ä»¤çš„ä½œç”¨æ˜¯ï¼Œå–å›è¿œç¨‹ä¸»æœºæŸä¸ªåˆ†æ”¯çš„æ›´æ–°ï¼Œå†ä¸æœ¬åœ°çš„æŒ‡å®šåˆ†æ”¯åˆå¹¶ã€‚å®ƒçš„å®Œæ•´æ ¼å¼ç¨ç¨æœ‰ç‚¹å¤æ‚ã€‚</p><pre><code class="BASH">$ git pull &amp;lt;è¿œç¨‹ä¸»æœºå&amp;gt; &amp;lt;è¿œç¨‹åˆ†æ”¯å&amp;gt;:&amp;lt;æœ¬åœ°åˆ†æ”¯å&amp;gt;</code></pre><p>æ¯”å¦‚ï¼Œå–å›originä¸»æœºçš„nextåˆ†æ”¯ï¼Œä¸æœ¬åœ°çš„masteråˆ†æ”¯åˆå¹¶ï¼Œéœ€è¦å†™æˆä¸‹é¢è¿™æ ·ã€‚</p><pre><code class="BASH">$ git pull origin next:master</code></pre><p>å¦‚æœè¿œç¨‹åˆ†æ”¯æ˜¯ä¸å½“å‰åˆ†æ”¯åˆå¹¶ï¼Œåˆ™å†’å·åé¢çš„éƒ¨åˆ†å¯ä»¥çœç•¥ã€‚</p><pre><code class="BASH">$ git pull origin next</code></pre><p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå–å›origin/nextåˆ†æ”¯ï¼Œå†ä¸å½“å‰åˆ†æ”¯åˆå¹¶ã€‚å®è´¨ä¸Šï¼Œè¿™ç­‰åŒäºå…ˆåšgit fetchï¼Œå†åšgit mergeã€‚</p><pre><code class="BASH">$ git fetch origin$ git merge origin/next</code></pre><p>åœ¨æŸäº›åœºåˆï¼ŒGitä¼šè‡ªåŠ¨åœ¨æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯ä¹‹é—´ï¼Œå»ºç«‹ä¸€ç§è¿½è¸ªå…³ç³»ï¼ˆtrackingï¼‰ã€‚æ¯”å¦‚ï¼Œåœ¨git cloneçš„æ—¶å€™ï¼Œæ‰€æœ‰æœ¬åœ°åˆ†æ”¯é»˜è®¤ä¸è¿œç¨‹ä¸»æœºçš„åŒååˆ†æ”¯ï¼Œå»ºç«‹è¿½è¸ªå…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæœ¬åœ°çš„masteråˆ†æ”¯è‡ªåŠ¨â€è¿½è¸ªâ€origin/masteråˆ†æ”¯ã€‚</p><p>Gitä¹Ÿå…è®¸æ‰‹åŠ¨å»ºç«‹è¿½è¸ªå…³ç³»ã€‚</p><pre><code class="BASH">git branch --set-upstream master origin/next</code></pre><p>ä¸Šé¢å‘½ä»¤æŒ‡å®šmasteråˆ†æ”¯è¿½è¸ªorigin/nextåˆ†æ”¯ã€‚</p><p>å¦‚æœå½“å‰åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯å­˜åœ¨è¿½è¸ªå…³ç³»ï¼Œgit pullå°±å¯ä»¥çœç•¥è¿œç¨‹åˆ†æ”¯åã€‚</p><pre><code class="BASH">$ git pull origin</code></pre><p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œæœ¬åœ°çš„å½“å‰åˆ†æ”¯è‡ªåŠ¨ä¸å¯¹åº”çš„originä¸»æœºâ€è¿½è¸ªåˆ†æ”¯â€ï¼ˆremote-tracking branchï¼‰è¿›è¡Œåˆå¹¶ã€‚</p><p>å¦‚æœå½“å‰åˆ†æ”¯åªæœ‰ä¸€ä¸ªè¿½è¸ªåˆ†æ”¯ï¼Œè¿è¿œç¨‹ä¸»æœºåéƒ½å¯ä»¥çœç•¥ã€‚</p><pre><code class="BASH">$ git pull</code></pre><p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå½“å‰åˆ†æ”¯è‡ªåŠ¨ä¸å”¯ä¸€ä¸€ä¸ªè¿½è¸ªåˆ†æ”¯è¿›è¡Œåˆå¹¶ã€‚</p><p>å¦‚æœåˆå¹¶éœ€è¦é‡‡ç”¨rebaseæ¨¡å¼ï¼Œå¯ä»¥ä½¿ç”¨â€“rebaseé€‰é¡¹ã€‚</p><pre><code class="BASH">$ git pull --rebase &amp;lt;è¿œç¨‹ä¸»æœºå&amp;gt; &amp;lt;è¿œç¨‹åˆ†æ”¯å&amp;gt;:&amp;lt;æœ¬åœ°åˆ†æ”¯å&amp;gt;</code></pre><p>å¦‚æœè¿œç¨‹ä¸»æœºåˆ é™¤äº†æŸä¸ªåˆ†æ”¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œgit pull ä¸ä¼šåœ¨æ‹‰å–è¿œç¨‹åˆ†æ”¯çš„æ—¶å€™ï¼Œåˆ é™¤å¯¹åº”çš„æœ¬åœ°åˆ†æ”¯ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢ï¼Œç”±äºå…¶ä»–äººæ“ä½œäº†è¿œç¨‹ä¸»æœºï¼Œå¯¼è‡´git pullä¸çŸ¥ä¸è§‰åˆ é™¤äº†æœ¬åœ°åˆ†æ”¯ã€‚</p><p>ä½†æ˜¯ï¼Œä½ å¯ä»¥æ”¹å˜è¿™ä¸ªè¡Œä¸ºï¼ŒåŠ ä¸Šå‚æ•° -p å°±ä¼šåœ¨æœ¬åœ°åˆ é™¤è¿œç¨‹å·²ç»åˆ é™¤çš„åˆ†æ”¯ã€‚</p><pre><code class="BASH">$ git pull -pç­‰åŒäºä¸‹é¢çš„å‘½ä»¤$ git fetch --prune origin $ git fetch -p</code></pre><h3 id="äº”ã€git-push"><a href="#äº”ã€git-push" class="headerlink" title="äº”ã€git push"></a>äº”ã€git push</h3><p>git pushå‘½ä»¤ç”¨äºå°†æœ¬åœ°åˆ†æ”¯çš„æ›´æ–°ï¼Œæ¨é€åˆ°è¿œç¨‹ä¸»æœºã€‚å®ƒçš„æ ¼å¼ä¸git pullå‘½ä»¤ç›¸ä»¿ã€‚</p><pre><code class="BASH">$ git push &amp;lt;è¿œç¨‹ä¸»æœºå&amp;gt; &amp;lt;æœ¬åœ°åˆ†æ”¯å&amp;gt;:&amp;lt;è¿œç¨‹åˆ†æ”¯å&amp;gt;</code></pre><p>æ³¨æ„ï¼Œåˆ†æ”¯æ¨é€é¡ºåºçš„å†™æ³•æ˜¯&lt; æ¥æºåœ°&gt; :&lt; ç›®çš„åœ°&gt; ï¼Œæ‰€ä»¥git pullæ˜¯&lt; è¿œç¨‹åˆ†æ”¯&gt; :&lt; æœ¬åœ°åˆ†æ”¯&gt; ï¼Œè€Œgit pushæ˜¯&lt; æœ¬åœ°åˆ†æ”¯&gt; :&lt; è¿œç¨‹åˆ†æ”¯&gt; ã€‚</p><p>å¦‚æœçœç•¥è¿œç¨‹åˆ†æ”¯åï¼Œåˆ™è¡¨ç¤ºå°†æœ¬åœ°åˆ†æ”¯æ¨é€ä¸ä¹‹å­˜åœ¨â€è¿½è¸ªå…³ç³»â€çš„è¿œç¨‹åˆ†æ”¯ï¼ˆé€šå¸¸ä¸¤è€…åŒåï¼‰ï¼Œå¦‚æœè¯¥è¿œç¨‹åˆ†æ”¯ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè¢«æ–°å»ºã€‚</p><pre><code class="BASH">$ git push origin master</code></pre><p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå°†æœ¬åœ°çš„masteråˆ†æ”¯æ¨é€åˆ°originä¸»æœºçš„masteråˆ†æ”¯ã€‚å¦‚æœåè€…ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè¢«æ–°å»ºã€‚</p><p>å¦‚æœçœç•¥æœ¬åœ°åˆ†æ”¯åï¼Œåˆ™è¡¨ç¤ºåˆ é™¤æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ï¼Œå› ä¸ºè¿™ç­‰åŒäºæ¨é€ä¸€ä¸ªç©ºçš„æœ¬åœ°åˆ†æ”¯åˆ°è¿œç¨‹åˆ†æ”¯ã€‚</p><pre><code class="BASH">$ git push origin :masterç­‰åŒäº$ git push origin --delete master</code></pre><p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºåˆ é™¤originä¸»æœºçš„masteråˆ†æ”¯ã€‚</p><p>å¦‚æœå½“å‰åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯ä¹‹é—´å­˜åœ¨è¿½è¸ªå…³ç³»ï¼Œåˆ™æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯éƒ½å¯ä»¥çœç•¥ã€‚</p><pre><code class="BASH">$ git push origin</code></pre><p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå°†å½“å‰åˆ†æ”¯æ¨é€åˆ°originä¸»æœºçš„å¯¹åº”åˆ†æ”¯ã€‚</p><p>å¦‚æœå½“å‰åˆ†æ”¯åªæœ‰ä¸€ä¸ªè¿½è¸ªåˆ†æ”¯ï¼Œé‚£ä¹ˆä¸»æœºåéƒ½å¯ä»¥çœç•¥ã€‚</p><pre><code class="BASH">$ git push</code></pre><p>å¦‚æœå½“å‰åˆ†æ”¯ä¸å¤šä¸ªä¸»æœºå­˜åœ¨è¿½è¸ªå…³ç³»ï¼Œåˆ™å¯ä»¥ä½¿ç”¨-ué€‰é¡¹æŒ‡å®šä¸€ä¸ªé»˜è®¤ä¸»æœºï¼Œè¿™æ ·åé¢å°±å¯ä»¥ä¸åŠ ä»»ä½•å‚æ•°ä½¿ç”¨git pushã€‚</p><pre><code class="BASH">$ git push -u origin master</code></pre><p>ä¸Šé¢å‘½ä»¤å°†æœ¬åœ°çš„masteråˆ†æ”¯æ¨é€åˆ°originä¸»æœºï¼ŒåŒæ—¶æŒ‡å®šoriginä¸ºé»˜è®¤ä¸»æœºï¼Œåé¢å°±å¯ä»¥ä¸åŠ ä»»ä½•å‚æ•°ä½¿ç”¨git pushäº†ã€‚</p><p>ä¸å¸¦ä»»ä½•å‚æ•°çš„git pushï¼Œé»˜è®¤åªæ¨é€å½“å‰åˆ†æ”¯ï¼Œè¿™å«åšsimpleæ–¹å¼ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ç§matchingæ–¹å¼ï¼Œä¼šæ¨é€æ‰€æœ‰æœ‰å¯¹åº”çš„è¿œç¨‹åˆ†æ”¯çš„æœ¬åœ°åˆ†æ”¯ã€‚Git 2.0ç‰ˆæœ¬ä¹‹å‰ï¼Œé»˜è®¤é‡‡ç”¨matchingæ–¹æ³•ï¼Œç°åœ¨æ”¹ä¸ºé»˜è®¤é‡‡ç”¨simpleæ–¹å¼ã€‚å¦‚æœè¦ä¿®æ”¹è¿™ä¸ªè®¾ç½®ï¼Œå¯ä»¥é‡‡ç”¨git configå‘½ä»¤ã€‚</p><pre><code class="BASH">$ git config --global push.default matchingæˆ–è€…$ git config --global push.default simple</code></pre><p>è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯ä¸ç®¡æ˜¯å¦å­˜åœ¨å¯¹åº”çš„è¿œç¨‹åˆ†æ”¯ï¼Œå°†æœ¬åœ°çš„æ‰€æœ‰åˆ†æ”¯éƒ½æ¨é€åˆ°è¿œç¨‹ä¸»æœºï¼Œè¿™æ—¶éœ€è¦ä½¿ç”¨â€“allé€‰é¡¹ã€‚</p><pre><code class="BASH">$ git push --all origin</code></pre><p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå°†æ‰€æœ‰æœ¬åœ°åˆ†æ”¯éƒ½æ¨é€åˆ°originä¸»æœºã€‚</p><p>å¦‚æœè¿œç¨‹ä¸»æœºçš„ç‰ˆæœ¬æ¯”æœ¬åœ°ç‰ˆæœ¬æ›´æ–°ï¼Œæ¨é€æ—¶Gitä¼šæŠ¥é”™ï¼Œè¦æ±‚å…ˆåœ¨æœ¬åœ°åšgit pullåˆå¹¶å·®å¼‚ï¼Œç„¶åå†æ¨é€åˆ°è¿œç¨‹ä¸»æœºã€‚è¿™æ—¶ï¼Œå¦‚æœä½ ä¸€å®šè¦æ¨é€ï¼Œå¯ä»¥ä½¿ç”¨â€“forceé€‰é¡¹ã€‚</p><pre><code class="BASH">$ git push --force origin</code></pre><p>ä¸Šé¢å‘½ä»¤ä½¿ç”¨â€“forceé€‰é¡¹ï¼Œç»“æœå¯¼è‡´è¿œç¨‹ä¸»æœºä¸Šæ›´æ–°çš„ç‰ˆæœ¬è¢«è¦†ç›–ã€‚é™¤éä½ å¾ˆç¡®å®šè¦è¿™æ ·åšï¼Œå¦åˆ™åº”è¯¥å°½é‡é¿å…ä½¿ç”¨â€“forceé€‰é¡¹ã€‚</p><p>æœ€åï¼Œgit pushä¸ä¼šæ¨é€æ ‡ç­¾ï¼ˆtagï¼‰ï¼Œé™¤éä½¿ç”¨â€“tagsé€‰é¡¹ã€‚</p><pre><code class="BASH">$ git push origin --tags</code></pre>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitå›æ»šæ“ä½œ</title>
      <link href="/My-Blogs/2021/01/08/Git/git%E5%9B%9E%E6%BB%9A%E6%93%8D%E4%BD%9C/"/>
      <url>/My-Blogs/2021/01/08/Git/git%E5%9B%9E%E6%BB%9A%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬éƒ½çŸ¥é“ä¸‡ä¸€æäº¤é”™äº†ä»£ç ï¼Œæƒ³è¦åˆ é™¤åˆæƒ³å‡†ç¡®æ— è¯¯æ€ä¹ˆåŠå‘¢ï¼Ÿä¸‹é¢ä»‹ç»ä¸¤ç§æ–¹å¼ï¼Œçœ‹æ˜¯å¦æœ‰é€‚åˆä½ çš„å‘¢</p><a id="more"></a><h2 id="gitåˆ é™¤æŒ‡å®šcommit"><a href="#gitåˆ é™¤æŒ‡å®šcommit" class="headerlink" title="gitåˆ é™¤æŒ‡å®šcommit"></a>gitåˆ é™¤æŒ‡å®šcommit</h2><ol><li> ä½¿ç”¨git log å‘½ä»¤ï¼ŒæŸ¥çœ‹å·²æäº¤çš„è®°å½•ã€‚ä¾‹å¦‚çº¢è‰²åœˆå‡ºçš„commitæ˜¯æœ¬æ¬¡è¦åˆ é™¤çš„commitã€‚</li></ol><p><img src="/My-Blogs/images/git%E5%9B%9E%E6%BB%9A%E6%93%8D%E4%BD%9C-01.png"></p><br><ol start="2"><li><p> å…ˆæ‰¾åˆ°æ­¤æ¬¡æäº¤ä¹‹å‰çš„ä¸€æ¬¡æäº¤çš„commit 1d6b81b138f89735265900b94fcd1ec39375e7b4</p></li><li><p> æ‰§è¡Œgit rebase -i 1d6b81b138f89735265900b94fcd1ec39375e7b4ï¼Œå¼¹å‡ºå¦‚ä¸‹é¡µé¢ï¼ˆä¸åŒ…å«å½“å‰commitï¼‰ï¼š</p></li></ol><p><img src="/My-Blogs/images/git%E5%9B%9E%E6%BB%9A%E6%93%8D%E4%BD%9C-02.png"></p><br><p>æŒ‰å­—æ¯Ié”®è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå°†éœ€è¦åˆ é™¤çš„commitçš„pickæ”¹ä¸ºdropï¼Œç„¶åæŒ‰escé€€å‡ºç¼–è¾‘ï¼Œï¼šwqä¿å­˜</p><p><img src="/My-Blogs/images/git%E5%9B%9E%E6%BB%9A%E6%93%8D%E4%BD%9C-03.png"></p><br><ol start="4"><li> å†æ¬¡æ‰§è¡Œgit logå‘½ä»¤ï¼ŒæŸ¥çœ‹å·²æäº¤è®°å½•ï¼Œä¹‹å‰çº¢è‰²åœˆå‡ºçš„commitè®°å½•å·²è¢«åˆ é™¤ã€‚</li></ol><p><img src="/My-Blogs/images/git%E5%9B%9E%E6%BB%9A%E6%93%8D%E4%BD%9C-04.png"></p><p><strong>PSï¼šä»¥ä¸Šæ–¹æ³•ä¸é€‚ç”¨ç‰¹å®šmergeæäº¤åˆ é™¤</strong></p><h2 id="ä¼˜é›…æ’¤é”€ä¸­é—´æŸæ¬¡mergeæäº¤"><a href="#ä¼˜é›…æ’¤é”€ä¸­é—´æŸæ¬¡mergeæäº¤" class="headerlink" title="ä¼˜é›…æ’¤é”€ä¸­é—´æŸæ¬¡mergeæäº¤"></a>ä¼˜é›…æ’¤é”€ä¸­é—´æŸæ¬¡mergeæäº¤</h2><pre><code class="BASH">git revert commit_id//å¦‚æœcommit_idæ˜¯mergeèŠ‚ç‚¹çš„è¯,-mæ˜¯æŒ‡å®šå…·ä½“å“ªä¸ªæäº¤ç‚¹git revert commit_id -m 1//æ¥ç€å°±æ˜¯è§£å†³å†²çªgit add -Agit commit -m ".."git revert commit_id -m 2//æ¥ç€å°±æ˜¯è§£å†³å†²çªgit add -Agit commit -m ".."git push</code></pre><p>å…¶ä¸­<code>git revert commit_id -m æ•°å­—</code>æ˜¯é’ˆå¯¹ï¼Œ<code>merge</code>æäº¤ç‚¹çš„æ“ä½œã€‚<br>å¦‚æœæ˜¯æ™®é€šçš„æäº¤ç‚¹ï¼Œç›´æ¥ç”¨rebaseå³å¯ï¼Œä¸éœ€è¦è¿™ä¹ˆéº»çƒ¦ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>eslintä½¿ç”¨è§„åˆ™</title>
      <link href="/My-Blogs/2021/01/08/eslint/%E5%85%B3%E4%BA%8Eeslint%E4%BD%BF%E7%94%A8%E8%A7%84%E5%88%99%EF%BC%8C%E5%92%8C%E5%90%84%E7%A7%8D%E6%8A%A5%E9%94%99%E5%BA%94%E5%AF%B9%E4%B9%A6%E5%86%99%E8%A7%84%E5%88%99/"/>
      <url>/My-Blogs/2021/01/08/eslint/%E5%85%B3%E4%BA%8Eeslint%E4%BD%BF%E7%94%A8%E8%A7%84%E5%88%99%EF%BC%8C%E5%92%8C%E5%90%84%E7%A7%8D%E6%8A%A5%E9%94%99%E5%BA%94%E5%AF%B9%E4%B9%A6%E5%86%99%E8%A7%84%E5%88%99/</url>
      
        <content type="html"><![CDATA[<p>æ•´ç†äº†ä¸€äº›eslintå¸¸ç”¨è§„åˆ™ï¼Œæ¬¢è¿å¤§å®¶è¯„é˜…</p><a id="more"></a><p><strong>ä¸ºäº†æ–¹ä¾¿æŸ¥çœ‹å’Œä½¿ç”¨æ‰€ä»¥è¿›è¡Œäº†æ•´ç†ï¼Œä»¥ä¸‹ã€‚</strong></p><blockquote><p>0=â€offâ€ 1=â€warnâ€ 2=â€errorâ€</p></blockquote><pre><code class="js">"no-alert": 0,//ç¦æ­¢ä½¿ç”¨alert confirm prompt"no-array-constructor": 2,//ç¦æ­¢ä½¿ç”¨æ•°ç»„æ„é€ å™¨"no-bitwise": 0,//ç¦æ­¢ä½¿ç”¨æŒ‰ä½è¿ç®—ç¬¦"no-caller": 1,//ç¦æ­¢ä½¿ç”¨arguments.calleræˆ–arguments.callee"no-catch-shadow": 2,//ç¦æ­¢catchå­å¥å‚æ•°ä¸å¤–éƒ¨ä½œç”¨åŸŸå˜é‡åŒå"no-class-assign": 2,//ç¦æ­¢ç»™ç±»èµ‹å€¼"no-cond-assign": 2,//ç¦æ­¢åœ¨æ¡ä»¶è¡¨è¾¾å¼ä¸­ä½¿ç”¨èµ‹å€¼è¯­å¥"no-console": 2,//ç¦æ­¢ä½¿ç”¨console"no-const-assign": 2,//ç¦æ­¢ä¿®æ”¹constå£°æ˜çš„å˜é‡"no-constant-condition": 2,//ç¦æ­¢åœ¨æ¡ä»¶ä¸­ä½¿ç”¨å¸¸é‡è¡¨è¾¾å¼ if(true) if(1)"no-continue": 0,//ç¦æ­¢ä½¿ç”¨continue"no-control-regex": 2,//ç¦æ­¢åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ§åˆ¶å­—ç¬¦"no-debugger": 2,//ç¦æ­¢ä½¿ç”¨debugger"no-delete-var": 2,//ä¸èƒ½å¯¹varå£°æ˜çš„å˜é‡ä½¿ç”¨deleteæ“ä½œç¬¦"no-div-regex": 1,//ä¸èƒ½ä½¿ç”¨çœ‹èµ·æ¥åƒé™¤æ³•çš„æ­£åˆ™è¡¨è¾¾å¼/=foo/"no-dupe-keys": 2,//åœ¨åˆ›å»ºå¯¹è±¡å­—é¢é‡æ—¶ä¸å…è®¸é”®é‡å¤ {a:1,a:1}"no-dupe-args": 2,//å‡½æ•°å‚æ•°ä¸èƒ½é‡å¤"no-duplicate-case": 2,//switchä¸­çš„caseæ ‡ç­¾ä¸èƒ½é‡å¤"no-else-return": 2,//å¦‚æœifè¯­å¥é‡Œé¢æœ‰return,åé¢ä¸èƒ½è·Ÿelseè¯­å¥"no-empty": 2,//å—è¯­å¥ä¸­çš„å†…å®¹ä¸èƒ½ä¸ºç©º"no-empty-character-class": 2,//æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„[]å†…å®¹ä¸èƒ½ä¸ºç©º"no-empty-label": 2,//ç¦æ­¢ä½¿ç”¨ç©ºlabel"no-eq-null": 2,//ç¦æ­¢å¯¹nullä½¿ç”¨==æˆ–!=è¿ç®—ç¬¦"no-eval": 1,//ç¦æ­¢ä½¿ç”¨eval"no-ex-assign": 2,//ç¦æ­¢ç»™catchè¯­å¥ä¸­çš„å¼‚å¸¸å‚æ•°èµ‹å€¼"no-extend-native": 2,//ç¦æ­¢æ‰©å±•nativeå¯¹è±¡"no-extra-bind": 2,//ç¦æ­¢ä¸å¿…è¦çš„å‡½æ•°ç»‘å®š"no-extra-boolean-cast": 2,//ç¦æ­¢ä¸å¿…è¦çš„boolè½¬æ¢"no-extra-parens": 2,//ç¦æ­¢éå¿…è¦çš„æ‹¬å·"no-extra-semi": 2,//ç¦æ­¢å¤šä½™çš„å†’å·"no-fallthrough": 1,//ç¦æ­¢switchç©¿é€"no-floating-decimal": 2,//ç¦æ­¢çœç•¥æµ®ç‚¹æ•°ä¸­çš„0 .5 3."no-func-assign": 2,//ç¦æ­¢é‡å¤çš„å‡½æ•°å£°æ˜"no-implicit-coercion": 1,//ç¦æ­¢éšå¼è½¬æ¢"no-implied-eval": 2,//ç¦æ­¢ä½¿ç”¨éšå¼eval"no-inline-comments": 0,//ç¦æ­¢è¡Œå†…å¤‡æ³¨"no-inner-declarations": [2, "functions"],//ç¦æ­¢åœ¨å—è¯­å¥ä¸­ä½¿ç”¨å£°æ˜ï¼ˆå˜é‡æˆ–å‡½æ•°ï¼‰"no-invalid-regexp": 2,//ç¦æ­¢æ— æ•ˆçš„æ­£åˆ™è¡¨è¾¾å¼"no-invalid-this": 2,//ç¦æ­¢æ— æ•ˆçš„thisï¼Œåªèƒ½ç”¨åœ¨æ„é€ å™¨ï¼Œç±»ï¼Œå¯¹è±¡å­—é¢é‡"no-irregular-whitespace": 2,//ä¸èƒ½æœ‰ä¸è§„åˆ™çš„ç©ºæ ¼"no-iterator": 2,//ç¦æ­¢ä½¿ç”¨__iterator__ å±æ€§"no-label-var": 2,//labelåä¸èƒ½ä¸varå£°æ˜çš„å˜é‡åç›¸åŒ"no-labels": 2,//ç¦æ­¢æ ‡ç­¾å£°æ˜"no-lone-blocks": 2,//ç¦æ­¢ä¸å¿…è¦çš„åµŒå¥—å—"no-lonely-if": 2,//ç¦æ­¢elseè¯­å¥å†…åªæœ‰ifè¯­å¥"no-loop-func": 1,//ç¦æ­¢åœ¨å¾ªç¯ä¸­ä½¿ç”¨å‡½æ•°ï¼ˆå¦‚æœæ²¡æœ‰å¼•ç”¨å¤–éƒ¨å˜é‡ä¸å½¢æˆé—­åŒ…å°±å¯ä»¥ï¼‰"no-mixed-requires": [0, false],//å£°æ˜æ—¶ä¸èƒ½æ··ç”¨å£°æ˜ç±»å‹"no-mixed-spaces-and-tabs": [2, false],//ç¦æ­¢æ··ç”¨tabå’Œç©ºæ ¼"linebreak-style": [0, "windows"],//æ¢è¡Œé£æ ¼"no-multi-spaces": 1,//ä¸èƒ½ç”¨å¤šä½™çš„ç©ºæ ¼"no-multi-str": 2,//å­—ç¬¦ä¸²ä¸èƒ½ç”¨\æ¢è¡Œ"no-multiple-empty-lines": [1, {"max": 2}],//ç©ºè¡Œæœ€å¤šä¸èƒ½è¶…è¿‡2è¡Œ"no-native-reassign": 2,//ä¸èƒ½é‡å†™nativeå¯¹è±¡"no-negated-in-lhs": 2,//in æ“ä½œç¬¦çš„å·¦è¾¹ä¸èƒ½æœ‰!"no-nested-ternary": 0,//ç¦æ­¢ä½¿ç”¨åµŒå¥—çš„ä¸‰ç›®è¿ç®—"no-new": 1,//ç¦æ­¢åœ¨ä½¿ç”¨newæ„é€ ä¸€ä¸ªå®ä¾‹åä¸èµ‹å€¼"no-new-func": 1,//ç¦æ­¢ä½¿ç”¨new Function"no-new-object": 2,//ç¦æ­¢ä½¿ç”¨new Object()"no-new-require": 2,//ç¦æ­¢ä½¿ç”¨new require"no-new-wrappers": 2,//ç¦æ­¢ä½¿ç”¨newåˆ›å»ºåŒ…è£…å®ä¾‹ï¼Œnew String new Boolean new Number"no-obj-calls": 2,//ä¸èƒ½è°ƒç”¨å†…ç½®çš„å…¨å±€å¯¹è±¡ï¼Œæ¯”å¦‚Math() JSON()"no-octal": 2,//ç¦æ­¢ä½¿ç”¨å…«è¿›åˆ¶æ•°å­—"no-octal-escape": 2,//ç¦æ­¢ä½¿ç”¨å…«è¿›åˆ¶è½¬ä¹‰åºåˆ—"no-param-reassign": 2,//ç¦æ­¢ç»™å‚æ•°é‡æ–°èµ‹å€¼"no-path-concat": 0,//nodeä¸­ä¸èƒ½ä½¿ç”¨__dirnameæˆ–__filenameåšè·¯å¾„æ‹¼æ¥"no-plusplus": 0,//ç¦æ­¢ä½¿ç”¨++ï¼Œ--"no-process-env": 0,//ç¦æ­¢ä½¿ç”¨process.env"no-process-exit": 0,//ç¦æ­¢ä½¿ç”¨process.exit()"no-proto": 2,//ç¦æ­¢ä½¿ç”¨__proto__å±æ€§"no-redeclare": 2,//ç¦æ­¢é‡å¤å£°æ˜å˜é‡"no-regex-spaces": 2,//ç¦æ­¢åœ¨æ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡ä¸­ä½¿ç”¨å¤šä¸ªç©ºæ ¼ /foo bar/"no-restricted-modules": 0,//å¦‚æœç¦ç”¨äº†æŒ‡å®šæ¨¡å—ï¼Œä½¿ç”¨å°±ä¼šæŠ¥é”™"no-return-assign": 1,//return è¯­å¥ä¸­ä¸èƒ½æœ‰èµ‹å€¼è¡¨è¾¾å¼"no-script-url": 0,//ç¦æ­¢ä½¿ç”¨javascript:void(0)"no-self-compare": 2,//ä¸èƒ½æ¯”è¾ƒè‡ªèº«"no-sequences": 0,//ç¦æ­¢ä½¿ç”¨é€—å·è¿ç®—ç¬¦"no-shadow": 2,//å¤–éƒ¨ä½œç”¨åŸŸä¸­çš„å˜é‡ä¸èƒ½ä¸å®ƒæ‰€åŒ…å«çš„ä½œç”¨åŸŸä¸­çš„å˜é‡æˆ–å‚æ•°åŒå"no-shadow-restricted-names": 2,//ä¸¥æ ¼æ¨¡å¼ä¸­è§„å®šçš„é™åˆ¶æ ‡è¯†ç¬¦ä¸èƒ½ä½œä¸ºå£°æ˜æ—¶çš„å˜é‡åä½¿ç”¨"no-spaced-func": 2,//å‡½æ•°è°ƒç”¨æ—¶ å‡½æ•°åä¸()ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼"no-sparse-arrays": 2,//ç¦æ­¢ç¨€ç–æ•°ç»„ï¼Œ [1,,2]"no-sync": 0,//nodejs ç¦æ­¢åŒæ­¥æ–¹æ³•"no-ternary": 0,//ç¦æ­¢ä½¿ç”¨ä¸‰ç›®è¿ç®—ç¬¦"no-trailing-spaces": 1,//ä¸€è¡Œç»“æŸåé¢ä¸è¦æœ‰ç©ºæ ¼"no-this-before-super": 0,//åœ¨è°ƒç”¨super()ä¹‹å‰ä¸èƒ½ä½¿ç”¨thisæˆ–super"no-throw-literal": 2,//ç¦æ­¢æŠ›å‡ºå­—é¢é‡é”™è¯¯ throw "error";"no-undef": 1,//ä¸èƒ½æœ‰æœªå®šä¹‰çš„å˜é‡"no-undef-init": 2,//å˜é‡åˆå§‹åŒ–æ—¶ä¸èƒ½ç›´æ¥ç»™å®ƒèµ‹å€¼ä¸ºundefined"no-undefined": 2,//ä¸èƒ½ä½¿ç”¨undefined"no-unexpected-multiline": 2,//é¿å…å¤šè¡Œè¡¨è¾¾å¼"no-underscore-dangle": 1,//æ ‡è¯†ç¬¦ä¸èƒ½ä»¥_å¼€å¤´æˆ–ç»“å°¾"no-unneeded-ternary": 2,//ç¦æ­¢ä¸å¿…è¦çš„åµŒå¥— var isYes = answer === 1 ? true : false;"no-unreachable": 2,//ä¸èƒ½æœ‰æ— æ³•æ‰§è¡Œçš„ä»£ç "no-unused-expressions": 2,//ç¦æ­¢æ— ç”¨çš„è¡¨è¾¾å¼"no-unused-vars": [2, {"vars": "all", "args": "after-used"}],//ä¸èƒ½æœ‰å£°æ˜åæœªè¢«ä½¿ç”¨çš„å˜é‡æˆ–å‚æ•°"no-use-before-define": 2,//æœªå®šä¹‰å‰ä¸èƒ½ä½¿ç”¨"no-useless-call": 2,//ç¦æ­¢ä¸å¿…è¦çš„callå’Œapply"no-void": 2,//ç¦ç”¨voidæ“ä½œç¬¦"no-var": 0,//ç¦ç”¨varï¼Œç”¨letå’Œconstä»£æ›¿"no-warning-comments": [1, { "terms": ["todo", "fixme", "xxx"], "location": "start" }],//ä¸èƒ½æœ‰è­¦å‘Šå¤‡æ³¨"no-with": 2,//ç¦ç”¨with"array-bracket-spacing": [2, "never"],//æ˜¯å¦å…è®¸éç©ºæ•°ç»„é‡Œé¢æœ‰å¤šä½™çš„ç©ºæ ¼"arrow-parens": 0,//ç®­å¤´å‡½æ•°ç”¨å°æ‹¬å·æ‹¬èµ·æ¥"arrow-spacing": 0,//=&gt;çš„å‰/åæ‹¬å·"accessor-pairs": 0,//åœ¨å¯¹è±¡ä¸­ä½¿ç”¨getter/setter"block-scoped-var": 0,//å—è¯­å¥ä¸­ä½¿ç”¨var"brace-style": [1, "1tbs"],//å¤§æ‹¬å·é£æ ¼"callback-return": 1,//é¿å…å¤šæ¬¡è°ƒç”¨å›è°ƒä»€ä¹ˆçš„"camelcase": 2,//å¼ºåˆ¶é©¼å³°æ³•å‘½å"comma-dangle": [2, "never"],//å¯¹è±¡å­—é¢é‡é¡¹å°¾ä¸èƒ½æœ‰é€—å·"comma-spacing": 0,//é€—å·å‰åçš„ç©ºæ ¼"comma-style": [2, "last"],//é€—å·é£æ ¼ï¼Œæ¢è¡Œæ—¶åœ¨è¡Œé¦–è¿˜æ˜¯è¡Œå°¾"complexity": [0, 11],//å¾ªç¯å¤æ‚åº¦"computed-property-spacing": [0, "never"],//æ˜¯å¦å…è®¸è®¡ç®—åçš„é”®åä»€ä¹ˆçš„"consistent-return": 0,//return åé¢æ˜¯å¦å…è®¸çœç•¥"consistent-this": [2, "that"],//thisåˆ«å"constructor-super": 0,//éæ´¾ç”Ÿç±»ä¸èƒ½è°ƒç”¨superï¼Œæ´¾ç”Ÿç±»å¿…é¡»è°ƒç”¨super"curly": [2, "all"],//å¿…é¡»ä½¿ç”¨ if(){} ä¸­çš„{}"default-case": 2,//switchè¯­å¥æœ€åå¿…é¡»æœ‰default"dot-location": 0,//å¯¹è±¡è®¿é—®ç¬¦çš„ä½ç½®ï¼Œæ¢è¡Œçš„æ—¶å€™åœ¨è¡Œé¦–è¿˜æ˜¯è¡Œå°¾"dot-notation": [0, { "allowKeywords": true }],//é¿å…ä¸å¿…è¦çš„æ–¹æ‹¬å·"eol-last": 0,//æ–‡ä»¶ä»¥å•ä¸€çš„æ¢è¡Œç¬¦ç»“æŸ"eqeqeq": 2,//å¿…é¡»ä½¿ç”¨å…¨ç­‰"func-names": 0,//å‡½æ•°è¡¨è¾¾å¼å¿…é¡»æœ‰åå­—"func-style": [0, "declaration"],//å‡½æ•°é£æ ¼ï¼Œè§„å®šåªèƒ½ä½¿ç”¨å‡½æ•°å£°æ˜/å‡½æ•°è¡¨è¾¾å¼"generator-star-spacing": 0,//ç”Ÿæˆå™¨å‡½æ•°*çš„å‰åç©ºæ ¼"guard-for-in": 0,//for inå¾ªç¯è¦ç”¨ifè¯­å¥è¿‡æ»¤"handle-callback-err": 0,//nodejs å¤„ç†é”™è¯¯"id-length": 0,//å˜é‡åé•¿åº¦"indent": [2, 4],//ç¼©è¿›é£æ ¼"init-declarations": 0,//å£°æ˜æ—¶å¿…é¡»èµ‹åˆå€¼"key-spacing": [0, { "beforeColon": false, "afterColon": true }],//å¯¹è±¡å­—é¢é‡ä¸­å†’å·çš„å‰åç©ºæ ¼"lines-around-comment": 0,//è¡Œå‰/è¡Œåå¤‡æ³¨"max-depth": [0, 4],//åµŒå¥—å—æ·±åº¦"max-len": [0, 80, 4],//å­—ç¬¦ä¸²æœ€å¤§é•¿åº¦"max-nested-callbacks": [0, 2],//å›è°ƒåµŒå¥—æ·±åº¦"max-params": [0, 3],//å‡½æ•°æœ€å¤šåªèƒ½æœ‰3ä¸ªå‚æ•°"max-statements": [0, 10],//å‡½æ•°å†…æœ€å¤šæœ‰å‡ ä¸ªå£°æ˜"new-cap": 2,//å‡½æ•°åé¦–è¡Œå¤§å†™å¿…é¡»ä½¿ç”¨newæ–¹å¼è°ƒç”¨ï¼Œé¦–è¡Œå°å†™å¿…é¡»ç”¨ä¸å¸¦newæ–¹å¼è°ƒç”¨"new-parens": 2,//newæ—¶å¿…é¡»åŠ å°æ‹¬å·"newline-after-var": 2,//å˜é‡å£°æ˜åæ˜¯å¦éœ€è¦ç©ºä¸€è¡Œ"object-curly-spacing": [0, "never"],//å¤§æ‹¬å·å†…æ˜¯å¦å…è®¸ä¸å¿…è¦çš„ç©ºæ ¼"object-shorthand": 0,//å¼ºåˆ¶å¯¹è±¡å­—é¢é‡ç¼©å†™è¯­æ³•"one-var": 1,//è¿ç»­å£°æ˜"operator-assignment": [0, "always"],//èµ‹å€¼è¿ç®—ç¬¦ += -=ä»€ä¹ˆçš„"operator-linebreak": [2, "after"],//æ¢è¡Œæ—¶è¿ç®—ç¬¦åœ¨è¡Œå°¾è¿˜æ˜¯è¡Œé¦–"padded-blocks": 0,//å—è¯­å¥å†…è¡Œé¦–è¡Œå°¾æ˜¯å¦è¦ç©ºè¡Œ"prefer-const": 0,//é¦–é€‰const"prefer-spread": 0,//é¦–é€‰å±•å¼€è¿ç®—"prefer-reflect": 0,//é¦–é€‰Reflectçš„æ–¹æ³•"quotes": [1, "single"],//å¼•å·ç±»å‹ `` "" ''"quote-props":[2, "always"],//å¯¹è±¡å­—é¢é‡ä¸­çš„å±æ€§åæ˜¯å¦å¼ºåˆ¶åŒå¼•å·"radix": 2,//parseIntå¿…é¡»æŒ‡å®šç¬¬äºŒä¸ªå‚æ•°"id-match": 0,//å‘½åæ£€æµ‹"require-yield": 0,//ç”Ÿæˆå™¨å‡½æ•°å¿…é¡»æœ‰yield"semi": [2, "always"],//è¯­å¥å¼ºåˆ¶åˆ†å·ç»“å°¾"semi-spacing": [0, {"before": false, "after": true}],//åˆ†å·å‰åç©ºæ ¼"sort-vars": 0,//å˜é‡å£°æ˜æ—¶æ’åº"space-after-keywords": [0, "always"],//å…³é”®å­—åé¢æ˜¯å¦è¦ç©ºä¸€æ ¼"space-before-blocks": [0, "always"],//ä¸ä»¥æ–°è¡Œå¼€å§‹çš„å—{å‰é¢è¦ä¸è¦æœ‰ç©ºæ ¼"space-before-function-paren": [0, "always"],//å‡½æ•°å®šä¹‰æ—¶æ‹¬å·å‰é¢è¦ä¸è¦æœ‰ç©ºæ ¼"space-in-parens": [0, "never"],//å°æ‹¬å·é‡Œé¢è¦ä¸è¦æœ‰ç©ºæ ¼"space-infix-ops": 0,//ä¸­ç¼€æ“ä½œç¬¦å‘¨å›´è¦ä¸è¦æœ‰ç©ºæ ¼"space-return-throw-case": 2,//return throw caseåé¢è¦ä¸è¦åŠ ç©ºæ ¼"space-unary-ops": [0, { "words": true, "nonwords": false }],//ä¸€å…ƒè¿ç®—ç¬¦çš„å‰/åè¦ä¸è¦åŠ ç©ºæ ¼"spaced-comment": 0,//æ³¨é‡Šé£æ ¼ä¸è¦æœ‰ç©ºæ ¼ä»€ä¹ˆçš„"strict": 2,//ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼"use-isnan": 2,//ç¦æ­¢æ¯”è¾ƒæ—¶ä½¿ç”¨NaNï¼Œåªèƒ½ç”¨isNaN()"valid-jsdoc": 0,//jsdocè§„åˆ™"valid-typeof": 2,//å¿…é¡»ä½¿ç”¨åˆæ³•çš„typeofçš„å€¼"vars-on-top": 2,//varå¿…é¡»æ”¾åœ¨ä½œç”¨åŸŸé¡¶éƒ¨"wrap-iife": [2, "inside"],//ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼çš„å°æ‹¬å·é£æ ¼"wrap-regex": 0,//æ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡ç”¨å°æ‹¬å·åŒ…èµ·æ¥"yoda": [2, "never"]//ç¦æ­¢å°¤è¾¾æ¡ä»¶</code></pre>]]></content>
      
      
      <categories>
          
          <category> eslint </category>
          
      </categories>
      
      
        <tags>
            
            <tag> eslint </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ—¶åºåˆ†æåœºæ™¯</title>
      <link href="/My-Blogs/2021/01/08/Elasticsearch/%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/%E6%97%B6%E5%BA%8F%E5%88%86%E6%9E%90%E5%9C%BA%E6%99%AF/"/>
      <url>/My-Blogs/2021/01/08/Elasticsearch/%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/%E6%97%B6%E5%BA%8F%E5%88%86%E6%9E%90%E5%9C%BA%E6%99%AF/</url>
      
        <content type="html"><![CDATA[<p>æ—¶åºæ•°æ®æ˜¯æŒ‰æ—¶é—´é¡ºåºè®°å½•è®¾å¤‡ã€ç³»ç»ŸçŠ¶æ€å˜åŒ–çš„æ•°æ®ã€‚å…¸å‹çš„æ—¶åºæ•°æ®æœ‰ä¼ ç»Ÿçš„æœåŠ¡å™¨ç›‘æ§æŒ‡æ ‡æ•°æ®ã€åº”ç”¨ç³»ç»Ÿæ€§èƒ½ç›‘æ§æ•°æ®ã€æ™ºèƒ½ç¡¬ä»¶ã€å·¥ä¸šç‰©è”ç½‘ä¼ æ„Ÿå™¨æ•°æ®ç­‰ã€‚</p><p>æ—©åœ¨2017å¹´æˆ‘ä»¬ä¹ŸåŸºäºESè¿›è¡Œäº†æ—¶åºåˆ†æåœºæ™¯çš„æ¢ç´¢ã€‚æ—¶åºåˆ†æåœºæ™¯å…·æœ‰é«˜å¹¶å‘å†™å…¥ã€ä½æŸ¥è¯¢æ—¶å»¶ã€å¤šç»´åˆ†æçš„ç‰¹ç‚¹ã€‚</p><p>ç”±äºESå…·æœ‰é›†ç¾¤æ‰©å±•ã€æ‰¹é‡å†™å…¥ã€è¯»å†™å¸¦è·¯ç”±ã€æ•°æ®åˆ†ç‰‡ç­‰èƒ½åŠ›ï¼Œç›®å‰å·²å®ç°çº¿ä¸Šå•é›†ç¾¤æœ€å¤§è§„æ¨¡è¾¾åˆ°600+ èŠ‚ç‚¹ã€1000w/sçš„å†™å…¥ååã€å•æ¡æ›²çº¿æˆ–å•ä¸ªæ—¶é—´çº¿çš„æŸ¥è¯¢å»¶æ—¶å¯æ§åˆ¶åœ¨10msã€‚</p><p>ESæä¾›çµæ´»ã€å¤šç»´åº¦çš„ç»Ÿè®¡åˆ†æèƒ½åŠ›ï¼Œå®ç°æŸ¥çœ‹ç›‘æ§æŒ‰ç…§åœ°åŸŸã€ä¸šåŠ¡æ¨¡å—ç­‰çµæ´»çš„è¿›è¡Œç»Ÿè®¡åˆ†æã€‚å¦å¤–ï¼ŒESæ”¯æŒåˆ—å­˜å‚¨ã€é«˜å‹ç¼©æ¯”ã€å‰¯æœ¬æ•°æŒ‰éœ€è°ƒæ•´ç­‰èƒ½åŠ›ï¼Œå¯å®ç°è¾ƒä½å­˜å‚¨æˆæœ¬ã€‚æœ€åæ—¶åºæ•°æ®ä¹Ÿå¯é€šè¿‡Kibanaç»„ä»¶è½»æ¾å®ç°å¯è§†åŒ–ã€‚</p><p><img src="/My-Blogs/images/%E6%97%B6%E5%BA%8F%E5%88%86%E6%9E%90%E5%9C%BA%E6%99%AF-01.jpeg"></p>]]></content>
      
      
      <categories>
          
          <category> Elasticsearch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Elasticsearch </tag>
            
            <tag> åº”ç”¨åœºæ™¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ—¥å¿—å®æ—¶åˆ†æåœºæ™¯</title>
      <link href="/My-Blogs/2021/01/08/Elasticsearch/%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/%E6%97%A5%E5%BF%97%E5%AE%9E%E6%97%B6%E5%88%86%E6%9E%90%E5%9C%BA%E6%99%AF/"/>
      <url>/My-Blogs/2021/01/08/Elasticsearch/%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/%E6%97%A5%E5%BF%97%E5%AE%9E%E6%97%B6%E5%88%86%E6%9E%90%E5%9C%BA%E6%99%AF/</url>
      
        <content type="html"><![CDATA[<p>æ—¥å¿—æ˜¯äº’è”ç½‘è¡Œä¸šåŸºç¡€å¹¿æ³›çš„æ•°æ®å½¢å¼ã€‚å…¸å‹æ—¥å¿—æœ‰ç”¨æ¥å®šä½ä¸šåŠ¡é—®é¢˜çš„è¿è¥æ—¥å¿—ï¼Œå¦‚æ…¢æ—¥å¿—ã€å¼‚å¸¸æ—¥å¿—ï¼›ç”¨æ¥åˆ†æç”¨æˆ·è¡Œä¸ºçš„ä¸šåŠ¡æ—¥å¿—ï¼Œå¦‚ç”¨æˆ·çš„ç‚¹å‡»ã€è®¿é—®æ—¥å¿—ï¼›ä»¥åŠå®‰å…¨è¡Œä¸ºåˆ†æçš„å®¡è®¡æ—¥å¿—ç­‰ã€‚</p><p>Elasticç”Ÿæ€æä¾›äº†å®Œæ•´çš„æ—¥å¿—è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡ç®€å•éƒ¨ç½²ï¼Œå³å¯æ­å»ºä¸€ä¸ªå®Œæ•´çš„æ—¥å¿—å®æ—¶åˆ†ææœåŠ¡ã€‚ESç”Ÿæ€å®Œç¾çš„è§£å†³äº†æ—¥å¿—å®æ—¶åˆ†æåœºæ™¯éœ€æ±‚ï¼Œè¿™ä¹Ÿæ˜¯è¿‘å‡ å¹´ESå¿«é€Ÿå‘å±•çš„ä¸€ä¸ªé‡è¦åŸå› ã€‚</p><p>æ—¥å¿—ä»äº§ç”Ÿåˆ°å¯è®¿é—®ä¸€èˆ¬åœ¨10sçº§ï¼Œç›¸æ¯”äºä¼ ç»Ÿå¤§æ•°æ®è§£å†³æ–¹æ¡ˆçš„å‡ ååˆ†é’Ÿã€å°æ—¶çº§æ—¶æ•ˆæ€§éå¸¸é«˜ã€‚</p><p>ESåº•å±‚æ”¯æŒå€’æ’ç´¢å¼•ã€åˆ—å­˜å‚¨ç­‰æ•°æ®ç»“æ„ï¼Œä½¿å¾—åœ¨æ—¥å¿—åœºæ™¯å¯ä»¥åˆ©ç”¨ESéå¸¸çµæ´»çš„æœç´¢åˆ†æèƒ½åŠ›ã€‚é€šè¿‡ESäº¤äº’å¼åˆ†æèƒ½åŠ›ï¼Œå³ä½¿åœ¨ä¸‡äº¿çº§æ—¥å¿—çš„æƒ…å†µä¸‹ï¼Œæ—¥å¿—æœç´¢å“åº”æ—¶é—´ä¹Ÿæ˜¯ç§’çº§ã€‚</p><p>æ—¥å¿—å¤„ç†çš„åŸºæœ¬æµç¨‹åŒ…å«ï¼šæ—¥å¿—é‡‡é›†-&gt; æ•°æ®æ¸…æ´—-&gt; å­˜å‚¨-&gt; å¯è§†åŒ–åˆ†æã€‚ElasticStacké€šè¿‡å®Œæ•´çš„æ—¥å¿—è§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©ç”¨æˆ·å®Œæˆå¯¹æ—¥å¿—å¤„ç†å…¨é“¾è·¯ç®¡ç†ã€‚</p><p><img src="/My-Blogs/images/%E6%97%A5%E5%BF%97%E5%AE%9E%E6%97%B6%E5%88%86%E6%9E%90%E5%9C%BA%E6%99%AF-01.jpeg"></p><p>å…¶ä¸­ï¼š</p><ul><li>æ—¥å¿—é‡‡é›†ï¼šé€šè¿‡è½»é‡çº§æ—¥å¿—é‡‡é›†ç»„ä»¶FileBeatå®æ—¶è¯»å–ä¸šåŠ¡æ—¥å¿—æ–‡ä»¶ï¼Œå‘é€æ•°æ®è‡³ä¸‹æ¸¸ç»„ä»¶å¦‚Logstashã€‚</li><li> æ–‡æœ¬è§£æï¼šåˆ©ç”¨æ­£åˆ™è§£æç­‰æœºåˆ¶ï¼Œå°†æ—¥å¿—æ–‡æœ¬æ•°æ®è½¬æ¢æˆç»“æ„åŒ–æ•°æ®ã€‚å¯ä½¿ç”¨ç‹¬ç«‹çš„LogstashæœåŠ¡æˆ–Elasticsearchå†…ç½®çš„è½»é‡çº§æ•°æ®å¤„ç†æ¨¡å—IngestPipe-lineï¼Œå®Œæˆæ•°æ®æ¸…æ´—å’Œè½¬æ¢ã€‚</li><li>æ•°æ®å­˜å‚¨ï¼šé€šè¿‡Elasticsearchæœç´¢åˆ†æå¹³å°è¿›è¡Œæ•°æ®æŒä¹…å­˜å‚¨ï¼Œæä¾›å…¨æ–‡æœç´¢å’Œåˆ†æèƒ½åŠ›ã€‚</li><li>å¯è§†åŒ–åˆ†æï¼šé€šè¿‡åŠŸèƒ½ä¸°å¯Œçš„å›¾å½¢ç•Œé¢ï¼Œå³å¯å¯¹æ—¥å¿—æ•°æ®è¿›è¡Œæœç´¢åˆ†æï¼Œå¦‚å¯è§†åŒ–ç»„ä»¶Kibanaã€‚</li></ul><p><img src="/My-Blogs/images/%E6%97%A5%E5%BF%97%E5%AE%9E%E6%97%B6%E5%88%86%E6%9E%90%E5%9C%BA%E6%99%AF-02.jpeg"></p>]]></content>
      
      
      <categories>
          
          <category> Elasticsearch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Elasticsearch </tag>
            
            <tag> åº”ç”¨åœºæ™¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é›ªç¢§å›¾mixin</title>
      <link href="/My-Blogs/2021/01/08/css/%E9%9B%AA%E7%A2%A7%E5%9B%BEmixin/"/>
      <url>/My-Blogs/2021/01/08/css/%E9%9B%AA%E7%A2%A7%E5%9B%BEmixin/</url>
      
        <content type="html"><![CDATA[<p>iconå°å›¾æ ‡</p><a id="more"></a><h2 id="è°ƒç”¨iconå°å›¾æ ‡çš„æ–¹å¼æ˜¯é€šè¿‡mixinæ–¹å¼è¿›è¡Œè°ƒç”¨çš„"><a href="#è°ƒç”¨iconå°å›¾æ ‡çš„æ–¹å¼æ˜¯é€šè¿‡mixinæ–¹å¼è¿›è¡Œè°ƒç”¨çš„" class="headerlink" title="è°ƒç”¨iconå°å›¾æ ‡çš„æ–¹å¼æ˜¯é€šè¿‡mixinæ–¹å¼è¿›è¡Œè°ƒç”¨çš„"></a>è°ƒç”¨iconå°å›¾æ ‡çš„æ–¹å¼æ˜¯é€šè¿‡mixinæ–¹å¼è¿›è¡Œè°ƒç”¨çš„</h2><pre><code class="CSS">@mixin Ricon($width, $height, $url, $important: '') {  @include background(#{$baseURL}#{$url}.png, $important);  display: inline-block;  width: $width;  height: $height;  background-size: 100% auto;  background-position: center center;}@mixin background($url: '', $important: '') {  @if $url !='' {    @if ($important !='') {      background-image: url($url) !important;    }    @else {      background-image: url($url);    }  }  background-repeat: no-repeat;  background-size: 100% auto;}</code></pre><p>è€ƒè™‘åˆ°æ”¹é€ æˆæœ¬ä»¥åŠé›ªç¢§å›¾çš„æ¥å…¥æˆæœ¬ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åœ¨æ„å»ºè¿‡ç¨‹ä¸­æ¥å…¥äº†<a href="https://github.com/mixtur/webpack-spritesmith">webpack-spritesmith</a>ï¼Œä¼˜ç‚¹æ˜¯</p><ol><li> æ„å»ºè¿‡ç¨‹ä¸­å¯æ ¹æ®æŒ‡å®šç›®å½•è‡ªåŠ¨ç”ŸæˆåŠæ›´æ–°é›ªç¢§å›¾ä¸scssæ–‡ä»¶</li><li> è‡ªåŠ¨ç”Ÿæˆçš„scssæ–‡ä»¶æ¨¡ç‰ˆå…è®¸è‡ªå®šä¹‰åŒ–</li><li> æ— éœ€æ‰‹åŠ¨å¼•å…¥ç”Ÿæˆçš„scssæ–‡ä»¶ï¼Œå¯åœ¨webpacké…ç½®ä¸­é…ç½®è‡ªåŠ¨å¼•å…¥</li></ol><p>æ„å»ºé…ç½®å¦‚ä¸‹ï¼š</p><pre><code class="JS">// é…ç½®ä»£ç new SpritesmithPlugin({  src: {    // iconå°å›¾æ ‡ç›®å½•    cwd: './src/like/act_30083/assets/img/icon/',    // åˆæˆå›¾ç‰‡æ ¼å¼    glob: '*.png'  },  target: {    // åˆæˆé›ªç¢§å›¾æœ¬åœ°æ–‡ä»¶åœ°å€    image: path.resolve(__dirname, './assets/img/sprite-ignore.png'),    css: [      [        // ç”Ÿæˆé›ªç¢§å›¾æ ·å¼æ–‡ä»¶åœ°å€        path.resolve(__dirname, './styles/mixins/_sprite-ignore.scss'),        {          // scssæ–‡ä»¶æ¨¡æ¿          format: 'function_based_template'        }      ]    ]  },  customTemplates: {    // è‡ªå®šä¹‰æ¨¡æ¿    'function_based_template': templateFunction,  },  apiOptions: {    // é›ªç¢§å›¾å¼•ç”¨åœ°å€    cssImageRef: '~@assets/img/sprite-ignore.png',  },  spritesmithOptions: {    // åˆæˆè§„åˆ™    algorithm: 'binary-tree',    // iconä¹‹é—´çš„è·ç¦»    padding: 10,  }});</code></pre>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> é›ªç¢§å›¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°ä¸€æ¬¡ä¼ªå…ƒç´ åŠ¨ç”»å¼•èµ·çš„webviewå´©æºƒ</title>
      <link href="/My-Blogs/2021/01/08/css/%E8%AE%B0%E4%B8%80%E6%AC%A1%E4%BC%AA%E5%85%83%E7%B4%A0%E5%8A%A8%E7%94%BB%E5%BC%95%E8%B5%B7%E7%9A%84webview%E5%B4%A9%E6%BA%83/"/>
      <url>/My-Blogs/2021/01/08/css/%E8%AE%B0%E4%B8%80%E6%AC%A1%E4%BC%AA%E5%85%83%E7%B4%A0%E5%8A%A8%E7%94%BB%E5%BC%95%E8%B5%B7%E7%9A%84webview%E5%B4%A9%E6%BA%83/</url>
      
        <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>å‰ä¸ä¹…åšäº†ä¸€ä¸ªå¹´ç»ˆç››å…¸çš„ h5 ç§»åŠ¨ç«¯æ´»åŠ¨é¡¹ç›®ï¼Œæ´»åŠ¨ä¸»é¡µæœ‰ä¸‰ä¸ªæ’è¡Œæ¦œé¡µé¢ï¼Œä»¥åŠä»»åŠ¡é¡µé¢ã€‚åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæµ‹è¯•åŒäº‹åé¦ˆæ’è¡Œæ¦œé¡µé¢åœ¨ android 4.x çš„ç³»ç»Ÿä¸‹ä¼šå¼•èµ· webview çš„å´©æºƒï¼Œè€Œä¸”æ˜¯å¿…ç°ï¼Œè€Œä»»åŠ¡é¡µé¢æ˜¯æ­£å¸¸çš„ï¼Œè¿™è®©æˆ‘çº ç»“äº†å¾ˆä¹…ï¼Œå› ä¸ºæœ¬èº«é¡µé¢ä¹Ÿåšäº†å¾ˆå¤šçš„ä¼˜åŒ–ï¼Œåƒå›¾ç‰‡çš„æ‡’åŠ è½½ï¼Œç»„ä»¶çš„æ‡’åŠ è½½ï¼Œæ’è¡Œæ¦œåˆ—è¡¨è™šæ‹Ÿæ»šåŠ¨ï¼ˆåªæ¸²æŸ“å±å¹•æ˜¾ç¤ºéƒ¨åˆ†æ•°æ®ï¼‰ï¼Œæ‰€ä»¥ä¸€æ—¶ä¹Ÿä¸çŸ¥é“é—®é¢˜åœ¨å“ªé‡Œã€‚</p><a id="more"></a><h2 id="è§£å†³è¿‡ç¨‹"><a href="#è§£å†³è¿‡ç¨‹" class="headerlink" title="è§£å†³è¿‡ç¨‹"></a>è§£å†³è¿‡ç¨‹</h2><p>ä»”ç»† review äº†ä¸€ä¸‹é¡¹ç›®ä»£ç ï¼Œä¹Ÿæ²¡å‘ç°ä»€ä¹ˆç«¯å€ªï¼Œå°±åªèƒ½ä¸€ç‚¹ä¸€ç‚¹æ³¨é‡Šä»£ç æ¥è°ƒè¯•äº†ï¼Œå‘ç°æœ‰ä¸€æ®µ css ä»£ç æ³¨é‡Šæ‰ä»¥å android 4.x å°±æ­£å¸¸äº†ã€‚</p><p>äºæ˜¯ google äº†ä¸€ç•ªï¼Œå‘ç°æ˜¯ä¼ªå…ƒç´ åšåŠ¨ç”»æƒ¹çš„ç¥¸ï¼Œæ˜¯æ—§ç‰ˆ chromium çš„é—®é¢˜ï¼Œå¯ä»¥æŸ¥çœ‹<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=364222">å®˜æ–¹ issue</a>ï¼Œcrash ä»£ç å¦‚ä¸‹ã€‚</p><pre><code class="CSS">@-webkit-keyframes crashChrome {  0% {    -webkit-transform: translateX(0rem);  }}.anim:before {  content: "";  width: 3rem;  height: 3rem;  border-radius: 3rem;  position: absolute;  left: 5rem;  top: 5rem;  background-color: #06839f;  -webkit-animation: crashChrome;}</code></pre><pre><code class="HTML">&lt;div class="anim"&gt;&lt;/div&gt;</code></pre><p>ä»£ç ä¸€çœ‹å…¶å®ä¹Ÿæ¯”è¾ƒæ­£å¸¸ï¼Œæ™®æ™®é€šé€šçš„çš„ç”¨æ³•ï¼Œå°±æ˜¯ä¸€ä¸ª before çš„ä¼ªå…ƒç´ åšäº†ä¸€ä¸ª ä¸€åŠ¨ä¹Ÿä¸åŠ¨çš„ animation çš„åŠ¨ç”»ï¼Œæ€ä¹ˆå°±ä¼šå¥”æºƒäº†å‘¢ï¼Ÿ</p><p>è¿™ä¸ª bug å…·ä½“æ˜¯æ€ä¹ˆå›äº‹è¿˜æ²¡æƒ³æ˜ç™½ï¼Œä½†æ˜¯é—®é¢˜å¾—è§£å†³å‘€ï¼Œè‡ªå·±æ´»åŠ¨é¡µé¢çš„å¥”æºƒå…«ä¹ä¸ç¦»åå°±æ˜¯ before+animation å¼•èµ·çš„ï¼Œç”¨ div ä»£æ›¿ before å…ˆæŠŠ bug è§£å†³äº†ã€‚</p><h2 id="åˆ†æé—®é¢˜"><a href="#åˆ†æé—®é¢˜" class="headerlink" title="åˆ†æé—®é¢˜"></a>åˆ†æé—®é¢˜</h2><p>è¿™æ®µ crash çš„ css ä»£ç ç¡®å®æ¯”è¾ƒå¹³å¸¸ï¼Œè€Œä¸”å†™æ³•å®Œå…¨ç¬¦åˆ web çš„æ ‡å‡†ï¼Œæ•…ä¸åº”è¯¥æ˜¯ä»£ç æœ¬èº«çš„é—®é¢˜ã€‚ä¸”åœ¨è‡ªå·±æœ¬åœ°çš„å¼€å‘æµè§ˆå™¨ä¸­ï¼Œä»¥åŠç¨å¾®ä¸é‚£ä¹ˆæ—§çš„æ‰‹æœºé‡Œéƒ½æ˜¯æ­£å¸¸çš„ï¼Œæ‰€ä»¥æ–­å®šè¿™ä¸ªé—®é¢˜å› è¯¥å±äºæµè§ˆå™¨çš„ bugï¼Œå¹¶ä¸”åœ¨æŸäº›æ—§ç‰ˆæµè§ˆå™¨é‡Œæ‰æœ‰çš„ bugï¼Œåæ¥çš„æ–°ç‰ˆæµè§ˆå™¨å·²ç»ä¿®å¤äº†è¿™ä¸ªé—®é¢˜ã€‚</p><p>æ‹¿ç€ä¼š crash çš„æ‰‹æœºæµ‹è¯•å‘ç°ï¼Œåªæœ‰æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶ï¼šä¼ªå…ƒç´ ï¼ˆbeforeï¼Œafter ç­‰ï¼‰+ animation + remï¼Œæ‰ä¼š crashã€‚</p><p>æ‰€ä»¥å¾—å‡ºäº†ä»¥ä¸‹ç»“è®ºï¼Œåœ¨ä¼ªå…ƒç´ é‡Œä½¿ç”¨ animation åŠ¨ç”»ï¼Œå¹¶ä¸”åŠ¨ç”»é‡Œæœ‰ rem çš„å˜åŒ–å°±ä¼šå¼•èµ·äº†æŸäº›ç‰ˆæœ¬ webview çš„ crashã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¿™ä¸ªé—®é¢˜ä¸æµè§ˆå™¨çš„åº•å±‚æ¸²æŸ“æœ‰å…³ï¼Œå¹¶ä¸”å®˜æ–¹æ²¡æœ‰ç»™å‡ºå…·ä½“å“ªäº›ç‰ˆæœ¬ä¼šå—åˆ°å½±å“ï¼Œè€Œåœ¨ç§»åŠ¨æ®µ rem æ˜¯æ¯”è¾ƒå¸¸è§„çš„å•ä½ï¼Œæ‰€ä»¥å„ä½åŒå­¦åšé¡¹ç›®çš„æ—¶å€™ï¼Œå°±ä¸è¦åœ¨ä¼ªå…ƒç´ é‡Œå†™åŠ¨ç”»ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> åŠ¨ç”» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªé€‚åº”å¸ƒå±€çš„ç›¸å…³ä»‹ç»</title>
      <link href="/My-Blogs/2021/01/08/css/%E8%87%AA%E9%80%82%E5%BA%94%E5%B8%83%E5%B1%80%E7%9A%84%E7%9B%B8%E5%85%B3%E4%BB%8B%E7%BB%8D/"/>
      <url>/My-Blogs/2021/01/08/css/%E8%87%AA%E9%80%82%E5%BA%94%E5%B8%83%E5%B1%80%E7%9A%84%E7%9B%B8%E5%85%B3%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬éƒ½çŸ¥é“è‡ªé€‚åº”å¸ƒå±€æœ‰å¾ˆå¤šç§æ–¹å¼å¯ä»¥å®ç°ï¼Œä¸‹é¢è®©æˆ‘ä»¬æ¥çœ‹çœ‹æœ‰å“ªäº›æ–¹å¼æ¯”è¾ƒç®€å•ï¼Ÿ</p><a id="more"></a><h3 id="åˆ©ç”¨clampå‡½æ•°"><a href="#åˆ©ç”¨clampå‡½æ•°" class="headerlink" title="åˆ©ç”¨clampå‡½æ•°"></a>åˆ©ç”¨clampå‡½æ•°</h3><p><code>clamp()</code> é€šè¿‡â€œé™åˆ¶â€æˆ–é™åˆ¶æœ€å°å’Œæœ€å¤§èŒƒå›´ä¹‹é—´çš„çµæ´»å€¼æ¥å·¥ä½œ</p><p>ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><ul><li>æœ€å°å€¼ï¼šä¾‹å¦‚ 16px</li><li>å¼¹æ€§å€¼ï¼šä¾‹å¦‚ 5vw</li><li>æœ€å¤§å€¼ï¼šä¾‹å¦‚ 34px</li></ul><pre><code class="css">h1 {  font-size: clamp(16px, 5vw, 34px);}</code></pre><p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œè¯¥ h1 font-size å€¼å°†æ˜¯ 5% è§†å£å®½åº¦ã€‚ä½†å‰ææ˜¯è¯¥å€¼å¤§äº 16px å’Œå°äº 34pxã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„è§†å£å®½åº¦ä¸º 300pxï¼Œåˆ™æ‚¨çš„ 5vw å€¼å°†ç­‰äº 15pxã€‚ä½†æ˜¯ï¼Œæ‚¨å°†è¯¥ font-size å€¼é™åˆ¶ä¸ºçš„æœ€å°å€¼ 16pxï¼Œè¿™æ ·å°±å¯ä»¥äº†ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œå¦‚æœæ‚¨çš„è§†å£å®½åº¦ä¸º 1400pxï¼Œåˆ™æ‚¨ 5vw å°†å¤§å£°ç–¾å‘¼ 70pxï¼ä½†å¹¸è¿çš„æ˜¯ï¼Œæ‚¨å°†è¯¥æœ€å¤§å€¼é™åˆ¶ä¸º34pxï¼Œå› æ­¤å®ƒä¸ä¼šè¶…è¿‡è¯¥æœ€å¤§å€¼ ã€‚</p><p><img src="/My-Blogs/images/%E8%87%AA%E9%80%82%E5%BA%94%E5%B8%83%E5%B1%80%E7%9A%84%E7%9B%B8%E5%85%B3%E4%BB%8B%E7%BB%8D-01.gif" alt="iamge"></p><p>æˆ‘å¯ä»¥ä¸ºæ­¤æ¨¡æ¿æ·»åŠ æ­¤ä»£ç â€¦</p><pre><code class="css">img {  width: clamp(15vw, 800%, 100%);}h1 {  font-size: clamp(20px, 5vw, 35px);}p {  font-size: clamp(10px, 4vw, 20px);}</code></pre><p>å®é™…ä¸Šï¼Œä»»ä½•å…¶ä»–æ¥å—é•¿åº¦ï¼Œé¢‘ç‡ï¼Œè§’åº¦ï¼Œæ—¶é—´ï¼Œç™¾åˆ†æ¯”ï¼Œæ•°å­—æˆ–æ•´æ•°çš„å±æ€§</p><p><img src="/My-Blogs/images/%E8%87%AA%E9%80%82%E5%BA%94%E5%B8%83%E5%B1%80%E7%9A%84%E7%9B%B8%E5%85%B3%E4%BB%8B%E7%BB%8D-02.png" alt="image"></p><br><h3 id="åˆ©ç”¨gridå¸ƒå±€æ–°ç‰¹æ€§"><a href="#åˆ©ç”¨gridå¸ƒå±€æ–°ç‰¹æ€§" class="headerlink" title="åˆ©ç”¨gridå¸ƒå±€æ–°ç‰¹æ€§"></a>åˆ©ç”¨<a href="http://1linelayouts.glitch.me/">gridå¸ƒå±€æ–°ç‰¹æ€§</a></h3><br><h4 id="å¼ºå±…ä¸­"><a href="#å¼ºå±…ä¸­" class="headerlink" title="å¼ºå±…ä¸­"></a>å¼ºå±…ä¸­</h4><p><img src="/My-Blogs/images/%E8%87%AA%E9%80%82%E5%BA%94%E5%B8%83%E5%B1%80%E7%9A%84%E7%9B%B8%E5%85%B3%E4%BB%8B%E7%BB%8D-03.png"></p><br><h4 id="ä¸‰æ®µå¼å¸ƒå±€"><a href="#ä¸‰æ®µå¼å¸ƒå±€" class="headerlink" title="ä¸‰æ®µå¼å¸ƒå±€"></a>ä¸‰æ®µå¼å¸ƒå±€</h4><p><img src="/My-Blogs/images/%E8%87%AA%E9%80%82%E5%BA%94%E5%B8%83%E5%B1%80%E7%9A%84%E7%9B%B8%E5%85%B3%E4%BB%8B%E7%BB%8D-04.png"></p><br><h4 id="ç»å…¸å¸ƒå±€"><a href="#ç»å…¸å¸ƒå±€" class="headerlink" title="ç»å…¸å¸ƒå±€"></a>ç»å…¸å¸ƒå±€</h4><p><img src="/My-Blogs/images/%E8%87%AA%E9%80%82%E5%BA%94%E5%B8%83%E5%B1%80%E7%9A%84%E7%9B%B8%E5%85%B3%E4%BB%8B%E7%BB%8D-05.png"></p>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> å¸ƒå±€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†·çŸ¥è¯†ä¹‹CSSç¯‡ã€ç«–è¡Œæ¨ªä¹¦ç»„åˆã€‘</title>
      <link href="/My-Blogs/2021/01/08/css/%E5%86%B7%E7%9F%A5%E8%AF%86%E4%B9%8BCSS%E7%AF%87%E3%80%90%E7%AB%96%E8%A1%8C%E6%A8%AA%E4%B9%A6%E7%BB%84%E5%90%88%E3%80%91/"/>
      <url>/My-Blogs/2021/01/08/css/%E5%86%B7%E7%9F%A5%E8%AF%86%E4%B9%8BCSS%E7%AF%87%E3%80%90%E7%AB%96%E8%A1%8C%E6%A8%AA%E4%B9%A6%E7%BB%84%E5%90%88%E3%80%91/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æˆ‘ä»¬éƒ½çŸ¥é“ç«–ä¹¦æˆè¡Œï¼Œè‡ªå³å‘å·¦æ¢è¡Œæ˜¯å¤æ–‡ä¸­çš„ä¸€ç§ä¹¦å†™æ–¹å¼ã€‚é‚£ä¹ˆåœ¨CSSä¸­writing-modeå°±å®šä¹‰äº†æ–‡æœ¬åœ¨æ°´å¹³æˆ–å‚ç›´æ–¹å‘ä¸Šæ’åˆ—æ–¹å¼ã€‚ä¸‹é¢æˆ‘ä»¬é€šè¿‡writing-modeè¿™ä¸ªå±æ€§å®šä¹‰ä¸€ä¸ªâ€œç«¹ç®€â€ä¹¦å†™æ–¹å¼ï¼ŒåŒæ—¶å¦‚æœåœ¨ç«–è¡Œæ–‡æœ¬ä¸­ç©¿æ’é˜¿æ‹‰ä¼¯æ•°å­—æ—¶åˆå½“å¦‚ä½•ï¼Ÿ</p></blockquote><a id="more"></a><p>æˆ‘ä»¬è¦å®šä¹‰ç«¹ç®€çš„ä¹¦å†™æ–¹å¼å‰ï¼Œé¦–å…ˆå›é¡¾ä¸‹ CSS <code>writing-mode</code> å±æ€§ï¼Œå®ƒæ˜¯å®šä¹‰æ–‡æœ¬åœ¨æ°´å¹³æˆ–å‚ç›´æ–¹å‘ä¸Šå¦‚ä½•æ’åˆ—ã€‚</p><p><img src="/My-Blogs/images/%E5%86%B7%E7%9F%A5%E8%AF%86%E4%B9%8BCSS%E7%AF%87%E3%80%90%E7%AB%96%E8%A1%8C%E6%A8%AA%E4%B9%A6%E7%BB%84%E5%90%88%E3%80%91-01.jpg"></p><p>CSS text-combine-upright ç«–è¡Œæ¨ªä¹¦ç»„åˆ</p><h3 id="writing-modeè¯­æ³•"><a href="#writing-modeè¯­æ³•" class="headerlink" title="writing-modeè¯­æ³•"></a>writing-modeè¯­æ³•</h3><pre><code class="CSS">writing-mode: horizontal-tb | vertical-rl | vertical-lr | sideways-rl | sideways-lr</code></pre><ul><li>horizontal-tbï¼šæ°´å¹³æ–¹å‘è‡ªä¸Šè€Œä¸‹çš„ä¹¦å†™æ–¹å¼ã€‚</li><li>vertical-rlï¼šå‚ç›´æ–¹å‘è‡ªå³è€Œå·¦çš„ä¹¦å†™æ–¹å¼ã€‚</li><li>vertical-lrï¼šå‚ç›´æ–¹å‘å†…å†…å®¹ä»ä¸Šåˆ°ä¸‹ï¼Œæ°´å¹³æ–¹å‘ä»å·¦åˆ°å³ã€‚</li><li>sideways-rlï¼šå†…å®¹å‚ç›´æ–¹å‘ä»ä¸Šåˆ°ä¸‹æ’åˆ—ã€‚</li></ul><p>ç”±æ­¤ï¼Œæˆ‘ä»¬è‹¥è¦å®šä¹‰å‡ºâ€œç«¹ç®€â€çš„ä¹¦å†™æ¨¡å¼ï¼Œå°±å¯ä»¥è¿ç”¨<code>vertical-rl</code>å€¼ï¼Œå‚ç›´æ–¹å‘ç”±å³åˆ°å·¦ã€‚</p><p><strong>ç¤ºä¾‹</strong></p><p>å…ˆåŸè¯—ä¸€é¦–ğŸ¤­ä»¥æ­¤ä¸ºä¾‹å¼€å§‹</p><p>åŒåœ¨å±‹æªä¸‹ï¼ŒæƒŸæœ‰å¶é‡ã€‚</p><p>çŠ¹å¦‚ç™½é©¹è¿‡éš™ï¼Œè¨€ä¹‹ä¸å°½ã€‚</p><p>å› æœ‰æ—¶ä¸æˆ‘ä¸ï¼Œçˆ¬è€³æ”è…®ï¼Œ</p><p>å¿ƒä¹‹ä¸åŠä¹Ÿã€‚</p><p>â€”â€” Lucas</p><pre><code class="CSS">div{  writing-mode: vertical-rl;}</code></pre><pre><code class="HTML">&lt;div&gt;  &lt;p&gt;åŒåœ¨å±‹æªä¸‹ï¼Œ&lt;/p&gt;  &lt;p&gt;æƒŸæœ‰å¶é‡ã€‚&lt;/p&gt;  &lt;p&gt;çŠ¹å¦‚ç™½é©¹è¿‡éš™ï¼Œ&lt;/p&gt;  &lt;p&gt;è¨€ä¹‹ä¸å°½ï¼Œ&lt;/p&gt;  &lt;p&gt;å› æœ‰æ—¶ä¸æˆ‘ä¸ï¼Œ&lt;/p&gt;  &lt;p&gt;çˆ¬è€³æ”è…®ï¼Œ&lt;/p&gt;  &lt;p&gt;å¿ƒä¹‹ä¸åŠä¹Ÿã€‚&lt;/p&gt;  &lt;p&gt;â€”â€” DeathGhost&lt;/p&gt;&lt;/div&gt;</code></pre><p><img src="/My-Blogs/images/%E5%86%B7%E7%9F%A5%E8%AF%86%E4%B9%8BCSS%E7%AF%87%E3%80%90%E7%AB%96%E8%A1%8C%E6%A8%AA%E4%B9%A6%E7%BB%84%E5%90%88%E3%80%91-02.jpg"></p><p>CSS writing-mode æ–‡æœ¬æ’å¸ƒ</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹çœ‹ç«–è¡Œæ’å¸ƒä¸­çš„â€œæ„å¤–â€ã€‚çœ‹çœ‹ä¸‹é¢çš„å›¾ä¾‹ã€‚</p><p><img src="/My-Blogs/images/%E5%86%B7%E7%9F%A5%E8%AF%86%E4%B9%8BCSS%E7%AF%87%E3%80%90%E7%AB%96%E8%A1%8C%E6%A8%AA%E4%B9%A6%E7%BB%84%E5%90%88%E3%80%91-03.jpg"></p><p>CSS ä¹¦å†™æ¨¡å¼ <code>writing-mode: vertical-rl</code> ï¼ˆä»å³åˆ°å·¦ï¼‰</p><p>å¯ä»¥çœ‹å‡ºï¼Œè‹¥ä»¥ä¸­æ–‡æè¿°è¿˜å¥½ï¼Œä½†è‹¥åŠ å…¥é˜¿æ‹‰ä¼¯æ•°å­—ï¼Œå°±æ˜¾å¾—æ€ªå¼‚ã€‚</p><p>é‚£ä¹ˆå¯å¦å°†æ•°å­—è½¬ä¸ºæ¨ªå‘ï¼ˆå¸¸è§„ï¼‰ä¹¦å†™ï¼Ÿ</p><p>ä¸‹é¢æˆ‘ä»¬é‡ç‚¹çœ‹çœ‹CSSä¸­çš„å¦ä¸€ä¸ªå±æ€§ã€‚</p><h3 id="text-combine-upright-ç«–è¡Œæ¨ªä¹¦ç»„åˆ"><a href="#text-combine-upright-ç«–è¡Œæ¨ªä¹¦ç»„åˆ" class="headerlink" title="text-combine-upright ç«–è¡Œæ¨ªä¹¦ç»„åˆ"></a>text-combine-upright ç«–è¡Œæ¨ªä¹¦ç»„åˆ</h3><pre><code class="CSS">/* Keyword values */text-combine-upright: none;text-combine-upright: all;/* Digits values */text-combine-upright: digits;text-combine-upright: digits 4;/* Global values */text-combine-upright: inherit;text-combine-upright: initial;text-combine-upright: unset;</code></pre><ul><li><code>none</code>: æ²¡æœ‰ç‰¹æ®Šå¤„ç†ã€‚</li><li><code>all</code>: è¯•å›¾å°†å…ƒç´ å†…çš„å­—ç¬¦æ°´å¹³æ’åˆ—ï¼Œä½¿å…¶å®ƒä»¬åœ¨ç«–è¡Œä¸­å æ®å•ä¸ªå­—ç¬¦ç©ºé—´ã€‚</li><li><code>digits</code>: å°è¯•æ˜¾ç¤ºä¸€ä¸ªè¿ç»­çš„ASCIIæ•°å­—åºåˆ—ï¼ˆU + 0030â€“U + 0039ï¼‰ï¼Œè¯¥åºåˆ—çš„å­—ç¬¦æ•°å°‘äºæˆ–ç­‰äºæŒ‡å®šçš„æ•´æ•°ï¼Œä»¥è‡´äºå®ƒåœ¨å‚ç›´è¡Œæ¡†ä¸­å æ®å•ä¸ªå­—ç¬¦çš„ç©ºé—´ã€‚å¦‚æœçœç•¥æ•´æ•°ï¼Œåˆ™è®¡ç®—ç»“æœä¸º2ã€‚2-4èŒƒå›´ä»¥å¤–çš„æ•´æ•°æ— æ•ˆã€‚</li></ul><p>å€¼ <code>digits</code> ç›®å‰æµè§ˆå™¨ä¸Šæ²¡æœ‰çœ‹åˆ°æ•ˆæœï¼Œè¿™é‡Œé¢„å…ˆæç½®ã€‚</p><p>æˆ‘ä»¬è¦å°†ä¸Šè¿°æ–‡æœ¬ä¸­çš„æ•°å­—è®©å…¶æ¨ªå‘æ’åˆ—ï¼ŒæŒ‰å±æ€§å€¼å°±æ˜¯å°†å…¶æ°´å¹³æ’åˆ—ï¼Œè®©å…¶å æ®å•ä¸ªå­—ç¬¦ç©ºé—´ã€‚</p><p>é‚£ä¹ˆï¼Œæ ·å¼æ–‡æœ¬å®šä¹‰å°±å¯ä»¥è¿™æ ·ï¼š</p><pre><code class="CSS">div{  writing-mode: vertical-rl;  letter-spacing: 1px;}div b{  text-combine-upright: all;  margin: 5px 0;}</code></pre><pre><code class="HTML">&lt;div&gt;  &lt;h1&gt;æ¸…æœ&lt;/h1&gt;  &lt;p&gt;æ˜¯ä¸­å›½å†å²ä¸Šæœ€åä¸€ä¸ªå°å»ºç‹æœï¼Œ&lt;/p&gt;  &lt;p&gt;å…±ä¼ åäºŒå¸ï¼Œ&lt;/p&gt;  &lt;p&gt;ç»Ÿæ²»è€…ä¸ºæ»¡æ´²çˆ±æ–°è§‰ç½—æ°ã€‚&lt;/p&gt;  &lt;p&gt;ä»åŠªå°”å“ˆèµ¤å»ºç«‹åé‡‘èµ·ï¼Œ&lt;/p&gt;  &lt;p&gt;æ€»è®¡&lt;b&gt;296&lt;/b&gt;å¹´ã€‚&lt;/p&gt;  &lt;p&gt;ä»çš‡å¤ªææ”¹å›½å·ä¸ºæ¸…èµ·ï¼Œå›½ç¥š&lt;b&gt;276&lt;/b&gt;å¹´ã€‚&lt;/p&gt;  &lt;p&gt;å»ºç«‹å…¨å›½æ€§æ”¿æƒç®—èµ·ä¸º&lt;b&gt;268&lt;/b&gt;å¹´ã€‚&lt;/p&gt;&lt;/div&gt;</code></pre><p>å¯¹æ–‡æœ¬ä¸­çš„<b>æ ‡ç­¾å®šä¹‰<code>text-combine-upright</code>ä¸º<code>all</code>å³å¯ã€‚</b></p><b><p><img src="/My-Blogs/images/%E5%86%B7%E7%9F%A5%E8%AF%86%E4%B9%8BCSS%E7%AF%87%E3%80%90%E7%AB%96%E8%A1%8C%E6%A8%AA%E4%B9%A6%E7%BB%84%E5%90%88%E3%80%91-04.jpg"></p><p>CSS text-combine-upright ç«–è¡Œæ¨ªä¹¦ç»„åˆ</p><p>è™½ç„¶å¦‚æ­¤ï¼Œä½†æ˜¯ï¼Œå®ƒä¹Ÿæ˜¯æœ‰ä¸€å®šçš„å±€é™æ€§ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†â€œæ•°å­—+å¹´â€åˆä¸ºä¸€èµ·ï¼Œæˆ–æ›´å¤šæ–‡æœ¬åˆä¸ºä¸€èµ·ï¼Œå°±ä¼šçœ‹åˆ°æ®µå°¾æ•ˆæœã€‚</p><p><img src="/My-Blogs/images/%E5%86%B7%E7%9F%A5%E8%AF%86%E4%B9%8BCSS%E7%AF%87%E3%80%90%E7%AB%96%E8%A1%8C%E6%A8%AA%E4%B9%A6%E7%BB%84%E5%90%88%E3%80%91-05.jpg"></p><p>CSS text-combine-upright ç«–è¡Œæ¨ªä¹¦ç»„åˆ</p><p>æ‰€ä»¥ï¼Œå®ƒå æ®å•ä¸ªå­—ç¬¦ç©ºé—´å‹ç¼©æ˜¯æœ‰ä¸€å®šé™åˆ¶ã€‚</p><p>æœ¬ç¤ºä¾‹äºæµè§ˆå™¨ <code>chrome87</code> ç‰ˆæœ¬ï¼Œè¯¦ç»†å¯é˜…è¯»<a href="https://drafts.csswg.org/css-writing-modes-4/#text-combine-upright">è¿™é‡Œ</a>ã€‚</p></b>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å†·çŸ¥è¯† </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†·çŸ¥è¯†ä¹‹CSSç¯‡</title>
      <link href="/My-Blogs/2021/01/08/css/%E5%86%B7%E7%9F%A5%E8%AF%86%E4%B9%8BCSS%E7%AF%87/"/>
      <url>/My-Blogs/2021/01/08/css/%E5%86%B7%E7%9F%A5%E8%AF%86%E4%B9%8BCSS%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<p>CSSçš„å†·çŸ¥è¯†ï¼Œä½ åˆäº†è§£å¤šå°‘å‘¢ï¼Ÿ</p><a id="more"></a><h3 id="æ–‡å­—æ¨¡ç³Šæ•ˆæœ"><a href="#æ–‡å­—æ¨¡ç³Šæ•ˆæœ" class="headerlink" title="æ–‡å­—æ¨¡ç³Šæ•ˆæœ"></a>æ–‡å­—æ¨¡ç³Šæ•ˆæœ</h3><p>åªéœ€è¦æ·»åŠ ä»¥ä¸‹ä¸¤è¡Œä»£ç ï¼Œå³å¯è¾¾åˆ°å°†æ–‡å­—æ¨¡ç³Šå¤„ç†çš„ç›®çš„ã€‚</p><pre><code class="css">color: transparent;text-shadow: #111 0 0 5px;</code></pre><br><p><img src="/My-Blogs/images/%E5%86%B7%E7%9F%A5%E8%AF%86%E4%B9%8BCSS%E7%AF%87-01.png" alt="image"></p><br><h3 id="æ¯›ç»ç’ƒæ•ˆæœ"><a href="#æ¯›ç»ç’ƒæ•ˆæœ" class="headerlink" title="æ¯›ç»ç’ƒæ•ˆæœ"></a>æ¯›ç»ç’ƒæ•ˆæœ</h3><p>å…¶å®æ¯›ç»ç’ƒçš„æ¨¡ç³Šæ•ˆæœæŠ€æœ¯ä¸Šæ¯”è¾ƒç®€å•ï¼Œåªæ˜¯ç”¨åˆ°äº† css æ»¤é•œï¼ˆfilterï¼‰ä¸­çš„ blur å±æ€§ã€‚ä½†æ˜¯è¦åšä¸€ä¸ªå¥½çš„æ¯›ç»ç’ƒæ•ˆæœï¼Œéœ€è¦æ³¨æ„å¾ˆå¤šç»†èŠ‚ã€‚ä¸‹é¢æä¾›ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼š</p><pre><code class="css">.blur {  display: block;  width: 300px;  height: 300px;  margin: 100px auto;  filter: blur(10px);}&lt;img src="./img/test.png"class="blur"alt=""&gt;</code></pre><p><img src="/My-Blogs/images/%E5%86%B7%E7%9F%A5%E8%AF%86%E4%B9%8BCSS%E7%AF%87-02.png" alt="image"></p><h3 id="CSSä¸­ä¹Ÿå¯ä»¥åšç®€å•è¿ç®—"><a href="#CSSä¸­ä¹Ÿå¯ä»¥åšç®€å•è¿ç®—" class="headerlink" title="CSSä¸­ä¹Ÿå¯ä»¥åšç®€å•è¿ç®—"></a>CSSä¸­ä¹Ÿå¯ä»¥åšç®€å•è¿ç®—</h3><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ—¶å¸¸ä¼šé‡åˆ°è¿™æ ·çš„éœ€æ±‚ï¼š</p><blockquote><p>å·¦ä¾§æˆ–è€…å³ä¾§å®½åº¦å›ºå®šï¼Œç„¶åå‰©ä½™éƒ¨åˆ†è‡ªåŠ¨å……æ»¡ã€‚</p></blockquote><p>å¯èƒ½å¾ˆå¤šå°ä¼™ä¼´ä¼šæƒ³åˆ°ç”¨flexå¸ƒå±€ï¼Œé€šè¿‡è®¾ç½®flex:1; ä½¿å…¶è‡ªåŠ¨å……æ»¡ï¼Œå½“ç„¶è¿™ä¸ªåšæ³•ä¹Ÿæ˜¯å¯¹çš„ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æœ‰æ›´ä¸ºç®€ä¾¿çš„æ–¹æ³•ï¼Œé‚£å°±æ˜¯åˆ©ç”¨cssçš„calcå‡½æ•°ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="css">.container {  width: calc(100% - 50px);}</code></pre><p><code>calc() </code> å‡½æ•°ç”¨äºåŠ¨æ€è®¡ç®—é•¿åº¦å€¼ã€‚</p><ul><li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿ç®—ç¬¦å‰åéƒ½éœ€è¦ä¿ç•™ä¸€ä¸ªç©ºæ ¼ï¼Œä¾‹å¦‚ï¼šwidth: calc(100% - 10px)ï¼›</li><li>ä»»ä½•é•¿åº¦å€¼éƒ½å¯ä»¥ä½¿ç”¨calc()å‡½æ•°è¿›è¡Œè®¡ç®—ï¼›</li><li>calc()å‡½æ•°æ”¯æŒ â€œ+â€, â€œ-â€œ, â€œ*â€, â€œ/â€œ è¿ç®—ï¼›</li><li>calc()å‡½æ•°ä½¿ç”¨æ ‡å‡†çš„æ•°å­¦è¿ç®—ä¼˜å…ˆçº§è§„åˆ™ï¼›</li></ul>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å†·çŸ¥è¯† </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ªäººæŠ¤åŸæ²³</title>
      <link href="/My-Blogs/2020/02/07/%E8%81%8C%E4%B8%9A%E8%A7%84%E5%88%92/%E4%B8%AA%E4%BA%BA%E6%8A%A4%E5%9F%8E%E6%B2%B3/"/>
      <url>/My-Blogs/2020/02/07/%E8%81%8C%E4%B8%9A%E8%A7%84%E5%88%92/%E4%B8%AA%E4%BA%BA%E6%8A%A4%E5%9F%8E%E6%B2%B3/</url>
      
        <content type="html"><![CDATA[<a id="more"></a><h3 id="æˆ‘æœ€å–œæ¬¢çš„èŒä¸šå»ºè®®æ˜¯å‘å±•â€ä¸ªäººæŠ¤åŸæ²³â€œã€‚"><a href="#æˆ‘æœ€å–œæ¬¢çš„èŒä¸šå»ºè®®æ˜¯å‘å±•â€ä¸ªäººæŠ¤åŸæ²³â€œã€‚" class="headerlink" title="æˆ‘æœ€å–œæ¬¢çš„èŒä¸šå»ºè®®æ˜¯å‘å±•â€ä¸ªäººæŠ¤åŸæ²³â€œã€‚"></a>æˆ‘æœ€å–œæ¬¢çš„èŒä¸šå»ºè®®æ˜¯å‘å±•â€<a href="https://eriktorenberg.substack.com/p/build-personal-moats">ä¸ªäººæŠ¤åŸæ²³</a>â€œã€‚</h3><br><p><img src="https://www.wangbase.com/blogimg/asset/202009/bg2020092807.jpg" alt="image"></p><br><p>ä½ çš„ä¸ªäººæŠ¤åŸæ²³æ˜¯ä¸€ç»„ç‹¬ç‰¹çš„ä¸”ä¸æ–­ç´¯ç§¯çš„ç«äº‰ä¼˜åŠ¿ï¼Œåˆ«äººå¾ˆéš¾å­¦ä¹ ï¼Œæˆ–è€…å¾ˆéš¾åšåˆ°ã€‚å¦‚æœä½ æœ‰äº†å®ƒï¼Œä½ ä¼šè®©è‡ªå·±å˜å¾—æ— æ³•å–ä»£ã€‚</p><br><p>ä½ å¿…é¡»æ‰¾åˆ°å±äºä½ çš„ç‰¹æ®Šä¸œè¥¿ï¼Œè€Œä¸”è¿™äº›ä¸œè¥¿ä¼šéšç€æ—¶é—´çš„æµé€è€Œå¢åŠ ä»·å€¼ã€‚</p><br><h3 id="å¦‚ä½•æ‰¾åˆ°è‡ªå·±çš„æŠ¤åŸæ²³ï¼Ÿ"><a href="#å¦‚ä½•æ‰¾åˆ°è‡ªå·±çš„æŠ¤åŸæ²³ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ‰¾åˆ°è‡ªå·±çš„æŠ¤åŸæ²³ï¼Ÿ"></a>å¦‚ä½•æ‰¾åˆ°è‡ªå·±çš„æŠ¤åŸæ²³ï¼Ÿ</h3><br><p>ä½ å¯ä»¥é—®è‡ªå·±ï¼šå¯¹æˆ‘æ¥è¯´ï¼Œä»€ä¹ˆäº‹æƒ…å®¹æ˜“åšï¼Œè€Œå¯¹åˆ«äººå´å¾ˆéš¾ï¼Ÿæˆ‘æ‰€æ‹¥æœ‰çš„æŠ€èƒ½ä¸­ï¼Œå“ªäº›æ˜¯å…¶ä»–äººæ¨¡ä»¿ä¼šéå¸¸å›°éš¾çš„ï¼Ÿæˆ–è€…ï¼Œä½ æ‰€çˆ±çš„ã€æ“…é•¿çš„äº‹ç‰©ï¼Œè·Ÿç¤¾ä¼šéœ€è¦çš„äº‹ç‰©æœ‰ä»€ä¹ˆäº¤æ±‡ç‚¹ï¼Ÿ</p><br><p>æŠ¤åŸæ²³ä¼šéšç€æ¡ä»¶çš„å˜åŒ–è€Œå˜åŒ–ã€‚æ¯”å¦‚ï¼Œå½•éŸ³æŠ€æœ¯è¯ç”Ÿä¹‹å‰ï¼Œç¨€ç¼ºçš„æ˜¯éŸ³ä¹æœ¬èº«ï¼Œä½ æƒ³å¬éŸ³ä¹ï¼Œå°±éœ€è¦æœ‰ä¸€ä¸ªè‰ºæœ¯å®¶ç»™ä½ ç°åœºè¡¨æ¼”ã€‚ç°åœ¨ï¼ŒéŸ³ä¹å½•éŸ³åˆ°å¤„éƒ½æ˜¯ï¼Œç¨€ç¼ºçš„æ˜¯ç­–åˆ’ã€å‘è¡Œå’Œä¸ªæ€§çš„å±•ç¤ºã€‚</p><br><p>åŒæ ·åœ°ï¼Œåœ¨ç¤¾ä¼šä¸­ï¼Œä»¥å‰çš„ç¨€ç¼ºèµ„æºæ˜¯é‡‘é’±å’Œç‰¹æ®Šå…³ç³»ã€‚è€Œåœ¨äº’è”ç½‘æ—¶ä»£ï¼Œç¨€ç¼ºçš„æ˜¯ç‰¹å®šçŸ¥è¯†å’ŒæŸäº›ç¨€æœ‰æŠ€èƒ½ã€‚</p><br><p>æ¼«ç”»å®¶æ–¯ç§‘ç‰¹Â·äºšå½“æ–¯ï¼ˆScott Adamsï¼‰æ›¾ç»æè¿‡ä¸€ç§å»ºç«‹ä¸ªäººæŠ¤åŸæ²³çš„æ–¹æ³•ï¼Œå°±æ˜¯æ‰¾åˆ°è‡ªå·±æœ€æ“…é•¿çš„2ä¸ªï½3ä¸ªäº‹ç‰©çš„äº¤é›†ã€‚æ¯”å¦‚ï¼Œä»–æ—¢ä¸æ˜¯æœ€å¥½çš„æ¼«ç”»å®¶ï¼Œä¹Ÿä¸æ˜¯æœ€å¥½çš„ä½œå®¶ï¼Œä¹Ÿä¸æ˜¯æœ€å¥½çš„ä¼ä¸šå®¶ï¼Œä½†ä»–å¯ä»¥æ˜¯æœ€å¥½çš„å•†ä¸šç±»æ¼«ç”»çŸ­æ–‡ä½œè€…ï¼Œè¿™å°±æ˜¯ä»–çš„æŠ¤åŸæ²³ã€‚</p><br><p>æ€»ä¹‹ï¼Œä½ è¦å‘ç°å¯¹ä½ æ¥è¯´å®¹æ˜“è€Œå¯¹ä»–äººå´å¾ˆéš¾çš„äº‹ç‰©ï¼Œå¹¶åœ¨è¿™äº›äº‹ç‰©ä¸Šå˜å¾—å‡ºè‰²ï¼Œç„¶ååˆ©ç”¨å®ƒæ¥ç§¯ç´¯ç¤¾ä¼šå’Œé‡‘èèµ„æœ¬ã€‚</p><br><h3 id="æ‰¾å‡ºæœ€æ“…é•¿çš„2-3ä¸ªäº‹ç‰©çš„äº¤é›†ã€‚"><a href="#æ‰¾å‡ºæœ€æ“…é•¿çš„2-3ä¸ªäº‹ç‰©çš„äº¤é›†ã€‚" class="headerlink" title="æ‰¾å‡ºæœ€æ“…é•¿çš„2~3ä¸ªäº‹ç‰©çš„äº¤é›†ã€‚"></a><strong>æ‰¾å‡ºæœ€æ“…é•¿çš„2~3ä¸ªäº‹ç‰©çš„äº¤é›†</strong>ã€‚</h3><br><p><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F3e1e36d1-f32a-4aff-bd08-10e131454905_1124x1063.png" alt="äº¤é›†å›¾"></p>]]></content>
      
      
      <categories>
          
          <category> ä¸ªäºº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> èŒä¸šè§„åˆ’ </tag>
            
            <tag> ä¸ªäºº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo theme cutie v2.x tutorial</title>
      <link href="/My-Blogs/2018/02/12/hexo/hexo-theme-cutie-v2-tutorial/"/>
      <url>/My-Blogs/2018/02/12/hexo/hexo-theme-cutie-v2-tutorial/</url>
      
        <content type="html"><![CDATA[<p><img src="/My-Blogs/images/tree.png" alt="$cover"></p><p>Theme cutie has evolved from v1.x to v2.x with a refreshed and fine tuned design and more features. Follow the following instruction to install and use it. You may navigate this website to experience the new look and interaction of v2.x.</p><p><strong>Thank you for your stars and support</strong>.</p><a id="more"></a><h1 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h1><h2 id="Install-for-a-new-site"><a href="#Install-for-a-new-site" class="headerlink" title="Install for a new site"></a>Install for a new site</h2><dl><dt>Prerequiste</dt><dd>Make sure you install <code>node.js</code> and <code>hexo</code> through command line. Refer to official Hexo doc for detailed instruction.</dd></dl><dl><dt>Working directory</dt><dd>Make sure your terminal (command line) is currently in the folder where you want to create the site.</dd></dl><dl><dt>Installation steps</dt><dd>The first step is the standard hexo installation step. If you have done them, skip to step 2.<br>    1. Initialize your site<br>    <code>bash     hexo init your-site-folder     cd your-site-folder     npm install     </code><br>    2. [<em>Optional</em>][<em>Recommended</em>] Uninstall <code>hexo-renderer-marked</code> and install <code>hexo-renderer-markdown-it</code> and associated plugins.<br>    <code>bash     npm un hexo-renderer-marked --save     npm i hexo-renderer-markdown-it --save     npm i markdown-it-emoji --save     npm i markdown-it-mark --save     npm i markdown-it-deflist --save     npm i markdown-it-container --save     </code></dd></dl><pre><code>3. Download [latest theme cutie](https://github.com/qutang/hexo-theme-cutie/releases/latest) and unzip it to `themes/` folder in your site. Then rename it to `cutie`.</code></pre><dl><dt>Initial configuration file</dt><dd><code>_config.yml</code> in the root path of your site.</dd></dl><dl><dt>Initial configuration</dt><dd>1. Follow standard hexo initial configuration: <a href="https://hexo.io/docs/configuration.html">https://hexo.io/docs/configuration.html</a><br>    2. Add variables or modify the variables in your <code>_config.yml</code> according to following snippet.</dd></dl><pre><code>    ```yml _config.yml    highlight:      enable: true      line_number: true      auto_detect: false      tab_replace:     markdown:      render:        html: true        xhtmlOut: false        breaks: false        linkify: true        typographer: true        quotes: 'â€œâ€â€˜â€™'      plugins:        - markdown-it-abbr        - markdown-it-footnote        - markdown-it-ins        - markdown-it-sub        - markdown-it-sup        - markdown-it-deflist      anchors:        level: 1        collisionSuffix: 'v'        permalink: false        permalinkClass: header-anchor        permalinkSymbol: ""        permalinkBefore: false    date_format: ll    archive_generator:      per_page: 0      yearly: true      monthly: false      daily: false    theme: cutie    ```</code></pre><dl><dt>Bring site alive</dt><dd><code>bash     hexo s --debug     </code></dd></dl><h2 id="Install-for-an-existing-site"><a href="#Install-for-an-existing-site" class="headerlink" title="Install for an existing site"></a>Install for an existing site</h2><dl><dt>Working directory</dt><dd>Make sure your terminal (command line) is currently in the root folder of the site.</dd></dl><p>Installation steps<br>:</p><ol><li><p>[<em>Optional</em>][<em>Recommended</em>] Uninstall <code>hexo-renderer-marked</code> and install <code>hexo-renderer-markdown-it</code> and associated plugins.</p><pre><code> ```bash npm un hexo-renderer-marked --save npm i hexo-renderer-markdown-it --save npm i markdown-it-emoji --save npm i markdown-it-mark --save npm i markdown-it-deflist --save npm i markdown-it-container --save ```</code></pre></li><li><p>Download <a href="https://github.com/qutang/hexo-theme-cutie/releases/latest">latest theme cutie</a><br>and unzip it to <code>themes/</code> folder in your site. Then rename it to <code>cutie</code>.</p></li></ol><dl><dt>Initial configuration file</dt><dd><code>_config.yml</code> in the root path of your site.</dd></dl><dl><dt>Initial configuration</dt><dd>1. Follow standard hexo initial configuration: <a href="https://hexo.io/docs/configuration.html">https://hexo.io/docs/configuration.html</a><br>    2. Add variables or modify the variables in your <code>_config.yml</code> according to following snippet.</dd></dl><pre><code>    ```yml _config.yml    highlight:      enable: true      line_number: true      auto_detect: false      tab_replace:     markdown:      render:        html: true        xhtmlOut: false        breaks: false        linkify: true        typographer: true        quotes: 'â€œâ€â€˜â€™'      plugins:        - markdown-it-abbr        - markdown-it-footnote        - markdown-it-ins        - markdown-it-sub        - markdown-it-sup        - markdown-it-deflist      anchors:        level: 1        collisionSuffix: 'v'        permalink: false        permalinkClass: header-anchor        permalinkSymbol: ""        permalinkBefore: false    date_format: ll    archive_generator:      per_page: 0      yearly: true      monthly: false      daily: false    theme: cutie    ```</code></pre><dl><dt>Bring site alive</dt><dd><code>bash     hexo s --debug     </code></dd></dl><h1 id="Upgrade"><a href="#Upgrade" class="headerlink" title="Upgrade"></a>Upgrade</h1><h2 id="From-v2-x"><a href="#From-v2-x" class="headerlink" title="From v2.x"></a>From v2.x</h2><dl><dt>Installation steps</dt><dd>1. Delete <code>themes/cutie/</code> folder in your site.<br>    2. Download the desired version of theme cutie from <a href="https://github.com/qutang/hexo-theme-cutie/releases">release page</a>, unzip it to <code>themes/</code> folder and rename it to <code>cutie</code>.</dd></dl><dl><dt>Notes</dt><dd>There is a mimimal version requirement for each configuration, make sure your installed version is above it to use the corresponding configuration.</dd></dl><h2 id="From-v1-x"><a href="#From-v1-x" class="headerlink" title="From v1.x"></a>From v1.x</h2><dl><dt>Installation steps</dt><dd>1. Delete <code>themes/cutie/</code> folder in your site.<br>    2. Download the desired version of theme cutie from <a href="https://github.com/qutang/hexo-theme-cutie/releases">release page</a>, unzip it to <code>themes/</code> folder and rename it to <code>cutie</code>.</dd></dl><dl><dt>Configuration</dt><dd>From v2.x, theme cutie uses <em>Hexo data file</em> (<code>sources/_data/cutie.yml</code>) to store all configurations, instead of using the <code>_config.yml</code> file of your site in v1.x. And the YAML structure has changed compared to v1.x. </dd></dl><pre><code>The recommendation is to configure the theme cutie from scratch using the following configuration guidelines.You may copy or reuse some configurations about theme cutie in your old `_config.yml` along the way. Please post an issue if you have hard time migrating your configurations from v1.x to v2.x.</code></pre><h1 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h1><h2 id="Language"><a href="#Language" class="headerlink" title="Language"></a>Language</h2><dl><dt>Minimal version</dt><dd><em>Taurus</em>: <code>v2.0.0-alpha</code></dd></dl><dl><dt>Configuration file</dt><dd><code>_config.yml</code> of site</dd></dl><dl><dt>Configuration format</dt><dd>Set <code>language</code> variable in your siteâ€™s <code>_config.yml</code> file.</dd></dl><pre><code>```yml _config.ymllanguage:- en- zh-cn- it```The first row will be your site's default language.</code></pre><dl><dt>Default configuration</dt><dd>If configuration is omitted, the default setting is <code>en</code>. Site will be displayed in English.</dd></dl><dl><dt>Notes</dt><dd>Currently, theme cutie only supports three languages: English, Italian and ç®€ä½“ä¸­æ–‡.</dd></dl><dl><dt>Contributions</dt><dd>1. Italian translation is contributed by <a href="https://github.com/Fastbyte01">@fastbyte01</a><br>    2. More translation is welcomed if you are interested in contribution. You may add new language files in <code>themes/cutie/languages</code> folder according to Hexoâ€™s guideline: <a href="https://hexo.io/docs/internationalization.html">https://hexo.io/docs/internationalization.html</a> and feel free to send me pull request.</dd></dl><h2 id="Scheme"><a href="#Scheme" class="headerlink" title="Scheme"></a>Scheme</h2><p>This concept is from <code>hexo-theme-next</code>, the most popular theme for Hexo, in which it uses different themes for different layout design. In theme cutie, it follows the similar idea and provides the opportunity to choose different layout design using scheme.</p><dl><dt>Minimal version</dt><dd><em>Taurus</em>: <code>v2.0.0-alpha</code></dd></dl><dl><dt>Configuration file</dt><dd><code>source/_data/cutie.yml</code></dd></dl><dl><dt>Configuration format</dt><dd>Set <code>scheme</code> variable to scheme name to enable a theme scheme.</dd></dl><pre><code>```yml source/_data/cutie.ymlglobal:  scheme: Taurus # Avaliable values: Taurus```</code></pre><dl><dt>Default configuration</dt><dd>If configuration is omitted, the default setting is <code>Taurus</code>, scheme <code>Taurus</code> is enabled.</dd></dl><dl><dt>Notes</dt><dd>Currently, theme cutie only has <code>Taurus</code> theme, which is a two-column text-icon-based layout. Contribution is welcomed from developers or designers for new schemes.</dd></dl><dl><dt>For contributors</dt><dd>1. To add a new scheme, create a new file <code>your-scheme-name.css</code> in folder <code>themes/cutie/source/css/</code> and add your own scheme style in it.<br>    2. The system will automatically search for this css file and load it using the theme name <code>your-scheme-name</code> when changing the scheme configuration to <code>your-scheme-name</code>.</dd></dl><h2 id="Animation"><a href="#Animation" class="headerlink" title="Animation"></a>Animation</h2><dl><dt>Minimal version</dt><dd><code>v2.0.5-beta</code></dd></dl><dl><dt>Configuration file</dt><dd><code>source/_data/cutie.yml</code></dd></dl><dl><dt>Configuration format</dt><dd>Set <code>use_animation</code> to <code>true</code> or <code>false</code> to enable or disable site animations.</dd></dl><pre><code>```yml source/_data/cutie.ymlglobal:  use_animation: true # Avaliable values: true, false```</code></pre><dl><dt>Default configuration</dt><dd>If configuration is omitted, the default setting is <code>true</code>, animation is enabled.</dd></dl><h2 id="Search"><a href="#Search" class="headerlink" title="Search"></a>Search</h2><p>Theme cutie uses in-site search for the site. Use following steps to setup search page. Google custom search has been discarded since <code>v2.0.7</code>.</p><dl><dt>Minimal version</dt><dd><code>v2.0.7</code></dd></dl><dl><dt>Configuration steps</dt><dd>1. No need for configuration, work out of box.<br>    2. If you are upgrading from versions below <code>v2.0.7</code>, delete the old search page you created for your site.</dd></dl><h2 id="404-Page"><a href="#404-Page" class="headerlink" title="404 Page"></a>404 Page</h2><p>Theme cutie uses built-in 404 page. It supports a custom 404 art or tencent 404 charity page (è…¾è®¯404å…¬ç›Š).</p><dl><dt>Minimal version</dt><dd><code>v2.0.7</code></dd></dl><dl><dt>Configuration file</dt><dd><code>source/_data/cutie.yml</code></dd></dl><dl><dt>Configuration steps</dt><dd>1. Delete the old <code>404.md</code> file of your site if you are upgrading from versions before <code>v2.0.7</code>.<br>    2. No need for configuration, work out of box.<br>    3. You may configure the built-in 404 page to use è…¾è®¯å…¬ç›Š404 or not, by default it is NOT using è…¾è®¯å…¬ç›Š404.</dd></dl><pre><code>```yml source/_data/cutie.yml# set true to enable è…¾è®¯å…¬ç›Š404page_404:  tencent_404: true```</code></pre><h2 id="Social-network-links"><a href="#Social-network-links" class="headerlink" title="Social network links"></a>Social network links</h2><dl><dt>Minimal version</dt><dd><code>v2.0.0-alpha</code></dd></dl><dl><dt>Configuration file</dt><dd><code>source/_data/cutie.yml</code></dd></dl><dl><dt>Configuration format</dt><dd>Add social network names and links in the following format. Make sure the social network name matches the corresponding font awesome icon name. See <a href="https://fontawesome.com/icons?d=gallery&amp;s=brands">here</a> for the supported names and their icons.</dd></dl><pre><code>```yml source/_data/cutie.yml# As long as the name matches the font awesome icon name, you can add even more social linkssocial:  github: https://github.com/qutang  linkedin: https://www.linkedin.com/in/qutang```</code></pre><dl><dt>Default configuration</dt><dd>If configuration is omitted. No icons will be shown at the bottom right corner in the footer.</dd></dl><h2 id="Site-announcement"><a href="#Site-announcement" class="headerlink" title="Site announcement"></a>Site announcement</h2><dl><dt>Minimal version</dt><dd><code>v2.0.7</code></dd></dl><dl><dt>Configuration file</dt><dd><code>source/_data/cutie.yml</code></dd></dl><dl><dt>Configuration steps</dt><dd>1. Site announcement will display at the bottom left corner of home page as a purple box.<br>    2. Add following snippets to the configuration file to use, if omitted, site announcement is disabled.</dd></dl><pre><code>```yml source/_data/cutie.ymlglobal:  announcement:    text: This is a sample site announcement.```</code></pre><dl><dt>Notes</dt><dd>* The timeout duration for site announcement is 10s. The announcement popup will dismiss on click or on timeout.<br>    * You may use HTML markups in the announcement text. For example, you may add a link to the text.</dd></dl><h2 id="Site-header"><a href="#Site-header" class="headerlink" title="Site header"></a>Site header</h2><h3 id="Setup-site-logo"><a href="#Setup-site-logo" class="headerlink" title="Setup site logo"></a>Setup site logo</h3><dl><dt>Minimal version</dt><dd><code>v2.0.0-alpha</code></dd></dl><dl><dt>Configuration file</dt><dd><code>sources/_data/cutie.yml</code></dd></dl><dl><dt>Configuration format</dt><dd>Set variable <code>logo</code> to your own iconâ€™s link. Link can be either an external image link, or a relative link.</dd></dl><pre><code>```yml source/_data/cutie.ymllogo: /images/logo.svg```</code></pre><dl><dt>Default configuration</dt><dd>If configuration is omitted. the following image will be used as the logo image.</dd></dl><pre><code>![theme-icon](/images/logo.svg)</code></pre><h3 id="Setup-site-name-and-subtitle"><a href="#Setup-site-name-and-subtitle" class="headerlink" title="Setup site name and subtitle"></a>Setup site name and subtitle</h3><dl><dt>Minimal version</dt><dd><code>v2.0.0-alpha</code></dd></dl><dl><dt>Configuration file</dt><dd><code>_config.yml</code> of your site</dd></dl><dl><dt>Configuration format</dt><dd>Make sure your subtitle is not too log (better less than 30 characters).</dd></dl><pre><code>`title` is a standard Hexo configuration.`subtitle` is theme cutie's own configuration.```yml source/_data/cutie.ymltitle: Your site's titlesubtitle: Your site's subtitle```</code></pre><dl><dt>Default configuration</dt><dd>If configuration is omitted. You will not see any texts in the header.</dd></dl><dl><dt>Note</dt><dd>This configuration requires restarting the server.</dd></dl><h3 id="Setup-navigation-menu"><a href="#Setup-navigation-menu" class="headerlink" title="Setup navigation menu"></a>Setup navigation menu</h3><dl><dt>Minimal version</dt><dd><code>v2.0.0-alpha</code></dd></dl><dl><dt>Configuration file</dt><dd><code>sources/_data/cutie.yml</code></dd></dl><dl><dt>Configuration format</dt><dd>Add navigation item in the following format. link and icon can be external or internal. You can literally add any link to it.</dd></dl><pre><code>```yml source/_data/cutie.ymlmenu:  Resume:     link: /resume/  "Menu item":    link: /aaa/```</code></pre><dl><dt>Default configuration</dt><dd>If configuration is omitted. No text links will show up in the header navigation menu or in the dropdown menu on any view.</dd></dl><dl><dt>Notes</dt><dd>1. If there are more than four menu items, only the first four will be shown in the header (on desktop view). However, you can find all menu items in the last dropdown menu.<br>    2. Do not use a very long menu item name. No more than three words, because there is some display issue when the name gets long.<br>    3. Compared with <code>v1.x</code>, menu icon is no longer supported.</dd></dl><h2 id="Post"><a href="#Post" class="headerlink" title="Post"></a>Post</h2><h3 id="Use-Light-Gallery"><a href="#Use-Light-Gallery" class="headerlink" title="Use Light Gallery"></a>Use Light Gallery</h3><p>Theme cutie uses <a href="">Light Gallery</a> to support image modal display for <em>posts</em>. By default, it is enabled, but if you want to use other hexo plugins with similar functionality, you may want to disable it.</p><dl><dt>Minimal version</dt><dd><code>v2.0.5-beta</code></dd></dl><dl><dt>Configuration file</dt><dd><code>source/_data/cutie.yml</code></dd></dl><dl><dt>Configuration format</dt><dd>Set <code>use_lightgallery</code> to be <code>true</code> or <code>false</code> to enable or disable light gallery display for post images.</dd></dl><pre><code>```yml source/_data/cutie.ymlpost:  use_lightgallery: true```</code></pre><dl><dt>Default configuration</dt><dd>If configuration is omitted, by default light gallery is enabled for all posts.</dd></dl><dl><dt>Notes</dt><dd>It is currently not supported to enable or disable light gallery for an individual post.</dd></dl><h3 id="Use-post-version"><a href="#Use-post-version" class="headerlink" title="Use post version"></a>Use post version</h3><p>Theme cutie supports versioned post. Whenever the content of your post changes after you push your site, your visitors will see an unread badge on the post card in home page and archive pages.</p><p>Theme cutie uses Hashing and Cookie to track the post content change and the post content a visitor has last read. This feature does NOT use <code>leancloud</code> backend.</p><dl><dt>Minimal version</dt><dd><code>v2.0.8</code></dd></dl><h4 id="For-all-posts"><a href="#For-all-posts" class="headerlink" title="For all posts"></a>For all posts</h4><dl><dt>Configuration file</dt><dd><code>source/_data/cutie.yml</code></dd></dl><dl><dt>Configuration format</dt><dd>Set <code>enable_unread_badge</code> to be <code>true</code> to enable post versioning and unread badge or <code>false</code> to disable this feature for all the posts.</dd></dl><pre><code>```yml source/_data/cutie.yml---post:  enable_unread_badge: false---```</code></pre><dl><dt>Default configuration</dt><dd>If configuration is omitted, by default this feature is <strong>disabled</strong> for all posts.</dd></dl><h4 id="For-an-individual-post"><a href="#For-an-individual-post" class="headerlink" title="For an individual post"></a>For an individual post</h4><dl><dt>Configuration file</dt><dd>A postâ€™s front matter</dd></dl><dl><dt>Configuration format</dt><dd>Set <code>enable_unread_badge</code> to be <code>true</code> to enable post versioning and unread badge or <code>false</code> to disable this feature for the individual post.</dd></dl><pre><code>```yml post's front matter---enable_unread_badge: true---```</code></pre><dl><dt>Default configuration</dt><dd>If configuration is omitted, the setting will roll back to the unread badge setting for all the posts.</dd></dl><dl><dt>Notes</dt><dd>This setting has higher priority than the setting for all the posts.</dd></dl><h3 id="Setup-TOC-level"><a href="#Setup-TOC-level" class="headerlink" title="Setup TOC level"></a>Setup TOC level</h3><p>*[TOC]: Table of content</p><dl><dt>Minimal version</dt><dd><code>v2.0.5-beta</code></dd></dl><h4 id="For-all-posts-1"><a href="#For-all-posts-1" class="headerlink" title="For all posts"></a>For all posts</h4><dl><dt>Configuration file</dt><dd><code>source/_data/cutie.yml</code></dd></dl><dl><dt>Configuration format</dt><dd>Set <code>toc_level</code> under <code>post</code> to set the maximum level of headings in TOC for <em>all posts</em>. Allowed value is from <code>1</code> to <code>6</code>.</dd></dl><pre><code>```yml source/_data/cutie.ymlpost:  toc_level: 2```</code></pre><dl><dt>Default configuration</dt><dd>If this configuration is omitted, by default maximum TOC level is set to 2 (meaning <code>##</code> in markdown).</dd></dl><h4 id="For-an-individual-post-1"><a href="#For-an-individual-post-1" class="headerlink" title="For an individual post"></a>For an individual post</h4><dl><dt>Configuration file</dt><dd>A postâ€™s front matter</dd></dl><dl><dt>Configuration format</dt><dd>Use variable <code>toc_level</code> to set the maximum level of headings in TOC for <em>an individual posts</em>. Allowed value is from <code>1</code> to <code>6</code>.</dd></dl><pre><code>```yml---toc_level: 2---```</code></pre><dl><dt>Default configuration</dt><dd>If variable is omitted in the post front matter, setting will fall back to the <a href="#for-all-posts">all-post-toc-setting</a>.</dd></dl><h3 id="Setup-post-comment"><a href="#Setup-post-comment" class="headerlink" title="Setup post comment"></a>Setup post comment</h3><dl><dt>Minimal version</dt><dd><code>v2.0.5-beta</code></dd></dl><h4 id="For-all-posts-2"><a href="#For-all-posts-2" class="headerlink" title="For all posts"></a>For all posts</h4><dl><dt>Configuration file</dt><dd><code>source/_data/cutie.yml</code></dd></dl><dl><dt>Configuration format</dt><dd>Set <code>allow_comment</code> to be <code>true</code> or <code>false</code> to enable or disable comment section to be displayed for <em>all posts</em>.</dd></dl><pre><code>```yml source/_data/cutie.ymlpost:  allow_comment: true```</code></pre><dl><dt>Default configuration</dt><dd>If this configuration is omitted, by default comment section is enabled for all posts.</dd></dl><h4 id="For-an-individual-post-2"><a href="#For-an-individual-post-2" class="headerlink" title="For an individual post"></a>For an individual post</h4><dl><dt>Configuration file</dt><dd>A postâ€™s front matter</dd></dl><dl><dt>Configuration format</dt><dd>Use variable <code>allow_comment</code> to enable or disable comment section.</dd></dl><pre><code>```yml---allow_comment: true---```</code></pre><dl><dt>Default configuration</dt><dd>If variable is omitted in the post front matter, setting will fall back to the <a href="#for-all-posts-v2">all-post-comment-setting</a>.</dd></dl><h3 id="Setup-post-copyright"><a href="#Setup-post-copyright" class="headerlink" title="Setup post copyright"></a>Setup post copyright</h3><dl><dt>Minimal version</dt><dd><code>v2.0.5-beta</code></dd></dl><p>Theme cutie uses Creative Commons licenses for copyright configuration. We use three nested variables to cover the major licenses in Creative Commons.</p><ul><li><code>allow_share</code>: allow post to be shared (<code>true</code>) or not (<code>false</code>).<ul><li><code>allow_modification</code>: allow post to be modified while sharing when <code>true</code>.</li><li><code>allow_commercial</code>: allow post to be used for commercial purpose while sharing when <code>true</code>.</li></ul></li></ul><p>if <code>allow_share</code> is <code>false</code>, the other two variables will be ignored.</p><h4 id="For-all-posts-3"><a href="#For-all-posts-3" class="headerlink" title="For all posts"></a>For all posts</h4><dl><dt>Configuration file</dt><dd><code>source/_data/cutie.yml</code></dd></dl><dl><dt>Configuration format</dt><dd>Use the three variables under <code>post</code> to configure the all-post copyright setting.</dd></dl><pre><code>```yml source/_data/cutie.ymlpost:  allow_share: true  allow_modification: false  allow_commercial: false```</code></pre><dl><dt>Default configuration</dt><dd>If any of these configurations is omitted, the default setting for each one will fall back to following settings,<br>    * <code>allow_share: true</code>, by default allowing sharing all posts.<br>        * <code>allow_modification: false</code>, by default post is not allowed to be modified while sharing.<br>        * <code>allow_commercial: false</code>, by default post is not allowed to be used for commercial purposes while sharing.</dd></dl><pre><code>The corresponding default Creative Commons license is _CC BY-NC-ND 4.0_.</code></pre><h4 id="For-an-individual-post-3"><a href="#For-an-individual-post-3" class="headerlink" title="For an individual post"></a>For an individual post</h4><dl><dt>Configuration file</dt><dd>A postâ€™s front matter</dd></dl><dl><dt>Configuration format</dt><dd>Use the same three variables to configure copyright setting for a specific post.</dd></dl><pre><code>```yml---allow_share: trueallow_modification: falseallow_commercial: false---```</code></pre><dl><dt>Default configuration</dt><dd>If any of these variables is omitted in the post front matter, setting will fall back to the <a href="#for-all-posts-v3">all-post copyright setting</a>.</dd></dl><h3 id="Enable-post-visit-and-comment-counts"><a href="#Enable-post-visit-and-comment-counts" class="headerlink" title="Enable post visit and comment counts"></a>Enable post visit and comment counts</h3><dl><dt>Minimal version</dt><dd><code>v2.0.5-beta</code></dd></dl><dl><dt>Prerequiste</dt><dd>This functionality only works when you use <code>valine</code> as <a href="#comment-systems">comment system</a> and use <code>leancloud</code> as backend.</dd></dl><dl><dt>Configuration steps</dt><dd>1. Configure <code>valine</code> comment system as described <a href="#configuration-for-valine-comment-system">here</a>.<br>    2. You are all set and post visit counts and post comment counts will appear in all related pages.</dd></dl><dl><dt>Notes</dt><dd>* <em>If backend is not set up properly, icons that show post visit and comment counts will be hidden.</em><br>    * Post visit counts only <strong>unique</strong> visitors (meaning visitors with unique IPs).</dd></dl><h3 id="Enable-post-thumb-up"><a href="#Enable-post-thumb-up" class="headerlink" title="Enable post thumb up"></a>Enable post thumb up</h3><dl><dt>Minimal version</dt><dd><code>v2.1.0</code></dd></dl><dl><dt>Prerequiste</dt><dd>This functionality only works when you use <code>valine</code> as <a href="#comment-systems">comment system</a> and use <code>leancloud</code> as backend.</dd></dl><dl><dt>Configuration steps</dt><dd>1. Configure <code>valine</code> comment system as described <a href="#configuration-for-valine-comment-system">here</a>.<br>    2. You are all set and post thumb up and thumb up counts will appear in all related pages.</dd></dl><dl><dt>Notes</dt><dd>* <em>If backend is not set up properly, icons that show post thumbup status and counts will be hidden.</em><br>    * Post thumb up counts only <strong>unique</strong> visitors (meaning visitors with unique IPs).</dd></dl><h3 id="Use-post-announcement"><a href="#Use-post-announcement" class="headerlink" title="Use post announcement"></a>Use post announcement</h3><dl><dt>Minimal version</dt><dd><code>v2.0.7</code></dd></dl><dl><dt>Configuration file</dt><dd>postâ€™s front matter</dd></dl><dl><dt>Configuration steps</dt><dd>Use following snippet to add your post annoucement</dd></dl><pre><code>```yml post's front matter---announcement:  text: This is a sample post announcement!---```</code></pre><dl><dt>Notes</dt><dd>* The default timeout for the announcement is 10 seconds. Note configurable for now.<br>    * You may use HTML markups in the announcement text.</dd></dl><h3 id="Set-post-excerpt"><a href="#Set-post-excerpt" class="headerlink" title="Set post excerpt"></a>Set post excerpt</h3><p>The post excerpt, displayed in the index page card on hover, may be manually set through front matter or adding the <code>&lt;!-- more --&gt;</code> tag plugin in the post.</p><dl><dt>Minimal version</dt><dd><code>v2.0.11</code></dd></dl><dl><dt>Configuration file</dt><dd>postâ€™s front matter, or tag plugin</dd></dl><dl><dt>Configuration waterfall</dt><dd><code>abstract</code> variable in the front matter has the highest priority if set.</dd></dl><pre><code>```yml post's front matter---abstract: A sample excerpt.---```If `abstract` is not set, theme cutie will search `&lt;!-- more --&gt;` tag in the post content to identify the excerpt section and cut off the first 150 characters to be used as excerpt.If both `abstract` and `&lt;!-- more --&gt;` are omitted, theme cutie will automatically chunk the first 150 characters in the post content to be used as excerpt.</code></pre><h3 id="Set-post-icon"><a href="#Set-post-icon" class="headerlink" title="Set post icon"></a>Set post icon</h3><p>The post icon, displayed on the top left cornder of the index page card, may be manually set through front matter in the post.</p><dl><dt>Minimal version</dt><dd><code>v2.0.0</code></dd></dl><dl><dt>Configuration file</dt><dd>postâ€™s front matter</dd></dl><dl><dt>Configuration waterfall</dt><dd>If <code>icon</code> variable in the post front matter is set, the system will use this icon for post.</dd></dl><pre><code>```yml post's front matter---icon: /your/post/icon/path---```I recommend you to use absolute path (starting with `/`) for the image path.If `icon` variable is not set, but post belongs to category `notes` or `projects`, the system will use the default category icon for the post.If both conditions are not satisified, the system will use a randomly generated texture image for the post.</code></pre><h2 id="Icon-sets"><a href="#Icon-sets" class="headerlink" title="Icon sets"></a>Icon sets</h2><h3 id="Select-an-icon-set"><a href="#Select-an-icon-set" class="headerlink" title="Select an icon set"></a>Select an icon set</h3><dl><dt>Minimal version</dt><dd><code>v2.0.5-beta</code></dd></dl><dl><dt>Configuration file</dt><dd><code>source/_data/cutie.yml</code></dd></dl><dl><dt>Configuration format</dt><dd>Change icon set by changing the name of the icon set in the following snippet. There are three available icon sets in the theme by default: <code>blue-line</code>, <code>blue-shadow</code>, and <code>colorful-outlined</code>.</dd></dl><pre><code>```yml source/_data/cutie.ymlglobal:  icon_set: blue-line # Available values in theme: blue-line, blue-shadow, colorful-outlined```</code></pre><dl><dt>Default configuration</dt><dd><code>blue-line</code></dd></dl><p>Illustration</p><h3 id="Add-a-new-icon-set"><a href="#Add-a-new-icon-set" class="headerlink" title="Add a new icon set"></a>Add a new icon set</h3><dl><dt>Minimal version</dt><dd><code>v2.0.5-beta</code></dd></dl><dl><dt>Configuration path</dt><dd><code>source/images/</code></dd></dl><dl><dt>Configuration steps</dt><dd>1. Create a folder named <code>icons</code> in <code>source/images/</code> folder.<br>    2. Create an icon set folder <code>icon-set-name</code>(change it to your desired name) in <code>source/images/icons/</code> folder.<br>    3. Add your own four icons (keep the filename consistent) in <code>svg</code> format to <code>source/images/icons/icon-set-name/</code> folder.<br>        1. <code>search.svg</code><br>        2. <code>archive.svg</code><br>        3. <code>menu.svg</code><br>        4. <code>toc.svg</code><br>    4. Use your new icon set name <code>icon-set-name</code> in <a href="#select-an-existing-icon-set">Select an existing icon set</a></dd></dl><h2 id="Comment-systems"><a href="#Comment-systems" class="headerlink" title="Comment systems"></a>Comment systems</h2><h3 id="Select-comment-systems"><a href="#Select-comment-systems" class="headerlink" title="Select comment systems"></a>Select comment systems</h3><dl><dt>Minimal version</dt><dd><code>v2.0.0-alpha</code></dd></dl><dl><dt>User configuration location</dt><dd><code>source/_data/cutie.yml</code></dd></dl><dl><dt>Configuration format</dt><dd><code>yml comment system     global:       comment_system: valine # Available values: valine, gitment, disqus     </code></dd></dl><dl><dt>Possible values</dt><dd><code>valine</code>(default), <code>gitment</code>, <code>disqus</code>, <code>livere</code></dd></dl><p>After selecting one of the comment systems, you need to further configure it.</p><h3 id="Configuration-for-valine-comment-system"><a href="#Configuration-for-valine-comment-system" class="headerlink" title="Configuration for valine comment system"></a>Configuration for valine comment system</h3><dl><dt>Minimal version</dt><dd><code>v2.0.0-alpha</code></dd></dl><dl><dt>User configuration location</dt><dd><code>source/_data/cutie.yml</code></dd></dl><dl><dt>Configuration format</dt><dd><code>yml valine configuration     valine:       appId:       appKey:       placeholder:     </code><br>    See <a href="https://valine.js.org/">https://valine.js.org</a> to setup the backend and fill the values.</dd></dl><dl><dt>Default values</dt><dd>No default values, must fill if using the system.</dd></dl><h3 id="Configuration-for-gitment-comment-system"><a href="#Configuration-for-gitment-comment-system" class="headerlink" title="Configuration for gitment comment system"></a>Configuration for gitment comment system</h3><dl><dt>Minimal version</dt><dd><code>v2.0.0-alpha</code></dd></dl><dl><dt>User configuration location</dt><dd><code>source/_data/cutie.yml</code></dd></dl><dl><dt>Configuration format</dt><dd><code>yml gitment configuration     gitment:       owner:       repo:       client_id:       client_secret:     </code><br>    See <a href="https://github.com/imsun/gitment">https://github.com/imsun/gitment</a> to setup the backend and fill the values.</dd></dl><dl><dt>Default values</dt><dd>No default values, must fill if using the system.</dd></dl><h3 id="Configuration-for-Disqus-comment-system"><a href="#Configuration-for-Disqus-comment-system" class="headerlink" title="Configuration for Disqus comment system"></a>Configuration for Disqus comment system</h3><dl><dt>Minimal version</dt><dd><code>v2.0.0-alpha</code></dd></dl><dl><dt>User configuration location</dt><dd><code>source/_data/cutie.yml</code></dd></dl><dl><dt>Configuration format</dt><dd><code>yml disqus configuration     disqus:       shortname:     </code><br>    See <a href="https://help.disqus.com/customer/portal/articles/466208-what-s-a-shortname-">https://help.disqus.com/customer/portal/articles/466208-what-s-a-shortname-</a> to setup the backend and fill the value.</dd></dl><dl><dt>Default values</dt><dd>No default values, must fill if using the system.</dd></dl><h3 id="Configuration-for-Livere-comment-system"><a href="#Configuration-for-Livere-comment-system" class="headerlink" title="Configuration for Livere comment system"></a>Configuration for Livere comment system</h3><dl><dt>Minimal version</dt><dd><code>v2.0.11</code></dd></dl><dl><dt>User configuration location</dt><dd><code>source/_data/cutie.yml</code></dd></dl><dl><dt>Configuration format</dt><dd><code>yml livere configuration     livere:       id: 'city' # use 'city' if using free version or `premium` if using paid version       uid:      </code><br>    The <code>uid</code> is the string you will see in the snippet provided by livere during installation, as shown in the following screenshot.</dd></dl><pre><code>![Livere setup screenshot](livere_setup.png)</code></pre><dl><dt>Default values</dt><dd>No default values, must fill if using the system.</dd></dl>]]></content>
      
      
      <categories>
          
          <category> notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> cutie </tag>
            
            <tag> tutorial </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typography and tags</title>
      <link href="/My-Blogs/2017/12/20/hexo/Typography%20and%20tags/"/>
      <url>/My-Blogs/2017/12/20/hexo/Typography%20and%20tags/</url>
      
        <content type="html"><![CDATA[<p><img src="/My-Blogs/images/lake.png" alt="$cover"></p><h1 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h1><hr><p>This post uses <code>hexo-renderer-markdown-it</code> plugin as markdown processor, so please install it to achieve the effect.</p><pre><code class="bash">npm un hexo-renderer-marked --savenpm i hexo-renderer-markdown-it --savenpm i markdown-it-emoji --savenpm i markdown-it-mark --savenpm i markdown-it-deflist --savenpm i markdown-it-container --save</code></pre><h1 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h1><p>Add following to <code>_config.yml</code> of your site.</p><pre><code class="yml">markdown:  render:    html: true    xhtmlOut: false    breaks: false    linkify: true    typographer: true    quotes: 'â€œâ€â€˜â€™'  plugins:    - markdown-it-abbr    - markdown-it-footnote    - markdown-it-ins    - markdown-it-sub    - markdown-it-sup    - markdown-it-deflist  anchors:    level: 2    collisionSuffix: 'v'    permalink: false    permalinkClass: header-anchor    permalinkSymbol: " "    permalinkBefore: false</code></pre><h1 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h1><hr><h2 id="Headings"><a href="#Headings" class="headerlink" title="Headings"></a>Headings</h2><pre><code class="markdown"># h1 Heading 8-)## h2 Heading### h3 Heading#### h4 Heading##### h5 Heading###### h6 Heading</code></pre><h1 id="h1-Heading-8"><a href="#h1-Heading-8" class="headerlink" title="h1 Heading 8-)"></a>h1 Heading 8-)</h1><h2 id="h2-Heading"><a href="#h2-Heading" class="headerlink" title="h2 Heading"></a>h2 Heading</h2><h3 id="h3-Heading"><a href="#h3-Heading" class="headerlink" title="h3 Heading"></a>h3 Heading</h3><h4 id="h4-Heading"><a href="#h4-Heading" class="headerlink" title="h4 Heading"></a>h4 Heading</h4><h5 id="h5-Heading"><a href="#h5-Heading" class="headerlink" title="h5 Heading"></a>h5 Heading</h5><h6 id="h6-Heading"><a href="#h6-Heading" class="headerlink" title="h6 Heading"></a>h6 Heading</h6><h2 id="Horizontal-Rules"><a href="#Horizontal-Rules" class="headerlink" title="Horizontal Rules"></a>Horizontal Rules</h2><pre><code class="markdown">___---***</code></pre><hr><hr><hr><h2 id="Typographic-replacements"><a href="#Typographic-replacements" class="headerlink" title="Typographic replacements"></a>Typographic replacements</h2><pre><code class="markdown">(c) (C) (r) (R) (tm) (TM) (p) (P) +-test.. test... test..... test?..... test!....!!!!!! ???? ,,  -- ---"Smartypants, double quotes" and 'single quotes'</code></pre><p>(c) (C) (r) (R) (tm) (TM) (p) (P) +-</p><p>test.. testâ€¦ testâ€¦.. test?â€¦.. test!â€¦.</p><p>!!!!!! ???? ,,  â€“ â€”</p><p>â€œSmartypants, double quotesâ€ and â€˜single quotesâ€™</p><h2 id="Emphasis"><a href="#Emphasis" class="headerlink" title="Emphasis"></a>Emphasis</h2><pre><code class="markdown">**This is bold text**__This is bold text__*This is italic text*_This is italic text_~~Strikethrough~~</code></pre><p><strong>This is bold text</strong></p><p><strong>This is bold text</strong></p><p><em>This is italic text</em></p><p><em>This is italic text</em></p><p><del>Strikethrough</del></p><h2 id="Blockquotes"><a href="#Blockquotes" class="headerlink" title="Blockquotes"></a>Blockquotes</h2><pre><code class="markdown">&gt; Blockquotes can also be nested...&gt;&gt; ...by using additional greater-than signs right next to each other...&gt; &gt; &gt; ...or with spaces between arrows.</code></pre><blockquote><p>Blockquotes can also be nestedâ€¦</p><blockquote><p>â€¦by using additional greater-than signs right next to each otherâ€¦</p><blockquote><p>â€¦or with spaces between arrows.</p></blockquote></blockquote></blockquote><h2 id="Lists"><a href="#Lists" class="headerlink" title="Lists"></a>Lists</h2><h3 id="Unordered"><a href="#Unordered" class="headerlink" title="Unordered"></a>Unordered</h3><pre><code class="markdown">+ Create a list by starting a line with `+`, `-`, or `*`+ Sub-lists are made by indenting 2 spaces:  - Marker character change forces new list start:    * Ac tristique libero volutpat at    + Facilisis in pretium nisl aliquet    - Nulla volutpat aliquam velit+ Very easy!</code></pre><ul><li>Create a list by starting a line with <code>+</code>, <code>-</code>, or <code>*</code></li><li>Sub-lists are made by indenting 2 spaces:<ul><li>Marker character change forces new list start:<ul><li>Ac tristique libero volutpat at</li></ul><ul><li>Facilisis in pretium nisl aliquet</li></ul><ul><li>Nulla volutpat aliquam velit</li></ul></li></ul></li><li>Very easy!</li></ul><h3 id="Ordered"><a href="#Ordered" class="headerlink" title="Ordered"></a>Ordered</h3><pre><code class="markdown">1. Lorem ipsum dolor sit amet  1. Indented list    1. Another level  2. Indent2. Consectetur adipiscing elit3. Integer molestie lorem at massa</code></pre><ol><li>Lorem ipsum dolor sit amet</li><li>Indented list<ol><li>Another level</li></ol></li><li>Indent</li><li>Consectetur adipiscing elit</li><li>Integer molestie lorem at massa</li></ol><pre><code class="markdown">1. You can use sequential numbers...1. ...or keep all the numbers as `1.`</code></pre><ol><li>You can use sequential numbersâ€¦</li><li>â€¦or keep all the numbers as <code>1.</code></li></ol><h4 id="Start-numbering-with-offset"><a href="#Start-numbering-with-offset" class="headerlink" title="Start numbering with offset:"></a>Start numbering with offset:</h4><pre><code class="markdown">57. foo1. bar</code></pre><ol start="57"><li>foo</li><li>bar</li></ol><h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><pre><code class="markdown">Inline `code`</code></pre><p>Inline <code>code</code></p><h3 id="Indented-code"><a href="#Indented-code" class="headerlink" title="Indented code"></a>Indented code</h3><pre><code class="markdown">// Some comments    line 1 of code    line 2 of code    line 3 of code</code></pre><pre><code>// Some commentsline 1 of codeline 2 of codeline 3 of code</code></pre><h3 id="Block-code-â€œfencesâ€"><a href="#Block-code-â€œfencesâ€" class="headerlink" title="Block code â€œfencesâ€"></a>Block code â€œfencesâ€</h3><pre><code class="markdown">```Sample text here...```</code></pre><pre><code>Sample text here...</code></pre><p>Syntax highlighting</p><pre><code class="markdown">``` js sample.jsvar foo = function (bar) {  return bar++;};console.log(foo(5));```</code></pre><pre><code class="js">var foo = function (bar) {  return bar++;};console.log(foo(5));</code></pre><h2 id="Tables"><a href="#Tables" class="headerlink" title="Tables"></a>Tables</h2><pre><code class="markdown">| Option | Description |Description | Description | Description | Description || ------ | ----------- |----------- | ----------- | ----------- | ----------- || data   | path to data files to supply the data that will be passed into templates. || engine | engine to be used for processing templates. Handlebars is the default. || ext    | extension to be used for dest files. |</code></pre><table><thead><tr><th>Option</th><th>Description</th><th>Description</th><th>Description</th><th>Description</th><th>Description</th></tr></thead><tbody><tr><td>data</td><td>path to data files to supply the data that will be passed into templates.</td><td></td><td></td><td></td><td></td></tr><tr><td>engine</td><td>engine to be used for processing templates. Handlebars is the default.</td><td></td><td></td><td></td><td></td></tr><tr><td>ext</td><td>extension to be used for dest files.</td><td></td><td></td><td></td><td></td></tr></tbody></table><h3 id="Right-aligned-columns"><a href="#Right-aligned-columns" class="headerlink" title="Right aligned columns"></a>Right aligned columns</h3><pre><code class="markdown">| Option | Description || ------:| -----------:|| data   | path to data files to supply the data that will be passed into templates. || engine | engine to be used for processing templates. Handlebars is the default. || ext    | extension to be used for dest files. |</code></pre><table><thead><tr><th align="right">Option</th><th align="right">Description</th></tr></thead><tbody><tr><td align="right">data</td><td align="right">path to data files to supply the data that will be passed into templates.</td></tr><tr><td align="right">engine</td><td align="right">engine to be used for processing templates. Handlebars is the default.</td></tr><tr><td align="right">ext</td><td align="right">extension to be used for dest files.</td></tr></tbody></table><h2 id="Links"><a href="#Links" class="headerlink" title="Links"></a>Links</h2><pre><code class="markdown">[link text](http://dev.nodeca.com)</code></pre><p><a href="http://dev.nodeca.com/">link text</a></p><pre><code class="markdown">[link with title](http://nodeca.github.io/pica/demo/ "title text!")</code></pre><p><a href="http://nodeca.github.io/pica/demo/" title="title text!">link with title</a></p><pre><code class="markdown">Autoconverted link https://github.com/nodeca/pica (enabled linkify)</code></pre><p>Autoconverted link <a href="https://github.com/nodeca/pica">https://github.com/nodeca/pica</a> (enabled linkify)</p><h2 id="Images"><a href="#Images" class="headerlink" title="Images"></a>Images</h2><pre><code class="markdown">![Minion](https://octodex.github.com/images/minion.png)![Stormtroopocat](https://octodex.github.com/images/stormtroopocat.jpg "The Stormtroopocat")</code></pre><p><img src="https://octodex.github.com/images/minion.png" alt="Minion"><br><img src="https://octodex.github.com/images/stormtroopocat.jpg" alt="Stormtroopocat" title="The Stormtroopocat"></p><p>Like links, Images also have a footnote style syntax</p><pre><code class="markdown">![Alt text][id]With a reference later in the document defining the URL location:[id]: https://octodex.github.com/images/dojocat.jpg  "The Dojocat"</code></pre><p><img src="https://octodex.github.com/images/dojocat.jpg" alt="Alt text" title="The Dojocat"></p><p>With a reference later in the document defining the URL location:</p><h2 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h2><p>The killer feature of <code>markdown-it</code> is very effective support of<br><a href="https://www.npmjs.org/browse/keyword/markdown-it-plugin">syntax plugins</a>. The sample <a href="#configuration">configuration snippet</a></p><h3 id="Emojies"><a href="#Emojies" class="headerlink" title="Emojies"></a><a href="https://github.com/markdown-it/markdown-it-emoji">Emojies</a></h3><pre><code class="markdown">Classic markup: :wink: :crush: :cry: :tear: :laughing: :yum:Shortcuts (emoticons): :-) :-( 8-) ;)</code></pre><p>Classic markup: <span class="github-emoji"><span>ğŸ˜‰</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f609.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> :crush: <span class="github-emoji"><span>ğŸ˜¢</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> :tear: <span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <span class="github-emoji"><span>ğŸ˜‹</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60b.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p>Shortcuts (emoticons): :-) :-( 8-) ;)</p><h3 id="Subscript-Superscript"><a href="#Subscript-Superscript" class="headerlink" title="Subscript / Superscript"></a><a href="https://github.com/markdown-it/markdown-it-sub">Subscript</a> / <a href="https://github.com/markdown-it/markdown-it-sup">Superscript</a></h3><pre><code class="markdown">Superscript: 19^th^Subscript: H~2~O</code></pre><p>Superscript: 19^th^</p><p>Subscript: H<del>2</del>O</p><h3 id="lt-ins-gt"><a href="#lt-ins-gt" class="headerlink" title="<ins>"></a><a href="https://github.com/markdown-it/markdown-it-ins">&lt;ins&gt;</a></h3><pre><code class="markdown">++Inserted text++</code></pre><p>++Inserted text++</p><h3 id="lt-mark-gt"><a href="#lt-mark-gt" class="headerlink" title="<mark>"></a><a href="https://github.com/markdown-it/markdown-it-mark">&lt;mark&gt;</a></h3><pre><code class="markdown">==Marked text==</code></pre><p>==Marked text==</p><h3 id="Footnotes"><a href="#Footnotes" class="headerlink" title="Footnotes"></a><a href="https://github.com/markdown-it/markdown-it-footnote">Footnotes</a></h3><pre><code class="markdown">Footnote 1 link[^first].Footnote 2 link[^second].Inline footnote^[Text of inline footnote] definition.Duplicated footnote reference[^second].[^first]: Footnote **can have markup**    and multiple paragraphs.[^second]: Footnote text.</code></pre><p>Footnote 1 link[^first].</p><p>Footnote 2 link[^second].</p><p>Inline footnote^[Text of inline footnote] definition.</p><p>Duplicated footnote reference[^second].</p><p>[^first]: Footnote <strong>can have markup</strong></p><pre><code>and multiple paragraphs.</code></pre><p>[^second]: Footnote text.</p><h3 id="Definition-lists"><a href="#Definition-lists" class="headerlink" title="Definition lists"></a><a href="https://github.com/markdown-it/markdown-it-deflist">Definition lists</a></h3><pre><code class="markdown">Term 1:   Definition 1with lazy continuation.</code></pre><dl><dt>Term 1</dt><dd>Definition 1<br>with lazy continuation.</dd></dl><pre><code class="markdown">Term 2 with *inline markup*:   Definition 2        { some code, part of Definition 2 }    Third paragraph of definition 2.</code></pre><dl><dt>Term 2 with <em>inline markup</em></dt><dd>Definition 2</dd></dl><pre><code>    { some code, part of Definition 2 }Third paragraph of definition 2.</code></pre><p><em>Compact style:</em></p><pre><code class="markdown">Term 1  ~ Definition 1Term 2  ~ Definition 2a  ~ Definition 2b</code></pre><p>Term 1<br>  ~ Definition 1</p><p>Term 2<br>  ~ Definition 2a<br>  ~ Definition 2b</p><h3 id="Abbreviations"><a href="#Abbreviations" class="headerlink" title="Abbreviations"></a><a href="https://github.com/markdown-it/markdown-it-abbr">Abbreviations</a></h3><pre><code class="markdown">This is HTML abbreviation example.It converts "HTML", but keep intact partial entries like "xxxHTMLyyy" and so on.*[HTML]: Hyper Text Markup Language</code></pre><p>This is HTML abbreviation example.</p><p>It converts â€œHTMLâ€, but keep intact partial entries like â€œxxxHTMLyyyâ€ and so on.</p><p>*[HTML]: Hyper Text Markup Language</p><h3 id="Custom-containers"><a href="#Custom-containers" class="headerlink" title="Custom containers"></a><a href="https://github.com/markdown-it/markdown-it-container">Custom containers</a></h3><p>::: warning<br><em>here be dragons</em><br>:::</p><h2 id="Hexo-Built-in-Tags"><a href="#Hexo-Built-in-Tags" class="headerlink" title="Hexo Built-in Tags"></a>Hexo Built-in Tags</h2><h3 id="Blockquote-with-author"><a href="#Blockquote-with-author" class="headerlink" title="Blockquote with author"></a>Blockquote with author</h3><pre><code class="swig">{% blockquote David Levithan, Wide Awake %}Do not just seek happiness for yourself. Seek happiness for all. Through kindness. Through mercy.{% endblockquote %}</code></pre><blockquote><p>Do not just seek happiness for yourself. Seek happiness for all. Through kindness. Through mercy.</p><footer><strong>David Levithan</strong><cite>Wide Awake</cite></footer></blockquote><h3 id="Blockquote-for-twitter"><a href="#Blockquote-for-twitter" class="headerlink" title="Blockquote for twitter"></a>Blockquote for twitter</h3><pre><code class="swig">{% blockquote @DevDocs https://twitter.com/devdocs/status/356095192085962752 %}NEW: DevDocs now comes with syntax highlighting. http://devdocs.io{% endblockquote %}</code></pre><blockquote><p>NEW: DevDocs now comes with syntax highlighting. <a href="http://devdocs.io/">http://devdocs.io</a></p><footer><strong>@DevDocs</strong><cite><a href="https://twitter.com/devdocs/status/356095192085962752">twitter.com/devdocs/status/356095192085962752</a></cite></footer></blockquote><h3 id="Blockquote-for-weblink"><a href="#Blockquote-for-weblink" class="headerlink" title="Blockquote for weblink"></a>Blockquote for weblink</h3><pre><code class="swig">{% blockquote Seth Godin http://sethgodin.typepad.com/seths_blog/2009/07/welcome-to-island-marketing.html Welcome to Island Marketing %}Every interaction is both precious and an opportunity to delight.{% endblockquote %}</code></pre><blockquote><p>Every interaction is both precious and an opportunity to delight.</p><footer><strong>Seth Godin</strong><cite><a href="http://sethgodin.typepad.com/seths_blog/2009/07/welcome-to-island-marketing.html">Welcome to Island Marketing</a></cite></footer></blockquote><h3 id="Pull-Quotes"><a href="#Pull-Quotes" class="headerlink" title="Pull Quotes"></a>Pull Quotes</h3><pre><code class="swig">{% pullquote %}content{% endpullquote %}</code></pre><blockquote class="pullquote"><p>content</p></blockquote><h3 id="jsFiddle"><a href="#jsFiddle" class="headerlink" title="jsFiddle"></a>jsFiddle</h3><pre><code class="swig">{% jsfiddle o2gxgz9r default light %}</code></pre><iframe scrolling="no" width="100%" height="300" src="https://jsfiddle.net/o2gxgz9r/embedded/js,resources,html,css,result/light" frameborder="0" loading="lazy" allowfullscreen=""></iframe><h3 id="Gist"><a href="#Gist" class="headerlink" title="Gist"></a>Gist</h3><pre><code class="swig">{% gist b6365e79be6052e7531e7ba6ea8caf23 'Sample gist' %}</code></pre><script src="//gist.github.com/b6365e79be6052e7531e7ba6ea8caf23.js?file=Sample gist"></script><h3 id="iFrame"><a href="#iFrame" class="headerlink" title="iFrame"></a>iFrame</h3><pre><code class="swig">{% iframe https://www.bing.com %}</code></pre><iframe src="https://www.bing.com/" width="100%" height="300" frameborder="0" loading="lazy" allowfullscreen=""></iframe><h3 id="Link-to-open-in-new-tab"><a href="#Link-to-open-in-new-tab" class="headerlink" title="Link to open in new tab"></a>Link to open in new tab</h3><pre><code class="swig">{% link Google https://www.google.com default Google %}</code></pre><a href="https://www.google.com/" title="default Google" target="">Google</a><h3 id="Youtube"><a href="#Youtube" class="headerlink" title="Youtube"></a>Youtube</h3><pre><code class="swig">{% youtube l_lblj8Cq0o %}</code></pre><div class="video-container"><iframe src="https://www.youtube.com/embed/l_lblj8Cq0o" frameborder="0" loading="lazy" allowfullscreen=""></iframe></div>]]></content>
      
      
      <categories>
          
          <category> notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> typography </tag>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Tag Plugins</title>
      <link href="/My-Blogs/2013/12/25/hexo/tag-plugins/"/>
      <url>/My-Blogs/2013/12/25/hexo/tag-plugins/</url>
      
        <content type="html"><![CDATA[<p>This post is used for testing tag plugins. See <a href="http://zespia.tw/hexo/docs/tag-plugins.html">docs</a> for more info.</p><h2 id="Block-Quote"><a href="#Block-Quote" class="headerlink" title="Block Quote"></a>Block Quote</h2><h3 id="Normal-blockquote"><a href="#Normal-blockquote" class="headerlink" title="Normal blockquote"></a>Normal blockquote</h3><blockquote><p>Praesent diam elit, interdum ut pulvinar placerat, imperdiet at magna.</p></blockquote><h3 id="Quote-from-a-book"><a href="#Quote-from-a-book" class="headerlink" title="Quote from a book"></a>Quote from a book</h3><blockquote><p>Do not just seek happiness for yourself. Seek happiness for all. Through kindness. Through mercy.</p><footer><strong>David Levithan</strong><cite>Wide Awake</cite></footer></blockquote><h3 id="Quote-from-Twitter"><a href="#Quote-from-Twitter" class="headerlink" title="Quote from Twitter"></a>Quote from Twitter</h3><blockquote><p>NEW: DevDocs now comes with syntax highlighting. <a href="http://devdocs.io/">http://devdocs.io</a></p><footer><strong>@DevDocs</strong><cite><a href="https://twitter.com/devdocs/status/356095192085962752">twitter.com/devdocs/status/356095192085962752</a></cite></footer></blockquote><h3 id="Quote-from-an-article-on-the-web"><a href="#Quote-from-an-article-on-the-web" class="headerlink" title="Quote from an article on the web"></a>Quote from an article on the web</h3><blockquote><p>Every interaction is both precious and an opportunity to delight.</p><footer><strong>Seth Godin</strong><cite><a href="http://sethgodin.typepad.com/seths_blog/2009/07/welcome-to-island-marketing.html">Welcome to Island Marketing</a></cite></footer></blockquote><h2 id="Code-Block"><a href="#Code-Block" class="headerlink" title="Code Block"></a>Code Block</h2><h3 id="Normal-code-block"><a href="#Normal-code-block" class="headerlink" title="Normal code block"></a>Normal code block</h3><pre><code>alert('Hello World!');</code></pre><h3 id="With-caption"><a href="#With-caption" class="headerlink" title="With caption"></a>With caption</h3><pre><code>array.map(callback[, thisArg])</code></pre><h3 id="With-caption-and-URL"><a href="#With-caption-and-URL" class="headerlink" title="With caption and URL"></a>With caption and URL</h3><pre><code>.compact([0, 1, false, 2, â€˜â€™, 3]);=&gt; [1, 2, 3]</code></pre><h3 id="With-marked-lines"><a href="#With-marked-lines" class="headerlink" title="With marked lines"></a>With marked lines</h3><p>Line 1,7-8,10 should be marked with different color.</p><pre><code>const http = require('http');const hostname = '127.0.0.1';const port = 1337;http.createServer((req, res) =&gt; {  res.writeHead(200, { 'Content-Type': 'text/plain' });  res.end('Hello World\n');}).listen(port, hostname, () =&gt; {  console.log(`Server running at http://${hostname}:${port}/`);});</code></pre><p>Note: Themeâ€™s style should support <code>.highlight.line.marked</code> (recommend to use the selection or current line color).</p><h3 id="Gist"><a href="#Gist" class="headerlink" title="Gist"></a>Gist</h3><script src="//gist.github.com/996818.js"></script><h3 id="jsFiddle"><a href="#jsFiddle" class="headerlink" title="jsFiddle"></a>jsFiddle</h3><iframe scrolling="no" width="100%" height="300" src="https://jsfiddle.net/ccWP7/embedded/js,resources,html,css,result/light" frameborder="0" loading="lazy" allowfullscreen=""></iframe><h2 id="Pullquote"><a href="#Pullquote" class="headerlink" title="Pullquote"></a>Pullquote</h2><h3 id="Left"><a href="#Left" class="headerlink" title="Left"></a>Left</h3><blockquote class="pullquote left"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p></blockquote><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas tempus molestie arcu, et fringilla mauris placerat ac. Nullam luctus bibendum risus. Ut cursus sed ipsum feugiat egestas. Suspendisse elementum, velit eu consequat consequat, augue lorem dapibus libero, eget pulvinar dolor est sit amet nulla. Suspendisse a porta tortor, et posuere mi. Pellentesque ultricies, mi quis volutpat malesuada, erat felis vulputate nisl, ac congue ante tortor ut ante. Proin aliquam sem vel mauris tincidunt, eget scelerisque tortor euismod. Nulla tincidunt enim nec commodo dictum. Mauris id sapien et orci gravida luctus id ut dui. In vel vulputate odio. Duis vel turpis molestie, scelerisque enim eu, lobortis eros. Cras at ipsum gravida, sagittis ante vel, viverra tellus. Nunc mauris turpis, elementum ullamcorper nisl pretium, ultrices cursus justo. Mauris porttitor commodo eros, ac ornare orci interdum in. Cras fermentum cursus leo sed mattis. In dignissim lorem sem, sit amet elementum mauris venenatis ac.</p><h3 id="Right"><a href="#Right" class="headerlink" title="Right"></a>Right</h3><blockquote class="pullquote right"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p></blockquote><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed ligula justo, lobortis sit amet semper vel, dignissim sit amet libero. Praesent ac tempus ligula. Maecenas at gravida odio. Etiam tristique volutpat lacus eu faucibus. Donec non tempus arcu. Phasellus adipiscing, mauris nec mollis egestas, ipsum nunc auctor velit, et rhoncus lorem ipsum at ante. Praesent et sem in velit volutpat auctor. Duis vel mauris nulla. Maecenas mattis interdum ante, quis sagittis nibh cursus et. Nulla facilisi. Morbi convallis gravida tortor, ut fermentum enim gravida et. Nunc vel dictum nisl, non ultrices libero. Proin vestibulum felis eget orci consectetur lobortis. Vestibulum augue nulla, iaculis vitae augue vehicula, dignissim ultrices libero. Sed imperdiet urna et quam ultrices tincidunt nec ac magna. Etiam vel pharetra elit.</p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
