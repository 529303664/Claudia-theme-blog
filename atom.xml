<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>John Doe&#39;s blog</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2021-01-23T09:15:30.422Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>John Doe</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="http://example.com/2021/01/23/%E8%81%8C%E4%B8%9A%E8%A7%84%E5%88%92/%E4%B8%AA%E4%BA%BA%E6%8A%A4%E5%9F%8E%E6%B2%B3/"/>
    <id>http://example.com/2021/01/23/%E8%81%8C%E4%B8%9A%E8%A7%84%E5%88%92/%E4%B8%AA%E4%BA%BA%E6%8A%A4%E5%9F%8E%E6%B2%B3/</id>
    <published>2021-01-23T09:15:30.422Z</published>
    <updated>2021-01-23T09:15:30.422Z</updated>
    
    <content type="html"><![CDATA[<h3 id="æˆ‘æœ€å–œæ¬¢çš„èŒä¸šå»ºè®®æ˜¯å‘å±•â€ä¸ªäººæŠ¤åŸæ²³â€œã€‚"><a href="#æˆ‘æœ€å–œæ¬¢çš„èŒä¸šå»ºè®®æ˜¯å‘å±•â€ä¸ªäººæŠ¤åŸæ²³â€œã€‚" class="headerlink" title="æˆ‘æœ€å–œæ¬¢çš„èŒä¸šå»ºè®®æ˜¯å‘å±•â€ä¸ªäººæŠ¤åŸæ²³â€œã€‚"></a>æˆ‘æœ€å–œæ¬¢çš„èŒä¸šå»ºè®®æ˜¯å‘å±•â€<a href="https://eriktorenberg.substack.com/p/build-personal-moats">ä¸ªäººæŠ¤åŸæ²³</a>â€œã€‚</h3><br><p><img src="https://www.wangbase.com/blogimg/asset/202009/bg2020092807.jpg" alt="image"></p><br><p>ä½ çš„ä¸ªäººæŠ¤åŸæ²³æ˜¯ä¸€ç»„ç‹¬ç‰¹çš„ä¸”ä¸æ–­ç´¯ç§¯çš„ç«äº‰ä¼˜åŠ¿ï¼Œåˆ«äººå¾ˆéš¾å­¦ä¹ ï¼Œæˆ–è€…å¾ˆéš¾åšåˆ°ã€‚å¦‚æœä½ æœ‰äº†å®ƒï¼Œä½ ä¼šè®©è‡ªå·±å˜å¾—æ— æ³•å–ä»£ã€‚</p><br><p>ä½ å¿…é¡»æ‰¾åˆ°å±äºä½ çš„ç‰¹æ®Šä¸œè¥¿ï¼Œè€Œä¸”è¿™äº›ä¸œè¥¿ä¼šéšç€æ—¶é—´çš„æµé€è€Œå¢åŠ ä»·å€¼ã€‚</p><br><h3 id="å¦‚ä½•æ‰¾åˆ°è‡ªå·±çš„æŠ¤åŸæ²³ï¼Ÿ"><a href="#å¦‚ä½•æ‰¾åˆ°è‡ªå·±çš„æŠ¤åŸæ²³ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ‰¾åˆ°è‡ªå·±çš„æŠ¤åŸæ²³ï¼Ÿ"></a>å¦‚ä½•æ‰¾åˆ°è‡ªå·±çš„æŠ¤åŸæ²³ï¼Ÿ</h3><br><p>ä½ å¯ä»¥é—®è‡ªå·±ï¼šå¯¹æˆ‘æ¥è¯´ï¼Œä»€ä¹ˆäº‹æƒ…å®¹æ˜“åšï¼Œè€Œå¯¹åˆ«äººå´å¾ˆéš¾ï¼Ÿæˆ‘æ‰€æ‹¥æœ‰çš„æŠ€èƒ½ä¸­ï¼Œå“ªäº›æ˜¯å…¶ä»–äººæ¨¡ä»¿ä¼šéå¸¸å›°éš¾çš„ï¼Ÿæˆ–è€…ï¼Œä½ æ‰€çˆ±çš„ã€æ“…é•¿çš„äº‹ç‰©ï¼Œè·Ÿç¤¾ä¼šéœ€è¦çš„äº‹ç‰©æœ‰ä»€ä¹ˆäº¤æ±‡ç‚¹ï¼Ÿ</p><br><p>æŠ¤åŸæ²³ä¼šéšç€æ¡ä»¶çš„å˜åŒ–è€Œå˜åŒ–ã€‚æ¯”å¦‚ï¼Œå½•éŸ³æŠ€æœ¯è¯ç”Ÿä¹‹å‰ï¼Œç¨€ç¼ºçš„æ˜¯éŸ³ä¹æœ¬èº«ï¼Œä½ æƒ³å¬éŸ³ä¹ï¼Œå°±éœ€è¦æœ‰ä¸€ä¸ªè‰ºæœ¯å®¶ç»™ä½ ç°åœºè¡¨æ¼”ã€‚ç°åœ¨ï¼ŒéŸ³ä¹å½•éŸ³åˆ°å¤„éƒ½æ˜¯ï¼Œç¨€ç¼ºçš„æ˜¯ç­–åˆ’ã€å‘è¡Œå’Œä¸ªæ€§çš„å±•ç¤ºã€‚</p><br><p>åŒæ ·åœ°ï¼Œåœ¨ç¤¾ä¼šä¸­ï¼Œä»¥å‰çš„ç¨€ç¼ºèµ„æºæ˜¯é‡‘é’±å’Œç‰¹æ®Šå…³ç³»ã€‚è€Œåœ¨äº’è”ç½‘æ—¶ä»£ï¼Œç¨€ç¼ºçš„æ˜¯ç‰¹å®šçŸ¥è¯†å’ŒæŸäº›ç¨€æœ‰æŠ€èƒ½ã€‚</p><br><p>æ¼«ç”»å®¶æ–¯ç§‘ç‰¹Â·äºšå½“æ–¯ï¼ˆScott Adamsï¼‰æ›¾ç»æè¿‡ä¸€ç§å»ºç«‹ä¸ªäººæŠ¤åŸæ²³çš„æ–¹æ³•ï¼Œå°±æ˜¯æ‰¾åˆ°è‡ªå·±æœ€æ“…é•¿çš„2ä¸ªï½3ä¸ªäº‹ç‰©çš„äº¤é›†ã€‚æ¯”å¦‚ï¼Œä»–æ—¢ä¸æ˜¯æœ€å¥½çš„æ¼«ç”»å®¶ï¼Œä¹Ÿä¸æ˜¯æœ€å¥½çš„ä½œå®¶ï¼Œä¹Ÿä¸æ˜¯æœ€å¥½çš„ä¼ä¸šå®¶ï¼Œä½†ä»–å¯ä»¥æ˜¯æœ€å¥½çš„å•†ä¸šç±»æ¼«ç”»çŸ­æ–‡ä½œè€…ï¼Œè¿™å°±æ˜¯ä»–çš„æŠ¤åŸæ²³ã€‚</p><br><p>æ€»ä¹‹ï¼Œä½ è¦å‘ç°å¯¹ä½ æ¥è¯´å®¹æ˜“è€Œå¯¹ä»–äººå´å¾ˆéš¾çš„äº‹ç‰©ï¼Œå¹¶åœ¨è¿™äº›äº‹ç‰©ä¸Šå˜å¾—å‡ºè‰²ï¼Œç„¶ååˆ©ç”¨å®ƒæ¥ç§¯ç´¯ç¤¾ä¼šå’Œé‡‘èèµ„æœ¬ã€‚</p><br><h3 id="æ‰¾å‡ºæœ€æ“…é•¿çš„2-3ä¸ªäº‹ç‰©çš„äº¤é›†ã€‚"><a href="#æ‰¾å‡ºæœ€æ“…é•¿çš„2-3ä¸ªäº‹ç‰©çš„äº¤é›†ã€‚" class="headerlink" title="æ‰¾å‡ºæœ€æ“…é•¿çš„2~3ä¸ªäº‹ç‰©çš„äº¤é›†ã€‚"></a><strong>æ‰¾å‡ºæœ€æ“…é•¿çš„2~3ä¸ªäº‹ç‰©çš„äº¤é›†</strong>ã€‚</h3><br><p><img src="https://cdn.substack.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F3e1e36d1-f32a-4aff-bd08-10e131454905_1124x1063.png" alt="äº¤é›†å›¾"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;æˆ‘æœ€å–œæ¬¢çš„èŒä¸šå»ºè®®æ˜¯å‘å±•â€ä¸ªäººæŠ¤åŸæ²³â€œã€‚&quot;&gt;&lt;a href=&quot;#æˆ‘æœ€å–œæ¬¢çš„èŒä¸šå»ºè®®æ˜¯å‘å±•â€ä¸ªäººæŠ¤åŸæ²³â€œã€‚&quot; class=&quot;headerlink&quot; title=&quot;æˆ‘æœ€å–œæ¬¢çš„èŒä¸šå»ºè®®æ˜¯å‘å±•â€ä¸ªäººæŠ¤åŸæ²³â€œã€‚&quot;&gt;&lt;/a&gt;æˆ‘æœ€å–œæ¬¢çš„èŒä¸šå»ºè®®æ˜¯å‘å±•â€&lt;a href=&quot;http</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>denoçš„åˆä½“éªŒ</title>
    <link href="http://example.com/2021/01/19/Deno/deno%E7%9A%84%E5%88%9D%E4%BD%93%E9%AA%8C/"/>
    <id>http://example.com/2021/01/19/Deno/deno%E7%9A%84%E5%88%9D%E4%BD%93%E9%AA%8C/</id>
    <published>2021-01-19T18:40:52.000Z</published>
    <updated>2021-01-23T09:15:30.409Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯ä¸€ç¯‡å…³äºdenoåˆä½“éªŒæ–‡ç« </p><a id="more"></a><h2 id="Deno"><a href="#Deno" class="headerlink" title="Deno"></a><a href="https://deno.land/">Deno</a></h2><p>A <code>secure</code> runtime for JavaScript and TypeScriptã€‚ç”±Ryan Dahlï¼ˆNode.js çš„åˆ›å§‹äººä¹‹ä¸€ï¼‰åœ¨2017å¹´åˆ›å»ºï¼ŒRust è¯­è¨€å¼€å‘ã€‚ <code>deno</code> éŸ³è¯‘å¸è¯ºï¼Œæé¾™(dinosaur)çš„ç®€ç§°ï¼Œdeno è¿™ä¸ªåå­—å°±æ˜¯æ¥è‡ª Node çš„å­—æ¯é‡æ–°ç»„åˆï¼ˆNode = no + deï¼‰ï¼Œè¡¨ç¤ºâ€æ‹†é™¤ Node.jsâ€ï¼ˆde = destroy, no = Node.jsï¼‰ã€‚</p><h2 id="åˆ›å»ºåŸç”±"><a href="#åˆ›å»ºåŸç”±" class="headerlink" title="åˆ›å»ºåŸç”±"></a>åˆ›å»ºåŸç”±</h2><ul><li>Node.js Callback hellã€‚</li><li>åŸç”Ÿæ”¯æŒCommonJsï¼Œå¯¹ESæ¨¡å—ä¸å…¼å®¹ã€‚</li><li>npm(ä½ æ€•å—)æ¨¡å—ç®¡ç†å·¥å…·ï¼Œnpm_modules æå…¶åºæ‚ï¼Œè¿˜æœ‰Dependency Hellï¼Œç‰ˆæœ¬é‡å¤é—®é¢˜ç­‰é—®é¢˜ï¼Œæéš¾ç®¡ç†ã€‚è¯¦æƒ…å¯æŸ¥çœ‹<a href="https://juejin.cn/post/6914508615969669127">node_modules å›°å¢ƒ</a></li><li>åŠŸèƒ½ä¸å®Œæ•´ï¼Œè¦å­¦ä¹ å¾ˆå¤šå¤–éƒ¨å·¥å…·ï¼Œè¯¸å¦‚webpackï¼Œbabelï¼Œtypescriptã€eslintã€prettierâ€¦â€¦</li></ul><blockquote><p><em>â€œç”±äºä¸Šé¢è¿™äº›åŸå› ï¼ŒRyan Dahl å†³å®šæ”¾å¼ƒ Node.jsï¼Œä»å¤´å†™ä¸€ä¸ªæ›¿ä»£å“ï¼Œå½»åº•è§£å†³è¿™äº›é—®é¢˜ã€‚deno è¿™ä¸ªåå­—å°±æ˜¯æ¥è‡ª Node çš„å­—æ¯é‡æ–°ç»„åˆï¼ˆNode = no + deï¼‰ï¼Œè¡¨ç¤ºâ€æ‹†é™¤ Node.jsâ€ï¼ˆde = destroy, no = Node.jsï¼‰ã€‚<br>è·Ÿ Node.js ä¸€æ ·ï¼ŒDeno ä¹Ÿæ˜¯ä¸€ä¸ªæœåŠ¡å™¨è¿è¡Œæ—¶ï¼Œä½†æ˜¯æ”¯æŒå¤šç§è¯­è¨€ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œ JavaScriptã€TypeScript å’Œ WebAssembly ç¨‹åºã€‚<br>å®ƒå†…ç½®äº† V8 å¼•æ“ï¼Œç”¨æ¥è§£é‡Š JavaScriptã€‚åŒæ—¶ï¼Œä¹Ÿå†…ç½®äº† tsc å¼•æ“ï¼Œè§£é‡Š TypeScriptã€‚å®ƒä½¿ç”¨ Rust è¯­è¨€å¼€å‘ï¼Œç”±äº Rust åŸç”Ÿæ”¯æŒ WebAssemblyï¼Œæ‰€ä»¥å®ƒä¹Ÿèƒ½ç›´æ¥è¿è¡Œ WebAssemblyã€‚å®ƒçš„å¼‚æ­¥æ“ä½œä¸ä½¿ç”¨ libuv è¿™ä¸ªåº“ï¼Œè€Œæ˜¯ä½¿ç”¨ Rust è¯­è¨€çš„ Tokio åº“ï¼Œæ¥å®ç°äº‹ä»¶å¾ªç¯ï¼ˆevent loopï¼‰ã€‚â€</em>â€” å‡ºè‡ªé˜®ä¸€å³°å¤§ç¥ã€Š<a href="https://www.ruanyifeng.com/blog/2020/01/deno-intro.html">Deno è¿è¡Œæ—¶å…¥é—¨æ•™ç¨‹ï¼šNode.js çš„æ›¿ä»£å“</a>ã€‹</p></blockquote><p><strong>é—²è¨€å°‘å™ï¼Œä¹¦å½’æ­£ä¼ ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹Denoçš„ç‰¹æ€§å§ã€‚</strong></p><h2 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h2><ul><li>æœåŠ¡å™¨è¿è¡Œæ—¶ï¼Œæ”¯æŒå¤šç§è¯­è¨€ï¼Œå¯ç›´æ¥è¿è¡Œ <code>JavaScript</code>ã€<code>TypeScript</code> å’Œ <code>WebAssembly</code> ç¨‹åºã€‚</li><li>å…·æœ‰å®‰å…¨æ§åˆ¶ï¼Œé»˜è®¤æƒ…å†µä¸‹è„šæœ¬ä¸å…·æœ‰è¯»å†™æƒé™ã€‚å¦‚æœè„šæœ¬æœªæˆæƒï¼Œå°±è¯»å†™æ–‡ä»¶ç³»ç»Ÿæˆ–ç½‘ç»œï¼Œä¼šæŠ¥é”™ã€‚</li><li>åªæœ‰ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ‰€æœ‰æ“ä½œéƒ½é€šè¿‡è¿™ä¸ªæ–‡ä»¶å®Œæˆã€‚å®ƒæ”¯æŒè·¨å¹³å°ï¼ˆMacã€Linuxã€Windowsï¼‰ã€‚</li><li>å¼‚æ­¥æ“ä½œ ä¸€å¾‹è¿”å› Promiseã€‚</li><li>Deno æ”¯æŒ Web APIï¼Œå°½é‡è·Ÿæµè§ˆå™¨ä¿æŒä¸€è‡´ã€‚<code>window</code>ã€<code>fetch</code>ã€<code>webCrypto</code>ã€<code>worker</code>, ä¹Ÿæ”¯æŒ <code>onload</code>ã€<code>onunload</code>ã€<code>addEventListener</code> ç­‰äº‹ä»¶æ“ä½œå‡½æ•°ã€‚</li><li>æ‰€æœ‰æ¨¡å—é€šè¿‡ URL åŠ è½½ï¼Œæ¯”å¦‚<code>import { bar } from "https://foo.com/bar.ts"</code>ï¼ˆç»å¯¹ URLï¼‰æˆ–<code>import { bar } from './foo/bar.ts'</code>ï¼ˆç›¸å¯¹ URLï¼‰ã€‚æœ¬åœ°ç¼“å­˜ï¼Œæœ‰ä¸ªCacheæ€»ç›®å½•</li><li>åŸç”Ÿæ”¯æŒTypeScript, å†…ç½®<a href="https://github.com/microsoft/TypeScript">TypeScriptç¼–è¯‘å™¨</a>å’Œ<a href="https://swc.rs/">swc</a>çš„Ruståº“ç»„åˆå®ç°ã€‚</li><li>å†…ç½®å„ç§åŠŸèƒ½ï¼Œæ— éœ€å¤–éƒ¨å·¥å…·ã€‚</li><li>æ‰“åŒ…ã€æ ¼å¼æ¸…ç†ã€æµ‹è¯•ã€å®‰è£…ã€æ–‡æ¡£ç”Ÿæˆã€lintingã€è„šæœ¬ç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶ç­‰ä¸€æ¡é¾™æœåŠ¡ã€‚</li></ul><h2 id="ä¼˜åŠ¿"><a href="#ä¼˜åŠ¿" class="headerlink" title="ä¼˜åŠ¿"></a>ä¼˜åŠ¿</h2><ul><li>é«˜æ•ˆä¸”å®‰å…¨</li><li>å•æ–‡ä»¶ï¼Œå…¼å®¹æµè§ˆå™¨æ ‡å‡†ï¼Œä½“ç§¯å°ã€‚</li><li>æ›¿ä»£è„šæœ¬</li></ul><h2 id="ä¸è¶³"><a href="#ä¸è¶³" class="headerlink" title="ä¸è¶³"></a>ä¸è¶³</h2><ul><li>ç¼ºå°‘é›†å¤§æˆæ¡†æ¶ï¼Œæ»¡è¶³ä¸äº†ä¼ä¸šçº§åº”ç”¨å¼€å‘ã€‚</li><li>ç¤¾åŒºè¿˜ä¸å®Œå–„ï¼Œç¬¬ä¸‰æ–¹åº“ä¸å¤Ÿä¸°å¯Œã€‚</li><li>ç¼ºä¹åŒ…ç®¡ç†å·¥å…·ï¼Œç®¡ç†èµ·æ¥æ··ä¹±ã€‚</li></ul><h3 id="CLI"><a href="#CLI" class="headerlink" title="CLI"></a><a href="https://deno.land/manual@v1.7.0/getting_started/command_line_interface">CLI</a></h3><h3 id="permission"><a href="#permission" class="headerlink" title="permission"></a><a href="https://deno.land/manual@v1.7.0/getting_started/permissions">permission</a></h3><h3 id="WebAssembly"><a href="#WebAssembly" class="headerlink" title="WebAssembly"></a><a href="https://deno.land/manual@v1.7.0/getting_started/webassembly#webassembly-support">WebAssembly</a></h3><pre><code class="JS">const wasmCode = new Uint8Array([  0, 97, 115, 109, 1, 0, 0, 0, 1, 133, 128, 128, 128, 0, 1, 96, 0, 1, 127,  3, 130, 128, 128, 128, 0, 1, 0, 4, 132, 128, 128, 128, 0, 1, 112, 0, 0,  5, 131, 128, 128, 128, 0, 1, 0, 1, 6, 129, 128, 128, 128, 0, 0, 7, 145,  128, 128, 128, 0, 2, 6, 109, 101, 109, 111, 114, 121, 2, 0, 4, 109, 97,  105, 110, 0, 0, 10, 138, 128, 128, 128, 0, 1, 132, 128, 128, 128, 0, 0,  65, 42, 11]);const wasmModule = new WebAssembly.Module(wasmCode);const wasmInstance = new WebAssembly.Instance(wasmModule);const main = wasmInstance.exports.main as CallableFunctionconsole.log(main().toString());</code></pre><h3 id="ç¬¬ä¸‰æ–¹åº“"><a href="#ç¬¬ä¸‰æ–¹åº“" class="headerlink" title="ç¬¬ä¸‰æ–¹åº“"></a><a href="https://deno.land/x">ç¬¬ä¸‰æ–¹åº“</a></h3><h3 id="æ ‡å‡†åº“"><a href="#æ ‡å‡†åº“" class="headerlink" title="æ ‡å‡†åº“"></a><a href="https://deno.land/std/">æ ‡å‡†åº“</a></h3><h3 id="å…¼å®¹node-js"><a href="#å…¼å®¹node-js" class="headerlink" title="å…¼å®¹node.js"></a><a href="https://deno.land/std/node">å…¼å®¹node.js</a></h3><h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>Shell (Mac, Linux):</p><pre><code class="BASH">curl -fsSL https://deno.land/x/install/install.sh | sh</code></pre><p>PowerShell (Windows):</p><pre><code class="BASH">iwr https://deno.land/x/install/install.ps1 -useb | iex</code></pre><p>Using Homebrew (macOS):</p><pre><code class="BASH">brew install deno</code></pre><h3 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h3><p>Try running a simple program:</p><pre><code class="BASH">deno run https://deno.land/std/examples/welcome.ts</code></pre><p>Or a more complex one:</p><pre><code class="JS">import {  serve} from "https://deno.land/std@0.83.0/http/server.ts";const s = serve({  port: 8000});console.log("http://localhost:8000/");for await (const req of s) {  req.respond({    body: "Hello World\n"  });}</code></pre><h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a><a href="https://deno.land/std/">ä¾‹å­</a></h3><h2 id="ç¼“å­˜ç›®å½•"><a href="#ç¼“å­˜ç›®å½•" class="headerlink" title="ç¼“å­˜ç›®å½•"></a>ç¼“å­˜ç›®å½•</h2><p>ä»¥Macä¸ºä¾‹ï¼Œä¸¾ä¸ªğŸŒ° </p><pre><code class="BASH"> $HOME/Library/Caches/Deno#  è¿œç¨‹åº“ä¸‹è½½åœ°å€deno run https://deno.land/std@0.83.0/examples/welcome.ts# DIRECTORIESgen/: ç¼“å­˜ç¼–è¯‘ä¸ºJavaScriptçš„æ–‡ä»¶deps/: ç¼“å­˜å¯¼å…¥çš„è¿œç¨‹urlçš„æ–‡ä»¶  |__ http/: httpæ–¹å¼å¯¼å…¥çš„æ–‡ä»¶  |__ https/: httpsæ–¹å¼å¯¼å…¥çš„æ–‡ä»¶# FILESdeno_history.txt: Deno REPLå†å²è®°å½•ç¼“å­˜deno info                                                                               DENO_DIR location: "/Users/lulu/Library/Caches/deno"Remote modules cache: "/Users/lulu/Library/Caches/deno/deps"TypeScript compiler cache: "/Users/lulu/Library/Caches/deno/gen"</code></pre><h3 id="gen"><a href="#gen" class="headerlink" title="gen/"></a>gen/</h3><p><code>$DENO_DIR/gen/</code> è¢«ç”¨æ¥å­˜æ”¾ JavaScript æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶æ˜¯ä» TypeScript æºç ç¼–è¯‘æ¥çš„ã€‚è¿™æ ·çš„ç¼–è¯‘æ˜¯å¿…è¦çš„ï¼Œå› ä¸º V8 ä¸è¯†åˆ« JS å­é›†ä¹‹å¤–çš„ TypeScript è¯­æ³•ã€‚</p><p>gen/ç›®å½•ä¸‹çš„æ¯ä¸€ä¸ª JS æ–‡ä»¶çš„æ–‡ä»¶åæ˜¯ä»–çš„ TypeScript æºç çš„ hash å€¼ã€‚åŒæ—¶ JS æ–‡ä»¶ä¹Ÿå¯¹åº”ä¸€ä¸ª .map ä¸ºåç¼€çš„ source map æ–‡ä»¶ã€‚</p><p>ç¼“å­˜å­˜åœ¨çš„åŸå› æ˜¯ä¸ºäº†é¿å…åœ¨ç”¨æˆ·æ²¡æœ‰ä¿®æ”¹ä»£ç çš„æƒ…å†µä¸‹ï¼Œæ¯æ¬¡è¿è¡Œæ—¶ä¸æ–­çš„é‡æ–°ç¼–è¯‘æ–‡ä»¶ã€‚æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ª hello-world.ts æ–‡ä»¶ï¼Œä»–åªæ˜¯åŒ…å«äº†ä»£ç  console.log(â€œHello worldâ€)ã€‚åœ¨ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ç¼–è¯‘ä¿¡æ¯ï¼š</p><pre><code class="BASH">$ deno hello-world.tsCompiling /Users/kevinqian/my-folder/hello-world.tsHello world</code></pre><p>ä½†æ˜¯åœ¨æ²¡æœ‰ä¿®æ”¹æ–‡ä»¶å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå½“ä½ é‡æ–°è¿è¡Œä»£ç ï¼š</p><pre><code class="BASH">$ deno hello-world.tsHello world</code></pre><p>ä¸ä¼šå†æœ‰ç¼–è¯‘ä¿¡æ¯çš„æç¤ºã€‚è¿™æ˜¯å› ä¸ºåœ¨è¿™ä¸€æ¬¡è¿è¡Œä¸­ï¼ŒDeno ç›´æ¥ä½¿ç”¨äº† gen/ ä¸­ç¼“å­˜çš„ç‰ˆæœ¬ï¼Œè€Œä¸ç”¨å†æ¬¡ç¼–è¯‘ã€‚</p><p>ç¼“å­˜åŠ è½½å’Œä¿å­˜çš„ä»£ç ï¼Œå¯ä»¥ä»æ–‡ä»¶ src/deno_dir.rs ä¸­çš„ DenoDir::load_cache å’Œ DenoDir::code_cache ä¸­æ‰¾åˆ°ã€‚</p><p>å¦‚æœæƒ³è¦å¼ºåˆ¶ Deno é‡æ–°ç¼–è¯‘ä½ çš„ä»£ç è€Œä¸æ˜¯ä½¿ç”¨ç¼“å­˜çš„ç‰ˆæœ¬ï¼Œä½ éœ€è¦ä½¿ç”¨ <code>--recompile</code> æ ‡å¿—ã€‚</p><h3 id="deps"><a href="#deps" class="headerlink" title="deps/"></a>deps/</h3><p><code>$DENO_DIR/deps</code> è¢«ç”¨æ¥ä¿å­˜è¿œç«¯ url import è·å¾—çš„æ–‡ä»¶ã€‚æ ¹æ® url çš„æ¨¡å¼ï¼Œä»–åŒ…å«äº†å­ç›®å½•ï¼ˆç°åœ¨åªæœ‰httpå’Œhttpsï¼‰ï¼Œå¹¶ä¸”ä¿å­˜æ–‡ä»¶çš„ä½ç½®ç”± URL path å†³å®šã€‚æ¯”å¦‚ï¼Œå¯¹äºä¸‹é¢çš„çš„ importï¼ˆè¯·æ³¨æ„ï¼ŒDeno è¦æ±‚ç”¨æˆ·æ˜¾å¼åœ°æŒ‡å®šæ‰©å±•åï¼‰ã€‚</p><pre><code class="JS">import {  serve} from "https://deno.land/x/std/net/http.ts";</code></pre><p>ä¸‹è½½çš„http.tsæ–‡ä»¶å°†ä¼šè¢«å­˜å‚¨åœ¨ï¼š</p><pre><code class="BASH">$DENO_DIR/deps/https/deno.land/x/std/net/http.ts</code></pre><p>éœ€è¦æ³¨æ„ï¼Œé™¤éç”¨æˆ·ç”¨ <code>--reload</code> æ ‡å¿—è¿è¡Œä»£ç ï¼Œå¦åˆ™æˆ‘ä»¬çš„http.tsæ–‡ä»¶åœ¨æ¥ä¸‹æ¥çš„è¿è¡Œä¸­ä¸ä¼šè¢«é‡æ–°ä¸‹è½½ã€‚</p><p>å½“å‰ï¼ˆè­¦å‘Šï¼šå°†æ¥å¯èƒ½æ”¹å˜ï¼‰ï¼ŒDeno ä¼šå…³æ³¨ä»è¿œç«¯ä¸‹è½½çš„æ–‡ä»¶çš„å†…å®¹çš„ MIME ç±»å‹ã€‚åœ¨æ–‡ä»¶ç¼ºå°‘æ‰©å±•åæˆ–æ‰©å±•åä¸å†…å®¹ç±»å‹ä¸åŒ¹é…çš„æƒ…å†µä¸‹ï¼ŒDeno å°†åˆ›å»ºä¸€ä¸ªä»¥ .mime ç»“å°¾çš„é¢å¤–æ–‡ä»¶ï¼Œæ¥å­˜å‚¨ HTTP å“åº”å¤´æä¾›çš„ mime ç±»å‹ã€‚å¦‚æœæˆ‘ä»¬ä¸‹è½½çš„æ–‡ä»¶åæ˜¯ a.tsï¼Œç„¶è€Œå“åº”å¤´é‡Œé¢æ˜¯ Content-Type: text/javascriptï¼Œä¸€ä¸ªåŒ…å«text/javascriptå†…å®¹çš„a.ts.mimeæ–‡ä»¶å°†ä¼šåœ¨ä»–æ—è¾¹è¢«åˆ›å»ºã€‚ç”±äº.mimeæ–‡ä»¶çš„å­˜åœ¨ï¼Œa.ts åé¢å°†ä¼šè¢«å½“åšä¸€ä¸ª JavaScript æ–‡ä»¶è¢« importã€‚</p><h2 id="æ¼”ç¤º"><a href="#æ¼”ç¤º" class="headerlink" title="æ¼”ç¤º"></a>æ¼”ç¤º</h2><pre><code class="BASH">cd /Users/lulu/my-projects/deno-demo &amp;&amp; code .</code></pre><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç›®å‰Denoè¿˜å¤„äºåˆæ­¥é˜¶æ®µï¼Œæ ‡å‡†åº“ï¼Œå…¼å®¹æ€§è¿˜æœ‰å¾…æ”¹è¿›ï¼Œé€‚åˆè„šæœ¬ï¼Œå°å‹åº”ç”¨å¼€å‘ã€‚æƒ³è¦å®Œæˆä¸€ä¸ªæˆç†Ÿçš„å¤§å‹é¡¹ç›®ï¼Œè¿˜éœ€è¦æ—¶é—´çš„æ²‰æ·€ã€‚è®©æˆ‘ä»¬å¥½å¥½æœŸå¾…ä¸‹ï¼Œæœªæ¥çš„Denoä¼šå¦‚ä½•å‘å±•ï¼Ÿ</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;è¿™æ˜¯ä¸€ç¯‡å…³äºdenoåˆä½“éªŒæ–‡ç« &lt;/p&gt;</summary>
    
    
    
    <category term="deno" scheme="http://example.com/categories/deno/"/>
    
    
    <category term="deno" scheme="http://example.com/tags/deno/"/>
    
  </entry>
  
  <entry>
    <title>treeå‘½ä»¤çš„åŸºæœ¬ä½¿ç”¨</title>
    <link href="http://example.com/2021/01/18/Linux/shell/%E6%96%87%E4%BB%B6/tree%E5%91%BD%E4%BB%A4%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
    <id>http://example.com/2021/01/18/Linux/shell/%E6%96%87%E4%BB%B6/tree%E5%91%BD%E4%BB%A4%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</id>
    <published>2021-01-18T10:15:44.000Z</published>
    <updated>2021-01-23T09:15:30.413Z</updated>
    
    <content type="html"><![CDATA[<p>æ¯å¤©å­¦ä¸€ä¸ª Linux å‘½ä»¤ä¹‹treeçš„åŸºæœ¬ä½¿ç”¨</p><a id="more"></a><h2 id="å‘½ä»¤ç®€ä»‹"><a href="#å‘½ä»¤ç®€ä»‹" class="headerlink" title="å‘½ä»¤ç®€ä»‹"></a>å‘½ä»¤ç®€ä»‹</h2><p>tree å‘½ä»¤çš„ä½œç”¨æ˜¯ä»¥æ ‘å½¢ç»“æ„æ˜¾ç¤ºç›®å½•ä¸‹çš„å†…å®¹ã€‚</p><p>å¸¸ç”¨çš„Linuxå‘è¡Œç‰ˆç³»ç»Ÿä¸­é»˜è®¤æ²¡æœ‰è¿™ä¸ªå‘½ä»¤ï¼Œä½ éœ€è¦é€šè¿‡å®‰è£…æ‰å¯ä»¥ä½¿ç”¨ï¼š</p><pre><code class="BASH">#Centosyum install tree -y#Ubuntusudo apt-get install tree</code></pre><p>å®‰è£…å®Œæˆä¹‹åå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨è¿™ä¸ªtreeå‘½ä»¤äº†ã€‚</p><h2 id="è¯­æ³•æ ¼å¼"><a href="#è¯­æ³•æ ¼å¼" class="headerlink" title="è¯­æ³•æ ¼å¼"></a>è¯­æ³•æ ¼å¼</h2><pre><code class="BASH">tree [é€‰é¡¹] [ç›®å½•]</code></pre><h2 id="é€‰é¡¹è¯´æ˜"><a href="#é€‰é¡¹è¯´æ˜" class="headerlink" title="é€‰é¡¹è¯´æ˜"></a>é€‰é¡¹è¯´æ˜</h2><pre><code class="BASH">-a   #æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶-d   #åªæ˜¾ç¤ºç›®å½•ï¼ˆåç§°ï¼‰-l   #æ˜¾ç¤ºé“¾æ¥æ–‡ä»¶çš„åŸå§‹æ–‡ä»¶-f   #æ˜¾ç¤ºæ‰€åˆ—å‡ºçš„æ–‡ä»¶æˆ–ç›®å½•çš„å®Œæ•´ç›®å½•è·¯å¾„-i   #ä¸ä»¥é˜¶æ¢¯çš„å½¢å¼æ˜¾ç¤ºæ–‡ä»¶æˆ–ç›®å½•åç§°-q   #å°†æ§åˆ¶å­—ç¬¦ä»¥?å­—ç¬¦ä»£æ›¿ï¼Œæ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•åç§°-N   #ç›´æ¥æ˜¾ç¤ºæ–‡ä»¶æˆ–ç›®å½•çš„åç§°-p   #æ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶çš„æƒé™ä¿¡æ¯-u   #æ˜¾ç¤ºæ–‡ä»¶æ‰€æœ‰è€…æˆ–è€…uid-g   #æ˜¾ç¤ºæ–‡ä»¶æ‰€å±ç»„æˆ–è€…gid-s   #æ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶çš„å¤§å°ä¿¡æ¯-h   #ä»¥å¯è¯»çš„æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶çš„å¤§å°ä¿¡æ¯-D   #æ˜¾ç¤ºæœ€åä¿®æ”¹æ—¥æœŸ-v   #æŒ‰å­—æ¯æ•°å­—æ­£åºæ˜¾ç¤ºæ–‡ä»¶-r   #æŒ‰å­—æ¯æ•°å­—å€’åºæ˜¾ç¤ºæ–‡ä»¶-t   #æŒ‰æœ€åæ—¶é—´æ’åºæ˜¾ç¤ºæ–‡ä»¶-C   #åœ¨æ–‡ä»¶å’Œç›®å½•åˆ—è¡¨ä¸ŠåŠ ä¸Šè‰²å½©ï¼Œä¾¿äºåŒºåˆ†æ–‡ä»¶ç±»å‹-P pattern    #åªæ˜¾ç¤ºåŒ¹é…æ­£åˆ™è¡¨å¼çš„æ–‡ä»¶æˆ–ç›®å½•åç§°-I pattern    #ä¸ä¸Šç»“æœç›¸å</code></pre><h2 id="åº”ç”¨ä¸¾ä¾‹"><a href="#åº”ç”¨ä¸¾ä¾‹" class="headerlink" title="åº”ç”¨ä¸¾ä¾‹"></a>åº”ç”¨ä¸¾ä¾‹</h2><pre><code class="BASH">#æ ‘å½¢æ˜¾ç¤ºå½“å‰ç›®å½•åŠå…¶å­ç›®å½•ä¸‹çš„æ–‡ä»¶åŠç›®å½•åç§°[root@centos7&nbsp;testdir]#&nbsp;tree.â”œâ”€â”€&nbsp;dirâ”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;test2.txt~â”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;test3.txtâ”‚&nbsp;&nbsp;&nbsp;â””â”€â”€&nbsp;test3.txt.bakâ”œâ”€â”€&nbsp;test2.txtâ””â”€â”€&nbsp;test2.txt~1&nbsp;directory,&nbsp;5&nbsp;files#åªæ˜¾ç¤ºç›®å½•åç§°[root@centos7&nbsp;testdir]#&nbsp;tree&nbsp;-d.â””â”€â”€&nbsp;dir1&nbsp;directory#æ˜¾ç¤ºç›®å½•åŠæ–‡ä»¶çš„æƒé™ä¿¡æ¯[root@centos7&nbsp;testdir]#&nbsp;tree&nbsp;-p.â”œâ”€â”€&nbsp;[drwxr-xr-x]&nbsp;&nbsp;dirâ”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;[-rw-r--r--]&nbsp;&nbsp;test2.txt~â”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;[-rw-r--r--]&nbsp;&nbsp;test3.txtâ”‚&nbsp;&nbsp;&nbsp;â””â”€â”€&nbsp;[-rw-r--r--]&nbsp;&nbsp;test3.txt.bakâ”œâ”€â”€&nbsp;[-rw-r--r--]&nbsp;&nbsp;test2.txtâ””â”€â”€&nbsp;[-rw-r--r--]&nbsp;&nbsp;test2.txt~1&nbsp;directory,&nbsp;5&nbsp;files#æ˜¾ç¤ºå‡ å±‚ä¿¡æ¯2ä»£è¡¨2å±‚ï¼ˆå‘ä¸‹ï¼‰[root@centos7&nbsp;testdir]#&nbsp;tree&nbsp;-L&nbsp;2.â”œâ”€â”€&nbsp;dirâ”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;test2.txt~â”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;test3.txtâ”‚&nbsp;&nbsp;&nbsp;â””â”€â”€&nbsp;test3.txt.bakâ”œâ”€â”€&nbsp;test2.txtâ””â”€â”€&nbsp;test2.txt~1&nbsp;directory,&nbsp;5&nbsp;files[root@centos7&nbsp;testdir]#&nbsp;tree&nbsp;-L&nbsp;1.â”œâ”€â”€&nbsp;dirâ”œâ”€â”€&nbsp;test2.txtâ””â”€â”€&nbsp;test2.txt~1&nbsp;directory,&nbsp;2&nbsp;files</code></pre><p>-C æ˜¾ç¤ºå„ç§æ–‡ä»¶ç±»å‹ï¼Œä»¥é¢œè‰²åŒºåˆ†</p><p><img src="/My-Blogs/images/tree%E5%91%BD%E4%BB%A4%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-01.png" alt="img"></p><pre><code class="BASH">#æ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•çš„æ‰€æœ‰è€…[root@centos7&nbsp;testdir]#&nbsp;tree&nbsp;-u.â”œâ”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;cp&nbsp;-&gt;&nbsp;/usr/bin/cpâ”œâ”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;dirâ”‚??&nbsp;â”œâ”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;test2.txt~â”‚??&nbsp;â”œâ”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;test3.txtâ”‚??&nbsp;â””â”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;test3.txt.bakâ”œâ”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;test2.txtâ””â”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;test2.txt~1&nbsp;directory,&nbsp;6&nbsp;files#æ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•çš„æ‰€å±ç»„[root@centos7&nbsp;testdir]#&nbsp;tree&nbsp;-g.â”œâ”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;cp&nbsp;-&gt;&nbsp;/usr/bin/cpâ”œâ”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;dirâ”‚??&nbsp;â”œâ”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;test2.txt~â”‚??&nbsp;â”œâ”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;test3.txtâ”‚??&nbsp;â””â”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;test3.txt.bakâ”œâ”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;test2.txtâ””â”€â”€&nbsp;[root&nbsp;&nbsp;&nbsp;&nbsp;]&nbsp;&nbsp;test2.txt~1&nbsp;directory,&nbsp;6&nbsp;files#ä¸æŒ‰æ ‘å½¢å½¢å¼æ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•[root@centos7&nbsp;testdir]#&nbsp;tree&nbsp;-i.cp&nbsp;-&gt;&nbsp;/usr/bin/cpdirtest2.txt~test3.txttest3.txt.baktest2.txttest2.txt~1&nbsp;directory,&nbsp;6&nbsp;files[root@centos7&nbsp;testdir]#&nbsp;tree.â”œâ”€â”€&nbsp;cp&nbsp;-&gt;&nbsp;/usr/bin/cpâ”œâ”€â”€&nbsp;dirâ”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;test2.txt~â”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;test3.txtâ”‚&nbsp;&nbsp;&nbsp;â””â”€â”€&nbsp;test3.txt.bakâ”œâ”€â”€&nbsp;test2.txtâ””â”€â”€&nbsp;test2.txt~1&nbsp;directory,&nbsp;6&nbsp;files#æ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•çš„å®Œæ•´è·¯å¾„[root@centos7&nbsp;testdir]#&nbsp;pwd/root/testdir[root@centos7&nbsp;testdir]#&nbsp;tree&nbsp;-f.â”œâ”€â”€&nbsp;./cp&nbsp;-&gt;&nbsp;/usr/bin/cpâ”œâ”€â”€&nbsp;./dirâ”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;./dir/test2.txt~â”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;./dir/test3.txtâ”‚&nbsp;&nbsp;&nbsp;â””â”€â”€&nbsp;./dir/test3.txt.bakâ”œâ”€â”€&nbsp;./test2.txtâ””â”€â”€&nbsp;./test2.txt~1&nbsp;directory,&nbsp;6&nbsp;files[root@centos7&nbsp;~]#&nbsp;tree&nbsp;-f&nbsp;./testdir/./testdirâ”œâ”€â”€&nbsp;./testdir/cp&nbsp;-&gt;&nbsp;/usr/bin/cpâ”œâ”€â”€&nbsp;./testdir/dirâ”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;./testdir/dir/test2.txt~â”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€&nbsp;./testdir/dir/test3.txtâ”‚&nbsp;&nbsp;&nbsp;â””â”€â”€&nbsp;./testdir/dir/test3.txt.bakâ”œâ”€â”€&nbsp;./testdir/test2.txtâ””â”€â”€&nbsp;./testdir/test2.txt~1&nbsp;directory,&nbsp;6&nbsp;files</code></pre>]]></content>
    
    
    <summary type="html">&lt;p&gt;æ¯å¤©å­¦ä¸€ä¸ª Linux å‘½ä»¤ä¹‹treeçš„åŸºæœ¬ä½¿ç”¨&lt;/p&gt;</summary>
    
    
    
    <category term="Linux" scheme="http://example.com/categories/Linux/"/>
    
    
    <category term="Linux" scheme="http://example.com/tags/Linux/"/>
    
    <category term="shell" scheme="http://example.com/tags/shell/"/>
    
    <category term="æ–‡ä»¶å¤„ç†" scheme="http://example.com/tags/%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>Explainä½¿ç”¨åˆ†æ</title>
    <link href="http://example.com/2021/01/08/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/Explain%E4%BD%BF%E7%94%A8%E5%88%86%E6%9E%90/"/>
    <id>http://example.com/2021/01/08/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/Explain%E4%BD%BF%E7%94%A8%E5%88%86%E6%9E%90/</id>
    <published>2021-01-08T18:06:09.000Z</published>
    <updated>2021-01-23T09:15:30.422Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>MySQL æä¾›äº†ä¸€ä¸ª EXPLAIN å‘½ä»¤, å®ƒå¯ä»¥å¯¹ SELECT è¯­å¥è¿›è¡Œåˆ†æ, å¹¶è¾“å‡º SELECT æ‰§è¡Œçš„è¯¦ç»†ä¿¡æ¯, ä»¥ä¾›å¼€å‘äººå‘˜é’ˆå¯¹æ€§ä¼˜åŒ–.<br>EXPLAIN å‘½ä»¤ç”¨æ³•ååˆ†ç®€å•, åœ¨ SELECT è¯­å¥å‰åŠ ä¸Š Explain å°±å¯ä»¥äº†, ä¾‹å¦‚:</p><a id="more"></a><pre><code class="SQL">EXPLAIN SELECT * from user_info WHERE  id &lt; 300;</code></pre><h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><p>ä¸ºäº†æ¥ä¸‹æ¥æ–¹ä¾¿æ¼”ç¤º EXPLAIN çš„ä½¿ç”¨, é¦–å…ˆæˆ‘ä»¬éœ€è¦å»ºç«‹ä¸¤ä¸ªæµ‹è¯•ç”¨çš„è¡¨, å¹¶æ·»åŠ ç›¸åº”çš„æ•°æ®:</p><pre><code class="SQL">CREATE TABLE `user_info` (  `id`   BIGINT(20)  NOT NULL AUTO_INCREMENT,  `name` VARCHAR(50) NOT NULL DEFAULT '',  `age`  INT(11)              DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `name_index` (`name`))  ENGINE = InnoDB  DEFAULT CHARSET = utf8</code></pre><pre><code class="SQL">CREATE TABLE `order_info` (  `id`           BIGINT(20)  NOT NULL AUTO_INCREMENT,  `user_id`      BIGINT(20)           DEFAULT NULL,  `product_name` VARCHAR(50) NOT NULL DEFAULT '',  `productor`    VARCHAR(30)          DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `user_product_detail_index` (`user_id`, `product_name`, `productor`))  ENGINE = InnoDB  DEFAULT CHARSET = utf8</code></pre><h2 id="EXPLAIN-è¾“å‡ºæ ¼å¼"><a href="#EXPLAIN-è¾“å‡ºæ ¼å¼" class="headerlink" title="EXPLAIN è¾“å‡ºæ ¼å¼"></a>EXPLAIN è¾“å‡ºæ ¼å¼</h2><p>EXPLAIN å‘½ä»¤çš„è¾“å‡ºå†…å®¹å¤§è‡´å¦‚ä¸‹:</p><pre><code class="SQL">mysql&gt; explain select * from user_info where id = 2\G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: user_info   partitions: NULL         type: constpossible_keys: PRIMARY          key: PRIMARY      key_len: 8          ref: const         rows: 1     filtered: 100.00        Extra: NULL1 row in set, 1 warning (0.00 sec)</code></pre><p>å„åˆ—çš„å«ä¹‰å¦‚ä¸‹:</p><ul><li><p><code>id</code>: SELECT æŸ¥è¯¢çš„æ ‡è¯†ç¬¦. æ¯ä¸ª SELECT éƒ½ä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦.</p></li><li><p><code>select_type</code>: SELECT æŸ¥è¯¢çš„ç±»å‹.</p></li><li><p><code>table</code>: æŸ¥è¯¢çš„æ˜¯å“ªä¸ªè¡¨</p></li><li><p><code>partitions</code>: åŒ¹é…çš„åˆ†åŒº</p></li><li><p><code>type</code>: join ç±»å‹</p></li><li><p><code>possible_keys</code>: æ­¤æ¬¡æŸ¥è¯¢ä¸­å¯èƒ½é€‰ç”¨çš„ç´¢å¼•</p></li><li><p><code>key</code>: æ­¤æ¬¡æŸ¥è¯¢ä¸­ç¡®åˆ‡ä½¿ç”¨åˆ°çš„ç´¢å¼•.</p></li><li><p><code>ref</code>: å“ªä¸ªå­—æ®µæˆ–å¸¸æ•°ä¸ key ä¸€èµ·è¢«ä½¿ç”¨</p></li><li><p><code>rows</code>: æ˜¾ç¤ºæ­¤æŸ¥è¯¢ä¸€å…±æ‰«æäº†å¤šå°‘è¡Œ. è¿™ä¸ªæ˜¯ä¸€ä¸ªä¼°è®¡å€¼.</p></li><li><p><code>filtered</code>: è¡¨ç¤ºæ­¤æŸ¥è¯¢æ¡ä»¶æ‰€è¿‡æ»¤çš„æ•°æ®çš„ç™¾åˆ†æ¯”</p></li><li><p><code>extra</code>: é¢å¤–çš„ä¿¡æ¯</p></li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥é‡ç‚¹çœ‹ä¸€ä¸‹æ¯”è¾ƒé‡è¦çš„å‡ ä¸ªå­—æ®µ.</p><h3 id="select-type"><a href="#select-type" class="headerlink" title="select_type"></a>select_type</h3><p><code>select_type</code> è¡¨ç¤ºäº†æŸ¥è¯¢çš„ç±»å‹, å®ƒçš„å¸¸ç”¨å–å€¼æœ‰:</p><ul><li><p>SIMPLE, è¡¨ç¤ºæ­¤æŸ¥è¯¢ä¸åŒ…å« UNION æŸ¥è¯¢æˆ–å­æŸ¥è¯¢</p></li><li><p>PRIMARY, è¡¨ç¤ºæ­¤æŸ¥è¯¢æ˜¯æœ€å¤–å±‚çš„æŸ¥è¯¢</p></li><li><p>UNION, è¡¨ç¤ºæ­¤æŸ¥è¯¢æ˜¯ UNION çš„ç¬¬äºŒæˆ–éšåçš„æŸ¥è¯¢</p></li><li><p>DEPENDENT UNION, UNION ä¸­çš„ç¬¬äºŒä¸ªæˆ–åé¢çš„æŸ¥è¯¢è¯­å¥, å–å†³äºå¤–é¢çš„æŸ¥è¯¢</p></li><li><p>UNION RESULT, UNION çš„ç»“æœ</p></li><li><p>SUBQUERY, å­æŸ¥è¯¢ä¸­çš„ç¬¬ä¸€ä¸ª SELECT</p></li><li><p>DEPENDENT SUBQUERY: å­æŸ¥è¯¢ä¸­çš„ç¬¬ä¸€ä¸ª SELECT, å–å†³äºå¤–é¢çš„æŸ¥è¯¢. å³å­æŸ¥è¯¢ä¾èµ–äºå¤–å±‚æŸ¥è¯¢çš„ç»“æœ.</p></li></ul><p>æœ€å¸¸è§çš„æŸ¥è¯¢ç±»åˆ«åº”è¯¥æ˜¯ <code>SIMPLE</code> äº†, æ¯”å¦‚å½“æˆ‘ä»¬çš„æŸ¥è¯¢æ²¡æœ‰å­æŸ¥è¯¢, ä¹Ÿæ²¡æœ‰ UNION æŸ¥è¯¢æ—¶, é‚£ä¹ˆé€šå¸¸å°±æ˜¯ <code>SIMPLE</code> ç±»å‹, ä¾‹å¦‚:</p><pre><code class="SQL">mysql&gt; explain select * from user_info where id = 2\G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: user_info   partitions: NULL         type: constpossible_keys: PRIMARY          key: PRIMARY      key_len: 8          ref: const         rows: 1     filtered: 100.00        Extra: NULL1 row in set, 1 warning (0.00 sec)</code></pre><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨äº† UNION æŸ¥è¯¢, é‚£ä¹ˆ EXPLAIN è¾“å‡º çš„ç»“æœç±»ä¼¼å¦‚ä¸‹:</p><pre><code class="SQL">mysql&gt; EXPLAIN (SELECT * FROM user_info  WHERE id IN (1, 2, 3))    -&gt; UNION    -&gt; (SELECT * FROM user_info WHERE id IN (3, 4, 5));+----+--------------+------------+------------+-------+---------------+---------+---------+------+------+----------+-----------------+| id | select_type  | table      | partitions | type  | possible_keys | key     | key_len | ref  | rows | filtered | Extra           |+----+--------------+------------+------------+-------+---------------+---------+---------+------+------+----------+-----------------+|  1 | PRIMARY      | user_info  | NULL       | range | PRIMARY       | PRIMARY | 8       | NULL |    3 |   100.00 | Using where     ||  2 | UNION        | user_info  | NULL       | range | PRIMARY       | PRIMARY | 8       | NULL |    3 |   100.00 | Using where     || NULL | UNION RESULT | &lt;union1,2&gt; | NULL       | ALL   | NULL          | NULL    | NULL    | NULL | NULL |     NULL | Using temporary |+----+--------------+------------+------------+-------+---------------+---------+---------+------+------+----------+-----------------+3 rows in set, 1 warning (0.00 sec)</code></pre><h3 id="table"><a href="#table" class="headerlink" title="table"></a>table</h3><p>è¡¨ç¤ºæŸ¥è¯¢æ¶‰åŠçš„è¡¨æˆ–è¡ç”Ÿè¡¨</p><h3 id="type"><a href="#type" class="headerlink" title="type"></a>type</h3><p><code>type</code> å­—æ®µæ¯”è¾ƒé‡è¦, å®ƒæä¾›äº†åˆ¤æ–­æŸ¥è¯¢æ˜¯å¦é«˜æ•ˆçš„é‡è¦ä¾æ®ä¾æ®. é€šè¿‡ <code>type</code> å­—æ®µ, æˆ‘ä»¬åˆ¤æ–­æ­¤æ¬¡æŸ¥è¯¢æ˜¯ <code>å…¨è¡¨æ‰«æ</code> è¿˜æ˜¯ <code>ç´¢å¼•æ‰«æ</code> ç­‰.</p><p><strong>type å¸¸ç”¨ç±»å‹</strong><br>type å¸¸ç”¨çš„å–å€¼æœ‰:</p><p><code>system</code> : è¡¨ä¸­åªæœ‰ä¸€æ¡æ•°æ®. è¿™ä¸ªç±»å‹æ˜¯ç‰¹æ®Šçš„ <code>const</code> ç±»å‹.</p><p><code>const</code> : é’ˆå¯¹ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•çš„ç­‰å€¼æŸ¥è¯¢æ‰«æ, æœ€å¤šåªè¿”å›ä¸€è¡Œæ•°æ®. <code>const</code> æŸ¥è¯¢é€Ÿåº¦éå¸¸å¿«, å› ä¸ºå®ƒä»…ä»…è¯»å–ä¸€æ¬¡å³å¯.<br>ä¾‹å¦‚ä¸‹é¢çš„è¿™ä¸ªæŸ¥è¯¢, å®ƒä½¿ç”¨äº†ä¸»é”®ç´¢å¼•, å› æ­¤ <code>type</code> å°±æ˜¯ <code>const</code> ç±»å‹çš„.</p><pre><code class="SQL">mysql&gt; explain select * from user_info where id = 2\G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: user_info   partitions: NULL         type: constpossible_keys: PRIMARY          key: PRIMARY      key_len: 8          ref: const         rows: 1     filtered: 100.00        Extra: NULL1 row in set, 1 warning (0.00 sec)</code></pre><ul><li><code>eq_ref</code>: æ­¤ç±»å‹é€šå¸¸å‡ºç°åœ¨å¤šè¡¨çš„ join æŸ¥è¯¢, è¡¨ç¤ºå¯¹äºå‰è¡¨çš„æ¯ä¸€ä¸ªç»“æœ, éƒ½åªèƒ½åŒ¹é…åˆ°åè¡¨çš„ä¸€è¡Œç»“æœ. å¹¶ä¸”æŸ¥è¯¢çš„æ¯”è¾ƒæ“ä½œé€šå¸¸æ˜¯ =, æŸ¥è¯¢æ•ˆç‡è¾ƒé«˜. ä¾‹å¦‚:</li></ul><pre><code class="SQL">mysql&gt; EXPLAIN SELECT * FROM user_info, order_info WHERE user_info.id = order_info.user_id\G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: order_info   partitions: NULL         type: indexpossible_keys: user_product_detail_index          key: user_product_detail_index      key_len: 314          ref: NULL         rows: 9     filtered: 100.00        Extra: Using where; Using index*************************** 2. row ***************************           id: 1  select_type: SIMPLE        table: user_info   partitions: NULL         type: eq_refpossible_keys: PRIMARY          key: PRIMARY      key_len: 8          ref: test.order_info.user_id         rows: 1     filtered: 100.00        Extra: NULL2 rows in set, 1 warning (0.00 sec)</code></pre><ul><li><code>ref</code>: æ­¤ç±»å‹é€šå¸¸å‡ºç°åœ¨å¤šè¡¨çš„ join æŸ¥è¯¢, é’ˆå¯¹äºéå”¯ä¸€æˆ–éä¸»é”®ç´¢å¼•, æˆ–è€…æ˜¯ä½¿ç”¨äº† <code>æœ€å·¦å‰ç¼€</code> è§„åˆ™ç´¢å¼•çš„æŸ¥è¯¢.</li></ul><p>ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­, å°±ä½¿ç”¨åˆ°äº† <code>ref</code> ç±»å‹çš„æŸ¥è¯¢:</p><pre><code class="SQL">mysql&gt; EXPLAIN SELECT * FROM user_info, order_info WHERE user_info.id = order_info.user_id AND order_info.user_id = 5\G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: user_info   partitions: NULL         type: constpossible_keys: PRIMARY          key: PRIMARY      key_len: 8          ref: const         rows: 1     filtered: 100.00        Extra: NULL*************************** 2. row ***************************           id: 1  select_type: SIMPLE        table: order_info   partitions: NULL         type: refpossible_keys: user_product_detail_index          key: user_product_detail_index      key_len: 9          ref: const         rows: 1     filtered: 100.00        Extra: Using index2 rows in set, 1 warning (0.01 sec)</code></pre><ul><li><code>range</code>: è¡¨ç¤ºä½¿ç”¨ç´¢å¼•èŒƒå›´æŸ¥è¯¢, é€šè¿‡ç´¢å¼•å­—æ®µèŒƒå›´è·å–è¡¨ä¸­éƒ¨åˆ†æ•°æ®è®°å½•. è¿™ä¸ªç±»å‹é€šå¸¸å‡ºç°åœ¨ =, &lt;&gt;, &gt;, &gt;=, &lt;, &lt;=, IS NULL, &lt;=&gt;, BETWEEN, IN() æ“ä½œä¸­.</li></ul><p>å½“ <code>type</code> æ˜¯ <code>range</code> æ—¶, é‚£ä¹ˆ EXPLAIN è¾“å‡ºçš„ <code>ref</code> å­—æ®µä¸º NULL, å¹¶ä¸” <code>key_len</code> å­—æ®µæ˜¯æ­¤æ¬¡æŸ¥è¯¢ä¸­ä½¿ç”¨åˆ°çš„ç´¢å¼•çš„æœ€é•¿çš„é‚£ä¸ª.</p><p>ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­å°±æ˜¯ä¸€ä¸ªèŒƒå›´æŸ¥è¯¢:</p><pre><code class="SQL">mysql&gt; EXPLAIN SELECT *    -&gt;         FROM user_info    -&gt;         WHERE id BETWEEN 2 AND 8 \G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: user_info   partitions: NULL         type: rangepossible_keys: PRIMARY          key: PRIMARY      key_len: 8          ref: NULL         rows: 7     filtered: 100.00        Extra: Using where1 row in set, 1 warning (0.00 sec)</code></pre><ul><li><code>index</code>: è¡¨ç¤ºå…¨ç´¢å¼•æ‰«æ(full index scan), å’Œ ALL ç±»å‹ç±»ä¼¼, åªä¸è¿‡ ALL ç±»å‹æ˜¯å…¨è¡¨æ‰«æ, è€Œ index ç±»å‹åˆ™ä»…ä»…æ‰«ææ‰€æœ‰çš„ç´¢å¼•, è€Œä¸æ‰«ææ•°æ®.</li></ul><p><code>index</code> ç±»å‹é€šå¸¸å‡ºç°åœ¨: æ‰€è¦æŸ¥è¯¢çš„æ•°æ®ç›´æ¥åœ¨ç´¢å¼•æ ‘ä¸­å°±å¯ä»¥è·å–åˆ°, è€Œä¸éœ€è¦æ‰«ææ•°æ®. å½“æ˜¯è¿™ç§æƒ…å†µæ—¶, Extra å­—æ®µ ä¼šæ˜¾ç¤º <code>Using index</code> .</p><p>ä¾‹å¦‚:</p><pre><code class="SQL">mysql&gt; EXPLAIN SELECT name FROM  user_info \G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: user_info   partitions: NULL         type: indexpossible_keys: NULL          key: name_index      key_len: 152          ref: NULL         rows: 10     filtered: 100.00        Extra: Using index1 row in set, 1 warning (0.00 sec)</code></pre><p>ä¸Šé¢çš„ä¾‹å­ä¸­, æˆ‘ä»¬æŸ¥è¯¢çš„ name å­—æ®µæ°å¥½æ˜¯ä¸€ä¸ªç´¢å¼•, å› æ­¤æˆ‘ä»¬ç›´æ¥ä»ç´¢å¼•ä¸­è·å–æ•°æ®å°±å¯ä»¥æ»¡è¶³æŸ¥è¯¢çš„éœ€æ±‚äº†, è€Œä¸éœ€è¦æŸ¥è¯¢è¡¨ä¸­çš„æ•°æ®. å› æ­¤è¿™æ ·çš„æƒ…å†µä¸‹, type çš„å€¼æ˜¯ <code>index</code> , å¹¶ä¸” Extra çš„å€¼æ˜¯ <code>Using index</code> .</p><ul><li><code>ALL</code>: è¡¨ç¤ºå…¨è¡¨æ‰«æ, è¿™ä¸ªç±»å‹çš„æŸ¥è¯¢æ˜¯æ€§èƒ½æœ€å·®çš„æŸ¥è¯¢ä¹‹ä¸€. é€šå¸¸æ¥è¯´, æˆ‘ä»¬çš„æŸ¥è¯¢ä¸åº”è¯¥å‡ºç° ALL ç±»å‹çš„æŸ¥è¯¢, å› ä¸ºè¿™æ ·çš„æŸ¥è¯¢åœ¨æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹, å¯¹æ•°æ®åº“çš„æ€§èƒ½æ˜¯å·¨å¤§çš„ç¾éš¾. å¦‚ä¸€ä¸ªæŸ¥è¯¢æ˜¯ ALL ç±»å‹æŸ¥è¯¢, é‚£ä¹ˆä¸€èˆ¬æ¥è¯´å¯ä»¥å¯¹ç›¸åº”çš„å­—æ®µæ·»åŠ ç´¢å¼•æ¥é¿å….</li></ul><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå…¨è¡¨æ‰«æçš„ä¾‹å­, å¯ä»¥çœ‹åˆ°, åœ¨å…¨è¡¨æ‰«ææ—¶, possible_keys å’Œ key å­—æ®µéƒ½æ˜¯ NULL, è¡¨ç¤ºæ²¡æœ‰ä½¿ç”¨åˆ°ç´¢å¼•, å¹¶ä¸” rows ååˆ†å·¨å¤§, å› æ­¤æ•´ä¸ªæŸ¥è¯¢æ•ˆç‡æ˜¯ååˆ†ä½ä¸‹çš„.</p><pre><code class="SQL">mysql&gt; EXPLAIN SELECT age FROM  user_info WHERE age = 20 \G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: user_info   partitions: NULL         type: ALLpossible_keys: NULL          key: NULL      key_len: NULL          ref: NULL         rows: 10     filtered: 10.00        Extra: Using where1 row in set, 1 warning (0.00 sec)</code></pre><p><strong>type ç±»å‹çš„æ€§èƒ½æ¯”è¾ƒ</strong></p><p>é€šå¸¸æ¥è¯´, ä¸åŒçš„ type ç±»å‹çš„æ€§èƒ½å…³ç³»å¦‚ä¸‹:</p><p> <code>ALL &lt; index &lt; range ~ index_merge &lt; ref &lt; eq_ref &lt; const &lt; system</code></p><p><code>ALL</code> ç±»å‹å› ä¸ºæ˜¯å…¨è¡¨æ‰«æ, å› æ­¤åœ¨ç›¸åŒçš„æŸ¥è¯¢æ¡ä»¶ä¸‹, å®ƒæ˜¯é€Ÿåº¦æœ€æ…¢çš„.</p><p>è€Œ <code>index</code> ç±»å‹çš„æŸ¥è¯¢è™½ç„¶ä¸æ˜¯å…¨è¡¨æ‰«æ, ä½†æ˜¯å®ƒæ‰«æäº†æ‰€æœ‰çš„ç´¢å¼•, å› æ­¤æ¯” ALL ç±»å‹çš„ç¨å¿«.</p><p>åé¢çš„å‡ ç§ç±»å‹éƒ½æ˜¯åˆ©ç”¨äº†ç´¢å¼•æ¥æŸ¥è¯¢æ•°æ®, å› æ­¤å¯ä»¥è¿‡æ»¤éƒ¨åˆ†æˆ–å¤§éƒ¨åˆ†æ•°æ®, å› æ­¤æŸ¥è¯¢æ•ˆç‡å°±æ¯”è¾ƒé«˜äº†.</p><h3 id="possible-keys"><a href="#possible-keys" class="headerlink" title="possible_keys"></a>possible_keys</h3><p><code>possible_keys</code> è¡¨ç¤º MySQL åœ¨æŸ¥è¯¢æ—¶, èƒ½å¤Ÿä½¿ç”¨åˆ°çš„ç´¢å¼•. æ³¨æ„, å³ä½¿æœ‰äº›ç´¢å¼•åœ¨ <code>possible_keys</code> ä¸­å‡ºç°, ä½†æ˜¯å¹¶ä¸è¡¨ç¤ºæ­¤ç´¢å¼•ä¼šçœŸæ­£åœ°è¢« MySQL ä½¿ç”¨åˆ°. MySQL åœ¨æŸ¥è¯¢æ—¶å…·ä½“ä½¿ç”¨äº†å“ªäº›ç´¢å¼•, ç”± <code>key</code> å­—æ®µå†³å®š.</p><h3 id="key"><a href="#key" class="headerlink" title="key"></a>key</h3><p>æ­¤å­—æ®µæ˜¯ MySQL åœ¨å½“å‰æŸ¥è¯¢æ—¶æ‰€çœŸæ­£ä½¿ç”¨åˆ°çš„ç´¢å¼•.</p><h3 id="key-len"><a href="#key-len" class="headerlink" title="key_len"></a>key_len</h3><p>è¡¨ç¤ºæŸ¥è¯¢ä¼˜åŒ–å™¨ä½¿ç”¨äº†ç´¢å¼•çš„å­—èŠ‚æ•°. è¿™ä¸ªå­—æ®µå¯ä»¥è¯„ä¼°ç»„åˆç´¢å¼•æ˜¯å¦å®Œå…¨è¢«ä½¿ç”¨, æˆ–åªæœ‰æœ€å·¦éƒ¨åˆ†å­—æ®µè¢«ä½¿ç”¨åˆ°.<br>key_len çš„è®¡ç®—è§„åˆ™å¦‚ä¸‹:</p><ul><li><p>å­—ç¬¦ä¸²</p><ul><li><p>char(n): n å­—èŠ‚é•¿åº¦</p></li><li><p>varchar(n): å¦‚æœæ˜¯ utf8 ç¼–ç , åˆ™æ˜¯ 3 n + 2å­—èŠ‚; å¦‚æœæ˜¯ utf8mb4 ç¼–ç , åˆ™æ˜¯ 4 n + 2 å­—èŠ‚.</p></li></ul></li><li><p>æ•°å€¼ç±»å‹:</p><ul><li><p>TINYINT: 1å­—èŠ‚</p></li><li><p>SMALLINT: 2å­—èŠ‚</p></li><li><p>MEDIUMINT: 3å­—èŠ‚</p></li><li><p>INT: 4å­—èŠ‚</p></li><li><p>BIGINT: 8å­—èŠ‚</p></li><li><p>æ—¶é—´ç±»å‹</p></li><li><p>DATE: 3å­—èŠ‚</p></li><li><p>TIMESTAMP: 4å­—èŠ‚</p></li><li><p>DATETIME: 8å­—èŠ‚</p></li><li><p>å­—æ®µå±æ€§: NULL å±æ€§ å ç”¨ä¸€ä¸ªå­—èŠ‚. å¦‚æœä¸€ä¸ªå­—æ®µæ˜¯ NOT NULL çš„, åˆ™æ²¡æœ‰æ­¤å±æ€§.</p></li></ul></li></ul><p>æˆ‘ä»¬æ¥ä¸¾ä¸¤ä¸ªç®€å•çš„æ —å­:</p><pre><code class="SQL">mysql&gt; EXPLAIN SELECT * FROM order_info WHERE user_id &lt; 3 AND product_name = 'p1' AND productor = 'WHH' \G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: order_info   partitions: NULL         type: rangepossible_keys: user_product_detail_index          key: user_product_detail_index      key_len: 9          ref: NULL         rows: 5     filtered: 11.11        Extra: Using where; Using index1 row in set, 1 warning (0.00 sec)</code></pre><p>ä¸Šé¢çš„ä¾‹å­æ˜¯ä»è¡¨ order_info ä¸­æŸ¥è¯¢æŒ‡å®šçš„å†…å®¹, è€Œæˆ‘ä»¬ä»æ­¤è¡¨çš„å»ºè¡¨è¯­å¥ä¸­å¯ä»¥çŸ¥é“, è¡¨ <code>order_info</code> æœ‰ä¸€ä¸ªè”åˆç´¢å¼•:</p><pre><code class="SQL">KEY `user_product_detail_index` (`user_id`, `product_name`, `productor`)</code></pre><p>ä¸è¿‡æ­¤æŸ¥è¯¢è¯­å¥ <code>WHERE user_id &lt; 3 AND product_name = 'p1' AND productor = 'WHH'</code> ä¸­, å› ä¸ºå…ˆè¿›è¡Œ user_id çš„èŒƒå›´æŸ¥è¯¢, è€Œæ ¹æ® <code>æœ€å·¦å‰ç¼€åŒ¹é…</code> åŸåˆ™, å½“é‡åˆ°èŒƒå›´æŸ¥è¯¢æ—¶, å°±åœæ­¢ç´¢å¼•çš„åŒ¹é…, å› æ­¤å®é™…ä¸Šæˆ‘ä»¬ä½¿ç”¨åˆ°çš„ç´¢å¼•çš„å­—æ®µåªæœ‰ <code>user_id</code> , å› æ­¤åœ¨ <code>EXPLAIN</code> ä¸­, æ˜¾ç¤ºçš„ key_len ä¸º 9. å› ä¸º user_id å­—æ®µæ˜¯ BIGINT, å ç”¨ 8 å­—èŠ‚, è€Œ NULL å±æ€§å ç”¨ä¸€ä¸ªå­—èŠ‚, å› æ­¤æ€»å…±æ˜¯ 9 ä¸ªå­—èŠ‚. è‹¥æˆ‘ä»¬å°†user_id å­—æ®µæ”¹ä¸º <code>BIGINT(20) NOT NULL DEFAULT '0'</code> , åˆ™ key_length åº”è¯¥æ˜¯8.</p><p>ä¸Šé¢å› ä¸º <code>æœ€å·¦å‰ç¼€åŒ¹é…</code> åŸåˆ™, æˆ‘ä»¬çš„æŸ¥è¯¢ä»…ä»…ä½¿ç”¨åˆ°äº†è”åˆç´¢å¼•çš„ <code>user_id</code> å­—æ®µ, å› æ­¤æ•ˆç‡ä¸ç®—é«˜.</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸‹ä¸€ä¸ªä¾‹å­:</p><pre><code class="SQL">mysql&gt; EXPLAIN SELECT * FROM order_info WHERE user_id = 1 AND product_name = 'p1' \G;*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: order_info   partitions: NULL         type: refpossible_keys: user_product_detail_index          key: user_product_detail_index      key_len: 161          ref: const,const         rows: 2     filtered: 100.00        Extra: Using index1 row in set, 1 warning (0.00 sec)</code></pre><p>è¿™æ¬¡çš„æŸ¥è¯¢ä¸­, æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨åˆ°èŒƒå›´æŸ¥è¯¢, key_len çš„å€¼ä¸º 161. ä¸ºä»€ä¹ˆå‘¢? å› ä¸ºæˆ‘ä»¬çš„æŸ¥è¯¢æ¡ä»¶ <code>WHERE user_id = 1 AND product_name = 'p1'</code> ä¸­, ä»…ä»…ä½¿ç”¨åˆ°äº†è”åˆç´¢å¼•ä¸­çš„å‰ä¸¤ä¸ªå­—æ®µ, å› æ­¤ <code>keyLen(user_id) + keyLen(product_name) = 9 + 50 * 3 + 2 = 161</code></p><h3 id="rows"><a href="#rows" class="headerlink" title="rows"></a>rows</h3><p><code>rows</code> ä¹Ÿæ˜¯ä¸€ä¸ªé‡è¦çš„å­—æ®µ. MySQL æŸ¥è¯¢ä¼˜åŒ–å™¨æ ¹æ®ç»Ÿè®¡ä¿¡æ¯, ä¼°ç®— SQL è¦æŸ¥æ‰¾åˆ°ç»“æœé›†éœ€è¦æ‰«æè¯»å–çš„æ•°æ®è¡Œæ•°.<br>è¿™ä¸ªå€¼éå¸¸ç›´è§‚æ˜¾ç¤º SQL çš„æ•ˆç‡å¥½å, åŸåˆ™ä¸Š <code>rows</code> è¶Šå°‘è¶Šå¥½.</p><h3 id="Extra"><a href="#Extra" class="headerlink" title="Extra"></a>Extra</h3><p><code>EXplain</code> ä¸­çš„å¾ˆå¤šé¢å¤–çš„ä¿¡æ¯ä¼šåœ¨ Extra å­—æ®µæ˜¾ç¤º, å¸¸è§çš„æœ‰ä»¥ä¸‹å‡ ç§å†…å®¹:</p><ul><li><code>Using filesort</code></li></ul><p>å½“ Extra ä¸­æœ‰ <code>Using filesort</code> æ—¶, è¡¨ç¤º MySQL éœ€é¢å¤–çš„æ’åºæ“ä½œ, ä¸èƒ½é€šè¿‡ç´¢å¼•é¡ºåºè¾¾åˆ°æ’åºæ•ˆæœ. ä¸€èˆ¬æœ‰ <code>Using filesort</code> , éƒ½å»ºè®®ä¼˜åŒ–å»æ‰, å› ä¸ºè¿™æ ·çš„æŸ¥è¯¢ CPU èµ„æºæ¶ˆè€—å¤§.</p><p>ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­:</p><pre><code class="SQL">mysql&gt; EXPLAIN SELECT * FROM order_info ORDER BY product_name \G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: order_info   partitions: NULL         type: indexpossible_keys: NULL          key: user_product_detail_index      key_len: 253          ref: NULL         rows: 9     filtered: 100.00        Extra: Using index; Using filesort1 row in set, 1 warning (0.00 sec)</code></pre><p>æˆ‘ä»¬çš„ç´¢å¼•æ˜¯</p><pre><code class="SQL">KEY `user_product_detail_index` (`user_id`, `product_name`, `productor`)</code></pre><p>ä½†æ˜¯ä¸Šé¢çš„æŸ¥è¯¢ä¸­æ ¹æ® <code>product_name</code> æ¥æ’åº, å› æ­¤ä¸èƒ½ä½¿ç”¨ç´¢å¼•è¿›è¡Œä¼˜åŒ–, è¿›è€Œä¼šäº§ç”Ÿ <code>Using filesort</code> .<br>å¦‚æœæˆ‘ä»¬å°†æ’åºä¾æ®æ”¹ä¸º <code>ORDER BY user_id, product_name</code> , é‚£ä¹ˆå°±ä¸ä¼šå‡ºç° <code>Using filesort</code> äº†. ä¾‹å¦‚:</p><pre><code class="SQL">mysql&gt; EXPLAIN SELECT * FROM order_info ORDER BY user_id, product_name \G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: order_info   partitions: NULL         type: indexpossible_keys: NULL          key: user_product_detail_index      key_len: 253          ref: NULL         rows: 9     filtered: 100.00        Extra: Using index1 row in set, 1 warning (0.00 sec)</code></pre><ul><li><p><code>Using index</code> â€œè¦†ç›–ç´¢å¼•æ‰«æâ€, è¡¨ç¤ºæŸ¥è¯¢åœ¨ç´¢å¼•æ ‘ä¸­å°±å¯æŸ¥æ‰¾æ‰€éœ€æ•°æ®, ä¸ç”¨æ‰«æè¡¨æ•°æ®æ–‡ä»¶, å¾€å¾€è¯´æ˜æ€§èƒ½ä¸é”™</p></li><li><p><code>Using temporary</code> æŸ¥è¯¢æœ‰ä½¿ç”¨ä¸´æ—¶è¡¨, ä¸€èˆ¬å‡ºç°äºæ’åº, åˆ†ç»„å’Œå¤šè¡¨ join çš„æƒ…å†µ, æŸ¥è¯¢æ•ˆç‡ä¸é«˜, å»ºè®®ä¼˜åŒ–.</p></li></ul>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h2&gt;&lt;p&gt;MySQL æä¾›äº†ä¸€ä¸ª EXPLAIN å‘½ä»¤, å®ƒå¯ä»¥å¯¹ SELECT è¯­å¥è¿›è¡Œåˆ†æ, å¹¶è¾“å‡º SELECT æ‰§è¡Œçš„è¯¦ç»†ä¿¡æ¯, ä»¥ä¾›å¼€å‘äººå‘˜é’ˆå¯¹æ€§ä¼˜åŒ–.&lt;br&gt;EXPLAIN å‘½ä»¤ç”¨æ³•ååˆ†ç®€å•, åœ¨ SELECT è¯­å¥å‰åŠ ä¸Š Explain å°±å¯ä»¥äº†, ä¾‹å¦‚:&lt;/p&gt;</summary>
    
    
    
    <category term="MySQL" scheme="http://example.com/categories/MySQL/"/>
    
    
    <category term="MySQL" scheme="http://example.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>dbæ“ä½œå¸¸è§é—®é¢˜</title>
    <link href="http://example.com/2021/01/08/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/db%E6%93%8D%E4%BD%9C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
    <id>http://example.com/2021/01/08/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/db%E6%93%8D%E4%BD%9C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</id>
    <published>2021-01-08T18:05:18.000Z</published>
    <updated>2021-01-23T09:15:30.422Z</updated>
    
    <content type="html"><![CDATA[<p>æ€»ç»“äº†ä¸€äº›dbæ“ä½œçš„å¸¸è§é—®é¢˜ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹å§</p><a id="more"></a><h2 id="è”åˆç´¢å¼•é—®é¢˜"><a href="#è”åˆç´¢å¼•é—®é¢˜" class="headerlink" title="è”åˆç´¢å¼•é—®é¢˜"></a>è”åˆç´¢å¼•é—®é¢˜</h2><ol><li> åœ¨imoåå°ç¾¤å”¤é†’æ´»åŠ¨ä¸­ï¼Œç”¨æˆ·æ•°æ®è¡¨å¤šè¾¾å‡ åƒä¸‡ï¼Œå¤§æ•°æ®è¿™è¾¹ï¼Œå¹¶æœªé’ˆå¯¹ä¸šåŠ¡åœºæ™¯å»ºç«‹æœ‰æ•ˆè¦†ç›–ç´¢å¼•ï¼Œå¯¼è‡´åå°SQLæ…¢æŸ¥è¯¢å‘Šè­¦ä¸Šåƒæ¬¡ï¼Œé’ˆå¯¹ä¸šåŠ¡åœºæ™¯ï¼Œæå‡ºä»¥ä¸‹ä¼˜åŒ–ï¼Œæ–°å¢key1ï¼Œkey2ç´¢å¼•è¦†ç›–ï¼Œåå°whereæ¡ä»¶ä¸¥æ ¼æŒ‰ç…§stats_dayï¼Œactivelevelï¼Œcategeory_idï¼Œccé¡ºåºæŸ¥è¯¢ã€‚</li><li> æŒ‰ç…§MySQLè”åˆç´¢å¼•æœ€å·¦åŒ¹é…åŸåˆ™ï¼Œæ¯”å¦‚A-B-Cè”åˆç´¢å¼•ï¼Œåˆ™é’ˆå¯¹Aï¼ŒA-Bï¼ŒA-B-CæŸ¥è¯¢æœ‰æ•ˆï¼Œè€ŒA-Cï¼ŒB-Cï¼ŒBï¼ŒCåˆ™æ— æ•ˆï¼Œwhereæ¡ä»¶æœ€å¥½æ ¹æ®ç´¢å¼•é¡ºåºè¿›è¡Œ</li><li> å¦‚æœæœç´¢æ¡ä»¶è¿‡äºå¤æ‚æ··ä¹±ï¼Œå»ºè®®å…ˆä¸äº§å“æ²Ÿé€šæ¸…æ¥šï¼Œç¡®å®šå¥½å¦‚ä½•å»ºç«‹ç´¢å¼•ï¼Œä¸¥æ ¼æŠŠæ§æœç´¢æ¡ä»¶ï¼ˆä»ç•Œé¢ä¸Šï¼‰</li><li> ä»¥ä¸‹ä¸ºç”¨æˆ·æ•°æ®è¡¨ï¼ˆåƒä¸‡çº§åˆ«ï¼‰</li></ol><pre><code class="SQL">CREATE TABLE `xx_push_activelevel_categeory_day` (  `stats_day` date NOT NULL DEFAULT '2019-01-01',  `cc` varchar(10) NOT NULL DEFAULT '',  `activelevel` varchar(30) NOT NULL DEFAULT 'unknown',  `categeory_id` varchar(50) NOT NULL DEFAULT 'unknown',  `groupid` char(30) NOT NULL DEFAULT 'unknown',  `role` varchar(15) NOT NULL DEFAULT 'unknown',  `uid` varchar(25) NOT NULL DEFAULT '',  PRIMARY KEY (`role`,`activelevel`,`categeory_id`,`cc`,`uid`,`groupid`,`stats_day`),  KEY `role` (`role`,`activelevel`,`categeory_id`),  KEY `key1` (`stats_day`,`activelevel`,`categeory_id`,`cc`,`role`),  KEY `key2` (`stats_day`,`activelevel`,`categeory_id`,`cc`),  KEY `actl` (`activelevel`),  KEY `agid` (`categeory_id`),  KEY `cc` (`cc`)) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4/*!50100 PARTITION BY RANGE (TO_DAYS(stats_day))(PARTITION pd20200609 VALUES LESS THAN (737951) ENGINE = MyISAM, PARTITION pd20200610 VALUES LESS THAN (737952) ENGINE = MyISAM, PARTITION pd20200611 VALUES LESS THAN (737953) ENGINE = MyISAM) */;</code></pre><h2 id="ä¸»é”®åç§»é—®é¢˜"><a href="#ä¸»é”®åç§»é—®é¢˜" class="headerlink" title="ä¸»é”®åç§»é—®é¢˜"></a>ä¸»é”®åç§»é—®é¢˜</h2><ol><li> åœ¨å•è¡¨å¤§æ•°æ®é‡çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ç´¢å¼•å¹¶ä¸æ˜¯å”¯ä¸€é€‰æ‹©ï¼Œå½“SQLåˆ†é¡µæŸ¥è¯¢ï¼Œoffsetè¾¾åˆ°ä¸€å®šé‡(å¤§æ¦‚20wä»¥ä¸Šï¼Ÿ)ä»¥åï¼Œå°±ä¼šå‡ºç°æ…¢æŸ¥è¯¢ç°è±¡ï¼Œæ˜¯ç”±äºMySQLæ ¹æ®ç´¢å¼•æŸ¥å‡ºä¸€å®šé‡æ•°æ®ä¹‹åï¼Œä¼šæ ¹æ®offsetæŠ›å¼ƒä¹‹å‰çš„æ•°æ®</li><li> è¿™æ„å‘³ç€å‰20wæ•°æ®çš„æŸ¥è¯¢éƒ½æ˜¯æ— ç”¨çš„ï¼Œè´¹åŠ›ä¸è®¨å¥½</li><li> å¯ä»¥é‡‡ç”¨ä¸»é”®id(INT, BIGINTç±»å‹)åç§»ï¼ŒINTç±»å‹æŸ¥è¯¢å¤©ç”Ÿå°±æœ‰ä¼˜åŠ¿ï¼Œåˆæ˜¯ä¸»é”®ç´¢å¼•ï¼Œå¯ä»¥åšåˆ°ä¸€éƒ¨åˆ°ä½</li><li> whereæ¡ä»¶æœ€åï¼ŒåŠ ä¸Šidæ’åºï¼Œè®°å½•ä¸Šä¸€æ¬¡çš„æŸ¥è¯¢æ•°æ®æœ€åä¸€æ¡idï¼Œä¸‹ä¸€æ¬¡æŸ¥è¯¢ä½œä¸ºåç§»é‡ï¼Œä»è€Œè·³è¿‡å‰é¢æ— ç”¨çš„æ•°æ®ï¼Œå†å¼€å§‹è¿›è¡Œç´¢å¼•æŸ¥è¯¢</li><li> ä»¥ä¸‹æ˜¯æŸä¸ªé¡¹ç›®çš„ä¾‹å­ï¼ˆä»…ä¾›å‚è€ƒï¼‰</li></ol><pre><code class="SQL">SELECT id, stats_day, cc, activelevel, categeory_id, groupid, role, uid FROM xx_push_activelevel_categeory_day AS biggroupPushCategeoryWHERE biggroupPushCategeory.id &gt; 200000 AND biggroupPushCategeory.stats_day = '2020-07-01 00:00:00' AND biggroupPushCategeory.activelevel = 'gtype_unactive_2' AND biggroupPushCategeory.categeory_id = 'categeory_mems_less_300' AND biggroupPushCategeory.cc = 'PK'ORDER BY biggroupPushCategeory.id ASC LIMIT 500;</code></pre><h2 id="ç»“æœé›†è¿‡æ»¤é—®é¢˜"><a href="#ç»“æœé›†è¿‡æ»¤é—®é¢˜" class="headerlink" title="ç»“æœé›†è¿‡æ»¤é—®é¢˜"></a>ç»“æœé›†è¿‡æ»¤é—®é¢˜</h2><ol><li> æ¥ä¸Šä¸€ä¸ªé—®é¢˜ï¼Œå½“æˆ‘ä»¬ç»“åˆä¸»é”®åç§»+ç´¢å¼•ã€KEY <code>sacc</code> (<code>stats_day</code>,<code>activelevel</code>,<code>categeory_id</code>,<code>cc</code>)ã€‘æœç´¢çš„æ—¶å€™ï¼ŒSQLè¿™è¾¹ä¼˜å…ˆæ ¹æ®ç´¢å¼•è¿‡æ»¤ç»“æœé›†ï¼Œæ ¹æ®ä¸Šé¢é‚£æ¡sqlï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè¿‡æ»¤å‡ºä¸€ä¸ªå¤§ç»“æœé›†ï¼Œè€Œä¸”ç»“æœé›†å¹¶ä¸ä¿è¯idæœ‰åº</li><li> è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦é‡æ–°ä¿®æ”¹ç´¢å¼•é”®ï¼ŒåŠ ä¸Šä¸»é”®idï¼Œä¾‹å¦‚KEY <code>sacci</code> (<code>stats_day</code>,<code>activelevel</code>,<code>categeory_id</code>,<code>cc</code>,<code>id</code>)ï¼Œå½“æˆ‘ä»¬è¿›è¡Œç´¢å¼•æŸ¥è¯¢å–500è¡Œæ—¶ï¼Œå¯ä»¥æ ¹æ®id&gt;20000ï¼Œç›´æ¥å‘½ä¸­500è¡Œå¹¶è¿”å›ï¼Œä¸éœ€è¦é‡æ–°æ’åºï¼Œä¹Ÿä¸ä¼šè¿”å›ä¹‹å‰saccç´¢å¼•çš„æ‰€æœ‰ç»“æœé›†</li><li> ä»¥ä¸‹æ˜¯ä¼˜åŒ–å‰å’Œä¼˜åŒ–åçš„å¯¹æ¯”å›¾ï¼Œæ€§èƒ½æé«˜äº†å‡ åå€</li></ol><h3 id="ä¼˜åŒ–å‰"><a href="#ä¼˜åŒ–å‰" class="headerlink" title="ä¼˜åŒ–å‰"></a>ä¼˜åŒ–å‰</h3><p><img src="/My-Blogs/images/db%E6%93%8D%E4%BD%9C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/db%E6%93%8D%E4%BD%9C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-01.png" alt="ä¼˜åŒ–å‰"></p><h3 id="ä¼˜åŒ–å"><a href="#ä¼˜åŒ–å" class="headerlink" title="ä¼˜åŒ–å"></a>ä¼˜åŒ–å</h3><p><img src="/My-Blogs/images/db%E6%93%8D%E4%BD%9C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/db%E6%93%8D%E4%BD%9C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-02.png" alt="ä¼˜åŒ–å"></p><h2 id="whereæ¡ä»¶é¡ºåºé—®é¢˜"><a href="#whereæ¡ä»¶é¡ºåºé—®é¢˜" class="headerlink" title="whereæ¡ä»¶é¡ºåºé—®é¢˜"></a>whereæ¡ä»¶é¡ºåºé—®é¢˜</h2><ol><li> æ¥ä¸Šä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºç´¢å¼•KEY <code>sacci</code> (<code>stats_day</code>,<code>activelevel</code>,<code>categeory_id</code>,<code>cc</code>,<code>id</code>)ï¼Œå¦‚æœæˆ‘ä»¬æŠŠidæ”¾åœ¨æœ€å‰ï¼Œæˆ–è€…æœ€åï¼Œä¼šå¯¹æŸ¥è¯¢çš„æ•ˆç‡æœ‰å½±å“å—ï¼Ÿç­”æ¡ˆæ˜¯æ²¡æœ‰ã€‚</li><li> SQLæ‰§è¡Œæ˜¯ä¼šè¢«è¿›è¡Œä¸€ç³»åˆ—é¢„å¤„ç†ï¼Œè®©æŸ¥è¯¢ä¼˜åŒ–å™¨é€‰æ‹©æœ€ä¼˜çš„æŸ¥è¯¢è®¡åˆ’ï¼Œæ‰€ä»¥whereæ¡ä»¶çš„å…ˆåå…³ç³»ä¸æ˜¯ä¼˜åŒ–å™¨é€‰æ‹©è§„åˆ™çš„ä¸€æ¡ï¼Œå½“ç„¶å‰ææ˜¯ä½ çš„whereæ¡ä»¶æ•°é‡ä¸ç´¢å¼•ä¸€è‡´ï¼Œå¦‚æœwhereæ¡ä»¶å°‘äºç´¢å¼•æ•°é‡ï¼Œä¼šæ ¹æ®æœ€å·¦åŸåˆ™ä¼˜å…ˆæŸ¥è¯¢ã€‚</li><li> æ€»çš„æ¥è¯´ï¼Œå”¯ä¸€ä¼šå½±å“çš„å°±æ˜¯whereæ¡ä»¶å’Œç´¢å¼•çš„æ¯”å¯¹ï¼Œä»¥åŠè·Ÿorder byç­‰ï¼Œè·Ÿå…ˆåé¡ºåºæ— å…³ã€‚</li><li> å¼•ç”³å¼€æ¥è¯´ï¼Œå¦‚æœå¯¹ABCä¸‰ä¸ªå­—æ®µå»ºç«‹è”åˆç´¢å¼•ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œåœ¨åˆ›å»ºç´¢å¼•æ—¶ï¼Œæ ¹æ®åŒºåˆ†åº¦åŸåˆ™ï¼Œå°½é‡è®©Aèƒ½å¤Ÿæ’é™¤æ›´å¤šè®°å½•è€Œä¸æ˜¯Bæˆ–Cï¼Œåœ¨æŸ¥è¯¢æ—¶ï¼Œæ ¹æ®ç´¢å¼•å‰ç¼€åŒ¹é…åŸåˆ™ï¼Œå°½å¯èƒ½è®©Aæ¡ä»¶ç²¾ç¡®ï¼ŒBå…¶æ¬¡ï¼ŒCçœ‹ç€åŠã€‚</li><li> ä»¥ä¸‹æ˜¯idå‰åå¯¹æ¯”å›¾</li></ol><p><img src="/My-Blogs/images/db%E6%93%8D%E4%BD%9C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/db%E6%93%8D%E4%BD%9C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-03.png" alt="alt"></p><p><img src="/My-Blogs/images/db%E6%93%8D%E4%BD%9C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/db%E6%93%8D%E4%BD%9C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-04.png" alt="alt"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æ€»ç»“äº†ä¸€äº›dbæ“ä½œçš„å¸¸è§é—®é¢˜ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹å§&lt;/p&gt;</summary>
    
    
    
    <category term="MySQL" scheme="http://example.com/categories/MySQL/"/>
    
    
    <category term="MySQL" scheme="http://example.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>PRPLæ¨¡å¼åŠ å¿«Webåº”ç”¨åŠ è½½</title>
    <link href="http://example.com/2021/01/08/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD/"/>
    <id>http://example.com/2021/01/08/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD/</id>
    <published>2021-01-08T18:01:13.000Z</published>
    <updated>2021-01-23T09:15:30.421Z</updated>
    
    <content type="html"><![CDATA[<p>PRPL æ˜¯ä¸€ç§ç”¨äºç»“æ„åŒ–å’Œäº¤ä»˜ Web åº”ç”¨ç¨‹åºå’Œæ¸è¿›å¼ Web åº”ç”¨ï¼ˆPWAï¼‰çš„æ¨¡å¼ï¼Œé‡ç‚¹åœ¨äºæ”¹è¿›åº”ç”¨çš„äº¤ä»˜å’Œå¯åŠ¨æ€§èƒ½ã€‚è¿™ä¸ªæ¨¡å¼åŒ…å«ä¸€ç»„æ­¥éª¤ï¼Œä»¥å®ç°å¿«é€Ÿã€å¯é ã€é«˜æ•ˆçš„åŠ è½½ï¼š</p><a id="more"></a><ul><li><p><code>Push</code>, æ¨é€åˆå§‹è·¯ç”±æ‰€éœ€çš„æ‰€æœ‰èµ„æºï¼Œå¹¶ä¸”åªæ¨é€è¿™äº›èµ„æºï¼Œä»¥ç¡®ä¿å®ƒä»¬å°½æ—©å¯ç”¨ã€‚</p></li><li><p><code>Render</code>, åœ¨åŠ è½½å…¶ä»–èµ„æºä¹‹å‰ï¼Œæ¸²æŸ“åˆå§‹è·¯ç”±å¹¶ä½¿å…¶å…·å¤‡äº¤äº’èƒ½åŠ›ã€‚</p></li><li><p><code>Pre-cache</code>, é¢„ç¼“å­˜ç”¨æˆ·å¯èƒ½è®¿é—®çš„å…¶ä»–è·¯ç”±çš„èµ„æºï¼Œä»è€Œåœ¨æ¶åŠ£çš„ç½‘ç»œæ¡ä»¶ä¸‹å°½å¯èƒ½æé«˜å¯¹åç»­è¯·æ±‚çš„å“åº”èƒ½åŠ›å’Œå¼¹æ€§ã€‚</p></li><li><p><code>Lazy-load</code>, å½“ç”¨æˆ·è¯·æ±‚æ—¶ï¼ŒæŒ‰éœ€å»¶è¿ŸåŠ è½½è·¯ç”±ï¼›å…³é”®è·¯ç”±çš„èµ„æºåº”ç«‹å³ä»ç¼“å­˜ä¸­åŠ è½½ï¼Œè€Œç›¸å¯¹ä¸å¸¸ç”¨çš„èµ„æºå¯ä»¥æ ¹æ®è¯·æ±‚ä»ç½‘ç»œè·å–ã€‚</p></li></ul><blockquote><p>æ³¨æ„ï¼šPRPLæ¨¡å¼æ˜¯ç”±Polymerå›¢é˜Ÿäº2016å¹´é¦–æ¬¡å¼•å…¥çš„ï¼Œä½†å·²è¢«è¯æ˜é€‚ç”¨äºå…¶ä»–è®¸å¤šæŠ€æœ¯æ ˆã€‚</p></blockquote><p><img src="/My-Blogs/images/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD-01.png" alt="img"></p><center>PRPL æ¨¡å¼åŠ è½½é¡ºåº</center><p>æœåŠ¡å™¨å’ŒæœåŠ¡ Worker ä¸€èµ·ä¸ºéæ´»åŠ¨è·¯ç”±é¢„ç¼“å­˜èµ„æºã€‚å½“ç”¨æˆ·åˆ‡æ¢è·¯ç”±æ—¶ï¼Œåº”ç”¨ä¼šå»¶è¿ŸåŠ è½½å°šæœªç¼“å­˜çš„æ‰€æœ‰å¿…éœ€èµ„æºï¼Œå¹¶åˆ›å»ºæ‰€éœ€çš„è§†å›¾ã€‚</p><p>Twitter.com è‡ª 2017 å¹´ä»¥æ¥å°±åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨ PRPL æ¨¡å¼äº†ã€‚ä¸‹é¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä»–ä»¬å¯¹å…³é”®è„šæœ¬ä½¿ç”¨äº†ç²’åº¦ä»£ç æ‹†åˆ†ï¼Œå¹¶ä½¿ç”¨ <code>&lt;linkrel=preload&gt;</code> æ¨é€è„šæœ¬ä»¥å°½å¿«è®©è„šæœ¬å¯ç”¨ï¼š</p><p><img src="/My-Blogs/images/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD-02.png" alt="img"></p><br><center style="margin-top: 20px">PRPL æ¨¡å¼ï¼šé¢„åŠ è½½å…³é”®è„šæœ¬</center><br><p>å…¶ä»–è·¯ç”±ä¼šæŒ‰éœ€å»¶è¿ŸåŠ è½½ã€‚Twitter åœ¨æ•´ä¸ªç”¨æˆ·ä½“éªŒéƒ¨åˆ†ä¸­ä¼šæŒ‰éœ€æä¾› 40 å¤šä¸ªå—ã€‚Twitter è¿˜ä½¿ç”¨æœåŠ¡ Workers å¯¹å…¶ä»–è·¯ç”±è¿›è¡Œï¼ˆç¦»çº¿ï¼‰èµ„äº§é¢„ç¼“å­˜ï¼Œä»¥æé«˜å¯¹åç»­å¯¼èˆªæ“ä½œçš„å“åº”èƒ½åŠ›ï¼š</p><br><p><img src="/My-Blogs/images/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD-03.png" alt="img"></p><br><center style="margin-top: 20px">PRPL æ¨¡å¼ï¼šç¦»çº¿ç¼“å­˜èµ„æº</center><br><p>ä»–ä»¬çš„åº”ç”¨ç¨‹åºå¤–å£³ç¨‹åºï¼ˆéª¨æ¶ UIï¼‰ä¹Ÿæ˜¯ç¦»çº¿ç¼“å­˜çš„ï¼Œå°±ç®—ç”¨æˆ·é€šè¿‡ç¼“æ…¢æˆ–ä¸ç¨³å®šçš„ç½‘ç»œè¿æ¥åŠ è½½ç«™ç‚¹ï¼Œä¹Ÿä¼šç«‹å³åŠ è½½å®ƒä»¬ï¼š</p><p><img src="/My-Blogs/images/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD-04.png" alt="img"></p><center>PRPL æ¨¡å¼ï¼šåº”ç”¨ç¨‹åºå¤–å£³</center><h2 id="ä¸ºä»€ä¹ˆé€‰æ‹©-PRPLï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆé€‰æ‹©-PRPLï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰æ‹© PRPLï¼Ÿ"></a>ä¸ºä»€ä¹ˆé€‰æ‹© PRPLï¼Ÿ</h2><p>åº”ç”¨ä½¿ç”¨ PRPL æ„å»ºæ˜¯ä¸ºäº†è¾¾åˆ°å¯é ã€å¿«é€Ÿå’Œå¼•äººå…¥èƒœçš„ç›®çš„ã€‚é™¤äº†è¿™äº›åŸºæœ¬ç›®æ ‡ï¼ŒPRPL è¿˜æ—¨åœ¨ï¼š</p><ul><li><p><strong>æ”¹å–„åº”ç”¨çš„äº¤äº’å°±ç»ªæ°´å¹³</strong>ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œåœ¨ç¬¬ä¸€ä¸ªè§†å›¾æ¸²æŸ“å¹¶å…·å¤‡äº¤äº’èƒ½åŠ›ä¹‹å‰ï¼Œä¸ä¼šå‘æµè§ˆå™¨å‘é€å¤šä½™çš„èµ„æºã€‚</p></li><li><p><strong>æé«˜åº”ç”¨çš„ç¼“å­˜æ•ˆç‡ï¼Œå°¤å…¶æ˜¯é•¿æœŸç¼“å­˜æ•ˆç‡</strong>ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œèµ„æºä¼šä»¥å¾ˆç»†çš„ç²’åº¦å‘æµè§ˆå™¨å‘é€ã€‚å½“èµ„æºè¢«è§£ç»‘æˆ–æ¾æ•£åœ°æ‰“åŒ…æ—¶ï¼Œå¯¹ä»£ç çš„æ¯æ¬¡æ›´æ”¹ç»™ç¼“å­˜çš„è´Ÿé¢å½±å“ä¹Ÿä¼šå‡å°‘ã€‚</p></li><li><p><strong>é™ä½å¼€å‘å’Œéƒ¨ç½²çš„å¤æ‚æ€§</strong>ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¿™ç§æ¨¡å¼ä½¿ç”¨åº”ç”¨çš„éšå¼ä¾èµ–å›¾å°†æ¯ä¸ªå…¥å£ç‚¹ç²¾ç¡®æ˜ å°„åˆ°æ‰€éœ€çš„èµ„æºé›†ï¼Œä»è€Œå‡å°‘æˆ–æ¶ˆé™¤äº†æ‰‹åŠ¨ç®¡ç†æ‰“åŒ…å’Œäº¤ä»˜çš„éœ€æ±‚ã€‚</p></li></ul><h2 id="PRPL-åº”åŒ…å«å“ªäº›æŠ€æœ¯ï¼Ÿ"><a href="#PRPL-åº”åŒ…å«å“ªäº›æŠ€æœ¯ï¼Ÿ" class="headerlink" title="PRPL åº”åŒ…å«å“ªäº›æŠ€æœ¯ï¼Ÿ"></a>PRPL åº”åŒ…å«å“ªäº›æŠ€æœ¯ï¼Ÿ</h2><p>PRPL æ˜¯ä¸€ç§èƒ½ä»¥å„ç§æ–¹å¼å®ç°çš„æ¦‚å¿µæ¨¡å¼ï¼Œä½†æ˜¯é€šè¿‡ä»¥ä¸‹ç°ä»£ Web ç‰¹æ€§çš„æŸç§ç»„åˆï¼Œå¯ä»¥æœ€è½»æ¾æœ‰æ•ˆåœ°å®ç° PRPLï¼š</p><ul><li><p>åƒJavaScript Modulesè¿™æ ·çš„ç°ä»£æ¨¡å—ç³»ç»Ÿï¼Œä½¿å·¥å…·å¯ä»¥è½»æ¾æ„é€ å®Œæ•´çš„ä¾èµ–å›¾ï¼›</p></li><li><p>æœåŠ¡Workersï¼Œä¸ºåç»­çš„åº”ç”¨è§†å›¾é¢„ç¼“å­˜ï¼ˆâ€œå®‰è£…â€ï¼‰èµ„æºï¼ˆè¿›è€Œæ”¯æŒç¦»çº¿ä¼˜å…ˆæ¶æ„ï¼‰</p></li><li><p>é¢„åŠ è½½ï¼Œç”¨äºå°½å¿«äº¤ä»˜æ‰€éœ€èµ„æºã€‚ä½ è¿˜å¯ä»¥ä½¿ç”¨é¢„åŠ è½½é“¾æ¥å¤´ï¼Œè¿™äº›å¤´å¯ä»¥è¢«åä½œæœåŠ¡å™¨æ‹¦æˆªå¹¶å‡çº§ä¸ºHTTP/2 Server Pushï¼ˆè¯¦æƒ…å¯è§<a href="https://www.smashingmagazine.com/2017/04/guide-http2-server-push/">åŸæ–‡</a>ï¼‰ã€‚ä¸€å®šè¦è®°ä½ï¼Œå°½ç®¡PushåŠŸèƒ½å¼ºå¤§ï¼Œä½†å®ƒä¹Ÿé¢ä¸´ç€è®¸å¤šå·²çŸ¥çš„æŒ‘æˆ˜ï¼›ä¸è¿‡PRPLä½¿ç”¨æœåŠ¡Workerå¯ä»¥é¿å…è¿‡åº¦æ¨é€çš„é—®é¢˜ï¼ˆä»…é’ˆå¯¹åˆå§‹è´Ÿè½½ä½¿ç”¨pushï¼‰ã€‚</p></li></ul><h2 id="å¦‚ä½•å®ç°-PRPL-æ¨¡å¼ï¼Ÿ"><a href="#å¦‚ä½•å®ç°-PRPL-æ¨¡å¼ï¼Ÿ" class="headerlink" title="å¦‚ä½•å®ç° PRPL æ¨¡å¼ï¼Ÿ"></a>å¦‚ä½•å®ç° PRPL æ¨¡å¼ï¼Ÿ</h2><p>PRPL çš„å¾ˆå¤§ä¸€éƒ¨åˆ†ç†å¿µæ˜¯å¯¹ JS æ‰“åŒ…æ€ç»´çš„é¢ è¦†ï¼Œå¹¶åœ¨æä¾›èµ„æºæ—¶æ‹†åˆ†æˆå°½å¯èƒ½æ¥è¿‘ç¼–å†™èµ„æºæ—¶çš„ç²’åº¦ï¼ˆè‡³å°‘æ‹†åˆ†æˆç‹¬ç«‹çš„åŠŸèƒ½æ¨¡å—ï¼‰ã€‚é‚£ä¹ˆå¦‚ä½•å®ç°ç»†ç²’åº¦å‘¢ï¼Ÿ</p><h3 id="åŸºäºè·¯ç”±æˆ–åŸºäºç»„ä»¶çš„ä»£ç æ‹†åˆ†å’Œå»¶è¿ŸåŠ è½½"><a href="#åŸºäºè·¯ç”±æˆ–åŸºäºç»„ä»¶çš„ä»£ç æ‹†åˆ†å’Œå»¶è¿ŸåŠ è½½" class="headerlink" title="åŸºäºè·¯ç”±æˆ–åŸºäºç»„ä»¶çš„ä»£ç æ‹†åˆ†å’Œå»¶è¿ŸåŠ è½½"></a>åŸºäºè·¯ç”±æˆ–åŸºäºç»„ä»¶çš„ä»£ç æ‹†åˆ†å’Œå»¶è¿ŸåŠ è½½</h3><p>ä½ æ­£åœ¨å°†äº‹ç‰©ç¼–å†™ä¸ºç»„ä»¶ã€‚ä¹Ÿè®¸ä½ æ­£åœ¨ä½¿ç”¨ ES æ¨¡å—ã€‚å¯¹äº Webpackï¼Œæˆ‘ä»¬ä½¿ç”¨åŠ¨æ€å¯¼å…¥å’Œä»£ç æ‹†åˆ†ï¼Œå°†ä½ çš„ä»£ç åº“æ‹†åˆ†ä¸ºæŒ‰éœ€åŠ è½½çš„å—ã€‚</p><br><p>Next.js å’Œ Nuxt.js ä¹‹ç±»çš„å…ƒæ¡†æ¶ä¼šé»˜è®¤å®ç°åŸºäºè·¯ç”±çš„ä»£ç æ‹†åˆ†ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ create-react-app ä¹‹ç±»çš„å·¥å…·é“¾æ ·æ¿ï¼Œåˆ™éœ€è¦å€ŸåŠ© React Router ä¹‹ç±»çš„è·¯ç”±å™¨è¿›è¡ŒåŠ¨æ€å¯¼å…¥ï¼Œæ‰èƒ½å°†åŸºäºè·¯ç”±æˆ–åŸºäºç»„ä»¶çš„ä»£ç æ‹†åˆ†æ·»åŠ åˆ°ä½ çš„åº”ç”¨ç¨‹åºä¸­ã€‚</p><br><p>å¯¹äº PRPL çš„ push/preload éƒ¨åˆ†ï¼ŒWebpack è¿˜æ”¯æŒå°† preload ä½œä¸ºé­”æœ¯æ³¨é‡Šæ¥é¢„åŠ è½½å…³é”®è„šæœ¬ã€‚</p><br><h3 id="é¢„ç¼“å­˜"><a href="#é¢„ç¼“å­˜" class="headerlink" title="é¢„ç¼“å­˜"></a>é¢„ç¼“å­˜</h3><p>å¯ä»¥ä½¿ç”¨æœåŠ¡ worker é¢„ç¼“å­˜å‰©ä½™çš„è·¯ç”±ã€‚å¦ä¸€ç§å¸¸è§çš„åšæ³•æ˜¯ï¼Œåˆ©ç”¨ Workbox ä¹‹ç±»çš„æœåŠ¡ worker åº“æ¥ç®€åŒ–ä¸ºåº”ç”¨ç¨‹åºé¢„ç¼“å­˜è·¯ç”±å’Œå—çš„è¿‡ç¨‹ã€‚</p><br><h2 id="PRPL-ä½¿ç”¨ä½•ç§åº”ç”¨ç¨‹åºç»“æ„ï¼Ÿ"><a href="#PRPL-ä½¿ç”¨ä½•ç§åº”ç”¨ç¨‹åºç»“æ„ï¼Ÿ" class="headerlink" title="PRPL ä½¿ç”¨ä½•ç§åº”ç”¨ç¨‹åºç»“æ„ï¼Ÿ"></a>PRPL ä½¿ç”¨ä½•ç§åº”ç”¨ç¨‹åºç»“æ„ï¼Ÿ</h2><p>PRPL é¼“åŠ±é‡‡ç”¨ä»¥ä¸‹ç»“æ„çš„å•é¡µåº”ç”¨ï¼ˆSPAï¼‰æ¶æ„ï¼š</p><br><ul><li><p>ä»æ¯ä¸ªæœ‰æ•ˆè·¯ç”±æä¾›çš„åº”ç”¨ç¨‹åºçš„ä¸»å…¥å£ç‚¹ã€‚</p></li><li><p>è¿™ä¸ªæ–‡ä»¶åº”è¯¥å¾ˆå°ï¼Œå› ä¸ºå®ƒå°†é€šè¿‡ä¸åŒçš„URLæä¾›ï¼Œå› æ­¤ä¼šè¢«å¤šæ¬¡ç¼“å­˜ã€‚å…¥å£ç‚¹ä¸­çš„æ‰€æœ‰èµ„æºURLéƒ½å¿…é¡»æ˜¯ç»å¯¹çš„ï¼Œå› ä¸ºå®ƒå¯ä»¥ä»éé¡¶çº§URLæä¾›ã€‚</p></li><li><p>å¤–å£³ï¼ˆapp-shellï¼‰ï¼Œå…¶ä¸­åŒ…æ‹¬é¡¶çº§åº”ç”¨é€»è¾‘ã€routerç­‰ã€‚</p></li><li><p>å»¶è¿ŸåŠ è½½çš„åº”ç”¨ç‰‡æ®µã€‚</p></li><li><p>å¯ä»¥ä»£è¡¨ç‰¹å®šè§†å›¾ä»£ç çš„ç‰‡æ®µï¼Œæˆ–å…¶ä»–å¯ä»¥å»¶è¿ŸåŠ è½½çš„ä»£ç ï¼ˆä¾‹å¦‚ï¼Œä¸»åº”ç”¨çš„ä¸€äº›éƒ¨åˆ†åœ¨ç¬¬ä¸€æ¬¡ç»˜åˆ¶æ—¶å¹¶ä¸éœ€è¦ï¼Œæ¯”å¦‚è¯´èœå•ï¼Œç›´åˆ°ç”¨æˆ·ä¸åº”ç”¨äº¤äº’æ—¶æ‰æ˜¾ç¤ºï¼‰ã€‚å¤–å£³è´Ÿè´£æ ¹æ®éœ€è¦åŠ¨æ€å¯¼å…¥è¿™äº›ç‰‡æ®µã€‚</p></li></ul><p><img src="/My-Blogs/images/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD/PRPL%E6%A8%A1%E5%BC%8F%E5%8A%A0%E5%BF%ABWeb%E5%BA%94%E7%94%A8%E5%8A%A0%E8%BD%BD-05.png" alt="img"></p><center style="margin: 20px 0 20px 0; ">åº”ç”¨å¤–å£³éª¨æ¶æ¨¡å¼</center><p>åº”ç”¨åº”æ ¹æ®éœ€è¦è°ƒç”¨åŠ¨æ€å¯¼å…¥ä»¥å»¶è¿ŸåŠ è½½ç‰‡æ®µã€‚ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·æ›´æ”¹ä¸ºæ–°è·¯ç”±æ—¶ï¼Œå®ƒå°†å¯¼å…¥ä¸è¯¥è·¯ç”±å…³è”çš„ç‰‡æ®µã€‚è¿™å¯èƒ½ä¼šå‘æœåŠ¡å™¨å‘èµ·æ–°è¯·æ±‚ï¼Œæˆ–è€…åªæ˜¯ä»ç¼“å­˜ä¸­åŠ è½½èµ„æºã€‚</p><br><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>é™¤äº†é’ˆå¯¹ PWA çš„åŸºæœ¬ç›®æ ‡å’Œæ ‡å‡†ä¹‹å¤–ï¼ŒPRPL è¿˜å°½é‡é’ˆå¯¹ä»¥ä¸‹æ–¹é¢åšäº†ä¼˜åŒ–ï¼š</p><br><ul><li><p>å°½é‡å‡å°‘äº¤äº’çš„å‡†å¤‡å·¥ä½œâ€”â€”ç‰¹åˆ«æ˜¯åœ¨é¦–æ¬¡ä½¿ç”¨æ—¶ï¼ˆæ— è®ºå…¥å£ç‚¹å¦‚ä½•ï¼‰ã€‚</p></li><li><p>å°½é‡æå‡ç¼“å­˜æ•ˆç‡ï¼Œå°¤å…¶æ˜¯æ›´æ–°ä¸æ–­å‘å¸ƒåçš„é•¿æœŸç¼“å­˜æ•ˆç‡ã€‚</p></li><li><p>ç®€åŒ–å¼€å‘å’Œéƒ¨ç½²ã€‚</p></li></ul><p>è‡ª 2016 å¹´è¯ç”Ÿä»¥æ¥ï¼ŒPRPL æ¨¡å¼å·²è·å¾—äº†å¤§è§„æ¨¡ä½¿ç”¨ï¼Œå€¼å¾—ä½ åœ¨ä¼˜åŒ–åº”ç”¨åŠ è½½æ—¶è€ƒè™‘ã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://addyosmani.com/blog/the-prpl-pattern/">https://addyosmani.com/blog/the-prpl-pattern/</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;PRPL æ˜¯ä¸€ç§ç”¨äºç»“æ„åŒ–å’Œäº¤ä»˜ Web åº”ç”¨ç¨‹åºå’Œæ¸è¿›å¼ Web åº”ç”¨ï¼ˆPWAï¼‰çš„æ¨¡å¼ï¼Œé‡ç‚¹åœ¨äºæ”¹è¿›åº”ç”¨çš„äº¤ä»˜å’Œå¯åŠ¨æ€§èƒ½ã€‚è¿™ä¸ªæ¨¡å¼åŒ…å«ä¸€ç»„æ­¥éª¤ï¼Œä»¥å®ç°å¿«é€Ÿã€å¯é ã€é«˜æ•ˆçš„åŠ è½½ï¼š&lt;/p&gt;</summary>
    
    
    
    <category term="æ€§èƒ½ä¼˜åŒ–" scheme="http://example.com/categories/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
    
    <category term="æ€§èƒ½ä¼˜åŒ–" scheme="http://example.com/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>è°ˆè°ˆç™»å½•</title>
    <link href="http://example.com/2021/01/08/%E5%AE%89%E5%85%A8/%E8%B0%88%E8%B0%88%E7%99%BB%E5%BD%95/"/>
    <id>http://example.com/2021/01/08/%E5%AE%89%E5%85%A8/%E8%B0%88%E8%B0%88%E7%99%BB%E5%BD%95/</id>
    <published>2021-01-08T17:57:43.000Z</published>
    <updated>2021-01-23T09:15:30.421Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€Cookieä¸Session"><a href="#ä¸€ã€Cookieä¸Session" class="headerlink" title="ä¸€ã€Cookieä¸Session"></a>ä¸€ã€Cookieä¸Session</h3><p>HTTPæ˜¯æ— çŠ¶æ€åè®®ï¼Œå®ƒä¸å¯¹ä¹‹å‰å‘ç”Ÿè¿‡çš„è¯·æ±‚å’Œå“åº”çš„çŠ¶æ€è¿›è¡Œä¿å­˜ã€‚å› ä¸ºæ— æ³•ç®¡ç†ç”¨æˆ·çŠ¶æ€ï¼Œå¯¹äºè¦ç™»å½•çš„é¡µé¢ï¼Œæ¯æ¬¡è·³è½¬æ–°é¡µé¢æ—¶éƒ½éœ€è¦å†æ¬¡ç™»å½•ã€‚</p><a id="more"></a><p>äºæ˜¯å¼•å…¥äº†Cookieæ¥ç®¡ç†ç”¨æˆ·çŠ¶æ€ï¼š</p><p>â‘  é¦–å…ˆå®¢æˆ·ç«¯å‘èµ·ä¸å¸¦Cookieä¿¡æ¯çš„ç™»å½•è¯·æ±‚</p><p>â‘¡ æœåŠ¡ç«¯æ¥æ”¶åˆ°è¯·æ±‚ï¼ŒéªŒè¯ç”¨æˆ·æ•°æ®æ­£ç¡®åï¼Œæ·»åŠ å“åº”å¤´Set-Cookie</p><p>â‘¢ å®¢æˆ·ç«¯æ”¶åˆ°å“åº”æŠ¥æ–‡åï¼Œæ£€æŸ¥åˆ°å“åº”å¤´Set-Cookieï¼Œåœ¨æœ¬åœ°ä¿å­˜Cookie</p><p>â‘£ ä¹‹åæ¯æ¬¡å‘è¯¥åŸŸå‘èµ·è¯·æ±‚æ—¶ï¼Œè‡ªåŠ¨æ·»åŠ è¯·æ±‚å¤´Cookieï¼Œå‘é€ç»™æœåŠ¡ç«¯</p><p>â‘¤ æœåŠ¡ç«¯è·å–è¯·æ±‚å¤´Cookieï¼Œæ ¹æ®Cookieçš„å€¼ï¼Œå°±å¯ä»¥åˆ¤æ–­å‡ºç”¨æˆ·æ˜¯å¦ç™»å½•</p><p>ä½†æ˜¯Cookieæå®¹æ˜“è¢«ç¯¡æ”¹å’Œä¼ªé€ ï¼Œäºæ˜¯äº§ç”Ÿäº†Sessionï¼ŒSessionå°†ç”¨æˆ·ä¿¡æ¯ä¿å­˜åœ¨æœåŠ¡ç«¯ï¼Œé‚£ä¹ˆSessionæ˜¯å¦‚ä½•ç®¡ç†ç”¨æˆ·çŠ¶æ€çš„å‘¢ï¼Ÿ</p><p>â‘  é¦–å…ˆå®¢æˆ·ç«¯å‘èµ·ä¸å¸¦Cookieä¿¡æ¯çš„ç™»å½•è¯·æ±‚</p><p>â‘¡ æœåŠ¡ç«¯æ¥æ”¶åˆ°è¯·æ±‚ï¼Œæ£€æŸ¥åˆ°æ²¡æœ‰æºå¸¦å£ä»¤ï¼ŒéªŒè¯ç”¨æˆ·å¯†ç æ­£ç¡®åç”ŸæˆSessionï¼Œå°†ç”¨æˆ·ä¿¡æ¯ä¿å­˜åœ¨Sessionï¼Œè®¾ç½®å“åº”å¤´Set-Cookieï¼Œé€šå¸¸æ˜¯å°†Session IDä½œä¸ºå£ä»¤å€¼</p><p>â‘¢ å®¢æˆ·ç«¯æ£€æŸ¥åˆ°Set-Cookieå“åº”å¤´ï¼Œåœ¨æœ¬åœ°ä¿å­˜Cookieä¿¡æ¯</p><p>â‘£ ä¹‹åæ¯æ¬¡å‘èµ·è¯·æ±‚æ—¶ï¼Œè‡ªåŠ¨åœ¨è¯·æ±‚å¤´Cookieä¸­æºå¸¦å£ä»¤ï¼Œå‘é€ç»™æœåŠ¡ç«¯</p><p>â‘¤ æœåŠ¡ç«¯è·å–Cookieæºå¸¦çš„å£ä»¤å€¼ï¼Œæ‰¾åˆ°å¯¹åº”çš„Sessionï¼Œå°±å¯ä»¥åˆ¤æ–­ç”¨æˆ·çŠ¶æ€</p><h3 id="äºŒã€å¦‚ä½•è®©Sessionå£ä»¤å€¼æ›´å®‰å…¨"><a href="#äºŒã€å¦‚ä½•è®©Sessionå£ä»¤å€¼æ›´å®‰å…¨" class="headerlink" title="äºŒã€å¦‚ä½•è®©Sessionå£ä»¤å€¼æ›´å®‰å…¨"></a>äºŒã€å¦‚ä½•è®©Sessionå£ä»¤å€¼æ›´å®‰å…¨</h3><p>è™½ç„¶å£ä»¤å€¼ç”±æœåŠ¡ç«¯ç”Ÿæˆï¼Œç”¨æˆ·ä¸å®¹æ˜“ä¼ªé€ ï¼ŒBut nothing is impossibleï¼›è€Œä¸”å£ä»¤å€¼å­˜åœ¨å®¢æˆ·ç«¯ï¼Œå°±æœ‰å¯èƒ½è¢«ç›—ç”¨ã€‚ä¸€æ—¦å£ä»¤å€¼è¢«ä¼ªé€ æˆ–ç›—ç”¨ï¼Œæ”»å‡»è€…å°±å¯ä»¥ä¼ªè£…æˆç”¨æˆ·è®¿é—®æœåŠ¡ç«¯çš„æ•°æ®ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•è®©Sessionå£ä»¤å€¼æ›´å®‰å…¨å‘¢ï¼Ÿ</p><p>â‘  å°†å®¢æˆ·ç«¯çš„æŸäº›ç‹¬æœ‰ä¿¡æ¯+å£ä»¤å€¼ä½œä¸ºåŸå€¼ï¼Œå¯¹å…¶è¿›è¡Œç­¾å</p><p>â‘¡ å°†å£ä»¤å€¼æ‹¼æ¥ç­¾åè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå°†Cookieè®¾ç½®ä¸ºHttpOnlyï¼ˆç¦æ­¢ç”¨æˆ·é€šè¿‡è„šæœ¬æ¥è·å–å’Œæ›´æ”¹Cookieï¼‰</p><p>â‘¢ æœåŠ¡ç«¯å†æ¬¡æ”¶åˆ°è¯·æ±‚ï¼Œå–å®¢æˆ·ç«¯ä¿¡æ¯ä¸å£ä»¤å€¼ç­¾åï¼Œä¸å®¢æˆ·ç«¯æºå¸¦çš„ç­¾åå¯¹æ¯”ï¼Œä¸ç›¸ç­‰ï¼Œè¯´æ˜è¯·æ±‚ä¸åˆæ³•</p><p>è¿™æ ·çš„è¯ï¼š</p><p>â‘  å³ä½¿æ”»å‡»è€…çŸ¥é“äº†å£ä»¤å€¼ï¼Œç”±äºä¸çŸ¥é“å¯†é’¥ï¼Œæ— æ³•ä¼ªé€ ç­¾å</p><p>â‘¡ å³ä½¿æ”»å‡»è€…é€šè¿‡æŸç§æ–¹å¼å¾—åˆ°äº†çœŸå®çš„å£ä»¤å€¼å’Œç­¾åï¼Œä½†æ˜¯ç”±äºæ”»å‡»è€…çš„å®¢æˆ·ç«¯ä¿¡æ¯ä¸ä¸€æ ·ï¼Œå‘é€åˆ°æœåŠ¡ç«¯åï¼Œä¼šå¾—åˆ°ä¸ä¸€æ ·çš„ç­¾åï¼Œç­¾åæ ¡éªŒä¸èƒ½é€šè¿‡</p><h3 id="ä¸‰ã€å¤šç³»ç»Ÿçš„å¤æ‚æ€§"><a href="#ä¸‰ã€å¤šç³»ç»Ÿçš„å¤æ‚æ€§" class="headerlink" title="ä¸‰ã€å¤šç³»ç»Ÿçš„å¤æ‚æ€§"></a>ä¸‰ã€å¤šç³»ç»Ÿçš„å¤æ‚æ€§</h3><p>webç³»ç»Ÿç”±æ—©æœŸçš„å•ç³»ç»Ÿå‘å±•æˆå¤šç³»ç»Ÿç»„æˆçš„åº”ç”¨ç¾¤ï¼Œé¢å¯¹å¦‚æ­¤ä¼—å¤šçš„ç³»ç»Ÿï¼Œç”¨æˆ·éš¾é“è¦ä¸€ä¸ªä¸ªç™»å½•ã€å†ä¸€ä¸ªä¸ªæ³¨é”€å—ï¼Ÿ</p><p>ç³»ç»Ÿå¤æ‚æ€§åº”è¯¥ç”±ç³»ç»Ÿå†…éƒ¨æ‰¿æ‹…ï¼Œè€Œä¸æ˜¯ç”¨æˆ·ã€‚æ— è®ºwebç³»ç»Ÿå†…éƒ¨å¤šä¹ˆå¤æ‚ï¼Œå¯¹ç”¨æˆ·è€Œè¨€ï¼Œéƒ½æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„æ•´ä½“ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·è®¿é—®webç³»ç»Ÿçš„æ•´ä¸ªåº”ç”¨ç¾¤ä¸è®¿é—®å•ä¸ªç³»ç»Ÿä¸€æ ·ï¼Œåªè¦ç™»å½•/æ³¨é”€ä¸€æ¬¡å°±å¤Ÿäº†ã€‚</p><p><img src="/My-Blogs/images/%E8%B0%88%E8%B0%88%E7%99%BB%E5%BD%95-01.png"></p><p>å› ä¸ºCookieä¸å…è®¸è·¨åŸŸï¼Œæ—©æœŸå¤šç³»ç»Ÿç™»å½•é‡‡ç”¨å°†Cookieç§åœ¨é¡¶çº§åŸŸåä¸‹çš„æ–¹å¼ï¼Œæ¥å®ç°Cookieå…±äº«ã€‚è¿™ç§æ–¹å¼çš„å±€é™åœ¨äºï¼š</p><p>â‘  åº”ç”¨ç¾¤å„ç³»ç»Ÿçš„åŸŸåå¾—ç»Ÿä¸€</p><p>â‘¡ åº”ç”¨ç¾¤å„ç³»ç»Ÿçš„webæœåŠ¡ç«¯ä½¿ç”¨çš„æŠ€æœ¯è¦ç›¸åŒï¼Œæ¯”å¦‚Sessionå£ä»¤å€¼ä»¥åŠå®ƒçš„ç­¾å</p><p>æ–¹å¼è¦ç›¸åŒï¼Œè¦ä¸Sessionå£ä»¤å€¼ä¸åŒï¼Œæ— æ³•ç»´æŒä¼šè¯</p><p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§å…¨æ–°çš„ç™»å½•æ–¹å¼æ¥å®ç°å¤šç³»ç»Ÿåº”ç”¨ç¾¤çš„ç™»å½•ï¼Œè¿™å°±æ˜¯å•ç‚¹ç™»å½•ã€‚</p><h3 id="å››ã€å•ç‚¹ç™»å½•"><a href="#å››ã€å•ç‚¹ç™»å½•" class="headerlink" title="å››ã€å•ç‚¹ç™»å½•"></a>å››ã€å•ç‚¹ç™»å½•</h3><p>å•ç‚¹ç™»å½•å…¨ç§°Single Sign Onï¼ˆç®€ç§°SSOï¼‰ï¼Œæ˜¯æŒ‡åœ¨å¤šç³»ç»Ÿåº”ç”¨ç¾¤ä¸­ç™»å½•ä¸€ä¸ªç³»ç»Ÿï¼Œä¾¿å¯åœ¨å…¶å®ƒæ‰€æœ‰ç³»ç»Ÿä¸­å¾—åˆ°æˆæƒè€Œæ— éœ€å†æ¬¡ç™»å½•ã€‚åŒ…æ‹¬å•ç‚¹ç™»å½•ä¸å•ç‚¹æ³¨é”€ä¸¤éƒ¨åˆ†ï¼š</p><h4 id="1ã€å•ç‚¹ç™»å½•"><a href="#1ã€å•ç‚¹ç™»å½•" class="headerlink" title="1ã€å•ç‚¹ç™»å½•"></a>1ã€å•ç‚¹ç™»å½•</h4><p>ã€€    ç›¸æ¯”äºå•ç³»ç»Ÿç™»å½•ï¼ŒSSOéœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„è®¤è¯ä¸­å¿ƒï¼Œåªæœ‰è®¤è¯ä¸­å¿ƒèƒ½æ¥å—ç”¨æˆ·çš„ç”¨    æˆ·åå¯†ç ç­‰å®‰å…¨ä¿¡æ¯ï¼Œå…¶å®ƒç³»ç»Ÿä¸æä¾›ç™»å½•å…¥å£ï¼Œåªæ¥å—è®¤è¯ä¸­å¿ƒçš„é—´æ¥æˆæƒã€‚</p><p>é€šå¸¸SSOè®¤è¯ä¸­å¿ƒéªŒè¯ç”¨æˆ·æ•°æ®æ²¡é—®é¢˜åï¼Œä¼šåˆ›å»ºæˆæƒTokenï¼Œåˆ†å‘ç»™å„ä¸ªå­ç³»ç»Ÿã€‚å­ç³»ç»Ÿæ‹¿åˆ°Tokenï¼Œå³å¾—åˆ°äº†æˆæƒï¼Œå¯ä»¥å€Ÿæ­¤åˆ›å»ºå±€éƒ¨ä¼šè¯ï¼Œå±€éƒ¨ä¼šè¯ç™»å½•æ–¹å¼ä¸å•ç³»ç»Ÿçš„ç™»å½•æ–¹å¼ç›¸åŒã€‚è¿™ä¸ªè¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯å•ç‚¹ç™»å½•çš„åŸç†ã€‚</p><p><img src="/My-Blogs/images/%E8%B0%88%E8%B0%88%E7%99%BB%E5%BD%95-02.png"></p><p>ä¾‹å¦‚ï¼š</p><p>ï¬    ç”¨æˆ·è®¿é—®ç³»ç»Ÿ1ï¼Œç³»ç»Ÿ1å‘ç°ç”¨æˆ·æœªç™»å½•ï¼Œè·³è½¬è‡³SSOè®¤è¯ä¸­å¿ƒï¼Œå¹¶å°†è‡ªå·±çš„åœ°å€ä½œä¸ºå‚æ•°</p><p>ï¬    SSOè®¤è¯ä¸­å¿ƒå‘ç°ç”¨æˆ·æœªç™»å½•ï¼Œå°†ç”¨æˆ·å¼•å¯¼è‡³ç™»å½•é¡µé¢</p><p>ï¬    ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå¯†ç æäº¤ç™»å½•ç”³è¯·</p><p>ï¬    SSOè®¤è¯ä¸­å¿ƒæ ¡éªŒç”¨æˆ·ä¿¡æ¯ï¼Œåˆ›å»ºç”¨æˆ·ä¸SSOè®¤è¯ä¸­å¿ƒä¹‹é—´çš„ä¼šè¯ï¼Œç§°ä¸ºå…¨å±€ä¼šè¯ï¼ŒåŒæ—¶åˆ›å»ºæˆæƒToken</p><p>ï¬    SSOè®¤è¯ä¸­å¿ƒå¸¦ç€Tokenè·³è½¬å›æœ€åˆçš„è¯·æ±‚åœ°å€ï¼ˆç³»ç»Ÿ1ï¼‰</p><p>ï¬    ç³»ç»Ÿ1æ‹¿åˆ°Tokenï¼Œå»SSOè®¤è¯ä¸­å¿ƒæ ¡éªŒTokenæ˜¯å¦æœ‰æ•ˆ</p><p>ï¬    SSOè®¤è¯ä¸­å¿ƒæ ¡éªŒTokenï¼Œè¿”å›æœ‰æ•ˆï¼Œæ³¨å†Œç³»ç»Ÿ1</p><p>ï¬    ç³»ç»Ÿ1ä½¿ç”¨è¯¥Tokenåˆ›å»ºä¸ç”¨æˆ·çš„ä¼šè¯ï¼Œç§°ä¸ºå±€éƒ¨ä¼šè¯ï¼Œè¿”å›å—ä¿æŠ¤èµ„æº</p><p>ï¬    ç”¨æˆ·è®¿é—®ç³»ç»Ÿ2çš„å—ä¿æŠ¤èµ„æº</p><p>ï¬    ç³»ç»Ÿ2å‘ç°ç”¨æˆ·æœªç™»å½•ï¼Œè·³è½¬è‡³SSOè®¤è¯ä¸­å¿ƒï¼Œå¹¶å°†è‡ªå·±çš„åœ°å€ä½œä¸ºå‚æ•°</p><p>ï¬    SSOè®¤è¯ä¸­å¿ƒå‘ç°ç”¨æˆ·å·²ç™»å½•ï¼Œè·³è½¬å›ç³»ç»Ÿ2çš„åœ°å€ï¼Œå¹¶é™„ä¸Šä»¤ç‰Œ</p><p>ï¬    ç³»ç»Ÿ2æ‹¿åˆ°ä»¤ç‰Œï¼Œå»SSOè®¤è¯ä¸­å¿ƒæ ¡éªŒä»¤ç‰Œæ˜¯å¦æœ‰æ•ˆ</p><p>ï¬    SSOè®¤è¯ä¸­å¿ƒæ ¡éªŒä»¤ç‰Œï¼Œè¿”å›æœ‰æ•ˆï¼Œæ³¨å†Œç³»ç»Ÿ2</p><p>ï¬    ç³»ç»Ÿ2ä½¿ç”¨è¯¥ä»¤ç‰Œåˆ›å»ºä¸ç”¨æˆ·çš„å±€éƒ¨ä¼šè¯ï¼Œè¿”å›å—ä¿æŠ¤èµ„æº</p><p>ç”¨æˆ·ç™»å½•æˆåŠŸä¹‹åï¼Œä¼šä¸SSOè®¤è¯ä¸­å¿ƒåŠå„ä¸ªå­ç³»ç»Ÿå»ºç«‹ä¼šè¯ï¼Œç”¨æˆ·ä¸SSOè®¤è¯ä¸­å¿ƒå»ºç«‹çš„ä¼šè¯ç§°ä¸ºå…¨å±€ä¼šè¯ï¼Œç”¨æˆ·ä¸å„ä¸ªå­ç³»ç»Ÿå»ºç«‹çš„ä¼šè¯ç§°ä¸ºå±€éƒ¨ä¼šè¯ï¼Œå±€éƒ¨ä¼šè¯å»ºç«‹ä¹‹åï¼Œç”¨æˆ·è®¿é—®å­ç³»ç»Ÿå—ä¿æŠ¤èµ„æºå°†ä¸å†é€šè¿‡SSOè®¤è¯ä¸­å¿ƒï¼Œå…¨å±€ä¼šè¯ä¸å±€éƒ¨ä¼šè¯æœ‰å¦‚ä¸‹çº¦æŸå…³ç³»ï¼š</p><p>â‘  å±€éƒ¨ä¼šè¯å­˜åœ¨ï¼Œå…¨å±€ä¼šè¯ä¸€å®šå­˜åœ¨</p><p>â‘¡ å…¨å±€ä¼šè¯å­˜åœ¨ï¼Œå±€éƒ¨ä¼šè¯ä¸ä¸€å®šå­˜åœ¨</p><p>â‘¢ å…¨å±€ä¼šè¯é”€æ¯ï¼Œå±€éƒ¨ä¼šè¯å¿…é¡»é”€æ¯</p><p>2ã€å•ç‚¹æ³¨é”€</p><p>å•ç‚¹ç™»å½•è‡ªç„¶ä¹Ÿè¦å•ç‚¹æ³¨é”€ï¼Œåœ¨ä¸€ä¸ªå­ç³»ç»Ÿä¸­æ³¨é”€ï¼Œæ‰€æœ‰å­ç³»ç»Ÿçš„ä¼šè¯éƒ½å°†è¢«é”€æ¯ã€‚</p><p><img src="/My-Blogs/images/%E8%B0%88%E8%B0%88%E7%99%BB%E5%BD%95-03.png"></p><p>ï¬    ç”¨æˆ·å‘ç³»ç»Ÿ1å‘èµ·æ³¨é”€è¯·æ±‚</p><p>ï¬    ç³»ç»Ÿ1æ ¹æ®ç”¨æˆ·ä¸ç³»ç»Ÿ1å»ºç«‹çš„ä¼šè¯æ‹¿åˆ°Tokenï¼Œå‘SSOè®¤è¯ä¸­å¿ƒå‘èµ·æ³¨é”€è¯·æ±‚</p><p>ï¬    SSOè®¤è¯ä¸­å¿ƒæ ¡éªŒTokenæœ‰æ•ˆï¼Œé”€æ¯å…¨å±€ä¼šè¯ï¼ŒåŒæ—¶å–å‡ºæ‰€æœ‰ç”¨æ­¤Tokenæ³¨å†Œçš„ç³»ç»Ÿåœ°å€</p><p>ï¬    SSOè®¤è¯ä¸­å¿ƒå‘æ‰€æœ‰æ³¨å†Œç³»ç»Ÿå‘èµ·æ³¨é”€è¯·æ±‚</p><p>ï¬    å„æ³¨å†Œç³»ç»Ÿæ¥æ”¶SSOè®¤è¯ä¸­å¿ƒçš„æ³¨é”€è¯·æ±‚ï¼Œé”€æ¯å±€éƒ¨ä¼šè¯</p><p>ï¬    SSOè®¤è¯ä¸­å¿ƒå¼•å¯¼ç”¨æˆ·è‡³ç™»å½•é¡µé¢</p><h3 id="äº”ã€ç™»å½•å®‰å…¨é˜²èŒƒ"><a href="#äº”ã€ç™»å½•å®‰å…¨é˜²èŒƒ" class="headerlink" title="äº”ã€ç™»å½•å®‰å…¨é˜²èŒƒ"></a>äº”ã€ç™»å½•å®‰å…¨é˜²èŒƒ</h3><p>1ã€CSRFæ”»å‡»</p><p>CSRFï¼ˆCross-site request forgeryï¼‰è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼šæ”»å‡»è€…è¯±å¯¼å—å®³è€…è¿›å…¥ç¬¬ä¸‰æ–¹ç½‘ç«™ï¼Œåœ¨ç¬¬ä¸‰æ–¹ç½‘ç«™ä¸­ï¼Œå‘è¢«æ”»å‡»ç½‘ç«™å‘é€è·¨ç«™è¯·æ±‚ã€‚åˆ©ç”¨å—å®³è€…åœ¨è¢«æ”»å‡»ç½‘ç«™å·²ç»è·å–çš„ç™»å½•å‡­è¯ï¼Œç»•è¿‡åå°çš„ç”¨æˆ·éªŒè¯ï¼Œè¾¾åˆ°å†’å……ç”¨æˆ·å¯¹è¢«æ”»å‡»ç½‘ç«™æ‰§è¡ŒæŸé¡¹æ“ä½œçš„ç›®çš„ã€‚</p><p>ä¸€ä¸ªå…¸å‹çš„CSRFæ”»å‡»æœ‰ç€å¦‚ä¸‹çš„æµç¨‹ï¼š</p><p>â‘  å—å®³è€…ç™»å½•ç½‘ç«™aï¼Œå¹¶ä¿ç•™äº†ç™»å½•å‡­è¯Cookie</p><p>â‘¡ æ”»å‡»è€…å¼•è¯±å—å®³è€…è®¿é—®ç½‘ç«™bï¼Œå®ƒå‘ç½‘ç«™açš„æœåŠ¡å™¨å‘é€äº†ä¸€ä¸ªè·¨ç«™è¯·æ±‚ï¼Œè¯¥è¯·æ±‚ä¼šé»˜è®¤æºå¸¦ç½‘ç«™açš„Cookie</p><p>â‘¢ ç½‘ç«™açš„æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œå¯¹è¯·æ±‚è¿›è¡ŒéªŒè¯ï¼Œç¡®è®¤æ˜¯å—å®³è€…çš„å‡­è¯ï¼Œè¯¯ä»¥ä¸ºæ˜¯å—å®³è€…è‡ªå·±å‘é€çš„è¯·æ±‚ï¼Œä»¥å—å®³è€…çš„åä¹‰æ‰§è¡ŒæŸä¸ªæ“ä½œ</p><p>â‘£ æ”»å‡»å®Œæˆï¼Œæ”»å‡»è€…åœ¨å—å®³è€…ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ï¼Œå†’å……å—å®³è€…ï¼Œè®©ç½‘ç«™aæ‰§è¡Œäº†æ”»å‡»è€…è‡ªå·±å®šä¹‰çš„æ“ä½œ</p><p>CSRFé€šå¸¸å‘ç”Ÿåœ¨ç¬¬ä¸‰æ–¹åŸŸåï¼Œç”±äºæµè§ˆå™¨åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œæ”»å‡»è€…ä¸èƒ½è·å–åˆ°å—å®³è€…çš„Cookieä¿¡æ¯ï¼Œåªæ˜¯å†’ç”¨ã€‚é’ˆå¯¹è¿™2ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¶å®šç›¸åº”çš„é˜²æŠ¤ç­–ç•¥ï¼š</p><p>1ï¼‰åŒæºæ£€æµ‹</p><p>æœåŠ¡å™¨é€šè¿‡è§£æOrigin æˆ–Refererè¿™ä¸¤ä¸ªè¯·æ±‚å¤´ï¼Œç¡®å®šè¯·æ±‚çš„æ¥æºåŸŸï¼Œå¦‚æœè¯·æ±‚æ¥è‡ªå¤–åŸŸï¼Œç›´æ¥é˜»æ­¢ã€‚</p><p>ç¼ºç‚¹ï¼šåœ¨éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæ”»å‡»è€…å¯ä»¥éšè—ç”šè‡³ä¿®æ”¹è‡ªå·±è¯·æ±‚çš„Refererï¼›ä¼šè¯¯ä¼¤ä¸€äº›æ­£å¸¸è¯·æ±‚ï¼Œæ¯”å¦‚é€šè¿‡æœç´¢ç»“æœè·³è½¬çš„é¡µé¢è¯·æ±‚ã€‚</p><p>2ï¼‰Samesite Cookie</p><p>ä¸ºäº†ä»æºå¤´ä¸Šè§£å†³CSRFæ”»å‡»ï¼ŒGoogleèµ·è‰äº†ä¸€ä»½è‰æ¡ˆæ¥æ”¹è¿›HTTPåè®®ï¼Œå³ä¸ºå“åº”å¤´Set-Cookieæ–°å¢Samesiteå±æ€§ï¼š</p><p>Strictï¼šä»»ä½•æƒ…å†µä¸‹éƒ½ä¸å¯èƒ½ä½œä¸ºç¬¬ä¸‰æ–¹Cookieï¼Œå…¶å®ƒç½‘ç«™å‘èµ·çš„ä»»æ„è¯·æ±‚éƒ½ä¸ä¼šæºå¸¦ä¸Šè¯¥Cookieï¼ŒåŒ…æ‹¬æœç´¢é¡µé¢ã€‚</p><p>Laxï¼šç”¨æˆ·åœ¨ä¸åŒç½‘ç«™ä¹‹é—´é€šè¿‡é“¾æ¥è·³è½¬ä¸å—å½±å“ï¼›ä½†å‡å¦‚è¿™ä¸ªè¯·æ±‚æ˜¯ä»å…¶å®ƒç½‘ç«™å‘èµ·çš„è¯·æ±‚ï¼Œæˆ–è€…é¡µé¢è·³è½¬æ˜¯é€šè¿‡è¡¨å•POSTæäº¤è§¦å‘çš„ï¼Œåˆ™Cookieä¹Ÿä¸ä¼šæºå¸¦å‘é€ã€‚</p><p>ç¼ºç‚¹ï¼šç›®å‰è¿˜å¹¶ä¸æˆç†Ÿï¼Œå…¶åº”ç”¨åœºæ™¯æœ‰å¾…è§‚æœ›ã€‚</p><p>3ï¼‰åŒé‡Cookie</p><p>â‘      åœ¨ç”¨æˆ·è®¿é—®ç½‘ç«™é¡µé¢æ—¶ï¼Œå‘è¯·æ±‚åŸŸåæ³¨å…¥ä¸¤ä¸ªCookieï¼Œä¸€ä¸ªæ˜¯åŸæœ¬è¦æ³¨å…¥çš„Cookieï¼Œä¸€ä¸ªæ¯”å¦‚éšæœºå­—ç¬¦ä¸²</p><p>â‘¡ å‰ç«¯å‘åç«¯å‘èµ·è¯·æ±‚æ—¶ï¼Œå–å‡ºéšæœºå­—ç¬¦ä¸²ï¼Œæ·»åŠ åˆ°URLå‚æ•°æˆ–è¯·æ±‚å¤´ä¸­</p><p>â‘¢ åç«¯éªŒè¯æºå¸¦çš„éšæœºæ•°ä¸Cookieä¸­çš„éšæœºæ•°æ˜¯å¦ä¸€è‡´ï¼Œä¸ä¸€è‡´åˆ™æ‹’ç»è¯·æ±‚</p><p>ç¼ºç‚¹ï¼šéš¾ä»¥åšåˆ°å­åŸŸåéš”ç¦»ï¼Œè®¤è¯Cookieå¿…é¡»è¢«ç§åœ¨é¡¶çº§åŸŸåä¸‹ï¼Œæ¯ä¸ªå­åŸŸæ‰å¯ä»¥è®¿é—®ï¼›å¦‚æœæŸä¸ªå­åŸŸå­˜åœ¨XSSæ¼æ´ï¼Œæ”»å‡»è€…å°†è¿™ä¸ªè®¤è¯Cookieä¿®æ”¹ä¸ºè‡ªå·±é…ç½®çš„Cookieï¼›æ”»å‡»è€…ç›´æ¥ä½¿ç”¨è‡ªå·±é…ç½®çš„Cookieå‘èµ·CSRFæ”»å‡»ã€‚</p><p>4ï¼‰CSRF Token</p><p>CSRFæ”»å‡»è€…æ— æ³•ç›´æ¥çªƒå–åˆ°ç”¨æˆ·çš„Cookieï¼Œä»…ä»…æ˜¯å†’ç”¨ï¼›è€ŒCSRFæ”»å‡»ä¹‹æ‰€ä»¥èƒ½å¤ŸæˆåŠŸï¼Œæ˜¯å› ä¸ºæœåŠ¡å™¨è¯¯æŠŠæ”»å‡»è€…å‘é€çš„è¯·æ±‚å½“æˆäº†ç”¨æˆ·çš„è¯·æ±‚ã€‚</p><p>â‘  æœåŠ¡å™¨ç”Ÿæˆç™»å½•Cookieæ—¶ï¼ŒåŒæ—¶ç”ŸæˆTokenå’ŒTokenç­¾åçš„2ä¸ªCookie</p><p>â‘¡ å‰ç«¯å‘åç«¯å‘èµ·è¯·æ±‚æ—¶ï¼Œå°†Tokenæ·»åŠ åˆ°URLå‚æ•°æˆ–è¯·æ±‚å¤´ä¸­</p><p>â‘¢ åç«¯æ”¶åˆ°è¯·æ±‚ï¼Œé¦–å…ˆéªŒè¯å‚æ•°ä¸Tokenç›¸ä¸ç›¸åŒï¼Œä¸ç›¸åŒåˆ™ä¸­æ­¢è¯·æ±‚ï¼›ç„¶åæ ¡éªŒç­¾åï¼Œä¸ç›¸åŒåˆ™ä¸­æ­¢è¯·æ±‚ã€‚å› ä¸ºæ”»å‡»è€…ä¸çŸ¥é“å¯†é’¥ï¼Œä½¿ç”¨Tokenç­¾åå¯ä»¥é˜²æ­¢Cookieè¢«ç¯¡æ”¹å’Œä¼ªé€ ã€‚</p><p>ç¼ºç‚¹ï¼šæ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦æºå¸¦Tokenï¼Œä¸”éœ€è¦æœåŠ¡ç«¯å¯¹æ¯ä¸ªè¯·æ±‚è¿›è¡Œæ ¡éªŒã€‚æ‰€ä»¥ä¸€èˆ¬åªå¯¹åŒ…å«æ•æ„Ÿæ•°æ®çš„è¯·æ±‚åšæ­¤å¤„ç†ã€‚</p><p>2ã€çŸ­ä¿¡é˜²åˆ·</p><p>çŸ­ä¿¡è½°ç‚¸æ˜¯æŒ‡æ”»å‡»è€…åˆ©ç”¨ä»å„ä¸ªç½‘ç«™ä¸Šæ‰¾åˆ°çš„å‘é€åŠ¨æ€çŸ­ä¿¡çš„URLå’Œå‰ç«¯è¾“å…¥çš„è¢«æ”»å‡»è€…çš„æ‰‹æœºå·ç ï¼Œå‘é€HTTPè¯·æ±‚ï¼Œæ¯æ¬¡è¯·æ±‚ç»™ç”¨æˆ·å‘é€ä¸€ä¸ªåŠ¨æ€çŸ­ä¿¡ã€‚</p><p>å±å®³ï¼šå¢åŠ å…¬å¸çš„è¿è¥æˆæœ¬ï¼Œå› ä¸ºçŸ­ä¿¡æ˜¯éœ€è¦è®¡è´¹çš„ï¼›è¢«æ”»å‡»è€…å¤§é‡è¢«åŠ¨æ¥æ”¶éè‡ªèº«è¯·æ±‚çš„çŸ­ä¿¡ï¼Œé€ æˆæ— æ³•æ­£å¸¸ä½¿ç”¨ç§»åŠ¨è¿è¥å•†ä¸šåŠ¡ï¼›ç»™å…¬å¸å½¢è±¡é€ æˆæå¤§å½±å“ï¼Œå› ä¸ºä¸€èˆ¬çŸ­ä¿¡ä¼šå¸¦å…¬å¸ç­¾åã€‚</p><p>å¸¸è§é˜²èŒƒæ‰‹æ®µï¼š</p><p>ï¬    çŸ­ä¿¡å‘é€é—´éš”è®¾ç½®</p><p>ï¬    å‘é€é‡é™åˆ¶</p><p>ï¬    å›¾æ–‡éªŒè¯ç </p><p>ï¬    è§¦å‘æµç¨‹é™åˆ¶</p><h3 id="å…­ã€å…¨çƒéƒ¨ç½²é—®é¢˜"><a href="#å…­ã€å…¨çƒéƒ¨ç½²é—®é¢˜" class="headerlink" title="å…­ã€å…¨çƒéƒ¨ç½²é—®é¢˜"></a>å…­ã€å…¨çƒéƒ¨ç½²é—®é¢˜</h3><p>Sessionå­˜åœ¨å†…å­˜é‡Œéšç€ç”¨æˆ·çš„å¢å¤šä¼šå¯¼è‡´å†…å­˜æº¢å‡ºï¼Œä¸”ä¸èƒ½è·¨è¿›ç¨‹ã€è·¨æœºå™¨å…±äº«ï¼Œä¸”é‡å¯è¿›ç¨‹åä¼šå¯¼è‡´Sessionä¸¢å¤±ï¼Œæ‰€ä»¥Sessioné€šå¸¸ä¼šå­˜åœ¨ç¬¬ä¸‰æ–¹ç¼“å­˜ï¼Œæ¯”å¦‚Redisé‡Œã€‚</p><p>Rediså…¨çƒéƒ¨ç½²å¸¦æ¥çš„é—®é¢˜åœ¨äºï¼Œå·²ç™»å½•çš„ç”¨æˆ·å†æ¬¡è¯·æ±‚æ—¶ï¼Œå¦‚æœè¯·æ±‚å®šä½åˆ°ä¸åŒé›†ç¾¤çš„Redisï¼Œä¼šå¯¼è‡´ç™»å½•çŠ¶æ€å¤±æ•ˆã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><p>ï¬    ä¸åŒé›†ç¾¤Redisæ•°æ®åŒæ­¥</p><p>ï¬    ä¿è¯ç›¸åŒé›†ç¾¤çš„WebæœåŠ¡è¯·æ±‚åŒä¸€é›†ç¾¤çš„Redis</p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;ä¸€ã€Cookieä¸Session&quot;&gt;&lt;a href=&quot;#ä¸€ã€Cookieä¸Session&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€Cookieä¸Session&quot;&gt;&lt;/a&gt;ä¸€ã€Cookieä¸Session&lt;/h3&gt;&lt;p&gt;HTTPæ˜¯æ— çŠ¶æ€åè®®ï¼Œå®ƒä¸å¯¹ä¹‹å‰å‘ç”Ÿè¿‡çš„è¯·æ±‚å’Œå“åº”çš„çŠ¶æ€è¿›è¡Œä¿å­˜ã€‚å› ä¸ºæ— æ³•ç®¡ç†ç”¨æˆ·çŠ¶æ€ï¼Œå¯¹äºè¦ç™»å½•çš„é¡µé¢ï¼Œæ¯æ¬¡è·³è½¬æ–°é¡µé¢æ—¶éƒ½éœ€è¦å†æ¬¡ç™»å½•ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="å®‰å…¨" scheme="http://example.com/categories/%E5%AE%89%E5%85%A8/"/>
    
    
    <category term="å®‰å…¨" scheme="http://example.com/tags/%E5%AE%89%E5%85%A8/"/>
    
    <category term="ç™»å½•" scheme="http://example.com/tags/%E7%99%BB%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>sshçš„åŸºæœ¬ç”¨æ³•</title>
    <link href="http://example.com/2021/01/08/%E5%8D%8F%E8%AE%AE/ssh/ssh%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/"/>
    <id>http://example.com/2021/01/08/%E5%8D%8F%E8%AE%AE/ssh/ssh%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/</id>
    <published>2021-01-08T17:54:30.000Z</published>
    <updated>2021-01-23T09:15:30.421Z</updated>
    
    <content type="html"><![CDATA[<p><code>SSH</code>ï¼Œæˆ‘ä»¬ç»å¸¸æ“ä½œè¿œç¨‹æœåŠ¡å™¨çš„æ—¶å€™ï¼Œéƒ½ä¼šç”¨åˆ°è¿™ä¸ªå‘½ä»¤ï¼Œä½†æ˜¯ä»–é™¤äº†ç™»å½•æœåŠ¡å™¨è¿˜æœ‰å¾ˆå¤šä½œç”¨ï¼Œä¸‹é¢æˆ‘ä»¬ä¸€èµ·æ¥äº†è§£ä¸‹å§</p><a id="more"></a><h2 id="sshç™»å½•æœåŠ¡å™¨å‘½ä»¤"><a href="#sshç™»å½•æœåŠ¡å™¨å‘½ä»¤" class="headerlink" title="sshç™»å½•æœåŠ¡å™¨å‘½ä»¤"></a>sshç™»å½•æœåŠ¡å™¨å‘½ä»¤</h2><pre><code class="BASH">ssh hostname</code></pre><p>ä¸Šé¢å‘½ä»¤ä¸­ï¼Œ <code>hostname</code> æ˜¯ä¸»æœºåï¼Œå®ƒå¯ä»¥æ˜¯åŸŸåï¼Œä¹Ÿå¯èƒ½æ˜¯ IP åœ°å€æˆ–å±€åŸŸç½‘å†…éƒ¨çš„ä¸»æœºåã€‚ä¸æŒ‡å®šç”¨æˆ·åçš„æƒ…å†µä¸‹ï¼Œå°†ä½¿ç”¨å®¢æˆ·ç«¯çš„å½“å‰ç”¨æˆ·åï¼Œä½œä¸ºè¿œç¨‹æœåŠ¡å™¨çš„ç™»å½•ç”¨æˆ·åã€‚</p><p>å¦‚æœè¦æŒ‡å®šç”¨æˆ·åï¼Œå¯ä»¥é‡‡ç”¨ä¸‹é¢çš„è¯­æ³•ã€‚</p><pre><code class="BASH">ssh user@hostname</code></pre><p>ä¸Šé¢çš„å‘½ä»¤ä¸­ï¼Œç”¨æˆ·åå’Œä¸»æœºåå†™åœ¨ä¸€èµ·äº†ï¼Œä¹‹é—´ä½¿ç”¨ <code>@</code> åˆ†éš”ã€‚</p><p>æŒ‡å®šç”¨æˆ·åï¼Œå¯ä»¥ä½¿ç”¨ <code>ssh</code> å’Œ <code>-l</code> å‚æ•°</p><pre><code class="BASH">ssh -l username host</code></pre><p>ssh é»˜è®¤è¿æ¥æœåŠ¡å™¨çš„ <code>22</code> ç«¯å£ï¼Œ <code>-p</code> å‚æ•°å¯ä»¥æŒ‡å®šå…¶ä»–ç«¯å£</p><pre><code class="BASH">ssh -p 8821 hostname</code></pre><h2 id="sshæ‰§è¡Œè¿œç¨‹å‘½ä»¤"><a href="#sshæ‰§è¡Œè¿œç¨‹å‘½ä»¤" class="headerlink" title="sshæ‰§è¡Œè¿œç¨‹å‘½ä»¤"></a>sshæ‰§è¡Œè¿œç¨‹å‘½ä»¤</h2><p>å°†å‘½ä»¤ç›´æ¥å†™åœ¨ <code>ssh</code> å‘½ä»¤çš„åé¢</p><pre><code class="BASH">ssh username@hostname command</code></pre><p>ä¸Šé¢çš„å‘½ä»¤ä¼šä½¿å¾— SSH åœ¨ç™»å½•æˆåŠŸåï¼Œç«‹åˆ»åœ¨è¿œç¨‹ä¸»æœºä¸Šæ‰§è¡Œå‘½ä»¤ <code>command</code> ã€‚</p><p>ä¾‹å­</p><pre><code class="BASH">ssh foo@server.example.com cat /etc/hosts</code></pre><p>ä¸Šé¢çš„å‘½ä»¤ä¼šåœ¨ç™»å½•æˆåŠŸåï¼Œç«‹å³è¿œç¨‹æ‰§è¡Œå‘½ä»¤ <code>cat /etc/hosts</code> ã€‚</p><h2 id="sshå‘½ä»¤è¡Œé…ç½®é¡¹"><a href="#sshå‘½ä»¤è¡Œé…ç½®é¡¹" class="headerlink" title="sshå‘½ä»¤è¡Œé…ç½®é¡¹"></a>sshå‘½ä»¤è¡Œé…ç½®é¡¹</h2><h3 id="c-å‚æ•°æŒ‡å®šåŠ å¯†ç®—æ³•ã€‚"><a href="#c-å‚æ•°æŒ‡å®šåŠ å¯†ç®—æ³•ã€‚" class="headerlink" title="-c å‚æ•°æŒ‡å®šåŠ å¯†ç®—æ³•ã€‚"></a><code>-c</code> å‚æ•°æŒ‡å®šåŠ å¯†ç®—æ³•ã€‚</h3><pre><code class="BASH">$ ssh -c blowfish,3des server.example.com# æˆ–è€…$ ssh -c blowfish -c 3des server.example.com</code></pre><p>ä¸Šé¢å‘½ä»¤æŒ‡å®šä½¿ç”¨åŠ å¯†ç®—æ³• <code>blowfish</code> æˆ– <code>3des</code></p><h3 id="C-å‚æ•°è¡¨ç¤ºå‹ç¼©æ•°æ®ä¼ è¾“"><a href="#C-å‚æ•°è¡¨ç¤ºå‹ç¼©æ•°æ®ä¼ è¾“" class="headerlink" title="-C å‚æ•°è¡¨ç¤ºå‹ç¼©æ•°æ®ä¼ è¾“"></a><code>-C</code> å‚æ•°è¡¨ç¤ºå‹ç¼©æ•°æ®ä¼ è¾“</h3><pre><code class="BASH">ssh -C server.example.com</code></pre><h3 id="d-å‚æ•°è®¾ç½®æ‰“å°çš„-debug-ä¿¡æ¯çº§åˆ«ï¼Œæ•°å€¼è¶Šé«˜ï¼Œè¾“å‡ºçš„å†…å®¹è¶Šè¯¦ç»†ã€‚"><a href="#d-å‚æ•°è®¾ç½®æ‰“å°çš„-debug-ä¿¡æ¯çº§åˆ«ï¼Œæ•°å€¼è¶Šé«˜ï¼Œè¾“å‡ºçš„å†…å®¹è¶Šè¯¦ç»†ã€‚" class="headerlink" title="-d å‚æ•°è®¾ç½®æ‰“å°çš„ debug ä¿¡æ¯çº§åˆ«ï¼Œæ•°å€¼è¶Šé«˜ï¼Œè¾“å‡ºçš„å†…å®¹è¶Šè¯¦ç»†ã€‚"></a><code>-d</code> å‚æ•°è®¾ç½®æ‰“å°çš„ debug ä¿¡æ¯çº§åˆ«ï¼Œæ•°å€¼è¶Šé«˜ï¼Œè¾“å‡ºçš„å†…å®¹è¶Šè¯¦ç»†ã€‚</h3><pre><code class="BASH">ssh â€“d 1 foo.com</code></pre><h3 id="D-å‚æ•°æŒ‡å®šæœ¬æœºçš„-Socks-ç›‘å¬ç«¯å£"><a href="#D-å‚æ•°æŒ‡å®šæœ¬æœºçš„-Socks-ç›‘å¬ç«¯å£" class="headerlink" title="-D å‚æ•°æŒ‡å®šæœ¬æœºçš„ Socks ç›‘å¬ç«¯å£"></a><code>-D</code> å‚æ•°æŒ‡å®šæœ¬æœºçš„ Socks ç›‘å¬ç«¯å£</h3><blockquote><p>è¯¥ç«¯å£æ”¶åˆ°çš„è¯·æ±‚ï¼Œéƒ½å°†è½¬å‘åˆ°è¿œç¨‹çš„ SSH ä¸»æœºï¼Œåˆç§°åŠ¨æ€ç«¯å£è½¬å‘</p></blockquote><pre><code class="BASH"> ssh -D 1080 server</code></pre><p>ä¸Šé¢å‘½ä»¤å°†æœ¬æœº 1080 ç«¯å£æ”¶åˆ°çš„è¯·æ±‚ï¼Œéƒ½è½¬å‘åˆ°æœåŠ¡å™¨ <code>server</code></p><h3 id="f-å‚æ•°è¡¨ç¤º-SSH-è¿æ¥åœ¨åå°è¿è¡Œ"><a href="#f-å‚æ•°è¡¨ç¤º-SSH-è¿æ¥åœ¨åå°è¿è¡Œ" class="headerlink" title="-f å‚æ•°è¡¨ç¤º SSH è¿æ¥åœ¨åå°è¿è¡Œ"></a><code>-f</code> å‚æ•°è¡¨ç¤º SSH è¿æ¥åœ¨åå°è¿è¡Œ</h3><h3 id="F-å‚æ•°æŒ‡å®šé…ç½®æ–‡ä»¶"><a href="#F-å‚æ•°æŒ‡å®šé…ç½®æ–‡ä»¶" class="headerlink" title="-F å‚æ•°æŒ‡å®šé…ç½®æ–‡ä»¶"></a><code>-F</code> å‚æ•°æŒ‡å®šé…ç½®æ–‡ä»¶</h3><pre><code class="BASH">ssh -F /usr/local/ssh/other_config</code></pre><p>ä¸Šé¢å‘½ä»¤æŒ‡å®šä½¿ç”¨é…ç½®æ–‡ä»¶ <code>other_config</code></p><h3 id="i-å‚æ•°ç”¨äºæŒ‡å®šç§é’¥"><a href="#i-å‚æ•°ç”¨äºæŒ‡å®šç§é’¥" class="headerlink" title="-i å‚æ•°ç”¨äºæŒ‡å®šç§é’¥"></a><code>-i</code> å‚æ•°ç”¨äºæŒ‡å®šç§é’¥</h3><blockquote><p>æ„ä¸ºâ€œidentity_fileâ€ï¼Œé»˜è®¤å€¼ä¸º~/.ssh/id_dsaã€‚æ³¨æ„ï¼Œå¯¹åº”çš„å…¬é’¥å¿…é¡»å­˜æ”¾åˆ°æœåŠ¡å™¨</p></blockquote><pre><code class="BASH">ssh -i my-key server.example.com</code></pre><h3 id="l-å‚æ•°æŒ‡å®šè¿œç¨‹ç™»å½•çš„è´¦æˆ·å"><a href="#l-å‚æ•°æŒ‡å®šè¿œç¨‹ç™»å½•çš„è´¦æˆ·å" class="headerlink" title="-l å‚æ•°æŒ‡å®šè¿œç¨‹ç™»å½•çš„è´¦æˆ·å"></a><code>-l</code> å‚æ•°æŒ‡å®šè¿œç¨‹ç™»å½•çš„è´¦æˆ·å</h3><pre><code class="BASH">$ ssh -l sally server.example.com# ç­‰åŒäº$ ssh sally@server.example.com</code></pre><h3 id="L-å‚æ•°è®¾ç½®æœ¬åœ°ç«¯å£è½¬å‘"><a href="#L-å‚æ•°è®¾ç½®æœ¬åœ°ç«¯å£è½¬å‘" class="headerlink" title="-L å‚æ•°è®¾ç½®æœ¬åœ°ç«¯å£è½¬å‘"></a><code>-L</code> å‚æ•°è®¾ç½®æœ¬åœ°ç«¯å£è½¬å‘</h3><pre><code class="BASH">ssh  -L 9999:targetServer:80 user@remoteserver</code></pre><p>ä¸Šé¢å‘½ä»¤ä¸­ï¼Œæ‰€æœ‰å‘å‘æœ¬åœ° <code>9999</code> ç«¯å£çš„è¯·æ±‚ï¼Œéƒ½ä¼šç»è¿‡ <code>remoteserver</code> å‘å¾€ <code>targetServer</code> çš„ <code>80</code> ç«¯å£ï¼Œè¿™å°±ç›¸å½“äºç›´æ¥è¿ä¸Šäº† <code>targetServer</code> çš„ <code>80</code> ç«¯å£</p><h3 id="m-å‚æ•°æŒ‡å®šæ ¡éªŒæ•°æ®å®Œæ•´æ€§çš„ç®—æ³•"><a href="#m-å‚æ•°æŒ‡å®šæ ¡éªŒæ•°æ®å®Œæ•´æ€§çš„ç®—æ³•" class="headerlink" title="-m å‚æ•°æŒ‡å®šæ ¡éªŒæ•°æ®å®Œæ•´æ€§çš„ç®—æ³•"></a><code>-m</code> å‚æ•°æŒ‡å®šæ ¡éªŒæ•°æ®å®Œæ•´æ€§çš„ç®—æ³•</h3><pre><code class="BASH">ssh -m hmac-sha1,hmac-md5 server.example.com</code></pre><p>ä¸Šé¢å‘½ä»¤æŒ‡å®šæ•°æ®æ ¡éªŒç®—æ³•ä¸º <code>hmac-sha1</code> æˆ– <code>hmac-md5</code></p><h3 id="o-å‚æ•°ç”¨æ¥æŒ‡å®šä¸€ä¸ªé…ç½®å‘½ä»¤"><a href="#o-å‚æ•°ç”¨æ¥æŒ‡å®šä¸€ä¸ªé…ç½®å‘½ä»¤" class="headerlink" title="-o å‚æ•°ç”¨æ¥æŒ‡å®šä¸€ä¸ªé…ç½®å‘½ä»¤"></a><code>-o</code> å‚æ•°ç”¨æ¥æŒ‡å®šä¸€ä¸ªé…ç½®å‘½ä»¤</h3><pre><code class="BASH">ssh -o "Keyword Value"</code></pre><p>ä¸¾ä¾‹æ¥è¯´ï¼Œé…ç½®æ–‡ä»¶é‡Œé¢æœ‰å¦‚ä¸‹å†…å®¹ã€‚</p><pre><code class="BASH">User sallyPort 220</code></pre><p>é€šè¿‡ <code>-o</code> å‚æ•°ï¼Œå¯ä»¥æŠŠä¸Šé¢ä¸¤ä¸ªé…ç½®å‘½ä»¤ä»å‘½ä»¤è¡Œä¼ å…¥ã€‚</p><pre><code class="BASH">ssh -o "User sally" -o "Port 220" server.example.com</code></pre><p>ä½¿ç”¨ç­‰å·æ—¶ï¼Œé…ç½®å‘½ä»¤å¯ä»¥ä¸ç”¨å†™åœ¨å¼•å·é‡Œé¢ï¼Œä½†æ˜¯ç­‰å·å‰åä¸èƒ½æœ‰ç©ºæ ¼</p><pre><code class="BASH">ssh -o User=sally -o Port=220 server.example.com</code></pre><h3 id="p-å‚æ•°æŒ‡å®š-SSH-å®¢æˆ·ç«¯è¿æ¥çš„æœåŠ¡å™¨ç«¯å£"><a href="#p-å‚æ•°æŒ‡å®š-SSH-å®¢æˆ·ç«¯è¿æ¥çš„æœåŠ¡å™¨ç«¯å£" class="headerlink" title="-p å‚æ•°æŒ‡å®š SSH å®¢æˆ·ç«¯è¿æ¥çš„æœåŠ¡å™¨ç«¯å£"></a><code>-p</code> å‚æ•°æŒ‡å®š SSH å®¢æˆ·ç«¯è¿æ¥çš„æœåŠ¡å™¨ç«¯å£</h3><pre><code class="BASH">ssh -p 2035 server.example.com</code></pre><p>ä¸Šé¢å‘½ä»¤è¿æ¥æœåŠ¡å™¨çš„2035ç«¯å£</p><h3 id="q-å‚æ•°è¡¨ç¤ºå®‰é™æ¨¡å¼ï¼ˆquietï¼‰ï¼Œä¸å‘ç”¨æˆ·è¾“å‡ºä»»ä½•è­¦å‘Šä¿¡æ¯"><a href="#q-å‚æ•°è¡¨ç¤ºå®‰é™æ¨¡å¼ï¼ˆquietï¼‰ï¼Œä¸å‘ç”¨æˆ·è¾“å‡ºä»»ä½•è­¦å‘Šä¿¡æ¯" class="headerlink" title="-q å‚æ•°è¡¨ç¤ºå®‰é™æ¨¡å¼ï¼ˆquietï¼‰ï¼Œä¸å‘ç”¨æˆ·è¾“å‡ºä»»ä½•è­¦å‘Šä¿¡æ¯"></a><code>-q</code> å‚æ•°è¡¨ç¤ºå®‰é™æ¨¡å¼ï¼ˆquietï¼‰ï¼Œä¸å‘ç”¨æˆ·è¾“å‡ºä»»ä½•è­¦å‘Šä¿¡æ¯</h3><pre><code class="BASH">ssh â€“q foo.comrootâ€™s password:</code></pre><p>ä¸Šé¢å‘½ä»¤ä½¿ç”¨ <code>-q</code> å‚æ•°ï¼Œåªè¾“å‡ºè¦æ±‚ç”¨æˆ·è¾“å…¥å¯†ç çš„æç¤º</p><h3 id="R-å‚æ•°æŒ‡å®šè¿œç¨‹ç«¯å£è½¬å‘"><a href="#R-å‚æ•°æŒ‡å®šè¿œç¨‹ç«¯å£è½¬å‘" class="headerlink" title="-R å‚æ•°æŒ‡å®šè¿œç¨‹ç«¯å£è½¬å‘"></a><code>-R</code> å‚æ•°æŒ‡å®šè¿œç¨‹ç«¯å£è½¬å‘</h3><pre><code class="BASH">ssh -R 9999:targetServer:902 local</code></pre><p>ä¸Šé¢å‘½ä»¤éœ€åœ¨è·³æ¿æœåŠ¡å™¨æ‰§è¡Œï¼ŒæŒ‡å®šæœ¬åœ°è®¡ç®—æœº <code>local</code> ç›‘å¬è‡ªå·±çš„ 9999 ç«¯å£ï¼Œæ‰€æœ‰å‘å‘è¿™ä¸ªç«¯å£çš„è¯·æ±‚ï¼Œéƒ½ä¼šè½¬å‘ targetServer çš„ 902 ç«¯å£</p><h3 id="t-å‚æ•°åœ¨-ssh-ç›´æ¥è¿è¡Œè¿œç«¯å‘½ä»¤æ—¶ï¼Œæä¾›ä¸€ä¸ªäº’åŠ¨å¼-Shell"><a href="#t-å‚æ•°åœ¨-ssh-ç›´æ¥è¿è¡Œè¿œç«¯å‘½ä»¤æ—¶ï¼Œæä¾›ä¸€ä¸ªäº’åŠ¨å¼-Shell" class="headerlink" title="-t å‚æ•°åœ¨ ssh ç›´æ¥è¿è¡Œè¿œç«¯å‘½ä»¤æ—¶ï¼Œæä¾›ä¸€ä¸ªäº’åŠ¨å¼ Shell"></a><code>-t</code> å‚æ•°åœ¨ ssh ç›´æ¥è¿è¡Œè¿œç«¯å‘½ä»¤æ—¶ï¼Œæä¾›ä¸€ä¸ªäº’åŠ¨å¼ Shell</h3><pre><code class="BASH">ssh -t server.example.com emacs</code></pre><h3 id="v-å‚æ•°æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯"><a href="#v-å‚æ•°æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯" class="headerlink" title="-v å‚æ•°æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯"></a><code>-v</code> å‚æ•°æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</h3><pre><code class="BASH">ssh -v server.example.com</code></pre><p><code>-v</code> å¯ä»¥é‡å¤å¤šæ¬¡ï¼Œè¡¨ç¤ºä¿¡æ¯çš„è¯¦ç»†ç¨‹åº¦ï¼Œæ¯”å¦‚ <code>-vv</code> å’Œ <code>-vvv</code></p><pre><code class="BASH">$ ssh -vvv server.example.com# æˆ–è€…$ ssh -v -v -v server.example.com</code></pre><p>ä¸Šé¢å‘½ä»¤ä¼šè¾“å‡ºæœ€è¯¦ç»†çš„è¿æ¥ä¿¡æ¯</p><h3 id="V-å‚æ•°è¾“å‡º-ssh-å®¢æˆ·ç«¯çš„ç‰ˆæœ¬"><a href="#V-å‚æ•°è¾“å‡º-ssh-å®¢æˆ·ç«¯çš„ç‰ˆæœ¬" class="headerlink" title="-V å‚æ•°è¾“å‡º ssh å®¢æˆ·ç«¯çš„ç‰ˆæœ¬"></a><code>-V</code> å‚æ•°è¾“å‡º ssh å®¢æˆ·ç«¯çš„ç‰ˆæœ¬</h3><pre><code class="BASH">$ ssh â€“Vssh: SSH Secure Shell 3.2.3 (non-commercial version) on i686-pc-linux-gnu</code></pre><p>ä¸Šé¢å‘½ä»¤è¾“å‡ºæœ¬æœº ssh å®¢æˆ·ç«¯ç‰ˆæœ¬æ˜¯ <code>SSH Secure Shell 3.2.3</code></p><h3 id="X-å‚æ•°è¡¨ç¤ºæ‰“å¼€-X-çª—å£è½¬å‘"><a href="#X-å‚æ•°è¡¨ç¤ºæ‰“å¼€-X-çª—å£è½¬å‘" class="headerlink" title="-X å‚æ•°è¡¨ç¤ºæ‰“å¼€ X çª—å£è½¬å‘"></a><code>-X</code> å‚æ•°è¡¨ç¤ºæ‰“å¼€ X çª—å£è½¬å‘</h3><pre><code class="BASH">ssh -X server.example.com</code></pre><h3 id="1-2å‚æ•°æŒ‡å®šä½¿ç”¨-SSH1-SSH2-åè®®ã€‚"><a href="#1-2å‚æ•°æŒ‡å®šä½¿ç”¨-SSH1-SSH2-åè®®ã€‚" class="headerlink" title="-1, -2å‚æ•°æŒ‡å®šä½¿ç”¨ SSH1, SSH2 åè®®ã€‚"></a>-1, -2å‚æ•°æŒ‡å®šä½¿ç”¨ SSH1, SSH2 åè®®ã€‚</h3><pre><code class="BASH">ssh -2 server.example.com</code></pre><h3 id="4-æŒ‡å®šä½¿ç”¨-IPv4-åè®®ï¼Œè¿™æ˜¯é»˜è®¤å€¼"><a href="#4-æŒ‡å®šä½¿ç”¨-IPv4-åè®®ï¼Œè¿™æ˜¯é»˜è®¤å€¼" class="headerlink" title="-4 æŒ‡å®šä½¿ç”¨ IPv4 åè®®ï¼Œè¿™æ˜¯é»˜è®¤å€¼"></a><code>-4</code> æŒ‡å®šä½¿ç”¨ IPv4 åè®®ï¼Œè¿™æ˜¯é»˜è®¤å€¼</h3><pre><code class="BASH">ssh -4 server.example.com</code></pre><h3 id="6-æŒ‡å®šä½¿ç”¨-IPv6-åè®®"><a href="#6-æŒ‡å®šä½¿ç”¨-IPv6-åè®®" class="headerlink" title="-6 æŒ‡å®šä½¿ç”¨ IPv6 åè®®"></a><code>-6</code> æŒ‡å®šä½¿ç”¨ IPv6 åè®®</h3><pre><code class="BASH">ssh -6 server.example.com</code></pre>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;code&gt;SSH&lt;/code&gt;ï¼Œæˆ‘ä»¬ç»å¸¸æ“ä½œè¿œç¨‹æœåŠ¡å™¨çš„æ—¶å€™ï¼Œéƒ½ä¼šç”¨åˆ°è¿™ä¸ªå‘½ä»¤ï¼Œä½†æ˜¯ä»–é™¤äº†ç™»å½•æœåŠ¡å™¨è¿˜æœ‰å¾ˆå¤šä½œç”¨ï¼Œä¸‹é¢æˆ‘ä»¬ä¸€èµ·æ¥äº†è§£ä¸‹å§&lt;/p&gt;</summary>
    
    
    
    <category term="Linux" scheme="http://example.com/categories/Linux/"/>
    
    
    <category term="SSH" scheme="http://example.com/tags/SSH/"/>
    
    <category term="Linux" scheme="http://example.com/tags/Linux/"/>
    
    <category term="shell" scheme="http://example.com/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>å¾®æœåŠ¡ç¼“å­˜åŸç†ä¸æœ€ä½³å®è·µ</title>
    <link href="http://example.com/2021/01/08/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/%E7%BC%93%E5%AD%98/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/"/>
    <id>http://example.com/2021/01/08/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/%E7%BC%93%E5%AD%98/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/</id>
    <published>2021-01-08T17:52:53.000Z</published>
    <updated>2021-01-23T09:15:30.420Z</updated>
    
    <content type="html"><![CDATA[<p>æ–‡ç« ä¸»è¦ä»‹ç»äº†åˆ†å¸ƒå¼æ¶æ„é‡Œçš„å¾®æœåŠ¡ç¼“å­˜åŸç†ä¸æœ€ä½³å®è·µï¼Œä¸‹é¢è®©æˆ‘ä»¬æ¥ä¸€èµ·çœ‹çœ‹å§</p><a id="more"></a><h2 id="ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿ</h2><ol><li><p> ç¨‹åºå­˜å‚¨åœ¨ <code>disk</code> ä¸­</p></li><li><p> ç¨‹åºæ˜¯è¿è¡Œåœ¨ <code>RAM</code> ä¹‹ä¸­ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„ <code>main memory</code></p></li><li><p> ç¨‹åºçš„è®¡ç®—é€»è¾‘åœ¨ <code>CPU</code> ä¸­æ‰§è¡Œ</p></li></ol><p>æ¥çœ‹ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼š <code>a = a + 1</code></p><ol><li><p> <code>load x:</code></p></li><li><p> <code>x0 = x0 + 1</code></p></li><li><p> <code>load x0 -&gt; RAM</code></p></li></ol><p><img src="/My-Blogs/images/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5-01.png" alt="img"></p><p>ä¸Šé¢æåˆ°äº†3ç§å­˜å‚¨ä»‹è´¨ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œä¸‰ç±»çš„è¯»å†™é€Ÿåº¦å’Œæˆæœ¬æˆåæ¯”ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å…‹æœé€Ÿåº¦é—®é¢˜ä¸Šéœ€è¦å¼•å…¥ä¸€ä¸ª ä¸­é—´å±‚ã€‚è¿™ä¸ªä¸­é—´å±‚ï¼Œéœ€è¦é«˜é€Ÿå­˜å–çš„é€Ÿåº¦ï¼Œä½†æ˜¯æˆæœ¬å¯æ¥å—ã€‚äºæ˜¯ä¹, <code>Cache</code> è¢«å¼•å…¥</p><p><img src="/My-Blogs/images/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5-02.png" alt="img"></p><p>è€Œåœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œæœ‰ä¸¤ç§é»˜è®¤ç¼“å­˜ï¼š</p><p>CPU é‡Œé¢çš„æœ«çº§ç¼“å­˜ï¼Œå³ <code>LLC</code> ã€‚ç¼“å­˜å†…å­˜ä¸­çš„æ•°æ®</p><p>å†…å­˜ä¸­çš„é«˜é€Ÿé¡µç¼“å­˜ï¼Œå³ <code>page cache</code> ã€‚ç¼“å­˜ç£ç›˜ä¸­çš„æ•°æ®</p><h2 id="ç¼“å­˜è¯»å†™ç­–ç•¥"><a href="#ç¼“å­˜è¯»å†™ç­–ç•¥" class="headerlink" title="ç¼“å­˜è¯»å†™ç­–ç•¥"></a>ç¼“å­˜è¯»å†™ç­–ç•¥</h2><p>å¼•å…¥ <code>Cache</code> ä¹‹åï¼Œæˆ‘ä»¬ç»§ç»­æ¥çœ‹çœ‹æ“ä½œç¼“å­˜ä¼šå‘ç”Ÿä»€ä¹ˆã€‚å› ä¸ºå­˜åœ¨å­˜å–é€Ÿåº¦çš„å·®å¼‚ã€Œè€Œä¸”å·®å¼‚å¾ˆå¤§ã€ï¼Œä»è€Œåœ¨æ“ä½œæ•°æ®æ—¶ï¼Œå»¶è¿Ÿæˆ–ç¨‹åºå¤±è´¥ç­‰éƒ½ä¼šå¯¼è‡´ç¼“å­˜å’Œå®é™…å­˜å‚¨å±‚æ•°æ®ä¸ä¸€è‡´ã€‚</p><p>æˆ‘ä»¬å°±ä»¥æ ‡å‡†çš„ <code>Cache+DB</code> æ¥çœ‹çœ‹ç»å…¸è¯»å†™ç­–ç•¥å’Œåº”ç”¨åœºæ™¯ã€‚</p><h3 id="Cache-Aside"><a href="#Cache-Aside" class="headerlink" title="Cache Aside"></a>Cache Aside</h3><p>å…ˆæ¥è€ƒè™‘ä¸€ç§æœ€ç®€å•çš„ä¸šåŠ¡åœºæ™¯ï¼Œæ¯”å¦‚ç”¨æˆ·è¡¨: <code>userId</code> : ç”¨æˆ·id, <code>phone</code> : ç”¨æˆ·ç”µè¯token, <code>avtoar</code> : ç”¨æˆ·å¤´åƒurlï¼Œç¼“å­˜ä¸­æˆ‘ä»¬ç”¨ <code>phone</code> ä½œä¸ºkeyå­˜å‚¨ç”¨æˆ·å¤´åƒã€‚å½“ç”¨æˆ·ä¿®æ”¹å¤´åƒurlè¯¥å¦‚ä½•åšï¼Ÿ</p><p>æ›´æ–°DBæ•°æ®ï¼Œå†æ›´æ–° <code>Cache</code> æ•°æ®</p><p>æ›´æ–° DB æ•°æ®ï¼Œå†åˆ é™¤ <code>Cache</code> æ•°æ®</p><p>é¦–å…ˆ å˜æ›´æ•°æ®åº“ å’Œ å˜æ›´ç¼“å­˜ æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„æ“ä½œï¼Œè€Œæˆ‘ä»¬å¹¶æ²¡æœ‰å¯¹æ“ä½œåšä»»ä½•çš„å¹¶å‘æ§åˆ¶ã€‚é‚£ä¹ˆå½“ä¸¤ä¸ªçº¿ç¨‹å¹¶å‘æ›´æ–°å®ƒä»¬çš„æ—¶å€™ï¼Œå°±ä¼šå› ä¸ºå†™å…¥é¡ºåºçš„ä¸åŒé€ æˆæ•°æ®ä¸ä¸€è‡´ã€‚</p><p>æ‰€ä»¥æ›´å¥½çš„æ–¹æ¡ˆæ˜¯ <code>2</code> :</p><p>æ›´æ–°æ•°æ®æ—¶ä¸æ›´æ–°ç¼“å­˜ï¼Œè€Œæ˜¯ç›´æ¥åˆ é™¤ç¼“å­˜</p><p>åç»­çš„è¯·æ±‚å‘ç°ç¼“å­˜ç¼ºå¤±ï¼Œå›å»æŸ¥è¯¢ <code>DB</code> ï¼Œå¹¶å°†ç»“æœ <code>load cache</code></p><p><img src="/My-Blogs/images/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5-03.png" alt="img"></p><p>è¿™ä¸ªç­–ç•¥å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨ç¼“å­˜æœ€å¸¸è§çš„ç­–ç•¥: <code>Cache Aside</code> ã€‚è¿™ä¸ªç­–ç•¥æ•°æ®ä»¥æ•°æ®åº“ä¸­çš„æ•°æ®ä¸ºå‡†ï¼Œç¼“å­˜ä¸­çš„æ•°æ®æ˜¯æŒ‰éœ€åŠ è½½çš„ï¼Œåˆ†ä¸ºè¯»ç­–ç•¥å’Œå†™ç­–ç•¥ã€‚</p><p>ä½†æ˜¯å¯è§çš„é—®é¢˜ä¹Ÿå°±å‡ºç°äº†ï¼šé¢‘ç¹çš„è¯»å†™æ“ä½œä¼šå¯¼è‡´ <code>Cache</code> åå¤åœ°æ›¿æ¢ï¼Œç¼“å­˜å‘½ä¸­ç‡é™ä½ã€‚å½“ç„¶å¦‚æœåœ¨ä¸šåŠ¡ä¸­å¯¹å‘½ä¸­ç‡æœ‰ç›‘æ§æŠ¥è­¦æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹æ–¹æ¡ˆï¼š</p><ol><li><p> æ›´æ–°æ•°æ®æ—¶åŒæ—¶æ›´æ–°ç¼“å­˜ï¼Œä½†æ˜¯åœ¨æ›´æ–°ç¼“å­˜å‰åŠ ä¸€ä¸ª åˆ†å¸ƒå¼é”ã€‚è¿™æ ·åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ“ä½œç¼“å­˜ï¼Œè§£å†³äº†å¹¶å‘é—®é¢˜ã€‚åŒæ—¶åœ¨åç»­è¯»è¯·æ±‚ä¸­æ—¶è¯»åˆ°æœ€æ–°çš„ç¼“å­˜ï¼Œè§£å†³äº†ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p></li><li><p> æ›´æ–°æ•°æ®æ—¶åŒæ—¶æ›´æ–°ç¼“å­˜ï¼Œä½†æ˜¯ç»™ç¼“å­˜ä¸€ä¸ªè¾ƒçŸ­çš„ <code>TTL</code>ã€‚</p></li></ol><p>å½“ç„¶é™¤äº†è¿™ä¸ªç­–ç•¥ï¼Œåœ¨è®¡ç®—æœºä½“ç³»è¿˜æœ‰å…¶ä»–å‡ ç§ç»å…¸çš„ç¼“å­˜ç­–ç•¥ï¼Œå®ƒä»¬ä¹Ÿæœ‰å„è‡ªé€‚ç”¨çš„ä½¿ç”¨åœºæ™¯ã€‚</p><h3 id="Write-Through"><a href="#Write-Through" class="headerlink" title="Write Through"></a>Write Through</h3><p>å…ˆæŸ¥è¯¢å†™å…¥æ•°æ®keyæ˜¯å¦å‡»ä¸­ç¼“å­˜ï¼Œå¦‚æœåœ¨ -&gt; æ›´æ–°ç¼“å­˜ï¼ŒåŒæ—¶ç¼“å­˜ç»„ä»¶åŒæ­¥æ•°æ®è‡³DBï¼›ä¸å­˜åœ¨ï¼Œåˆ™è§¦å‘ Â·ã€‚</p><p>è€Œä¸€èˆ¬ Â· æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><p><code>Write Allocate</code> ï¼šå†™æ—¶ç›´æ¥åˆ†é… <code>Cache line</code></p><p><code>No-write allocate</code> ï¼šå†™æ—¶ä¸å†™å…¥ç¼“å­˜ï¼Œç›´æ¥å†™å…¥DBï¼Œreturn</p><p>åœ¨ <code>Write Through</code> ä¸­ï¼Œä¸€èˆ¬é‡‡å– <code>No-write allocate</code> ã€‚å› ä¸ºå…¶å®æ— è®ºå“ªç§ï¼Œæœ€ç»ˆæ•°æ®éƒ½ä¼šæŒä¹…åŒ–åˆ°DBä¸­ï¼Œçœå»ä¸€æ­¥ç¼“å­˜çš„å†™å…¥ï¼Œæå‡å†™æ€§èƒ½ã€‚è€Œç¼“å­˜ç”± <code>Read Through</code> å†™å…¥ç¼“å­˜ã€‚</p><p><img src="/My-Blogs/images/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5-04.png" alt="img"></p><p>è¿™ä¸ªç­–ç•¥çš„æ ¸å¿ƒåŸåˆ™ï¼š<strong>ç”¨æˆ·åªä¸ç¼“å­˜æ‰“äº¤é“ï¼Œç”±ç¼“å­˜ç»„ä»¶å’ŒDBé€šä¿¡ï¼Œå†™å…¥æˆ–è€…è¯»å–æ•°æ®</strong>ã€‚åœ¨ä¸€äº›æœ¬åœ°è¿›ç¨‹ç¼“å­˜ç»„ä»¶å¯ä»¥è€ƒè™‘è¿™ç§ç­–ç•¥ã€‚</p><h3 id="Write-Back"><a href="#Write-Back" class="headerlink" title="Write Back"></a>Write Back</h3><p>ç›¸ä¿¡ä½ ä¹Ÿçœ‹å‡ºä¸Šè¿°æ–¹æ¡ˆçš„ç¼ºé™·ï¼šå†™æ•°æ®æ—¶ç¼“å­˜å’Œæ•°æ®åº“åŒæ­¥ï¼Œä½†æ˜¯æˆ‘ä»¬çŸ¥é“è¿™ä¸¤å—å­˜å‚¨ä»‹è´¨çš„é€Ÿåº¦å·®å‡ ä¸ªæ•°é‡çº§ï¼Œå¯¹å†™å…¥æ€§èƒ½æ˜¯æœ‰å¾ˆå¤§å½±å“ã€‚é‚£æˆ‘ä»¬æ˜¯å¦å¼‚æ­¥æ›´æ–°æ•°æ®åº“ï¼Ÿ</p><p><code>Write back</code> å°±æ˜¯åœ¨å†™æ•°æ®æ—¶åªæ›´æ–°è¯¥ Cache Line å¯¹åº”çš„æ•°æ®ï¼Œå¹¶æŠŠè¯¥è¡Œæ ‡è®°ä¸º Dirtyã€‚åœ¨è¯»æ•°æ®æ—¶æˆ–æ˜¯åœ¨ç¼“å­˜æ»¡æ—¶æ¢å‡ºã€Œç¼“å­˜æ›¿æ¢ç­–ç•¥ã€æ—¶ï¼Œå°† Dirty å†™å…¥å­˜å‚¨ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåœ¨ <code>Write Miss</code> æƒ…å†µä¸‹ï¼Œé‡‡å–çš„æ˜¯ <code>Write Allocate</code> ï¼Œå³å†™å…¥å­˜å‚¨åŒæ—¶å†™å…¥ç¼“å­˜ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨ä¹‹åçš„å†™è¯·æ±‚åªéœ€è¦æ›´æ–°ç¼“å­˜ã€‚</p><p><img src="/My-Blogs/images/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5-05.png" alt="img"></p><blockquote><p><code>async purge</code> æ­¤ç±»æ¦‚å¿µå…¶å®å­˜åœ¨è®¡ç®—æœºä½“ç³»ä¸­ã€‚ <code>Mysql</code> ä¸­åˆ·è„é¡µï¼Œæœ¬è´¨éƒ½æ˜¯å°½å¯èƒ½é˜²æ­¢éšæœºå†™ï¼Œç»Ÿä¸€å†™ç£ç›˜æ—¶æœºã€‚</p></blockquote><h2 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h2><p><code>Redis</code> æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç³»ç»Ÿè½¯ä»¶ï¼Œå’Œæˆ‘ä»¬å†™çš„ä¸šåŠ¡ç¨‹åºæ˜¯ä¸¤ä¸ªè½¯ä»¶ã€‚å½“æˆ‘ä»¬éƒ¨ç½²äº†Redis å®ä¾‹åï¼Œå®ƒåªä¼šè¢«åŠ¨åœ°ç­‰å¾…å®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼Œç„¶åå†è¿›è¡Œå¤„ç†ã€‚æ‰€ä»¥ï¼Œå¦‚æœåº”ç”¨ç¨‹åºæƒ³è¦ä½¿ç”¨ Redis ç¼“å­˜ï¼Œæˆ‘ä»¬å°±è¦åœ¨ç¨‹åºä¸­å¢åŠ ç›¸åº”çš„ç¼“å­˜æ“ä½œä»£ç ã€‚æ‰€ä»¥æˆ‘ä»¬ä¹ŸæŠŠ <code>Redis</code> ç§°ä¸º <strong>æ—è·¯ç¼“å­˜</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼šè¯»å–ç¼“å­˜ã€è¯»å–æ•°æ®åº“å’Œæ›´æ–°ç¼“å­˜çš„æ“ä½œéƒ½éœ€è¦åœ¨åº”ç”¨ç¨‹åºä¸­æ¥å®Œæˆã€‚</p><p>è€Œä½œä¸ºç¼“å­˜çš„ <code>Redis</code> ï¼ŒåŒæ ·éœ€è¦é¢ä¸´å¸¸è§çš„é—®é¢˜ï¼š</p><ul><li><p>ç¼“å­˜çš„å®¹é‡ç»ˆç©¶æœ‰é™</p></li><li><p>ä¸Šæ¸¸å¹¶å‘è¯·æ±‚å†²å‡»</p></li><li><p>ç¼“å­˜ä¸åç«¯å­˜å‚¨æ•°æ®ä¸€è‡´æ€§</p></li></ul><h3 id="æ›¿æ¢ç­–ç•¥"><a href="#æ›¿æ¢ç­–ç•¥" class="headerlink" title="æ›¿æ¢ç­–ç•¥"></a>æ›¿æ¢ç­–ç•¥</h3><p>ä¸€èˆ¬æ¥è¯´ï¼Œç¼“å­˜å¯¹äºé€‰å®šçš„è¢«æ·˜æ±°æ•°æ®ï¼Œä¼šæ ¹æ®å…¶æ˜¯å¹²å‡€æ•°æ®è¿˜æ˜¯è„æ•°æ®ï¼Œé€‰æ‹©ç›´æ¥åˆ é™¤è¿˜æ˜¯å†™å›æ•°æ®åº“ã€‚ä½†æ˜¯ï¼Œåœ¨ Redis ä¸­ï¼Œè¢«æ·˜æ±°æ•°æ®æ— è®ºå¹²å‡€ä¸å¦éƒ½ä¼šè¢«åˆ é™¤ï¼Œæ‰€ä»¥ï¼Œè¿™æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨ Redis ç¼“å­˜æ—¶è¦ç‰¹åˆ«æ³¨æ„çš„ï¼šå½“æ•°æ®ä¿®æ”¹æˆä¸ºè„æ•°æ®æ—¶ï¼Œéœ€è¦åœ¨æ•°æ®åº“ä¸­ä¹ŸæŠŠæ•°æ®ä¿®æ”¹è¿‡æ¥ã€‚</p><p>æ‰€ä»¥ä¸ç®¡æ›¿æ¢ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Œè„æ•°æ®æœ‰å¯èƒ½åœ¨æ¢å…¥æ¢å‡ºä¸­ä¸¢å¤±ã€‚é‚£æˆ‘ä»¬åœ¨äº§ç”Ÿè„æ•°æ®å°±åº”è¯¥åˆ é™¤ç¼“å­˜ï¼Œè€Œä¸æ˜¯æ›´æ–°ç¼“å­˜ï¼Œä¸€åˆ‡æ•°æ®åº”è¯¥ä»¥æ•°æ®åº“ä¸ºå‡†ã€‚è¿™ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œç¼“å­˜å†™å…¥åº”è¯¥äº¤ç»™è¯»è¯·æ±‚æ¥å®Œæˆï¼›å†™è¯·æ±‚å°½å¯èƒ½ä¿è¯æ•°æ®ä¸€è‡´æ€§ã€‚</p><p>è‡³äºæ›¿æ¢ç­–ç•¥æœ‰å“ªäº›ï¼Œç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šæ–‡ç« å½’çº³ä¹‹é—´çš„ä¼˜åŠ£ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚</p><h2 id="ç¼“å­˜å’Œå­˜å‚¨æ›´æ–°é¡ºåº"><a href="#ç¼“å­˜å’Œå­˜å‚¨æ›´æ–°é¡ºåº" class="headerlink" title="ç¼“å­˜å’Œå­˜å‚¨æ›´æ–°é¡ºåº"></a>ç¼“å­˜å’Œå­˜å‚¨æ›´æ–°é¡ºåº</h2><p>è¿™æ˜¯å¼€å‘ä¸­å¸¸è§çº ç»“é—®é¢˜ï¼š<strong>åˆ°åº•æ˜¯å…ˆåˆ é™¤ç¼“å­˜è¿˜æ˜¯å…ˆæ›´æ–°å­˜å‚¨</strong>ï¼Ÿ</p><blockquote><p>æƒ…å†µä¸€ï¼šå…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ›´æ–°å­˜å‚¨ï¼›</p><ul><li>A åˆ é™¤ç¼“å­˜ï¼Œæ›´æ–°å­˜å‚¨æ—¶ç½‘ç»œå»¶è¿Ÿ</li><li>B è¯»è¯·æ±‚ï¼Œå‘ç°ç¼“å­˜ç¼ºå¤±ï¼Œè¯»å­˜å‚¨ -&gt; æ­¤æ—¶è¯»åˆ°æ—§æ•°æ®</li></ul></blockquote><p>è¿™æ ·ä¼šäº§ç”Ÿä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li>B è¯»å–æ—§å€¼</li><li>B åŒæ—¶è¯»è¯·æ±‚ä¼šæŠŠæ—§å€¼å†™å…¥ç¼“å­˜ï¼Œå¯¼è‡´åç»­è¯»è¯·æ±‚è¯»åˆ°æ—§å€¼</li></ul><p>æ—¢ç„¶æ˜¯ç¼“å­˜å¯èƒ½æ˜¯æ—§å€¼ï¼Œé‚£å°±ä¸ç®¡åˆ é™¤ã€‚æœ‰ä¸€ä¸ªå¹¶ä¸ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼š<strong>åœ¨å†™è¯·æ±‚æ›´æ–°å®Œå­˜å‚¨å€¼ä»¥å</strong>ï¼Œ <code>sleep()</code> <strong>ä¸€å°æ®µæ—¶é—´ï¼Œå†è¿›è¡Œä¸€æ¬¡ç¼“å­˜åˆ é™¤æ“ä½œ</strong>ã€‚</p><p><code>sleep</code> æ˜¯ä¸ºäº†ç¡®ä¿è¯»è¯·æ±‚ç»“æŸï¼Œå†™è¯·æ±‚å¯ä»¥åˆ é™¤è¯»è¯·æ±‚é€ æˆçš„ç¼“å­˜è„æ•°æ®ï¼Œå½“ç„¶ä¹Ÿè¦è€ƒè™‘åˆ° redis ä¸»ä»åŒæ­¥çš„è€—æ—¶ã€‚ä¸è¿‡è¿˜æ˜¯è¦æ ¹æ®å®é™…ä¸šåŠ¡è€Œå®šã€‚</p><p>è¿™ä¸ªæ–¹æ¡ˆä¼šåœ¨ç¬¬ä¸€æ¬¡åˆ é™¤ç¼“å­˜å€¼åï¼Œå»¶è¿Ÿä¸€æ®µæ—¶é—´å†æ¬¡è¿›è¡Œåˆ é™¤ï¼Œè¢«ç§°ä¸ºï¼š <code>å»¶è¿ŸåŒåˆ </code> ã€‚</p><blockquote><p>æƒ…å†µäºŒï¼šå…ˆæ›´æ–°æ•°æ®åº“å€¼ï¼Œå†åˆ é™¤ç¼“å­˜å€¼ï¼š</p><ul><li>A åˆ é™¤å­˜å‚¨å€¼ï¼Œä½†æ˜¯åˆ é™¤ç¼“å­˜ç½‘ç»œå»¶è¿Ÿ</li><li>B è¯»è¯·æ±‚æ—¶ï¼Œç¼“å­˜å‡»ä¸­ï¼Œå°±ç›´æ¥è¿”å›æ—§å€¼</li></ul></blockquote><p>è¿™ç§æƒ…å†µå¯¹ä¸šåŠ¡çš„å½±å“è¾ƒå°ï¼Œè€Œç»å¤§å¤šæ•°ç¼“å­˜ç»„ä»¶éƒ½æ˜¯é‡‡å–æ­¤ç§æ›´æ–°é¡ºåºï¼Œæ»¡è¶³æœ€ç»ˆä¸€è‡´æ€§è¦æ±‚ã€‚</p><blockquote><p>æƒ…å†µä¸‰ï¼šæ–°ç”¨æˆ·æ³¨å†Œï¼Œç›´æ¥å†™å…¥æ•°æ®åº“ï¼ŒåŒæ—¶ç¼“å­˜ä¸­è‚¯å®šæ²¡æœ‰ã€‚å¦‚æœç¨‹åºæ­¤æ—¶è¯»ä»åº“ï¼Œç”±äºä¸»ä»å»¶è¿Ÿï¼Œå¯¼è‡´è¯»å–ä¸åˆ°ç”¨æˆ·æ•°æ®ã€‚</p></blockquote><p>è¿™ç§æƒ…å†µå°±éœ€è¦é’ˆå¯¹ Insert è¿™ç§æ“ä½œï¼šæ’å…¥æ–°æ•°æ®å…¥æ•°æ®åº“åŒæ—¶å†™ç¼“å­˜ã€‚ä½¿å¾—åç»­è¯»è¯·æ±‚å¯ä»¥ç›´æ¥è¯»ç¼“å­˜ï¼ŒåŒæ—¶å› ä¸ºæ˜¯åˆšæ’å…¥çš„æ–°æ•°æ®ï¼Œåœ¨ä¸€æ®µæ—¶é—´ä¿®æ”¹çš„å¯èƒ½æ€§ä¸å¤§ã€‚</p><p><strong>ä»¥ä¸Šæ–¹æ¡ˆåœ¨å¤æ‚çš„æƒ…å†µæˆ–å¤šæˆ–å°‘éƒ½æœ‰æ½œåœ¨é—®é¢˜ï¼Œéœ€è¦è´´åˆä¸šåŠ¡åšå…·ä½“çš„ä¿®æ”¹ã€‚</strong></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æ–‡ç« ä¸»è¦ä»‹ç»äº†åˆ†å¸ƒå¼æ¶æ„é‡Œçš„å¾®æœåŠ¡ç¼“å­˜åŸç†ä¸æœ€ä½³å®è·µï¼Œä¸‹é¢è®©æˆ‘ä»¬æ¥ä¸€èµ·çœ‹çœ‹å§&lt;/p&gt;</summary>
    
    
    
    <category term="åˆ†å¸ƒå¼æ¶æ„" scheme="http://example.com/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/"/>
    
    
    <category term="åˆ†å¸ƒå¼æ¶æ„" scheme="http://example.com/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/"/>
    
    <category term="ç¼“å­˜" scheme="http://example.com/tags/%E7%BC%93%E5%AD%98/"/>
    
  </entry>
  
  <entry>
    <title>æ¶æ„ä¸‰é«˜æ€»ç»“</title>
    <link href="http://example.com/2021/01/08/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/%E6%A6%82%E5%BF%B5/%E6%9E%B6%E6%9E%84%E4%B8%89%E9%AB%98%E6%80%BB%E7%BB%93/"/>
    <id>http://example.com/2021/01/08/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/%E6%A6%82%E5%BF%B5/%E6%9E%B6%E6%9E%84%E4%B8%89%E9%AB%98%E6%80%BB%E7%BB%93/</id>
    <published>2021-01-08T17:51:03.000Z</published>
    <updated>2021-01-23T09:15:30.420Z</updated>
    
    <content type="html"><![CDATA[<p>é’ˆå¯¹é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€é«˜æ‰©å±•3ä¸ªæ–¹é¢ï¼Œç½—åˆ—å‡ºéœ€è¦æ³¨æ„çš„ç‚¹ã€‚</p><a id="more"></a><h3 id="ä¸€ã€é«˜æ€§èƒ½çš„å®è·µæ–¹æ¡ˆ"><a href="#ä¸€ã€é«˜æ€§èƒ½çš„å®è·µæ–¹æ¡ˆ" class="headerlink" title="ä¸€ã€é«˜æ€§èƒ½çš„å®è·µæ–¹æ¡ˆ"></a>ä¸€ã€é«˜æ€§èƒ½çš„å®è·µæ–¹æ¡ˆ</h3><p>1ã€é›†ç¾¤éƒ¨ç½²ï¼Œé€šè¿‡è´Ÿè½½å‡è¡¡å‡è½»å•æœºå‹åŠ›ã€‚</p><p>2ã€å¤šçº§ç¼“å­˜ï¼ŒåŒ…æ‹¬é™æ€æ•°æ®ä½¿ç”¨CDNã€æœ¬åœ°ç¼“å­˜ã€åˆ†å¸ƒå¼ç¼“å­˜ç­‰ï¼Œä»¥åŠå¯¹ç¼“å­˜åœºæ™¯ä¸­çš„çƒ­ç‚¹keyã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜å¹¶å‘ã€æ•°æ®ä¸€è‡´æ€§ç­‰é—®é¢˜çš„å¤„ç†ã€‚</p><p>3ã€åˆ†åº“åˆ†è¡¨å’Œç´¢å¼•ä¼˜åŒ–ï¼Œä»¥åŠå€ŸåŠ©æœç´¢å¼•æ“è§£å†³å¤æ‚æŸ¥è¯¢é—®é¢˜ã€‚</p><p>4ã€è€ƒè™‘æ•°æ®åº“çš„ä½¿ç”¨ï¼Œæ¯”å¦‚<code>HBase</code>ã€<code>TiDB</code>ç­‰ï¼Œä½†æ˜¯å›¢é˜Ÿå¿…é¡»ç†Ÿæ‚‰è¿™äº›ç»„ä»¶ï¼Œä¸”æœ‰è¾ƒå¼ºçš„è¿ç»´èƒ½åŠ›ã€‚</p><p>5ã€å¼‚æ­¥åŒ–ï¼Œå°†æ¬¡è¦æµç¨‹é€šè¿‡å¤šçº¿ç¨‹ã€<code>MQ</code>ã€ç”šè‡³å»¶æ—¶ä»»åŠ¡è¿›è¡Œå¼‚æ­¥å¤„ç†ã€‚</p><p>6ã€é™æµï¼Œéœ€è¦å…ˆè€ƒè™‘ä¸šåŠ¡æ˜¯å¦å…è®¸é™æµï¼ˆæ¯”å¦‚ç§’æ€åœºæ™¯æ˜¯å…è®¸çš„ï¼‰ï¼ŒåŒ…æ‹¬å‰ç«¯é™æµã€<code>Nginx</code>æ¥å…¥å±‚çš„é™æµã€æœåŠ¡ç«¯çš„é™æµã€‚</p><p>7ã€å¯¹æµé‡è¿›è¡Œå‰Šå³°å¡«è°·ï¼Œé€šè¿‡<code>MQ</code>æ‰¿æ¥æµé‡ã€‚</p><p>8ã€å¹¶å‘å¤„ç†ï¼Œé€šè¿‡å¤šçº¿ç¨‹å°†ä¸²è¡Œé€»è¾‘å¹¶è¡ŒåŒ–ã€‚</p><p>9ã€é¢„è®¡ç®—ï¼Œæ¯”å¦‚æŠ¢çº¢åŒ…åœºæ™¯ï¼Œå¯ä»¥æå‰è®¡ç®—å¥½çº¢åŒ…é‡‘é¢ç¼“å­˜èµ·æ¥ï¼Œå‘çº¢åŒ…æ—¶ç›´æ¥ä½¿ç”¨å³å¯ã€‚</p><p>10ã€ç¼“å­˜é¢„çƒ­ï¼Œé€šè¿‡å¼‚æ­¥ä»»åŠ¡æå‰é¢„çƒ­æ•°æ®åˆ°æœ¬åœ°ç¼“å­˜æˆ–è€…åˆ†å¸ƒå¼ç¼“å­˜ä¸­ã€‚</p><p>11ã€å‡å°‘IOæ¬¡æ•°ï¼Œæ¯”å¦‚æ•°æ®åº“å’Œç¼“å­˜çš„æ‰¹é‡è¯»å†™ã€<code>RPC</code>çš„æ‰¹é‡æ¥å£æ”¯æŒã€æˆ–è€…é€šè¿‡å†—ä½™æ•°æ®çš„æ–¹å¼å¹²æ‰<code>RPC</code>è°ƒç”¨ã€‚</p><p>12ã€å‡å°‘IOæ—¶çš„æ•°æ®åŒ…å¤§å°ï¼ŒåŒ…æ‹¬é‡‡ç”¨è½»é‡çº§çš„é€šä¿¡åè®®ã€åˆé€‚çš„æ•°æ®ç»“æ„ã€å»æ‰æ¥å£ä¸­çš„å¤šä½™å­—æ®µã€å‡å°‘ç¼“å­˜keyçš„å¤§å°ã€å‹ç¼©ç¼“å­˜valueç­‰ã€‚</p><p>13ã€ç¨‹åºé€»è¾‘ä¼˜åŒ–ï¼Œæ¯”å¦‚å°†å¤§æ¦‚ç‡é˜»æ–­æ‰§è¡Œæµç¨‹çš„åˆ¤æ–­é€»è¾‘å‰ç½®ã€Forå¾ªç¯çš„è®¡ç®—é€»è¾‘ä¼˜åŒ–ï¼Œæˆ–è€…é‡‡ç”¨æ›´é«˜æ•ˆçš„ç®—æ³•ã€‚</p><p>14ã€å„ç§æ± åŒ–æŠ€æœ¯çš„ä½¿ç”¨å’Œæ± å¤§å°çš„è®¾ç½®ï¼ŒåŒ…æ‹¬<code>HTTP</code>è¯·æ±‚æ± ã€çº¿ç¨‹æ± ï¼ˆè€ƒè™‘<code>CPUå¯†é›†å‹</code>è¿˜æ˜¯<code>IOå¯†é›†å‹</code>è®¾ç½®æ ¸å¿ƒå‚æ•°ï¼‰ã€æ•°æ®åº“å’Œ<code>Redis</code>è¿æ¥æ± ç­‰ã€‚</p><p>15ã€<code>JVM</code>ä¼˜åŒ–ï¼ŒåŒ…æ‹¬æ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„å¤§å°ã€GCç®—æ³•çš„é€‰æ‹©ç­‰ï¼Œå°½å¯èƒ½å‡å°‘GCé¢‘ç‡å’Œè€—æ—¶ã€‚</p><p>16ã€é”é€‰æ‹©ï¼Œè¯»å¤šå†™å°‘çš„åœºæ™¯ç”¨ä¹è§‚é”ï¼Œæˆ–è€…è€ƒè™‘é€šè¿‡åˆ†æ®µé”çš„æ–¹å¼å‡å°‘é”å†²çªã€‚</p><p>ä¸Šè¿°æ–¹æ¡ˆæ— å¤–ä¹ä»è®¡ç®—å’Œ IO ä¸¤ä¸ªç»´åº¦è€ƒè™‘æ‰€æœ‰å¯èƒ½çš„ä¼˜åŒ–ç‚¹ï¼Œéœ€è¦æœ‰é…å¥—çš„ç›‘æ§ç³»ç»Ÿå®æ—¶äº†è§£å½“å‰çš„æ€§èƒ½è¡¨ç°ï¼Œå¹¶æ”¯æ’‘ä½ è¿›è¡Œæ€§èƒ½ç“¶é¢ˆåˆ†æï¼Œç„¶åå†éµå¾ªäºŒå…«åŸåˆ™ï¼ŒæŠ“ä¸»è¦çŸ›ç›¾è¿›è¡Œä¼˜åŒ–ã€‚</p><h3 id="äºŒã€é«˜å¯ç”¨çš„å®è·µæ–¹æ¡ˆ"><a href="#äºŒã€é«˜å¯ç”¨çš„å®è·µæ–¹æ¡ˆ" class="headerlink" title="äºŒã€é«˜å¯ç”¨çš„å®è·µæ–¹æ¡ˆ"></a>äºŒã€é«˜å¯ç”¨çš„å®è·µæ–¹æ¡ˆ</h3><p>1ã€å¯¹ç­‰èŠ‚ç‚¹çš„æ•…éšœè½¬ç§»ï¼ŒNginxå’ŒæœåŠ¡æ²»ç†æ¡†æ¶å‡æ”¯æŒä¸€ä¸ªèŠ‚ç‚¹å¤±è´¥åè®¿é—®å¦ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p><p>2ã€éå¯¹ç­‰èŠ‚ç‚¹çš„æ•…éšœè½¬ç§»ï¼Œé€šè¿‡å¿ƒè·³æ£€æµ‹å¹¶å®æ–½ä¸»å¤‡åˆ‡æ¢ï¼ˆæ¯”å¦‚<code>redis</code>çš„å“¨å…µæ¨¡å¼æˆ–è€…é›†ç¾¤æ¨¡å¼ã€MySQLçš„ä¸»ä»åˆ‡æ¢ç­‰ï¼‰ã€‚</p><p>3ã€æ¥å£å±‚é¢çš„è¶…æ—¶è®¾ç½®ã€é‡è¯•ç­–ç•¥å’Œå¹‚ç­‰è®¾è®¡ã€‚</p><p>4ã€é™çº§å¤„ç†ï¼šä¿è¯æ ¸å¿ƒæœåŠ¡ï¼Œç‰ºç‰²éæ ¸å¿ƒæœåŠ¡ï¼Œå¿…è¦æ—¶è¿›è¡Œç†”æ–­ï¼›æˆ–è€…æ ¸å¿ƒé“¾è·¯å‡ºé—®é¢˜æ—¶ï¼Œæœ‰å¤‡é€‰é“¾è·¯ã€‚</p><p>5ã€é™æµå¤„ç†ï¼šå¯¹è¶…è¿‡ç³»ç»Ÿå¤„ç†èƒ½åŠ›çš„è¯·æ±‚ç›´æ¥æ‹’ç»æˆ–è€…è¿”å›é”™è¯¯ç ã€‚</p><p>6ã€MQåœºæ™¯çš„æ¶ˆæ¯å¯é æ€§ä¿è¯ï¼ŒåŒ…æ‹¬<code>producer</code>ç«¯çš„é‡è¯•æœºåˆ¶ã€<code>broker</code>ä¾§çš„æŒä¹…åŒ–ã€<code>consumer</code>ç«¯çš„ackæœºåˆ¶ç­‰ã€‚</p><p>7ã€ç°åº¦å‘å¸ƒï¼Œèƒ½æ”¯æŒæŒ‰æœºå™¨ç»´åº¦è¿›è¡Œå°æµé‡éƒ¨ç½²ï¼Œè§‚å¯Ÿç³»ç»Ÿæ—¥å¿—å’Œä¸šåŠ¡æŒ‡æ ‡ï¼Œç­‰è¿è¡Œå¹³ç¨³åå†æ¨å…¨é‡ã€‚</p><p>8ã€ç›‘æ§æŠ¥è­¦ï¼šå…¨æ–¹ä½çš„ç›‘æ§ä½“ç³»ï¼ŒåŒ…æ‹¬æœ€åŸºç¡€çš„CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œçš„ç›‘æ§ï¼Œä»¥åŠWebæœåŠ¡å™¨ã€JVMã€æ•°æ®åº“ã€å„ç±»ä¸­é—´ä»¶çš„ç›‘æ§å’Œä¸šåŠ¡æŒ‡æ ‡çš„ç›‘æ§ã€‚</p><p>9ã€ç¾å¤‡æ¼”ç»ƒï¼šç±»ä¼¼å½“å‰çš„â€œæ··æ²Œå·¥ç¨‹â€ï¼Œå¯¹ç³»ç»Ÿè¿›è¡Œä¸€äº›ç ´åæ€§æ‰‹æ®µï¼Œè§‚å¯Ÿå±€éƒ¨æ•…éšœæ˜¯å¦ä¼šå¼•èµ·å¯ç”¨æ€§é—®é¢˜ã€‚</p><p>é«˜å¯ç”¨çš„æ–¹æ¡ˆä¸»è¦ä»å†—ä½™ã€å–èˆã€ç³»ç»Ÿè¿ç»´3ä¸ªæ–¹å‘è€ƒè™‘ï¼ŒåŒæ—¶éœ€è¦æœ‰é…å¥—çš„å€¼ç­æœºåˆ¶å’Œæ•…éšœå¤„ç†æµç¨‹ï¼Œå½“å‡ºç°çº¿ä¸Šé—®é¢˜æ—¶ï¼Œå¯åŠæ—¶è·Ÿè¿›å¤„ç†ã€‚</p><h3 id="ä¸‰ã€é«˜æ‰©å±•çš„å®è·µæ–¹æ¡ˆ"><a href="#ä¸‰ã€é«˜æ‰©å±•çš„å®è·µæ–¹æ¡ˆ" class="headerlink" title="ä¸‰ã€é«˜æ‰©å±•çš„å®è·µæ–¹æ¡ˆ"></a>ä¸‰ã€é«˜æ‰©å±•çš„å®è·µæ–¹æ¡ˆ</h3><p>1ã€åˆç†çš„åˆ†å±‚æ¶æ„ï¼šæ¯”å¦‚ä¸Šé¢è°ˆåˆ°çš„äº’è”ç½‘æœ€å¸¸è§çš„åˆ†å±‚æ¶æ„ï¼Œå¦å¤–è¿˜èƒ½è¿›ä¸€æ­¥æŒ‰ç…§æ•°æ®è®¿é—®å±‚ã€ä¸šåŠ¡é€»è¾‘å±‚å¯¹å¾®æœåŠ¡åšæ›´ç»†ç²’åº¦çš„åˆ†å±‚ï¼ˆä½†æ˜¯éœ€è¦è¯„ä¼°æ€§èƒ½ï¼Œä¼šå­˜åœ¨ç½‘ç»œå¤šä¸€è·³çš„æƒ…å†µï¼‰ã€‚</p><p>2ã€å­˜å‚¨å±‚çš„æ‹†åˆ†ï¼šæŒ‰ç…§ä¸šåŠ¡ç»´åº¦åšå‚ç›´æ‹†åˆ†ã€æŒ‰ç…§æ•°æ®ç‰¹å¾ç»´åº¦è¿›ä¸€æ­¥åšæ°´å¹³æ‹†åˆ†ï¼ˆåˆ†åº“åˆ†è¡¨ï¼‰ã€‚</p><p>3ã€ä¸šåŠ¡å±‚çš„æ‹†åˆ†ï¼šæœ€å¸¸è§çš„æ˜¯æŒ‰ç…§ä¸šåŠ¡ç»´åº¦æ‹†ï¼ˆæ¯”å¦‚ç”µå•†åœºæ™¯çš„å•†å“æœåŠ¡ã€è®¢å•æœåŠ¡ç­‰ï¼‰ï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§æ ¸å¿ƒæ¥å£å’Œéæ ¸å¿ƒæ¥å£æ‹†ï¼Œè¿˜å¯ä»¥æŒ‰ç…§è¯·æ±‚æºæ‹†ï¼ˆæ¯”å¦‚To Cå’ŒTo Bï¼ŒAPPå’ŒH5ï¼‰ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;é’ˆå¯¹é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€é«˜æ‰©å±•3ä¸ªæ–¹é¢ï¼Œç½—åˆ—å‡ºéœ€è¦æ³¨æ„çš„ç‚¹ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="åˆ†å¸ƒå¼æ¶æ„" scheme="http://example.com/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/"/>
    
    
    <category term="åˆ†å¸ƒå¼æ¶æ„" scheme="http://example.com/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>å¹‚ç­‰æ€§ä¸åˆ†å¸ƒå¼é”</title>
    <link href="http://example.com/2021/01/08/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/%E6%A6%82%E5%BF%B5/%E5%B9%82%E7%AD%89%E6%80%A7%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/"/>
    <id>http://example.com/2021/01/08/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/%E6%A6%82%E5%BF%B5/%E5%B9%82%E7%AD%89%E6%80%A7%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/</id>
    <published>2021-01-08T17:50:14.000Z</published>
    <updated>2021-01-23T09:15:30.420Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§"><a href="#1-ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§" class="headerlink" title="1. ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§"></a>1. ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§</h3><p><code>å¹‚ç­‰æ€§</code> å°±æ˜¯æŒ‡ï¼šä¸€ä¸ªå¹‚ç­‰æ“ä½œä»»å…¶æ‰§è¡Œå¤šæ¬¡æ‰€äº§ç”Ÿçš„å½±å“å‡ä¸ä¸€æ¬¡æ‰§è¡Œçš„å½±å“ç›¸åŒã€‚ç”¨æ•°å­¦çš„æ¦‚å¿µè¡¨è¾¾æ˜¯è¿™æ ·çš„: <code>f(f(x)) = f(x)</code> . å°±åƒ <code>nx1 = n</code> ä¸€æ ·ï¼Œ x1 å°±æ˜¯ä¸€ä¸ªå¹‚ç­‰æ“ä½œã€‚æ— è®ºæ˜¯ä¹˜ä»¥å¤šå°‘æ¬¡ç»“æœéƒ½ä¸€æ ·ã€‚</p><a id="more"></a><h3 id="2-å¸¸è§çš„å¹‚ç­‰æ€§é—®é¢˜"><a href="#2-å¸¸è§çš„å¹‚ç­‰æ€§é—®é¢˜" class="headerlink" title="2. å¸¸è§çš„å¹‚ç­‰æ€§é—®é¢˜"></a>2. å¸¸è§çš„å¹‚ç­‰æ€§é—®é¢˜</h3><blockquote><p>å¹‚ç­‰æ€§é—®é¢˜ç»å¸¸ä¼šæ˜¯ç”±ç½‘ç»œé—®é¢˜å¼•èµ·çš„ï¼Œè¿˜æœ‰é‡å¤æ“ä½œå¼•èµ·çš„ã€‚</p></blockquote><p><strong>åœºæ™¯ä¸€ï¼šæ¯”å¦‚ç‚¹èµåŠŸèƒ½ï¼Œä¸€ä¸ªç”¨æˆ·åªèƒ½å¯¹åŒä¸€ç‰‡æ–‡ç« ç‚¹èµä¸€æ¬¡ï¼Œé‡å¤ç‚¹èµæç¤ºå·²ç»ç‚¹è¿‡èµäº†ã€‚</strong></p><p>ç¤ºä¾‹ä»£ç ï¼š</p><pre><code class="JAVA">public void like(Article article,User user) {    //æ£€æŸ¥æ˜¯å¦ç‚¹è¿‡èµ    if (checkIsLike(article,user)) {        //ç‚¹è¿‡èµäº†        throw new ApiException(CodeEnums.SYSTEM_ERR);    } else {        //ä¿å­˜ç‚¹èµ        saveLike(article,user);    }}</code></pre><p>çœ‹ä¸Šå»å¥½åƒæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä¿å­˜ç‚¹èµä¹‹å‰å·²ç»æ£€æŸ¥è¿‡æ˜¯å¦ç‚¹èµäº†ï¼Œç†è®ºä¸ŠåŒä¸€ä¸ªäººä¸ä¼šå¯¹åŒä¸€ç¯‡æ–‡ç« é‡å¤ç‚¹èµã€‚ä½†å®é™…ä¸æ˜¯è¿™æ ·çš„ã€‚å› ä¸ºç½‘ç»œè¯·æ±‚ä¸æ˜¯æ’é˜Ÿè¿›æ¥çš„ï¼Œè€Œæ˜¯ä¸€çªèœ‚æ¶Œè¿›æ¥çš„ã€‚</p><p>æŸäº›æ—¶å€™ï¼Œç”¨æˆ·ç½‘ç»œä¸å¥½ï¼Œå¯èƒ½å¾ˆçŸ­çš„æ—¶é—´å†…ç‚¹å‡»äº†å¤šæ¬¡ï¼Œç”±äºç½‘ç»œä¼ è¾“é—®é¢˜ï¼Œè¿™äº›è¯·æ±‚å¯èƒ½ä¼šåŒæ—¶æ¥åˆ°æˆ‘ä»¬çš„æœåŠ¡å™¨ã€‚</p><ul><li><strong>ç¬¬ä¸€ä¸ªè¯·æ±‚ checkIsLikeï¼ˆï¼‰ è¿”å› false ï¼Œ æ­£åœ¨æ‰§è¡Œ saveLike() æ“ä½œï¼Œè¿˜æ²¡æ¥çš„åŠæäº¤äº‹åŠ¡</strong> </li><li><strong>ç¬¬äºŒä¸ªè¯·æ±‚è¿‡æ¥äº† ï¼ŒcheckIsLikeï¼ˆï¼‰ è¿”å› ä¹Ÿæ˜¯ false , å¹¶å» æ‰§è¡Œäº† saveLike() æ“ä½œ</strong></li></ul><p>è¿™æ ·å­ï¼Œå°±é€ æˆäº†ä¸€ä¸ªç”¨æˆ·åŒæ—¶å¯¹ä¸€ç¯‡æ–‡ç« è¿›è¡Œäº†å¤šæ¬¡ç‚¹èµæ“ä½œã€‚</p><p>è¿™å°±æ˜¯å…¸å‹çš„å¹‚ç­‰æ€§é—®é¢˜ï¼Œ æ“ä½œäº†ä¸€æ¬¡å’Œæ“ä½œäº†ä¸¤æ¬¡ç»“æœä¸ä¸€æ ·ï¼Œå› ä¸ºä½ å¤šç‚¹äº†ä¸€æ¬¡èµï¼ŒæŒ‰ç…§å¹‚ç­‰æ€§åŸåˆ™ ä¸ç®¡ä½ ç‚¹å‡»äº†å¤šå°‘æ¬¡ç»“æœéƒ½ä¸€æ ·ï¼Œåªç‚¹äº†ä¸€æ¬¡èµã€‚</p><p>å¾ˆå¤šåœºæ™¯éƒ½æ˜¯è¿™æ ·é€ æˆçš„ï¼Œæ¯”å¦‚ç”¨æˆ·é‡å¤ä¸‹å•ï¼Œé‡å¤è¯„è®ºï¼Œé‡å¤æäº¤è¡¨å•ç­‰ã€‚</p><p>é‚£æ€ä¹ˆè§£å†³å‘¢ï¼Ÿå‡è®¾ç½‘ç»œçš„è¯·æ±‚æ˜¯æ’é˜Ÿè¿›æ¥çš„å°±ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜äº†ã€‚</p><p>äºæ˜¯æˆ‘ä»¬å¯ä»¥æ”¹æˆè¿™æ ·ï¼š</p><pre><code class="JAVA">public synchronized void like(Article article,User user) {    //æ£€æŸ¥æ˜¯å¦ç‚¹è¿‡èµ    if (checkIsLike(article,user)) {        //ç‚¹è¿‡èµäº†        throw new ApiException(CodeEnums.SYSTEM_ERR);    } else {        //ä¿å­˜ç‚¹èµ        saveLike(article,user);    }}</code></pre><p><code>synchronized</code> åŒæ­¥é” è¿™æ ·æˆ‘ä»¬çš„è¯·æ±‚å°±ä¼šä¹–ä¹–çš„æ’é˜Ÿè¿›æ¥äº†ã€‚</p><p>PS: è¿™æ ·åšæ˜¯æ•ˆç‡æ¯”è¾ƒä½çš„åšæ³•ï¼Œä¸å»ºè®®è¿™ä¹ˆåšï¼Œåªæ˜¯ä¸¾ä¾‹å­ï¼Œ<code>synchronized</code> ä¹Ÿä¸é€‚åˆåˆ†å¸ƒå¼é›†ç¾¤åœºæ™¯ã€‚</p><p><strong>åœºæ™¯äºŒ ï¼š ç¬¬ä¸‰æ–¹å›è°ƒ</strong></p><p>æˆ‘ä»¬ç³»ç»Ÿç»å¸¸éœ€è¦å’Œç¬¬ä¸‰æ–¹ç³»ç»Ÿæ‰“äº¤é“ï¼Œæ¯”å¦‚å¾®ä¿¡å……å€¼ï¼Œæ”¯ä»˜å®å……å€¼ä»€ä¹ˆçš„ï¼Œå¾®ä¿¡å’Œæ”¯ä»˜å®å¸¸å¸¸ä¼šä»¥å›è°ƒä½ çš„æ¥å£é€šçŸ¥ä½ æ”¯ä»˜ç»“æœã€‚ä¸ºäº†ä¿è¯ä½ èƒ½æ”¶åˆ°å›è°ƒï¼Œå¾€å¾€å¯èƒ½ä¼šå›è°ƒå¤šæ¬¡ã€‚</p><p>æœ‰æ—¶å€™æˆ‘ä»¬ä¹Ÿä¸ºäº†ä¿è¯æ•°æ®çš„å‡†ç¡®æ€§ä¼šæœ‰ä¸ªå®šæ—¶å™¨å»æŸ¥è¯¢æ”¯ä»˜ç»“æœæœªçŸ¥çš„æµæ°´ï¼Œå¹¶æ‰§è¡Œå“åº”çš„å¤„ç†ã€‚<br>å¦‚æœå®šæ—¶å™¨çš„è½®è¯¢å’Œå›è°ƒåˆšå¥½æ˜¯åœ¨åŒæ—¶è¿›è¡Œï¼Œè¿™å¯èƒ½åˆå‡ºBUGäº†, åˆè¿›è¡Œäº†ä¸¤æ¬¡é‡å¤æ“ä½œã€‚</p><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šå‡è®¾æˆ‘æ˜¯ä¸€ä¸ªå……å€¼æ“ä½œï¼Œ å›è°ƒå›æ¥çš„æ—¶å€™ ï¼Œä¼šåšä¸šåŠ¡å¤„ç†ï¼ŒæˆåŠŸäº†ç»™ç”¨æˆ·è´¦æˆ·åŠ é’±ã€‚è¿™æ˜¯åå°±è¦ä¿è¯å¹‚ç­‰æ€§äº†ï¼Œ å‡è®¾å¾®ä¿¡åŒä¸€ç¬”äº¤æ˜“ç»™ä½ å›è°ƒäº†ä¸¤æ¬¡ï¼Œå¦‚æœä½ ç»™ç”¨æˆ·å……å€¼äº†ä¸¤æ¬¡ï¼Œè¿™æ˜¾ç„¶ä¸åˆç†(æˆ‘æ˜¯è€æ¿è‚¯å®šæ‰£ä½ å·¥èµ„)ï¼Œæ‰€ä»¥è¦ä¿è¯ ä¸ç®¡å¾®ä¿¡å›è°ƒä½ å¤šå°‘æ¬¡ ï¼ŒåŒä¸€ç¬”äº¤æ˜“ä½ åªèƒ½ç»™ç”¨æˆ·å……ä¸€æ¬¡é’±ã€‚è¿™å°±å¹‚ç­‰æ€§</p><h3 id="è§£å†³å¹‚ç­‰æ€§é—®é¢˜æ–¹æ¡ˆ"><a href="#è§£å†³å¹‚ç­‰æ€§é—®é¢˜æ–¹æ¡ˆ" class="headerlink" title="è§£å†³å¹‚ç­‰æ€§é—®é¢˜æ–¹æ¡ˆ"></a>è§£å†³å¹‚ç­‰æ€§é—®é¢˜æ–¹æ¡ˆ</h3><ul><li>synchronized é€‚åˆå•æœºåº”ç”¨ï¼Œä¸è¿½æ±‚æ€§èƒ½ ï¼Œä¸è¿½æ±‚å¹¶å‘ã€‚</li><li>åˆ†å¸ƒå¼é” ä½†æ˜¯å¾€å¾€æˆ‘ä»¬çš„åº”ç”¨æ˜¯åˆ†å¸ƒå¼çš„é›†ç¾¤ï¼Œå¹¶ä¸”å¾ˆè®²ç©¶æ€§èƒ½ï¼Œå¹¶å‘ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨åˆ° åˆ†å¸ƒå¼é” æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</li></ul><p>Redis åˆ†å¸ƒå¼é”ï¼š</p><pre><code class="JAVA">/*** setNx**  @param key*  @param value*  @return*/public Boolean setNx(String key,Object value) {    return redisTemplate.opsForValue().setIfAbsent(key,value);}/***  @param key é”*  @param waitTime ç­‰å¾…æ—¶é—´  æ¯«ç§’*  @param expireTime è¶…æ—¶æ—¶é—´  æ¯«ç§’*  @return*/public Boolean lock(String key,long waitTime,long expireTime) {    String vlaue =  UUIDUtil.mongoObjectId();    Boolean flag = setNx(key,vlaue);    //å°è¯•è·å–é”  æˆåŠŸè¿”å›    if (flag) {        redisTemplate.expire(key,expireTime,TimeUnit.MILLISECONDS);        return flag;    } else {        //å¤±è´¥        //ç°åœ¨æ—¶é—´        long newTime =  System.currentTimeMillis();        //ç­‰å¾…è¿‡æœŸæ—¶é—´        long loseTime = newTime + waitTime;        //ä¸æ–­å°è¯•è·å–é”æˆåŠŸè¿”å›        while (System.currentTimeMillis()  &lt; loseTime) {            Boolean testFlag = setNx(key,vlaue);            if (testFlag) {                redisTemplate.expire(key,expireTime,TimeUnit.MILLISECONDS);                return testFlag;            }            //ä¼‘çœ 100æ¯«ç§’            try {                Thread.sleep(100);            }            catch (InterruptedException e) {                e.printStackTrace();            }        }    }    return false;}/***  @param key*  @return*/public Boolean lock(String key) {    return lock(key,1000L,60  *  1000L);}/***  @param key*/public void unLock(String key) {    remove(key);}</code></pre><p>åˆ©ç”¨Redis åˆ†å¸ƒå¼é” æˆ‘ä»¬çš„ä»£ç å¯ä»¥æ”¹æˆè¿™æ ·ï¼š</p><pre><code class="JAVA">public void like(Article article,User user) {    String key =  "key:like"  + article.getId()  +  ":"  + user.getUserId();    //  ç­‰å¾…é”çš„æ—¶é—´  0  ï¼Œ  è¿‡æœŸæ—¶é—´  ä¸€åˆ†é’Ÿé˜²æ­¢æ­»é”    Boolean flag = redisService.lock(key,0,60  *  1000L);    if(!flag) {        //è·å–é”å¤±è´¥  è¯´æ˜å‰é¢çš„è¯·æ±‚å·²ç»è·å–äº†é”        throw new ApiException(CodeEnums.SYSTEM_ERR);    }    //æ£€æŸ¥æ˜¯å¦ç‚¹è¿‡èµ    if (checkIsLike(article,user)) {        //ç‚¹è¿‡èµäº†        throw new ApiException(CodeEnums.SYSTEM_ERR);    } else {        //ä¿å­˜ç‚¹èµ        saveLike(article,user);    }    //åˆ é™¤é”    redisService.unLock(key);}</code></pre><p>key çš„è®¾è®¡ä¹Ÿå¾ˆè®²ç©¶ï¼š</p><p>æ•°æ®ä¸å†²çªçš„ä¸¤ä¸ªä¸šåŠ¡åœºæ™¯ï¼Œkeyä¸èƒ½å†²çªï¼Œä¸åŒäººçš„keyä¹Ÿä¸ä¸€æ ·ï¼Œä¸åŒçš„æ–‡ç« Keyä¹Ÿä¸ä¸€æ ·ã€‚</p><p>æ ¹æ®åœºæ™¯ä¸šåŠ¡è®¾å®šã€‚</p><p><strong>ä¸€ä¸ªåŸåˆ™ï¼š å°½å¯èƒ½çš„ç¼©å°keyçš„èŒƒå›´ã€‚</strong> è¿™æ ·æ‰èƒ½å¢å¼ºæˆ‘ä»¬çš„å¹¶å‘ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬å…ˆè·å–é”ï¼Œè·å–é”æˆåŠŸ æ‰§è¡Œå®Œæ“ä½œï¼Œä¿å­˜æ•°æ® ï¼Œåˆ é™¤é”ã€‚è·å–ä¸åˆ°é”è¿”å›å¤±è´¥ã€‚è®¾ç½®è¿‡æœŸæ—¶é—´æ˜¯ä¸ºäº†é˜²æ­¢â€˜æ­»é”â€™ï¼Œæ¯”å¦‚æœºå™¨è·å–åˆ°äº† é”ï¼Œæ²¡æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œä½†æ˜¯ä»–æ­»æœºäº†ï¼Œæ²¡æœ‰åˆ é™¤é‡Šæ”¾é”ã€‚</p><ul><li>ç‰ˆæœ¬å·æ§åˆ¶CAS ç®—æ³•ï¼š CASæœ‰3ä¸ªæ“ä½œæ•°ï¼Œå†…å­˜å€¼Vï¼Œæ—§çš„é¢„æœŸå€¼Aï¼Œè¦ä¿®æ”¹çš„æ–°å€¼Bã€‚å½“ä¸”ä»…å½“é¢„æœŸå€¼Aå’Œå†…å­˜å€¼Vç›¸åŒæ—¶ï¼Œå°†å†…å­˜å€¼Vä¿®æ”¹ä¸ºBï¼Œå¦åˆ™ä»€ä¹ˆéƒ½ä¸åšã€‚è¿™ä¸ªæ¯”è¾ƒç¹æ‚ï¼Œæœ‰å…´è¶£çš„å¤§å®¶å¯ä»¥å»çœ‹çœ‹ã€‚</li></ul>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;1-ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§&quot;&gt;&lt;a href=&quot;#1-ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§&quot; class=&quot;headerlink&quot; title=&quot;1. ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§&quot;&gt;&lt;/a&gt;1. ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§&lt;/h3&gt;&lt;p&gt;&lt;code&gt;å¹‚ç­‰æ€§&lt;/code&gt; å°±æ˜¯æŒ‡ï¼šä¸€ä¸ªå¹‚ç­‰æ“ä½œä»»å…¶æ‰§è¡Œå¤šæ¬¡æ‰€äº§ç”Ÿçš„å½±å“å‡ä¸ä¸€æ¬¡æ‰§è¡Œçš„å½±å“ç›¸åŒã€‚ç”¨æ•°å­¦çš„æ¦‚å¿µè¡¨è¾¾æ˜¯è¿™æ ·çš„: &lt;code&gt;f(f(x)) = f(x)&lt;/code&gt; . å°±åƒ &lt;code&gt;nx1 = n&lt;/code&gt; ä¸€æ ·ï¼Œ x1 å°±æ˜¯ä¸€ä¸ªå¹‚ç­‰æ“ä½œã€‚æ— è®ºæ˜¯ä¹˜ä»¥å¤šå°‘æ¬¡ç»“æœéƒ½ä¸€æ ·ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="åˆ†å¸ƒå¼æ¶æ„" scheme="http://example.com/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/"/>
    
    
    <category term="åˆ†å¸ƒå¼æ¶æ„" scheme="http://example.com/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•å­¦ä¹ åˆ†å¸ƒå¼ç³»ç»Ÿ(è½¬è½½)</title>
    <link href="http://example.com/2021/01/08/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F(%E8%BD%AC%E8%BD%BD)/"/>
    <id>http://example.com/2021/01/08/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F(%E8%BD%AC%E8%BD%BD)/</id>
    <published>2021-01-08T17:47:31.000Z</published>
    <updated>2021-01-23T09:15:30.419Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¹ ä¸€ä¸ªçŸ¥è¯†ä¹‹å‰ï¼Œæˆ‘è§‰å¾—æ¯”è¾ƒå¥½çš„æ–¹å¼æ˜¯å…ˆç†è§£å®ƒçš„æ¥é¾™å»è„‰ï¼šå³è¿™ä¸ªçŸ¥è¯†äº§ç”Ÿçš„è¿‡ç¨‹ï¼Œå®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œå®ƒæ˜¯æ€ä¹ˆæ ·è§£å†³çš„å¹¶ä¸”å®ƒå¸¦æ¥äº†å“ªäº›é—®é¢˜ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½æ¯”è¾ƒå¥½çš„æŠ“åˆ°å®ƒçš„è„‰ç»œå’Œå…³é”®ç‚¹ï¼Œä¸ä¼šä¸€å¼€å§‹å°±è¿·å¤±åœ¨ç»†èŠ‚ä¸­ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦è§£å†³çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼š<strong>åˆ†å¸ƒå¼ç³»ç»Ÿè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</strong></p><a id="more"></a><p><strong>ç¬¬ä¸€ä¸ª</strong>æ˜¯å•æœºæ€§èƒ½ç“¶é¢ˆå¯¼è‡´çš„æˆæœ¬é—®é¢˜ï¼Œç”±äºæ‘©å°”å®šå¾‹å¤±æ•ˆï¼Œå»‰ä»· PC æœºæ€§èƒ½çš„ç“¶é¢ˆæ— æ³•ç»§ç»­çªç ´ï¼Œå°å‹æœºå’Œå¤§å‹æœºèƒ½æé«˜æ›´é«˜çš„å•æœºæ€§èƒ½ï¼Œä½†æ˜¯æˆæœ¬å¤ªå¤§é«˜ï¼Œä¸€èˆ¬çš„å…¬å¸å¾ˆéš¾æ‰¿å—ï¼›</p><p><strong>ç¬¬äºŒä¸ª</strong>æ˜¯ç”¨æˆ·é‡å’Œæ•°æ®é‡çˆ†ç‚¸æ€§çš„å¢å¤§å¯¼è‡´çš„æˆæœ¬é—®é¢˜ï¼Œè¿›å…¥äº’è”ç½‘æ—¶ä»£ï¼Œç”¨æˆ·é‡çˆ†ç‚¸æ€§çš„å¢å¤§ï¼Œç”¨æˆ·äº§ç”Ÿçš„æ•°æ®é‡ä¹Ÿåœ¨çˆ†ç‚¸æ€§çš„å¢å¤§ï¼Œä½†æ˜¯å•ä¸ªç”¨æˆ·æˆ–è€…å•æ¡æ•°æ®çš„ä»·å€¼å…¶å®æ¯”è½¯ä»¶æ—¶ä»£ï¼ˆæ¯”å¦‚é“¶è¡Œç”¨æˆ·ï¼‰çš„ä»·å€¼æ˜¯åªä½ä¸é«˜ï¼Œæ‰€ä»¥å¿…é¡»å¯»æ‰¾æ›´ç»æµçš„æ–¹æ¡ˆï¼›</p><p><strong>ç¬¬ä¸‰ä¸ª</strong>æ˜¯ä¸šåŠ¡é«˜å¯ç”¨çš„è¦æ±‚ï¼Œå¯¹äºäº’è”ç½‘çš„äº§å“æ¥è¯´ï¼Œéƒ½è¦æ±‚ 7 * 24 å°æ—¶æä¾›æœåŠ¡ï¼Œæ— æ³•å®¹å¿åœæ­¢æœåŠ¡ç­‰æ•…éšœï¼Œè€Œè¦æä¾›é«˜å¯ç”¨çš„æœåŠ¡ï¼Œå”¯ä¸€çš„æ–¹å¼å°±æ˜¯å¢åŠ å†—ä½™æ¥å®Œæˆï¼Œè¿™æ ·å°±ç®—å•æœºç³»ç»Ÿå¯ä»¥æ”¯æ’‘çš„æœåŠ¡ï¼Œå› ä¸ºé«˜å¯ç”¨çš„è¦æ±‚ï¼Œä¹Ÿä¼šå˜æˆä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿã€‚</p><p>åŸºäºä¸Šé¢çš„ä¸‰ä¸ªåŸå› å¯ä»¥çœ‹å‡ºï¼Œåœ¨äº’è”ç½‘æ—¶ä»£ï¼Œå•æœºç³»ç»Ÿæ˜¯æ— æ³•è§£å†³æˆæœ¬å’Œé«˜å¯ç”¨é—®é¢˜çš„ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªé—®é¢˜å¯¹å‡ ä¹å¯¹æ‰€æœ‰çš„å…¬å¸æ¥è¯´éƒ½æ˜¯éå¸¸å…³é”®çš„é—®é¢˜ï¼Œæ‰€ä»¥ï¼Œä»å•æœºç³»ç»Ÿåˆ°åˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯æ— æ³•é¿å…çš„æŠ€æœ¯å¤§æ½®æµã€‚</p><p>é‚£ä¹ˆï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯æ€ä¹ˆæ¥è§£å†³å•æœºç³»ç»Ÿé¢ä¸´çš„æˆæœ¬å’Œé«˜å¯ç”¨é—®é¢˜å‘¢ï¼Ÿå…¶å®æƒ³æ³•å¾ˆç®€å•ï¼Œå°±æ˜¯å°†ä¸€äº›å»‰ä»·çš„ PC æœºé€šè¿‡ç½‘ç»œè¿æ¥èµ·æ¥ï¼Œå…±åŒå®Œæˆå·¥ä½œï¼Œå¹¶ä¸”åœ¨ç³»ç»Ÿä¸­æä¾›å†—ä½™æ¥è§£å†³é«˜å¯ç”¨çš„é—®é¢˜ã€‚æˆ‘ä»¬æ¥çœ‹åˆ†å¸ƒå¼ç³»ç»Ÿçš„å®šä¹‰ï¼š<strong>åˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯ç”±ä¸€ç»„é€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡ã€ä¸ºäº†å®Œæˆå…±åŒçš„ä»»åŠ¡è€Œåè°ƒå·¥ä½œçš„è®¡ç®—æœºèŠ‚ç‚¹ç»„æˆçš„ç³»ç»Ÿ</strong>ã€‚åœ¨å®šä¹‰ä¸­ï¼Œæˆ‘ä»¬å¯ç”¨çœ‹å‡ºï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿå®ƒé€šè¿‡å¤šå·¥ä½œèŠ‚ç‚¹æ¥è§£å†³å•æœºç³»ç»Ÿé¢ä¸´çš„æˆæœ¬å’Œå¯ç”¨æ€§é—®é¢˜ï¼Œä½†æ˜¯å®ƒå¼•å…¥äº†å¯¹åˆ†å¸ƒå¼ç³»ç»Ÿå†…éƒ¨å·¥ä½œèŠ‚ç‚¹çš„åè°ƒé—®é¢˜ã€‚</p><p>æŒæ¡ä¸€ä¸ªçŸ¥è¯†éœ€è¦ç†è§£å®ƒçš„å‰å› åæœï¼Œå¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿæ¥è¯´ï¼Œå‰å› æ˜¯ã€Œåˆ†å¸ƒå¼ç³»ç»Ÿè§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€ï¼Œåæœæ˜¯ã€Œå®ƒæ˜¯æ€ä¹ˆåšå†…éƒ¨å·¥ä½œèŠ‚ç‚¹çš„åè°ƒã€ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è§£å†³çš„ç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯æ€ä¹ˆåšå†…éƒ¨å·¥ä½œèŠ‚ç‚¹åè°ƒçš„ï¼Ÿ</p><p>å…ˆä»ç®€å•çš„æƒ…å†µå…¥æ‰‹ï¼Œå¯¹äºåˆ†å¸ƒå¼è®¡ç®—ï¼ˆæ— çŠ¶æ€ï¼‰çš„æƒ…å†µï¼Œç³»ç»Ÿå†…éƒ¨çš„åè°ƒéœ€è¦åšå“ªäº›å·¥ä½œï¼š</p><h3 id="1ã€æ€ä¹ˆæ ·æ‰¾åˆ°æœåŠ¡ï¼Ÿ"><a href="#1ã€æ€ä¹ˆæ ·æ‰¾åˆ°æœåŠ¡ï¼Ÿ" class="headerlink" title="1ã€æ€ä¹ˆæ ·æ‰¾åˆ°æœåŠ¡ï¼Ÿ"></a>1ã€æ€ä¹ˆæ ·æ‰¾åˆ°æœåŠ¡ï¼Ÿ</h3><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå†…éƒ¨ï¼Œä¼šæœ‰ä¸åŒçš„æœåŠ¡ï¼ˆè§’è‰²ï¼‰ï¼ŒæœåŠ¡ A æ€ä¹ˆæ‰¾åˆ°æœåŠ¡ B æ˜¯éœ€è¦è§£å†³çš„é—®é¢˜ï¼Œä¸€èˆ¬æ¥è¯´æœåŠ¡æ³¨å†Œä¸å‘ç°æœºåˆ¶æ˜¯å¸¸ç”¨çš„æ€è·¯ï¼Œæ‰€ä»¥å¯ä»¥äº†è§£ä¸€ä¸‹æœåŠ¡æ³¨å†Œå‘ç°æœºåˆ¶å®ç°åŸç†ï¼Œå¹¶ä¸”å¯ä»¥æ€è€ƒæœåŠ¡æ³¨å†Œå‘ç°æ˜¯é€‰æ‹©åšæˆ AP è¿˜æ˜¯ CP ç³»ç»Ÿæ›´åˆç†ï¼›</p><h3 id="2ã€æ€ä¹ˆæ ·æ‰¾åˆ°å®ä¾‹ï¼Ÿ"><a href="#2ã€æ€ä¹ˆæ ·æ‰¾åˆ°å®ä¾‹ï¼Ÿ" class="headerlink" title="2ã€æ€ä¹ˆæ ·æ‰¾åˆ°å®ä¾‹ï¼Ÿ"></a>2ã€æ€ä¹ˆæ ·æ‰¾åˆ°å®ä¾‹ï¼Ÿ</h3><p>æ‰¾åˆ°æœåŠ¡åï¼Œå½“å‰çš„è¯·æ±‚åº”è¯¥é€‰æ‹©å‘å¾€æœåŠ¡çš„å“ªä¸€ä¸ªå®ä¾‹å‘¢ï¼Ÿä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœåŒä¸€ä¸ªæœåŠ¡çš„å®ä¾‹éƒ½æ˜¯å®Œå…¨å¯¹ç­‰çš„ï¼ˆæ— çŠ¶æ€ï¼‰ï¼Œé‚£ä¹ˆæŒ‰è´Ÿè½½å‡è¡¡ç­–ç•¥æ¥å¤„ç†å°±è¶³å¤Ÿï¼ˆè½®è¯¢ã€æƒé‡ã€hashã€ä¸€è‡´æ€§hashï¼Œfairç­‰å„ç§ç­–ç•¥çš„é€‚ç”¨åœºæ™¯ï¼‰ï¼›å¦‚æœåŒä¸€ä¸ªæœåŠ¡çš„å®ä¾‹ä¸æ˜¯å¯¹ç­‰çš„ï¼ˆæœ‰çŠ¶æ€ï¼‰ï¼Œé‚£ä¹ˆéœ€è¦é€šè¿‡è·¯ç”±æœåŠ¡ï¼ˆå…ƒæ•°æ®æœåŠ¡ç­‰ï¼‰å…ˆç¡®å®šå½“å‰è¦è®¿é—®çš„è¯·æ±‚æ•°æ®åšå“ªä¸€ä¸ªå®ä¾‹ä¸Šï¼Œç„¶åå†è¿›è¡Œè®¿é—®ã€‚</p><h3 id="3ã€æ€ä¹ˆæ ·é¿å…é›ªå´©ï¼Ÿ"><a href="#3ã€æ€ä¹ˆæ ·é¿å…é›ªå´©ï¼Ÿ" class="headerlink" title="3ã€æ€ä¹ˆæ ·é¿å…é›ªå´©ï¼Ÿ"></a>3ã€æ€ä¹ˆæ ·é¿å…é›ªå´©ï¼Ÿ</h3><p>ç³»ç»Ÿé›ªå´©æ˜¯æŒ‡æ•…éšœçš„ç”±äºæ­£åé¦ˆå¾ªåºå¯¼è‡´ä¸æ–­æ‰©å¤§è§„åˆ™çš„æ•…éšœã€‚ä¸€æ¬¡é›ªå´©é€šå¸¸æ˜¯ç”±äºæ•´ä¸ªç³»ç»Ÿä¸­ä¸€ä¸ªå¾ˆå°çš„éƒ¨åˆ†å‡ºç°æ•…éšœäºå¼•å‘ï¼Œè¿›è€Œå¯¼è‡´ç³»ç»Ÿå…¶å®ƒéƒ¨åˆ†ä¹Ÿå‡ºç°æ•…éšœã€‚æ¯”å¦‚ç³»ç»Ÿä¸­æŸä¸€ä¸ªæœåŠ¡çš„ä¸€ä¸ªå®ä¾‹å‡ºç°æ•…éšœï¼Œå¯¼è‡´è´Ÿè½½å‡è¡¡å°†è¯¥å®ä¾‹æ‘˜é™¤è€Œå¼•èµ·å…¶å®ƒå®ä¾‹è´Ÿè½½å‡é«˜ï¼Œæœ€ç»ˆå¯¼è‡´è¯¥æœåŠ¡çš„æ‰€æœ‰å®ä¾‹åƒå¤šç±³è¯ºéª¨ç‰Œä¸€æ ·ä¸€ä¸ªä¸€ä¸ªå…¨éƒ¨å‡ºç°æ•…éšœã€‚</p><p>é¿å…é›ªå´©æ€»ä½“çš„ç­–ç•¥æ¯”è¾ƒç®€å•ï¼Œåªè¦æ˜¯ä¸¤ä¸ªæ€è·¯ï¼Œä¸€ä¸ªæ˜¯å¿«é€Ÿå¤±è´¥å’Œé™çº§æœºåˆ¶ï¼ˆç†”æ–­ã€é™çº§ã€é™æµç­‰ï¼‰ï¼Œé€šè¿‡å¿«é€Ÿå‡å°‘ç³»ç»Ÿè´Ÿè½½æ¥é¿å…é›ªå´©çš„å‘ç”Ÿï¼›å¦ä¸€ä¸ªä¸ºå¼¹æ€§æ‰©å®¹æœºåˆ¶ï¼Œé€šè¿‡å¿«é€Ÿå¢åŠ ç³»ç»Ÿçš„æœåŠ¡èƒ½åŠ›æ¥é¿å…é›ªå´©çš„å‘ç”Ÿã€‚è¿™ä¸ªæ ¹æ®ä¸åŒçš„åœºæ™¯å¯ä»¥åšä¸åŒçš„é€‰æ‹©ï¼Œæˆ–è€…ä¸¤ä¸ªç­–ç•¥éƒ½ä½¿ç”¨ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œå¿«é€Ÿå¤±è´¥ä¼šå¯¼è‡´éƒ¨åˆ†çš„è¯·æ±‚å¤±è´¥ï¼Œå¦‚æœåˆ†å¸ƒå¼ç³»ç»Ÿå†…éƒ¨å¯¹ä¸€è‡´æ€§è¦æ±‚å¾ˆé«˜çš„è¯ï¼Œå¿«é€Ÿå¤±è´¥ä¼šå¸¦æ¥ç³»ç»Ÿæ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œå¼¹æ€§æ‰©å®¹ä¼šæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„é€‰æ‹©ï¼Œä½†æ˜¯å¼¹æ€§æ‰©å®¹çš„å®ç°æˆæœ¬å’Œå“åº”æ—¶é—´æ¯”å¿«é€Ÿå¤±è´¥è¦å¤§å¾—å¤šã€‚</p><h3 id="4ã€æ€ä¹ˆæ ·ç›‘æ§å‘Šè­¦ï¼Ÿ"><a href="#4ã€æ€ä¹ˆæ ·ç›‘æ§å‘Šè­¦ï¼Ÿ" class="headerlink" title="4ã€æ€ä¹ˆæ ·ç›‘æ§å‘Šè­¦ï¼Ÿ"></a>4ã€æ€ä¹ˆæ ·ç›‘æ§å‘Šè­¦ï¼Ÿ</h3><p>å¯¹äºä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¦‚æœæˆ‘ä»¬ä¸èƒ½å¾ˆæ¸…æ¥šåœ°äº†è§£å†…éƒ¨çš„çŠ¶æ€ï¼Œé‚£ä¹ˆé«˜å¯ç”¨æ˜¯æ²¡æœ‰åŠæ³•å®Œå…¨ä¿éšœçš„ï¼Œæ‰€ä»¥å¯¹åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç›‘æ§ï¼ˆæ¯”å¦‚æ¥å£çš„æ—¶å»¶å’Œå¯ç”¨æ€§ç­‰ä¿¡æ¯ï¼‰ï¼Œåˆ†å¸ƒå¼è¿½è¸ª Traceï¼Œæ¨¡æ‹Ÿæ•…éšœçš„æ··æ²Œå·¥ç¨‹ï¼Œä»¥åŠç›¸å…³çš„å‘Šè­¦ç­‰æœºåˆ¶æ˜¯ä¸€å®šè¦å®Œå–„çš„ï¼›</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥çœ‹åˆ†å¸ƒå¼å­˜å‚¨ï¼ˆæœ‰çŠ¶æ€ï¼‰çš„å†…éƒ¨çš„åè°ƒæ˜¯æ€ä¹ˆåšçš„ï¼ŒåŒæ—¶ï¼Œå‰é¢ä»‹ç»çš„åˆ†å¸ƒå¼è®¡ç®—çš„åè°ƒæ–¹å¼åœ¨åˆ†å¸ƒå¼å­˜å‚¨ä¸­åŒæ ·é€‚ç”¨ï¼Œå°±ä¸å†é‡å¤äº†ï¼š</p><h3 id="5ã€CAP-åŠå…¶ç›¸å…³ç†è®ºä¸è¡¡æƒï¼š"><a href="#5ã€CAP-åŠå…¶ç›¸å…³ç†è®ºä¸è¡¡æƒï¼š" class="headerlink" title="5ã€CAP åŠå…¶ç›¸å…³ç†è®ºä¸è¡¡æƒï¼š"></a>5ã€CAP åŠå…¶ç›¸å…³ç†è®ºä¸è¡¡æƒï¼š</h3><p>ACIDã€BASE å’Œ CAP ç†è®ºï¼Œäº†è§£è¿™ä¸‰ä¸ªä¸»é¢˜ï¼Œæ¨èè¿™ä¸€ç¯‡æ–‡ç« ä»¥åŠæ–‡ç« åé¢ç›¸å…³çš„å‚è€ƒæ–‡çŒ®ï¼š<a href="https://link.zhihu.com/?target=https://www.infoq.com/articles/cap-twelve-years-later-how-the-rules-have-changed/">è‹±æ–‡ç‰ˆæœ¬</a>ï¼Œ<a href="https://link.zhihu.com/?target=https://www.infoq.cn/article/cap-twelve-years-later-how-the-rules-have-changed/">ä¸­æ–‡ç‰ˆæœ¬</a></p><h3 id="6ã€æ€ä¹ˆæ ·åšæ•°æ®åˆ†ç‰‡ï¼š"><a href="#6ã€æ€ä¹ˆæ ·åšæ•°æ®åˆ†ç‰‡ï¼š" class="headerlink" title="6ã€æ€ä¹ˆæ ·åšæ•°æ®åˆ†ç‰‡ï¼š"></a>6ã€æ€ä¹ˆæ ·åšæ•°æ®åˆ†ç‰‡ï¼š</h3><p>å•æœºçš„å­˜å‚¨èƒ½åŠ›æ˜¯ä¸å¯èƒ½å­˜å‚¨æ‰€æœ‰çš„æ•°æ®çš„ï¼Œæ‰€ä»¥éœ€è¦è§£å†³æ€ä¹ˆå°†æ•°æ®æŒ‰ä¸€å®šçš„è§„åˆ™åˆ†åˆ«å­˜å‚¨åˆ°ä¸åŒçš„æœºå™¨ä¸Šï¼Œç›®å‰ä½¿ç”¨æ¯”è¾ƒå¤šçš„æ–¹æ¡ˆä¸º: <code>Hash</code> å’Œ <code>Region</code> åˆ†ç‰‡ç­–ç•¥ï¼Œå¯ä»¥äº†è§£ä¸€ä¸‹å®ƒä»¬çš„ä¼˜ç¼ºç‚¹å’Œå„è‡ªçš„åº”ç”¨åœºæ™¯ï¼›</p><h3 id="7ã€æ€ä¹ˆæ ·åšæ•°æ®å¤åˆ¶ï¼š"><a href="#7ã€æ€ä¹ˆæ ·åšæ•°æ®å¤åˆ¶ï¼š" class="headerlink" title="7ã€æ€ä¹ˆæ ·åšæ•°æ®å¤åˆ¶ï¼š"></a>7ã€æ€ä¹ˆæ ·åšæ•°æ®å¤åˆ¶ï¼š</h3><p>ä¸ºäº†æ»¡è¶³ç³»ç»Ÿçš„é«˜å¯ç”¨è¦æ±‚ï¼Œéœ€è¦å¯¹æ•°æ®åšå†—ä½™å¤„ç†ï¼Œç›®å‰çš„æ–¹æ¡ˆä¸»è¦ä¸ºï¼šä¸­å¿ƒåŒ–æ–¹æ¡ˆï¼ˆä¸»ä»å¤åˆ¶ã€ä¸€è‡´æ€§åè®®æ¯”å¦‚ <code>Raft</code> å’Œ <code>Paxos</code> ç­‰ï¼‰å’Œ å»ä¸­å¿ƒåŒ–çš„æ–¹æ¡ˆï¼ˆ<code>Quorum</code> å’Œ <code>Vector Clock</code>ï¼‰äº†è§£ä¸€ä¸‹å®ƒä»¬çš„ä¼˜ç¼ºç‚¹å’Œå„è‡ªçš„åº”ç”¨åœºæ™¯ï¼Œä»¥åŠå¯¹ç³»ç»Ÿå¤–éƒ¨è¡¨ç°å‡ºæ¥çš„æ•°æ®ä¸€è‡´æ€§çº§åˆ«ï¼ˆçº¿æ€§ä¸€è‡´æ€§ã€é¡ºåºä¸€è‡´æ€§ã€æœ€ç»ˆä¸€è‡´æ€§ç­‰ï¼‰ï¼›</p><h3 id="8ã€æ€ä¹ˆæ ·åšåˆ†å¸ƒå¼äº‹åŠ¡ï¼š"><a href="#8ã€æ€ä¹ˆæ ·åšåˆ†å¸ƒå¼äº‹åŠ¡ï¼š" class="headerlink" title="8ã€æ€ä¹ˆæ ·åšåˆ†å¸ƒå¼äº‹åŠ¡ï¼š"></a>8ã€æ€ä¹ˆæ ·åšåˆ†å¸ƒå¼äº‹åŠ¡ï¼š</h3><p>å¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿæ¥è¯´ï¼Œè¦å®ç°äº‹åŠ¡ï¼Œé¦–å…ˆéœ€è¦ä¸€ä¸ªå¯¹å¹¶å‘äº‹åŠ¡è¿›è¡Œæ’åºçš„èƒ½åŠ›ï¼Œè¿™æ ·åœ¨äº‹åŠ¡å†²çªçš„æ—¶å€™ï¼Œç¡®è®¤å“ªä¸ªäº‹åŠ¡æä¾›æˆåŠŸï¼Œå“ªä¸ªäº‹åŠ¡æäº¤å¤±è´¥ã€‚</p><p>å¯¹äºå•æœºç³»ç»Ÿæ¥è¯´è¿™ä¸ªå®Œå…¨ä¸è¯´é—®é¢˜ï¼Œç®€å•çš„é€šè¿‡æ—¶é—´æˆ³åŠ åºå·çš„æ–¹å¼å°±å¯ä»¥å®ç°ï¼Œä½†æ˜¯å¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿæ¥è¯´ï¼Œç³»ç»Ÿä¸­æœºå™¨çš„æ—¶é—´ä¸èƒ½å®Œå…¨åŒæ­¥ï¼Œå¹¶ä¸”å•å°æœºå™¨åºå·ä¹Ÿæ²¡ç”¨å…¨å±€æ„ä¹‰ï¼ŒæŒ‰ä¸Šé¢çš„æ–¹å¼è¯´ä¸è¡Œçš„ã€‚</p><p>ä¸è¿‡æ•´ä¸ªç³»ç»Ÿé€‰ä¸€å°æœºå™¨æŒ‰å•æœºçš„æ¨¡å¼ç”Ÿäº§äº‹åŠ¡IDæ˜¯å¯ä»¥çš„ï¼ŒåŒåŸå¤šä¸­å¿ƒå’ŒçŸ­è·ç¦»çš„å¼‚åœ°å¤šä¸­å¿ƒéƒ½æ²¡æœ‰é—®é¢˜ï¼Œä¸è¿‡æƒ³åšæˆå…¨çƒåˆ†å¸ƒå¼ç³»ç»Ÿçš„è¯ï¼Œé‚£ä¹ˆæ¯ä¸€æ¬¡äº‹åŠ¡éƒ½è¦å»ä¸€ä¸ªèŠ‚ç‚¹å»è·å–äº‹åŠ¡IDçš„æˆæœ¬å¤ªé«˜ï¼ˆæ¯”å¦‚ä¸­å›½æ­å·åˆ°ç¾å›½ä¸œéƒ¨çš„RTTä¸º200+msï¼‰ï¼ŒGoogle çš„ Spanner æ˜¯é€šè¿‡ GPS å’Œ åŸå­é’Ÿå®ç° <code>TrueTime</code> API æ¥è§£å†³è¿™ä¸ªé—®é¢˜ä»è€Œå®ç°å…¨çƒåˆ†å¸ƒå¼æ•°æ®åº“çš„ã€‚</p><p>æœ‰äº†äº‹åŠ¡IDåï¼Œé€šè¿‡ <code>2PC</code> æˆ–è€… <code>3PC</code> åè®®æ¥å®ç°åˆ†å¸ƒå¼äº‹åŠ¡çš„åŸå­æ€§ï¼Œå…¶ä»–éƒ¨åˆ†å’Œå•æœºäº‹åŠ¡å·®åˆ«ä¸å¤§ï¼Œå°±ä¸å†ç»†è¯´æ¥ã€‚</p><p>åˆ°è¿™é‡Œï¼Œå¯¹åˆ†å¸ƒå¼ç³»ç»Ÿè„‰ç»œä¸Šæœ‰äº†åŸºæœ¬çš„æ¦‚å¿µï¼Œæ¥ä¸‹æ¥å¼€å§‹è¿›å…¥ç»†èŠ‚å­¦ä¹ é˜¶æ®µï¼Œè¿™ä¹Ÿæ˜¯éå¸¸å¹¸è‹¦çš„é˜¶æ®µï¼Œå¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿçš„ç†è§£æ·±å…¥ä¸å¦ï¼Œå¯¹ç»†èŠ‚çš„æ·±å…¥åº¦æ˜¯å¾ˆé‡è¦çš„è¯„ä»·æŒ‡æ ‡ï¼Œæ¯•ç«Ÿé­”é¬¼åœ¨ç»†èŠ‚ã€‚è¿™é‡Œå¯ä»¥å¾€ä¸¤ä¸ªæ–¹é¢è¿›è¡Œç³»ç»Ÿçš„å­¦ä¹ ï¼š</p><ol><li><p> ä»å®è·µå‡ºå‘ï¼Œç ”ç©¶ç›®å‰æ¯”è¾ƒå¸¸ç”¨çš„åˆ†å¸ƒå¼ç³»ç»Ÿçš„è®¾è®¡ï¼ŒHDFS æˆ–è€… GFSï¼ˆåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼‰ã€Kafka å’Œ Pulsarï¼ˆåˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—ï¼‰ï¼ŒRedis Cluster å’Œ Codisï¼ˆåˆ†å¸ƒå¼ç¼“å­˜ï¼‰ï¼ŒMySQL çš„åˆ†åº“åˆ†è¡¨ï¼ˆä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“çš„åˆ†å¸ƒå¼æ–¹æ¡ˆï¼‰ï¼ŒMongoDB çš„ Replica Set å’Œ Sharingæœºåˆ¶é›†ï¼ˆNoSQLæ•°æ®åº“ï¼‰ï¼ŒTiDBï¼ˆNewSQLï¼‰ï¼Œä»¥åŠä¸€äº›å¾®æœåŠ¡æ¡†æ¶ ç­‰ï¼›</p></li><li><p> ä»ç†è®ºå‡ºå‘ï¼Œç ”ç©¶åˆ†å¸ƒå¼ç›¸å…³çš„è®ºæ–‡ï¼Œè¿™é‡Œæ¨èä¸€æœ¬ä¹¦ã€Œ Designing Data-Intensive Applicationsã€ï¼ˆä¸­æ–‡ç‰ˆæœ¬ï¼šæ•°æ®å¯†é›†å‹åº”ç”¨ç³»ç»Ÿè®¾è®¡ï¼‰ï¼Œå…ˆæ•´ä½“çœ‹ä¹¦ï¼Œå¯¹æ¯”è¾ƒæ„Ÿå…´è¶£çš„ç« èŠ‚ï¼Œå†è¯»ä¸€è¯»è¯¥ç« èŠ‚ä¸­æ¶‰åŠåˆ°çš„ç›¸å…³å‚è€ƒæ–‡çŒ®ã€‚</p></li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;å­¦ä¹ ä¸€ä¸ªçŸ¥è¯†ä¹‹å‰ï¼Œæˆ‘è§‰å¾—æ¯”è¾ƒå¥½çš„æ–¹å¼æ˜¯å…ˆç†è§£å®ƒçš„æ¥é¾™å»è„‰ï¼šå³è¿™ä¸ªçŸ¥è¯†äº§ç”Ÿçš„è¿‡ç¨‹ï¼Œå®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œå®ƒæ˜¯æ€ä¹ˆæ ·è§£å†³çš„å¹¶ä¸”å®ƒå¸¦æ¥äº†å“ªäº›é—®é¢˜ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½æ¯”è¾ƒå¥½çš„æŠ“åˆ°å®ƒçš„è„‰ç»œå’Œå…³é”®ç‚¹ï¼Œä¸ä¼šä¸€å¼€å§‹å°±è¿·å¤±åœ¨ç»†èŠ‚ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦è§£å†³çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼š&lt;strong&gt;åˆ†å¸ƒå¼ç³»ç»Ÿè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="åˆ†å¸ƒå¼æ¶æ„" scheme="http://example.com/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/"/>
    
    
    <category term="åˆ†å¸ƒå¼æ¶æ„" scheme="http://example.com/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/"/>
    
    <category term="åˆ†å¸ƒå¼ç³»ç»Ÿ" scheme="http://example.com/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•æ„å»ºä¸€ä¸ªå®Œå–„çš„æ´»åŠ¨å¹³å°</title>
    <link href="http://example.com/2021/01/08/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/"/>
    <id>http://example.com/2021/01/08/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/%E6%96%87%E7%AB%A0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/</id>
    <published>2021-01-08T17:46:41.000Z</published>
    <updated>2021-01-23T09:15:30.419Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h3><blockquote><p>å³æ˜¯å°†é¡µé¢çš„æŸä¸€éƒ¨åˆ†ç‹¬ç«‹å‡ºæ¥ï¼Œå°†è¿™ä¸€éƒ¨åˆ†çš„ç”¨é»‘ç›’çš„å½¢å¼å…¨éƒ¨å°è£…åˆ°ä¸€ä¸ªç»„ä»¶å†…ï¼Œæš´éœ²å‡ºä¸€äº›å±æ€§ä¾›å¤–éƒ¨ç»„ä»¶ä¼ å…¥å€¼</p></blockquote><a id="more"></a><h3 id="ç™½è¯è§£é‡Š"><a href="#ç™½è¯è§£é‡Š" class="headerlink" title="ç™½è¯è§£é‡Š"></a>ç™½è¯è§£é‡Š</h3><blockquote><p>æ‰§è¡Œä¸€æ®µâ€˜ç»„ä»¶è„šæœ¬â€™åï¼Œå¯ä»¥å†™â€œéæ³•â€HTMLæ ‡ç­¾ï¼ˆæŒ‡ä»£ç»„ä»¶å®ä¾‹ï¼‰ï¼Œå¹¶åœ¨æ ‡ç­¾å†…ç»‘å®šæ•°æ®ï¼Œè¯¥æ ‡ç­¾ï¼ˆç»„ä»¶ï¼‰ä¼šæ ¹æ®è‡ªèº«é€»è¾‘ï¼Œæ¸²æŸ“å‡ºç›¸å…³è§†å›¾ã€‚</p></blockquote><h3 id="å¦‚ä¸‹å›¾"><a href="#å¦‚ä¸‹å›¾" class="headerlink" title="å¦‚ä¸‹å›¾"></a>å¦‚ä¸‹å›¾</h3><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-01.png"></p><br><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><h3 id="ä¸€æ®µä¸å ªå›é¦–çš„ç»å†ğŸ˜­"><a href="#ä¸€æ®µä¸å ªå›é¦–çš„ç»å†ğŸ˜­" class="headerlink" title="ä¸€æ®µä¸å ªå›é¦–çš„ç»å†ğŸ˜­"></a>ä¸€æ®µä¸å ªå›é¦–çš„ç»å†ğŸ˜­</h3><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-02.png" alt="ä¸å ªå›é¦–"></p><br><h3 id="éœ€æ±‚ä¸Šçº¿æµç¨‹å›¾"><a href="#éœ€æ±‚ä¸Šçº¿æµç¨‹å›¾" class="headerlink" title="éœ€æ±‚ä¸Šçº¿æµç¨‹å›¾"></a>éœ€æ±‚ä¸Šçº¿æµç¨‹å›¾</h3><p><strong>ç‰¹å¾ï¼š</strong></p><ol><li> å‚ä¸äººå‘˜å¤šã€‚</li><li> ä¸Šçº¿å‘¨æœŸé•¿ã€‚</li></ol><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-03.png" alt="img"></p><br><h3 id="å¯è§†åŒ–å¹³å°è®¾æƒ³"><a href="#å¯è§†åŒ–å¹³å°è®¾æƒ³" class="headerlink" title="å¯è§†åŒ–å¹³å°è®¾æƒ³"></a>å¯è§†åŒ–å¹³å°è®¾æƒ³</h3><p><strong>ç‰¹å¾ï¼š</strong></p><ol><li> è®¾è®¡ã€å¼€å‘åä½œï¼Œæä¾›é€šç”¨ã€è§„èŒƒUIç»„ä»¶ã€‚</li><li> ç”¨æˆ·åˆ›å»ºæ´»åŠ¨ï¼Œé€‰æ‹©éœ€è¦çš„ç»„ä»¶ï¼Œç¼–è¾‘ç»„ä»¶æ•°æ®ã€‚</li><li> ä¿å­˜ï¼Œé¢„è§ˆï¼Œå‘å¸ƒï¼Œè®¿é—®ã€‚</li></ol><br><p><strong>å¦‚ä¸‹å›¾ğŸ‘‡</strong><br><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-04.png" alt="img"></p><br><h3 id="ä¸Šçº¿æµç¨‹å›¾è®¾æƒ³"><a href="#ä¸Šçº¿æµç¨‹å›¾è®¾æƒ³" class="headerlink" title="ä¸Šçº¿æµç¨‹å›¾è®¾æƒ³"></a>ä¸Šçº¿æµç¨‹å›¾è®¾æƒ³</h3><p><strong>ç‰¹å¾ï¼š</strong></p><ol><li> äººå‘˜å°‘ï¼šä»…è¿è¥1äººã€‚</li><li> ä¸Šçº¿å¿«ï¼šå°æ—¶çº§å‘¨æœŸã€‚</li></ol><br><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-05.png" alt="img"></p><br><h3 id="å¹³å°å¯åŠ¨å‰æ€è€ƒğŸ¤”"><a href="#å¹³å°å¯åŠ¨å‰æ€è€ƒğŸ¤”" class="headerlink" title="å¹³å°å¯åŠ¨å‰æ€è€ƒğŸ¤”"></a>å¹³å°å¯åŠ¨å‰æ€è€ƒğŸ¤”</h3><p><code>ç»„ä»¶å¼€å‘</code>ï¼š<br>å¹³å°çš„ç»„ä»¶æ•°é‡åº”è¯¥æ— é™åˆ¶ï¼Œç»„ä»¶ä¹‹é—´ç‹¬ç«‹ï¼Œç»„ä»¶ä¸å¹³å°è§£è€¦ï¼Œåšåˆ°åŠ¨æ€åŠ è½½ã€ç¼–è¾‘ç»„ä»¶ã€‚</p><p><code>é…ç½®å¹³å°</code>ï¼š<br>å¯¹å¤–çš„æ ¸å¿ƒäº¤äº’ï¼Œé…ç½®å¹³å°è´Ÿè´£å¯è§†åŒ–åˆ›å»ºé¡µé¢ï¼Œé€‰æ‹©ç»„ä»¶ï¼Œç¼–è¾‘æ•°æ®ã€‚</p><p><code>é¡µé¢æ¸²æŸ“</code>ï¼š<br>å¹³å°çš„æœ€ç»ˆäº§ç‰©ï¼Œä¿å­˜æ´»åŠ¨é…ç½®åï¼Œæ¸²æŸ“é¡µåº”è¯¥ä»…åŠ è½½æœ¬æ´»åŠ¨æ¶‰åŠçš„ç»„ä»¶ã€‚</p><p><code>æ€»ç»“</code>ï¼š<br>ç»„ä»¶å¼€å‘æ¨¡å—ï¼šè´Ÿè´£äº§å‡ºé¡µé¢çš„åŸºæœ¬å•å…ƒâ€”â€”ç»„ä»¶ã€‚<br>é…ç½®å¹³å°æ¨¡å—ï¼šè´Ÿè´£å¯è§†åŒ–åˆ›å»ºï¼Œç¼–è¾‘æ´»åŠ¨é¡µã€‚<br>é¡µé¢æ¸²æŸ“æ¨¡å—ï¼šè´Ÿè´£å‘ˆç°æ´»åŠ¨è§†å›¾ã€‚</p><br><h1 id="å¹³å°å®ç°"><a href="#å¹³å°å®ç°" class="headerlink" title="å¹³å°å®ç°"></a>å¹³å°å®ç°</h1><h3 id="ç»„ä»¶å¼€å‘æ¶æ„å›¾"><a href="#ç»„ä»¶å¼€å‘æ¶æ„å›¾" class="headerlink" title="ç»„ä»¶å¼€å‘æ¶æ„å›¾"></a>ç»„ä»¶å¼€å‘æ¶æ„å›¾</h3><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-06.png" alt="img"></p><br><h3 id="ç»„ä»¶å¼€å‘ç¯å¢ƒ"><a href="#ç»„ä»¶å¼€å‘ç¯å¢ƒ" class="headerlink" title="ç»„ä»¶å¼€å‘ç¯å¢ƒ"></a>ç»„ä»¶å¼€å‘ç¯å¢ƒ</h3><p><strong>ç»„ä»¶å¼€å‘ï¼š</strong></p><ol><li> æä¾›é›†ä¸­å¼å¼€å‘ã€ç®¡ç†ç»„ä»¶çš„é¡¹ç›®ç¯å¢ƒã€‚</li><li> æ”¯æŒå‘½ä»¤å¼åˆ›å»ºã€è°ƒè¯•ã€ç¼–è¯‘ã€æ ¡éªŒã€å‘å¸ƒç»„ä»¶ã€‚</li></ol><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-07.png" alt="img"></p><br><h3 id="å†æ¥è¯´ä¸‹ç»„ä»¶å½¢æ€"><a href="#å†æ¥è¯´ä¸‹ç»„ä»¶å½¢æ€" class="headerlink" title="å†æ¥è¯´ä¸‹ç»„ä»¶å½¢æ€"></a>å†æ¥è¯´ä¸‹ç»„ä»¶å½¢æ€</h3><ol><li> ä¸€æ®µå¯æ‰§è¡ŒJSè„šæœ¬â€”â€”ç»„ä»¶æœ¬èº«ã€‚</li><li> ä¸€ä»½XLSXæ–‡ä»¶â€”â€”å¤šåœ°åŒºè¯­è¨€é…ç½®ã€‚</li><li> ä¸€ä»½JSONæ–‡ä»¶â€”â€”å¯ç¼–è¾‘å±æ€§ç”³æ˜ã€‚</li></ol><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-08.png" alt="img"></p><br><h3 id="ç»„ä»¶å‘å¸ƒ"><a href="#ç»„ä»¶å‘å¸ƒ" class="headerlink" title="ç»„ä»¶å‘å¸ƒ"></a>ç»„ä»¶å‘å¸ƒ</h3><blockquote><p>å‘½ä»¤å¼å‘å¸ƒï¼Œç›¸å…³å­—æ®µè¢«å®Œå–„ï¼Œæ³¨å†Œå…¥åº“ã€‚</p></blockquote><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-09.png" alt="img"></p><br><h1 id="å¹³å°å®ç°-1"><a href="#å¹³å°å®ç°-1" class="headerlink" title="å¹³å°å®ç°"></a>å¹³å°å®ç°</h1><h3 id="é¡µé¢é…ç½®ä¸€è§ˆ"><a href="#é¡µé¢é…ç½®ä¸€è§ˆ" class="headerlink" title="é¡µé¢é…ç½®ä¸€è§ˆ"></a>é¡µé¢é…ç½®ä¸€è§ˆ</h3><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-10.png" alt="img"></p><br><h3 id="é¡µé¢é…ç½®-ç¼–è¾‘"><a href="#é¡µé¢é…ç½®-ç¼–è¾‘" class="headerlink" title="é¡µé¢é…ç½®-ç¼–è¾‘"></a>é¡µé¢é…ç½®-ç¼–è¾‘</h3><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-11.png" alt="img"></p><br><h3 id="é¡µé¢é…ç½®-å‘å¸ƒ"><a href="#é¡µé¢é…ç½®-å‘å¸ƒ" class="headerlink" title="é¡µé¢é…ç½®-å‘å¸ƒ"></a>é¡µé¢é…ç½®-å‘å¸ƒ</h3><p><strong>å‘å¸ƒæµç¨‹</strong></p><ol><li> å°†ç»„ä»¶ã€é…ç½®æ‰“åŒ…ã€‚</li><li> æ‰“åŒ…æ–‡ä»¶æ¨è‡³CDNã€‚</li></ol><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-12.png" alt="img"></p><br><h3 id="é¡µé¢æ¸²æŸ“-è§£æ"><a href="#é¡µé¢æ¸²æŸ“-è§£æ" class="headerlink" title="é¡µé¢æ¸²æŸ“-è§£æ"></a>é¡µé¢æ¸²æŸ“-è§£æ</h3><ol><li> åŠ è½½CDNé…ç½®æ–‡ä»¶ã€‚</li><li> éå†Renderç»„ä»¶å¹¶ä¼ å…¥è¯¥ç»„ä»¶é…ç½®</li></ol><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-13.png" alt="img"></p><br><h3 id="é¡µé¢æ¸²æŸ“-ç›‘æ§"><a href="#é¡µé¢æ¸²æŸ“-ç›‘æ§" class="headerlink" title="é¡µé¢æ¸²æŸ“-ç›‘æ§"></a>é¡µé¢æ¸²æŸ“-ç›‘æ§</h3><ol><li> å¼‚å¸¸ç›‘æ§+å‘Šè­¦ã€‚</li><li> é¡µé¢æ€§èƒ½ç›‘æ§+å‘Šè­¦ã€‚</li><li> ç”¨æˆ·è¡Œä¸ºç›‘æ§ã€‚</li></ol><p><img src="/My-Blogs/images/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%8C%E5%96%84%E7%9A%84%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0-14.png" alt="img"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li><code>ç»„ä»¶å¼€å‘</code>ï¼šå…³é”®æ•°æ®æœ‰JS, JSON, XLSXã€‚</li><li><code>é¡µé¢é…ç½®</code>ï¼šé€‰æ‹©ç»„ä»¶ï¼Œç¼–è¾‘ç»„ä»¶ï¼Œä¿å­˜é…ç½®ã€‚</li><li><code>é¡µé¢æ¸²æŸ“</code>ï¼šé€ä¸ªæ¸²æŸ“ç»„ä»¶å¹¶ä¼ å…¥é…ç½®ï¼Œé¡µé¢ç›‘æ§ã€‚</li></ul><br><h1 id="å®ç°ç»†èŠ‚æ€»ç»“"><a href="#å®ç°ç»†èŠ‚æ€»ç»“" class="headerlink" title="å®ç°ç»†èŠ‚æ€»ç»“"></a>å®ç°ç»†èŠ‚æ€»ç»“</h1><ul><li><code>ç»„ä»¶ç¼–è¾‘é¢æ¿</code>: æ ¹æ®ç»„ä»¶JSONé…ç½®ï¼Œå±•å¼€ç¼–è¾‘é¢æ¿ã€‚</li><li><code>ç»„ä»¶é€šä¿¡</code>: å°†å‘å°„ã€æ¥æ”¶çš„äº‹ä»¶ã€æ–¹æ³•åç”³æ˜ï¼Œæ·»åŠ äº‹ä»¶ç›‘å¬å¹¶è°ƒç”¨æš´éœ²æ–¹æ³•ã€‚</li><li><code>ç»„ä»¶åµŒå¥—</code>: é…ç½®ä¸­çˆ¶å­å…³ç³»é“¾ã€‚</li><li><code>å¤šè¯­è¨€</code>: æ±‡æ€»å„ç»„ä»¶å¤šè¯­è¨€æ–‡ä»¶ï¼Œé›†ä¸­å¤„ç†æˆåŒ…ï¼Œå†ä»¥Hash IDåˆ†å‘ã€‚</li><li><code>ä¸»é¢˜è‰²</code>: è§„èŒƒè§†è§‰UIçš„è‰²å€¼å ä½ï¼Œä¸€å¥—ä¸»é¢˜å³ä¸€å¥—è¯å…¸ã€‚</li></ul>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;ç»„ä»¶&quot;&gt;&lt;a href=&quot;#ç»„ä»¶&quot; class=&quot;headerlink&quot; title=&quot;ç»„ä»¶&quot;&gt;&lt;/a&gt;ç»„ä»¶&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;å³æ˜¯å°†é¡µé¢çš„æŸä¸€éƒ¨åˆ†ç‹¬ç«‹å‡ºæ¥ï¼Œå°†è¿™ä¸€éƒ¨åˆ†çš„ç”¨é»‘ç›’çš„å½¢å¼å…¨éƒ¨å°è£…åˆ°ä¸€ä¸ªç»„ä»¶å†…ï¼Œæš´éœ²å‡ºä¸€äº›å±æ€§ä¾›å¤–éƒ¨ç»„ä»¶ä¼ å…¥å€¼&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="åˆ†å¸ƒå¼æ¶æ„" scheme="http://example.com/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/"/>
    
    
    <category term="åˆ†å¸ƒå¼æ¶æ„" scheme="http://example.com/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/"/>
    
    <category term="æ´»åŠ¨å¹³å°" scheme="http://example.com/tags/%E6%B4%BB%E5%8A%A8%E5%B9%B3%E5%8F%B0/"/>
    
  </entry>
  
  <entry>
    <title>easywebpacké¡¹ç›®æ·»åŠ svgå¤„ç†</title>
    <link href="http://example.com/2021/01/08/webpack/easywebpack/easywebpack%E9%A1%B9%E7%9B%AE%E6%B7%BB%E5%8A%A0svg%E5%A4%84%E7%90%86/"/>
    <id>http://example.com/2021/01/08/webpack/easywebpack/easywebpack%E9%A1%B9%E7%9B%AE%E6%B7%BB%E5%8A%A0svg%E5%A4%84%E7%90%86/</id>
    <published>2021-01-08T17:43:20.000Z</published>
    <updated>2021-01-23T09:15:30.419Z</updated>
    
    <content type="html"><![CDATA[<p>æ¯”å¦‚æŸ¥çœ‹webpackæœ€ç»ˆçš„loaderï¼š <code>easywebpack print test -n module.rules</code></p><a id="more"></a><p>easywebpacké…ç½®svg-sprite-loaderçš„é…ç½®ï¼š</p><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><blockquote><p>å»é™¤é»˜è®¤svgå¤„ç†ï¼Œå¹¶æ·»åŠ svg-sprite-loaderé…ç½®</p></blockquote><pre><code class="JS">loaders: {  urlimage: {    test: /\.(png|jpe?g|gif)(\?.*)?$/, // é»˜è®¤çš„url-loaderåœ¨å°†svgä¹Ÿå¤„ç†äº†ï¼Œéœ€è¦å»æ‰  },  svg: {    test: /\.svg$/,    loader: 'svg-sprite-loader',    options: {      symbolId: 'icon-[name]',    },    include: resolve('app/web/asset/svg'),  },}</code></pre><p>ç½‘ä¸Šå…³äº<a href="https://juejin.cn/post/6854573215646875655">svg-sprite-loader</a>çš„ä»‹ç»</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æ¯”å¦‚æŸ¥çœ‹webpackæœ€ç»ˆçš„loaderï¼š &lt;code&gt;easywebpack print test -n module.rules&lt;/code&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="easywebpack" scheme="http://example.com/categories/easywebpack/"/>
    
    
    <category term="svg" scheme="http://example.com/tags/svg/"/>
    
    <category term="webpack" scheme="http://example.com/tags/webpack/"/>
    
    <category term="åŸºç¡€æ„å»º" scheme="http://example.com/tags/%E5%9F%BA%E7%A1%80%E6%9E%84%E5%BB%BA/"/>
    
  </entry>
  
  <entry>
    <title>æµ…è°ˆVue3æ–°ç‰¹æ€§</title>
    <link href="http://example.com/2021/01/08/vue/vue3/%E6%B5%85%E8%B0%88Vue3%E6%96%B0%E7%89%B9%E6%80%A7/"/>
    <id>http://example.com/2021/01/08/vue/vue3/%E6%B5%85%E8%B0%88Vue3%E6%96%B0%E7%89%B9%E6%80%A7/</id>
    <published>2021-01-08T17:42:31.000Z</published>
    <updated>2021-01-23T09:15:30.418Z</updated>
    
    <content type="html"><![CDATA[<p>Vue3çš„<a href="https://github.com/vuejs/vue-next">releaseç‰ˆæœ¬</a>ç»ˆäºå‘å¸ƒäº†ï¼Œæ–°çš„Vue3åœ¨è¯­æ³•ä»¥åŠåº•å±‚éƒ½è¿›è¡Œäº†å…¨æ–°çš„é‡æ„ï¼Œå¸¦æ¥äº†æ›´å¿«çš„è¿è¡Œé€Ÿåº¦ï¼Œæ›´å°çš„æ„å»ºåŒ…ï¼Œæ›´å‹å¥½çš„ç¼–ç¨‹è§„èŒƒã€‚</p><a id="more"></a><h2 id="æ›´å¿«"><a href="#æ›´å¿«" class="headerlink" title="æ›´å¿«"></a>æ›´å¿«</h2><p>ä¼ ç»Ÿçš„è™šæ‹Ÿdomç®—æ³•ï¼š</p><p>ç»„ä»¶patchçš„æ—¶å€™ï¼Œéœ€è¦é‡æ–°åˆ›å»ºæ•´ä¸ªvdomæ ‘ï¼Œç„¶åéå†æ•´æ£µæ ‘è¿›è¡Œdiffï¼Œupdateâ€¦</p><p>æ›´å¿«çš„è™šæ‹Ÿdomç®—æ³•ï¼Œæºè‡ªç¼–è¯‘æ¨¡æ¿æ—¶ç»™äºˆæ›´å¤šçš„è¿è¡Œæ—¶æç¤ºï¼š</p><ol><li> ç¼–è¯‘æ¨¡æ¿æ—¶å¯¹åŠ¨æ€å†…å®¹è¿›è¡Œpatchæ ‡è®°ï¼Œå‘Šè¯‰patchç®—æ³•åªå…³æ³¨è¢«æ ‡è®°çš„åŠ¨æ€éƒ¨åˆ†</li></ol><p><img src="/My-Blogs/images/%E6%B5%85%E8%B0%88Vue3%E6%96%B0%E7%89%B9%E6%80%A7-01.png"></p><ol><li> å¯¹é™æ€å†…å®¹è¿›è¡Œé™æ€æå‡ï¼ˆå˜é‡æå‡ï¼‰ï¼Œåªåœ¨é¡µé¢åˆå§‹åŒ–æ—¶åˆ›å»ºå¹¶æ¸²æŸ“ä¸€æ¬¡ï¼Œå…¶ä½™æ—¶å€™ä¸å†æ¸²æŸ“</li></ol><p><img src="/My-Blogs/images/%E6%B5%85%E8%B0%88Vue3%E6%96%B0%E7%89%B9%E6%80%A7-02.png"></p><ol><li> å¯¹äº‹ä»¶ç›‘å¬å‡½æ•°è¿›è¡Œç¼“å­˜ï¼Œé˜²æ­¢å†…è”ç›‘å¬å‡½æ•°å¸¦æ¥çš„å‰¯ä½œç”¨</li></ol><p>å¼€å¯ç¼“å­˜å‰ï¼š</p><p><img src="/My-Blogs/images/%E6%B5%85%E8%B0%88Vue3%E6%96%B0%E7%89%B9%E6%80%A7-03.png"></p><p>å¼€å¯ç¼“å­˜åï¼š</p><p><img src="/My-Blogs/images/%E6%B5%85%E8%B0%88Vue3%E6%96%B0%E7%89%B9%E6%80%A7-04.png"></p><p>â€¦â€¦</p><p>ä»åœ¨çº¿æ¨¡æ¿ç¼–è¯‘å™¨ä¸­ç¼–è¾‘å¹¶æŸ¥çœ‹æ–°å˜åŒ– =&gt;<a href="https://vue-next-template-explorer.netlify.app/">æ¨¡æ¿ç¼–è¯‘å™¨</a></p><h2 id="æ›´å°"><a href="#æ›´å°" class="headerlink" title="æ›´å°"></a>æ›´å°</h2><h3 id="å…¨å±€APIçš„ä½¿ç”¨"><a href="#å…¨å±€APIçš„ä½¿ç”¨" class="headerlink" title="å…¨å±€APIçš„ä½¿ç”¨"></a>å…¨å±€APIçš„ä½¿ç”¨</h3><p>å…¨å±€ API ç°åœ¨åªèƒ½ä½œä¸º ES æ¨¡å—æ„å»ºçš„å‘½åå¯¼å‡ºè¿›è¡Œè®¿é—®ã€‚</p><h4 id="Vue2çš„ä½¿ç”¨æ–¹å¼"><a href="#Vue2çš„ä½¿ç”¨æ–¹å¼" class="headerlink" title="Vue2çš„ä½¿ç”¨æ–¹å¼"></a>Vue2çš„ä½¿ç”¨æ–¹å¼</h4><p>Vue.nextTickï¼ˆthis.$nextTickï¼‰ã€Vue.setã€Vue.delete â€¦</p><h4 id="Vue3çš„ä½¿ç”¨æ–¹å¼"><a href="#Vue3çš„ä½¿ç”¨æ–¹å¼" class="headerlink" title="Vue3çš„ä½¿ç”¨æ–¹å¼"></a>Vue3çš„ä½¿ç”¨æ–¹å¼</h4><p>import { nextTick, set, delete, â€¦ } from â€˜vueâ€™; </p><p>nextTick(() =&gt; {// dosomething});<br>â€¦â€¦</p><h3 id="å†…éƒ¨ç»„ä»¶ä¸helperçš„ä½¿ç”¨"><a href="#å†…éƒ¨ç»„ä»¶ä¸helperçš„ä½¿ç”¨" class="headerlink" title="å†…éƒ¨ç»„ä»¶ä¸helperçš„ä½¿ç”¨"></a>å†…éƒ¨ç»„ä»¶ä¸helperçš„ä½¿ç”¨</h3><p>å½“åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨åˆ°transtionç»„ä»¶ã€keepAliveç»„ä»¶ã€ â€¦</p><p>ç»complierç¼–è¯‘åï¼Œç”Ÿæˆ</p><p>import { transtion, keepAlive, â€¦ } from â€˜vueâ€™</p><p>å½“åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨åˆ°v-showã€v-modelâ€¦</p><p>complierç¼–è¯‘åï¼Œç”Ÿæˆ</p><p>import { vShow, vModel â€¦ } from â€˜vueâ€™</p><p>æ„å‘³ç€åªæœ‰åœ¨åº”ç”¨ç¨‹åºå®é™…ä½¿ç”¨äº†æŸä¸ªAPIæˆ–è€…ç»„ä»¶çš„æ—¶å€™æ‰ä¼šå¯¼å…¥å®ƒã€‚æ²¡æœ‰ä½¿ç”¨åˆ°çš„åŠŸèƒ½ä»£ç å°†ä¸ä¼šå‡ºç°åœ¨æœ€ç»ˆçš„æ„å»ºåŒ…ä¸­ã€‚æ¡†æ¶ä½“ç§¯è¿›ä¸€æ­¥ç¼©å°ã€‚</p><h2 id="æ›´å‹å¥½ï¼Ÿ"><a href="#æ›´å‹å¥½ï¼Ÿ" class="headerlink" title="æ›´å‹å¥½ï¼Ÿ"></a>æ›´å‹å¥½ï¼Ÿ</h2><h4 id="VUE2ç»„ä»¶ç°å­˜çš„ç¼ºé™·"><a href="#VUE2ç»„ä»¶ç°å­˜çš„ç¼ºé™·" class="headerlink" title="VUE2ç»„ä»¶ç°å­˜çš„ç¼ºé™·"></a>VUE2ç»„ä»¶ç°å­˜çš„ç¼ºé™·</h4><ol><li><p> ç»„ä»¶è¶Šæ¥è¶Šå¤§ï¼Œå¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§è¶Šæ¥è¶Šå·®ã€‚æ ¹æœ¬åŸå› åœ¨äºVueä½¿ç”¨çš„option APIï¼šå¿…é¡»æŒ‰é…ç½®(options)æ¥ç»„ç»‡ä»£ç ï¼Œä½ éœ€è¦æŠŠä¸€ä¸ªåŠŸèƒ½çš„å®ç°åˆ†å¸ƒåœ¨å„ä¸ªé…ç½®é‡Œï¼šdataï¼Œcomputedï¼Œwatcherï¼Œmethodsï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹æŒ‰åŠŸèƒ½æ¥ç»„ç»‡ä»£ç æ›´åˆç†ã€‚å¦‚æœè¦åœ¨ä¸€ä¸ªå¾ˆå¤§çš„ç»„ä»¶ä¸­ä¿®æ”¹ä¸€ä¸ªåŠŸèƒ½ï¼Œå°±è¦è·³åˆ°å„ä¸ªå±æ€§æ‰¾ï¼Œå¦‚æœç»„ä»¶é‡Œé¢è¿˜ç”¨äº†mixinsï¼Œè¿˜å¾—è·³æ–‡ä»¶çœ‹</p></li><li><p>mixinsæ— æ³•ç‰¹åˆ«å¥½çš„åœ¨å¤šä¸ªç»„ä»¶ä¸­å¤ç”¨åŒä¸€æ®µä»£ç   </p><p> mixinsæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ<br> å¯è¯»æ€§å¤ªå·®ï¼Œå¾—è·³åˆ°mixinsæ‰€åœ¨çš„æ–‡ä»¶ä¸­æ‰èƒ½çŸ¥é“å®ƒåˆ°åº•æœ‰ä»€ä¹ˆ<br> ä¸åŒçš„mixinså®¹æ˜“å†²çª<br> å¤ç”¨å…¶ä»–åŒä¼´çš„mixinsçš„æ—¶å€™ï¼Œæœ‰äº›ä»£ç ä¸åˆè‡ªå·±çš„é¢„æœŸï¼Œä½†æ˜¯ä¸èƒ½éšæ„æ›´æ”¹</p></li><li><p> å¯¹typeScriptçš„æ”¯æŒæœ‰é™</p></li></ol><h4 id="ä½¿ç”¨componsition-API"><a href="#ä½¿ç”¨componsition-API" class="headerlink" title="ä½¿ç”¨componsition API"></a>ä½¿ç”¨componsition API</h4><p>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨componsition APIï¼Ÿ</p><p><img src="/My-Blogs/images/%E6%B5%85%E8%B0%88Vue3%E6%96%B0%E7%89%B9%E6%80%A7-05.png"></p><ol><li> å¦‚æœä½ æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ç»„ä»¶ï¼Œæƒ³è¦æŒ‰åŠŸèƒ½æ¥èšåˆä»£ç ã€‚</li><li> å¦‚æœä½ æƒ³è¦å¤ç”¨ç»„ä»¶çš„ä¸€éƒ¨åˆ†ä»£ç ã€‚</li><li> å¦‚æœä½ æƒ³è¦æ›´å¥½åœ°æ”¯æŒtypeScript</li></ol><pre><code class="JS">import useFeature1 from '../use/useFeature1';import useFeature2 from '../use/useFeature2';export default {  setup() {    const {      data1,      data2,      method1,      computed1,      ...    } = useFeature1();    const {      data3,      data4,      method2,      computed2,      ...    } = useFeature2();    // do something    return {      data1,      data2,      method1,      ...    };  }}</code></pre><p>ä¸Šé¢è¿™æ®µä»£ç æ˜¯compsition APIçš„ä¸€ç§ç¤ºä¾‹ï¼Œå®ƒåšåˆ°äº†ï¼šæŒ‰åŠŸèƒ½ç»„ç»‡ä»£ç ï¼Œæƒ³è¦ä¿®æ”¹æŸä¸ªä¸šåŠ¡é€»è¾‘æ—¶ï¼Œä¸éœ€è¦æ»¡å¤§è¡—æ‰¾æ•£å¸ƒå„åœ°çš„æ•°æ®å’Œæ–¹æ³•äº†ï¼Œå“åº”å¼å±æ€§ä¸ç»„ä»¶è§£è€¦ï¼Œè‡ªç”±æ§åˆ¶éœ€è¦æˆä¸ºå“åº”å¼çš„ä»¥åŠéœ€è¦æš´éœ²ç»™æ¨¡æ¿çš„å±æ€§ã€‚</p><p>setupå†…çš„ä»£ç åªä¾èµ–äºä¼ å…¥çš„å‚æ•°å’Œå…¨å±€å¼•å…¥çš„Vue APIï¼Œè€Œä¸æ˜¯ç‰¹æ®Šä¿®æ”¹è¿‡çš„ <code>this</code> ã€‚æ‰€ä»¥åªéœ€è¦å¯¼å‡ºä½ æƒ³è¦å¤ç”¨çš„åŠŸèƒ½å‡½æ•°ã€‚ç”šè‡³å¯ä»¥å¯¼å‡ºæ•´ä¸ª <code>setup</code> å‡½æ•°å»å®ç°â€œç±»ä¼¼â€ç»§æ‰¿çš„æ•ˆæœã€‚</p><h4 id="ä¸¤ç§åˆ›å»ºå“åº”å¼å±æ€§çš„API"><a href="#ä¸¤ç§åˆ›å»ºå“åº”å¼å±æ€§çš„API" class="headerlink" title="ä¸¤ç§åˆ›å»ºå“åº”å¼å±æ€§çš„API"></a>ä¸¤ç§åˆ›å»ºå“åº”å¼å±æ€§çš„API</h4><h5 id="ref-ä¸ºä¼ å…¥çš„å€¼å°è£…ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œé€šè¿‡valueå±æ€§è®¿é—®ä¸è®¾ç½®å¯¹è±¡çš„å€¼"><a href="#ref-ä¸ºä¼ å…¥çš„å€¼å°è£…ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œé€šè¿‡valueå±æ€§è®¿é—®ä¸è®¾ç½®å¯¹è±¡çš„å€¼" class="headerlink" title="ref: ä¸ºä¼ å…¥çš„å€¼å°è£…ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œé€šè¿‡valueå±æ€§è®¿é—®ä¸è®¾ç½®å¯¹è±¡çš„å€¼"></a>ref: ä¸ºä¼ å…¥çš„å€¼å°è£…ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œé€šè¿‡valueå±æ€§è®¿é—®ä¸è®¾ç½®å¯¹è±¡çš„å€¼</h5><pre><code class="JS">setup() {  const capacity = ref(3);  const attending = ref(['tim', 'Bob', 'Joe']);  watch(capacity, () =&gt; {    console.log('capacity changed!');  });  watch(attending, () =&gt; {    console.log('attending changed!');  });  onMounted(() =&gt; {    capacity.value += 1; // capacity changed!    attending.value[0] = 'Jack'; // ?    // é€šè¿‡refå°è£…çš„å“åº”å¼å¯¹è±¡æ— æ³•è¿›è¡Œæ·±å±‚ç›‘å¬  });  return {    capacity  };}</code></pre><h5 id="reactive-è®©ä¼ å…¥çš„å¯¹è±¡æˆä¸ºå“åº”å¼å¯¹è±¡"><a href="#reactive-è®©ä¼ å…¥çš„å¯¹è±¡æˆä¸ºå“åº”å¼å¯¹è±¡" class="headerlink" title="reactive: è®©ä¼ å…¥çš„å¯¹è±¡æˆä¸ºå“åº”å¼å¯¹è±¡"></a>reactive: è®©ä¼ å…¥çš„å¯¹è±¡æˆä¸ºå“åº”å¼å¯¹è±¡</h5><pre><code class="JS">setup() {  const event = reactive({    capacity: 3,    attending: ['tim', 'Bob', 'Joe'],  });  watch(event, () =&gt; {    console.log('something changed!');  });  onMounted(() =&gt; {    event.attending[0] = 'Jack'; // something changed!  });  return {    event  };}</code></pre><p>Vue3çš„å“åº”å¼ç›‘å¬çš„å®ç°æ–¹å¼ä¸Vue2æœ‰å¾ˆå¤§ä¸åŒï¼Œå¹¶æŒ£è„±äº†Vue2ä¸­æ— æ³•ç›‘å¬åŠ¨æ€å¢åŠ å¯¹è±¡å±æ€§ä¸æ•°ç»„å…ƒç´ ç›´æ¥èµ‹å€¼çš„æŸç¼šã€‚</p><p>ç‚¹è¿™é‡ŒæŸ¥çœ‹<a href="https://github.com/LaiTaoGDUT/learnVue3/blob/master/public/reactive.html">ç®€ç•¥ç‰ˆæœ¬çš„æ–°å“åº”å¼ç›‘å¬å®ç°</a></p><h4 id="å…¶ä»–API"><a href="#å…¶ä»–API" class="headerlink" title="å…¶ä»–API"></a>å…¶ä»–API</h4><h5 id="watchEffect"><a href="#watchEffect" class="headerlink" title="watchEffect"></a>watchEffect</h5><pre><code class="JS">setup() {  const capacity = ref(3);  const attending = ref(['tim', 'Bob', 'Joe']);  const stop = watchEffect(() =&gt; {    console.log(capacity.value + attending.value.length);  })  onMounted(() =&gt; {    capacity.value += 1; // 7  });  return {    capacity,    attending,    stop  };}stop(); // åœæ­¢ç›‘å¬</code></pre><p><a href="https://vue3js.cn/docs/zh/api/">æ›´å¤šAPIè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£</a></p><h4 id="compisition-APIçš„ä¸‹ä¸€æ­¥"><a href="#compisition-APIçš„ä¸‹ä¸€æ­¥" class="headerlink" title="compisition APIçš„ä¸‹ä¸€æ­¥"></a>compisition APIçš„ä¸‹ä¸€æ­¥</h4><h5 id="ç°å­˜çš„ç¼ºç‚¹"><a href="#ç°å­˜çš„ç¼ºç‚¹" class="headerlink" title="ç°å­˜çš„ç¼ºç‚¹"></a>ç°å­˜çš„ç¼ºç‚¹</h5><ol><li> refå’Œreactiveå¤ªåƒäº†ï¼Œåˆä¸Šæ‰‹æ—¶å¾ˆéš¾å†³å®šåˆ°åº•ç”¨å“ªä¸ªã€‚</li><li> æ²¡æœ‰äº†optionsçš„é™åˆ¶ï¼Œä¸€ä¸å°å¿ƒå°±å¯èƒ½ä¼šå†™å‡ºæ¯”ä½¿ç”¨option APIæ›´åŠ è‡ƒè‚¿éš¾è¯»çš„ä»£ç </li><li> ä½¿ç”¨Composition APIæ—¶ï¼Œéœ€è¦åŒºåˆ†å“ªäº›å€¼æˆ–è€…å¯¹è±¡æ˜¯å“åº”å¼çš„ï¼Œå“ªäº›ä¸æ˜¯ã€‚</li><li> é˜…è¯»æˆ–è€…ä¿®æ”¹refä¼šæœ‰ç‚¹éº»çƒ¦ï¼Œå› ä¸ºå¿…é¡»é€šè¿‡<code>.value</code>æ‰èƒ½å®ç°ã€‚</li><li> ä¸€æ—¦ç»„ä»¶éœ€è¦ä½¿ç”¨çš„æ•°æ®å¤šèµ·æ¥ï¼Œimportå’Œreturnè¯­å¥å°±ä¼šå¾ˆå†—é•¿ã€‚</li></ol><h5 id="ä¸‹ä¸€æ­¥"><a href="#ä¸‹ä¸€æ­¥" class="headerlink" title="ä¸‹ä¸€æ­¥"></a>ä¸‹ä¸€æ­¥</h5><p><a href="https://github.com/vuejs/rfcs/pull/222">New script setup and ref sugar</a></p><p>å‰é˜µå­ï¼ŒVue3.0æå‡ºäº†ä¸¤ä¸ªæ–°ææ¡ˆï¼Œåˆ†åˆ«ä¸ºscript-setupææ¡ˆä¸ref-sugerææ¡ˆ</p><p>å¯¹äºä»¥ä¸‹æºä»£ç ï¼š</p><pre><code class="HTML">&lt;script&gt;  import {    ref  } from 'vue'  export default {    setup() {      const count = ref(1)      const inc = () =&gt; {        count.value++      }      return {        count,        inc      }    }  }&lt;/script&gt;</code></pre><p><strong>ä½¿ç”¨script-setup ææ¡ˆï¼Œå°† options.setup æå–åˆ°ä»£ç é¡¶å±‚ï¼Œæ‰€æœ‰é¡¶å±‚å£°æ˜é»˜è®¤å¯¼å‡ºä¸ºæ¨¡æ¿ä½¿ç”¨</strong></p><pre><code class="HTML">&lt;script setup&gt;  import {    ref  } from 'vue'  const count = ref(0)  const inc = () =&gt; {    count.value++  }&lt;/script&gt;</code></pre><p><strong>ä½¿ç”¨ref-sugar ææ¡ˆï¼Œå°† ref.value çš„å†™æ³•ï¼Œåšè¿›ä¸€æ­¥ç®€åŒ–ï¼Œæ”¾å¼ƒ<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/label">æ ‡è®°è¯­å¥</a>çš„æ™®é€šè¯­æ³•ï¼Œå°†å…¶ä½œä¸ºrefå£°æ˜çš„è¯­æ³•ç³–ã€‚</strong></p><pre><code class="HTML">&lt;script setup&gt;  ref: count = 1  const inc = () =&gt; {    count++  }  // é€šè¿‡æ·»åŠ $å‰ç¼€æ¥è®¿é—®å“åº”å¼å¯¹è±¡  console.log($count.value)&lt;/script&gt;</code></pre><p>è¿™æ˜¯Vue3å¸¦æ¥çš„å°æ”¹è¿›è¿˜æ˜¯å¤§æŒ‘æˆ˜ ï¼Ÿ</p><h2 id="å…¶ä»–å˜åŒ–"><a href="#å…¶ä»–å˜åŒ–" class="headerlink" title="å…¶ä»–å˜åŒ–"></a>å…¶ä»–å˜åŒ–</h2><h4 id="ä¸å†æ”¯æŒkeyCodeä¿®é¥°"><a href="#ä¸å†æ”¯æŒkeyCodeä¿®é¥°" class="headerlink" title="ä¸å†æ”¯æŒkeyCodeä¿®é¥°"></a>ä¸å†æ”¯æŒkeyCodeä¿®é¥°</h4><pre><code class="HTML">&lt;input v-on:keyup.13="handleEnter"&gt;&lt;/input&gt;</code></pre><p>æ›¿æ¢ä¸º</p><pre><code class="HTML">&lt;input v-on:keyup:enter="handleEnter"&gt;&lt;/input&gt;</code></pre><h4 id="è¿‡æ¸¡ç±»åå˜æ›´"><a href="#è¿‡æ¸¡ç±»åå˜æ›´" class="headerlink" title="è¿‡æ¸¡ç±»åå˜æ›´"></a>è¿‡æ¸¡ç±»åå˜æ›´</h4><p>.v-enter =&gt; .v-enter-from</p><p>.v-leave =&gt; .v-leave-from</p><h4 id="v-modelå˜æ›´"><a href="#v-modelå˜æ›´" class="headerlink" title="v-modelå˜æ›´"></a>v-modelå˜æ›´</h4><p>å¯ä½¿ç”¨å¤šä¸ªv-model, ä¸å†éœ€è¦.syncä¿®é¥°ç¬¦æ¥è¿›è¡ŒåŒå‘ç»‘å®šäº†</p><pre><code class="HTML">&lt;ChildComponent v-model:title="pageTitle" /&gt;</code></pre><p>ç›¸å½“äº</p><pre><code class="HTML">&lt;ChildComponent :title="pageTitle" @update:title="pageTitle = $event" /&gt;</code></pre><h4 id="æ›´å¤š"><a href="#æ›´å¤š" class="headerlink" title="æ›´å¤š"></a>æ›´å¤š</h4><p>Vueè®¤ä¸º$ onï¼Œ$ off å’Œ $once å®ä¾‹æ–¹æ³•ä¸åº”è¯¥ç”±å®ƒæ¥æä¾›ï¼Œå› æ­¤Vue3å°†å®ƒä»¬ç§»é™¤äº†</p><p>è¿‡æ»¤å™¨filtersè¢«ç§»é™¤äº†ï¼Œéœ€è¦ä½¿ç”¨è®¡ç®—å±æ€§æˆ–æ–¹æ³•æ¥ä»£æ›¿</p><p>æ–°å¢Suspenceç»„ä»¶ =&gt; ç»„ä»¶loadingå®Œæˆå‰æ˜¾ç¤ºåå¤‡å†…å®¹</p><p>æ–°å¢teleportç»„ä»¶ï¼ˆportalï¼‰ =&gt; å…è®¸ä¼ é€ç»„ä»¶å†…å®¹åˆ°æ ¹èŠ‚ç‚¹ä»¥å¤–çš„ä»»ä½•åœ°æ–¹<br>â€¦</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Vue3çš„&lt;a href=&quot;https://github.com/vuejs/vue-next&quot;&gt;releaseç‰ˆæœ¬&lt;/a&gt;ç»ˆäºå‘å¸ƒäº†ï¼Œæ–°çš„Vue3åœ¨è¯­æ³•ä»¥åŠåº•å±‚éƒ½è¿›è¡Œäº†å…¨æ–°çš„é‡æ„ï¼Œå¸¦æ¥äº†æ›´å¿«çš„è¿è¡Œé€Ÿåº¦ï¼Œæ›´å°çš„æ„å»ºåŒ…ï¼Œæ›´å‹å¥½çš„ç¼–ç¨‹è§„èŒƒã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="vue3" scheme="http://example.com/categories/vue3/"/>
    
    
    <category term="vue3" scheme="http://example.com/tags/vue3/"/>
    
  </entry>
  
  <entry>
    <title>Redisç¼“å­˜çš„ä¸‰å¤§é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆ</title>
    <link href="http://example.com/2021/01/08/Redis/%E3%80%90Redis%E3%80%91%E7%BC%93%E5%AD%98%E7%9A%84%E4%B8%89%E5%A4%A7%E9%97%AE%E9%A2%98%E5%8F%8A%E5%85%B6%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
    <id>http://example.com/2021/01/08/Redis/%E3%80%90Redis%E3%80%91%E7%BC%93%E5%AD%98%E7%9A%84%E4%B8%89%E5%A4%A7%E9%97%AE%E9%A2%98%E5%8F%8A%E5%85%B6%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</id>
    <published>2021-01-08T17:40:53.000Z</published>
    <updated>2021-01-23T09:15:30.415Z</updated>
    
    <content type="html"><![CDATA[<p>Redisç»å¸¸ç”¨äºç³»ç»Ÿä¸­çš„ç¼“å­˜ï¼Œè¿™æ ·å¯ä»¥è§£å†³ç›®å‰IOè®¾å¤‡æ— æ³•æ»¡è¶³äº’è”ç½‘åº”ç”¨æµ·é‡çš„è¯»å†™è¯·æ±‚çš„é—®é¢˜ã€‚</p><a id="more"></a><h2 id="ä¸€ã€ç¼“å­˜ç©¿é€"><a href="#ä¸€ã€ç¼“å­˜ç©¿é€" class="headerlink" title="ä¸€ã€ç¼“å­˜ç©¿é€"></a>ä¸€ã€ç¼“å­˜ç©¿é€</h2><p>ç¼“å­˜ç©¿é€æ˜¯æŒ‡ç¼“å­˜å’Œæ•°æ®åº“ä¸­éƒ½æ²¡æœ‰çš„æ•°æ®ï¼Œè€Œç”¨æˆ·ä¸æ–­å‘èµ·è¯·æ±‚ï¼Œå¦‚å‘èµ·idä¸º-1çš„æ•°æ®æˆ–è€…ç‰¹åˆ«å¤§çš„ä¸å­˜åœ¨çš„æ•°æ®ã€‚æœ‰å¯èƒ½æ˜¯é»‘å®¢åˆ©ç”¨æ¼æ´æ”»å‡»ä»è€Œå»å‹å®åº”ç”¨çš„æ•°æ®åº“ã€‚</p><h3 id="1-å¸¸è§è§£å†³æ–¹æ¡ˆ"><a href="#1-å¸¸è§è§£å†³æ–¹æ¡ˆ" class="headerlink" title="1. å¸¸è§è§£å†³æ–¹æ¡ˆ"></a>1. å¸¸è§è§£å†³æ–¹æ¡ˆ</h3><p>å¯¹äºç¼“å­˜ç©¿é€é—®é¢˜ï¼Œå¸¸è§çš„è§£å†³æ–¹æ¡ˆæœ‰ä»¥ä¸‹ä¸‰ç§ï¼š</p><ul><li>éªŒè¯æ‹¦æˆªï¼šæ¥å£å±‚è¿›è¡Œæ ¡éªŒï¼Œå¦‚é‰´å®šç”¨æˆ·æƒé™ï¼Œå¯¹IDä¹‹ç±»çš„å­—æ®µåšåŸºç¡€çš„æ ¡éªŒï¼Œå¦‚id&lt;=0çš„å­—æ®µç›´æ¥æ‹¦æˆªï¼›</li><li>ç¼“å­˜ç©ºæ•°æ®ï¼šå½“æ•°æ®åº“æŸ¥è¯¢åˆ°çš„æ•°æ®ä¸ºç©ºæ—¶ï¼Œä¹Ÿå°†è¿™æ¡æ•°æ®è¿›è¡Œç¼“å­˜ï¼Œä½†ç¼“å­˜çš„æœ‰æ•ˆæ€§è®¾ç½®å¾—è¦è¾ƒçŸ­ï¼Œä»¥å…å½±å“æ­£å¸¸æ•°æ®çš„ç¼“å­˜ï¼›</li></ul><pre><code class="JAVA">public Student getStudentsByID(Long id) {    // ä»Redisä¸­è·å–å­¦ç”Ÿä¿¡æ¯    Student student = redisTemplate.opsForValue()        .get(String.valueOf(id));    if (student != null) {        return student;    }    // ä»æ•°æ®åº“æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯ï¼Œå¹¶å­˜å…¥Redis    student = studentDao.selectByStudentId(id);    if (student != null) {        redisTemplate.opsForValue()            .set(String.valueOf(id), student, 60, TimeUnit.MINUTES);    } else {        // å³ä½¿ä¸å­˜åœ¨ï¼Œä¹Ÿå°†å…¶å­˜å…¥ç¼“å­˜ä¸­        redisTemplate.opsForValue()            .set(String.valueOf(id), null, 60, TimeUnit.SECONDS);    }    return student;}</code></pre><ul><li>ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼šå¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ç§æ¯”è¾ƒç‹¬ç‰¹æ•°æ®ç»“æ„ï¼Œæœ‰ä¸€å®šçš„è¯¯å·®ã€‚å½“å®ƒæŒ‡å®šä¸€ä¸ªæ•°æ®å­˜åœ¨æ—¶ï¼Œå®ƒä¸ä¸€å®šå­˜åœ¨ï¼Œä½†æ˜¯å½“å®ƒæŒ‡å®šä¸€ä¸ªæ•°æ®ä¸å­˜åœ¨æ—¶ï¼Œé‚£ä¹ˆå®ƒä¸€å®šæ˜¯ä¸å­˜åœ¨çš„ã€‚</li></ul><h3 id="2-å¸ƒéš†è¿‡æ»¤å™¨"><a href="#2-å¸ƒéš†è¿‡æ»¤å™¨" class="headerlink" title="2. å¸ƒéš†è¿‡æ»¤å™¨"></a>2. å¸ƒéš†è¿‡æ»¤å™¨</h3><p>å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„æ•°æ®ç»“æ„ï¼Œæœ‰ç‚¹ç±»ä¼¼ä¸HashMapï¼Œåœ¨ä¸šåŠ¡ä¸­æˆ‘ä»¬å¯èƒ½ä¼šé€šè¿‡ä½¿ç”¨HashMapæ¥åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦å­˜åœ¨ï¼Œå®ƒå¯ä»¥åœ¨<code>O(1)</code>æ—¶é—´å¤æ‚åº¦å†…è¿”å›ç»“æœï¼Œæ•ˆç‡æé«˜ï¼Œä½†æ˜¯å—é™äºå­˜å‚¨å®¹é‡ï¼Œå¦‚æœå¯èƒ½éœ€è¦å»åˆ¤æ–­çš„å€¼è¶…è¿‡äº¿çº§åˆ«ï¼Œé‚£ä¹ˆHashMapæ‰€å çš„å†…å­˜å°±å¾ˆå¯è§‚äº†ã€‚<br>è€Œ<code>BloomFilter</code>è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ¡ˆå¾ˆç®€å•ã€‚é¦–å…ˆç”¨å¤šä¸ªbitä½å»ä»£æ›¿HashMapä¸­çš„æ•°ç»„ï¼Œè¿™æ ·çš„è¯å‚¨å­˜ç©ºé—´å°±ä¸‹æ¥äº†ï¼Œä¹‹åå°±æ˜¯å¯¹ Key è¿›è¡Œå¤šæ¬¡å“ˆå¸Œï¼Œå°† Key å“ˆå¸Œåçš„å€¼æ‰€å¯¹åº”çš„ bit ä½ç½®ä¸º1ã€‚<br>å½“åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨æ—¶ï¼Œå°±å»åˆ¤æ–­è¿™ä¸ªå€¼å“ˆå¸Œå‡ºæ¥çš„æ¯”ç‰¹ä½æ˜¯å¦éƒ½ä¸º1ï¼Œå¦‚æœéƒ½ä¸º1ï¼Œé‚£ä¹ˆå¯èƒ½å­˜åœ¨ï¼Œä¹Ÿå¯èƒ½ä¸å­˜åœ¨ï¼ˆå¦‚ä¸‹å›¾Fï¼‰ã€‚ä½†æ˜¯å¦‚æœæœ‰ä¸€ä¸ªbitä½ä¸ä¸º1ï¼Œé‚£ä¹ˆè¿™ä¸ªKeyå°±è‚¯å®šä¸å­˜åœ¨ã€‚</p><p><img src="/My-Blogs/images/%E3%80%90Redis%E3%80%91%E7%BC%93%E5%AD%98%E7%9A%84%E4%B8%89%E5%A4%A7%E9%97%AE%E9%A2%98%E5%8F%8A%E5%85%B6%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-01.png" alt="img"></p><br><p>æ³¨æ„ï¼š<code>BloomFilter</code>å¹¶ä¸æ”¯æŒåˆ é™¤æ“ä½œï¼Œåªæ”¯æŒæ·»åŠ æ“ä½œã€‚è¿™ä¸€ç‚¹å¾ˆå®¹æ˜“ç†è§£ï¼Œå› ä¸ºä½ å¦‚æœè¦åˆ é™¤æ•°æ®ï¼Œå°±å¾—å°†å¯¹åº”çš„bitä½ç½®ä¸º0ï¼Œä½†æ˜¯ä½ è¿™ä¸ªKeyå¯¹åº”çš„bitä½å¯èƒ½å…¶ä»–çš„Keyä¹Ÿå¯¹åº”ç€ã€‚</p><h3 id="3-ç¼“å­˜ç©ºæ•°æ®ä¸å¸ƒéš†è¿‡æ»¤å™¨çš„æ¯”è¾ƒ"><a href="#3-ç¼“å­˜ç©ºæ•°æ®ä¸å¸ƒéš†è¿‡æ»¤å™¨çš„æ¯”è¾ƒ" class="headerlink" title="3. ç¼“å­˜ç©ºæ•°æ®ä¸å¸ƒéš†è¿‡æ»¤å™¨çš„æ¯”è¾ƒ"></a>3. ç¼“å­˜ç©ºæ•°æ®ä¸å¸ƒéš†è¿‡æ»¤å™¨çš„æ¯”è¾ƒ</h3><p>ä¸Šé¢å¯¹è¿™ä¸¤ç§æ–¹æ¡ˆéƒ½è¿›è¡Œäº†ç®€å•çš„ä»‹ç»ï¼Œç¼“å­˜ç©ºæ•°æ®ä¸å¸ƒéš†è¿‡æ»¤å™¨éƒ½èƒ½æœ‰æ•ˆè§£å†³ç¼“å­˜ç©¿é€é—®é¢˜ï¼Œä½†ä½¿ç”¨åœºæ™¯æœ‰ç€äº›è®¸ä¸åŒï¼›</p><ul><li>å½“ä¸€äº›æ¶æ„æ”»å‡»æŸ¥è¯¢æŸ¥è¯¢çš„keyå„ä¸ç›¸åŒï¼Œè€Œä¸”æ•°é‡å·¨å¤šï¼Œæ­¤æ—¶ç¼“å­˜ç©ºæ•°æ®ä¸æ˜¯ä¸€ä¸ªå¥½çš„è§£å†³æ–¹æ¡ˆã€‚å› ä¸ºå®ƒéœ€è¦å­˜å‚¨æ‰€æœ‰çš„Keyï¼Œå†…å­˜ç©ºé—´å ç”¨é«˜ã€‚å¹¶ä¸”åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¾ˆå¤škeyå¯èƒ½åªç”¨ä¸€æ¬¡ï¼Œæ‰€ä»¥å­˜å‚¨ä¸‹æ¥æ²¡æœ‰æ„ä¹‰ã€‚æ‰€ä»¥å¯¹äºè¿™ç§æƒ…å†µè€Œè¨€ï¼Œä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼›</li><li>è€Œå¯¹ä¸ç©ºæ•°æ®çš„Keyæ•°é‡æœ‰é™ã€Keyé‡å¤è¯·æ±‚æ•ˆç‡è¾ƒé«˜çš„åœºæ™¯è€Œè¨€ï¼Œå¯ä»¥é€‰æ‹©ç¼“å­˜ç©ºæ•°æ®çš„æ–¹æ¡ˆã€‚</li></ul><h2 id="äºŒã€ç¼“å­˜å‡»ç©¿"><a href="#äºŒã€ç¼“å­˜å‡»ç©¿" class="headerlink" title="äºŒã€ç¼“å­˜å‡»ç©¿"></a>äºŒã€ç¼“å­˜å‡»ç©¿</h2><p>ç¼“å­˜å‡»ç©¿æ˜¯æŒ‡å½“å‰çƒ­ç‚¹æ•°æ®å­˜å‚¨åˆ°æœŸæ—¶ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶å¹¶å‘è®¿é—®çƒ­ç‚¹æ•°æ®ã€‚å› ä¸ºç¼“å­˜åˆšè¿‡æœŸï¼Œæ‰€æœ‰å¹¶å‘è¯·æ±‚éƒ½ä¼šåˆ°æ•°æ®åº“ä¸­æŸ¥è¯¢æ•°æ®ã€‚</p><h3 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><ul><li>å°†çƒ­ç‚¹æ•°æ®è®¾ç½®ä¸ºæ°¸ä¸è¿‡æœŸï¼›</li><li>åŠ äº’æ–¥é”ï¼šäº’æ–¥é”å¯ä»¥æ§åˆ¶æŸ¥è¯¢æ•°æ®åº“çš„çº¿ç¨‹è®¿é—®ï¼Œä½†è¿™ç§æ–¹æ¡ˆä¼šå¯¼è‡´ç³»ç»Ÿçš„ååé‡ä¸‹é™ï¼Œéœ€è¦æ ¹æ®å®é™…æƒ…å†µä½¿ç”¨ã€‚</li></ul><pre><code class="JAVA">public String get(key) {    String value = redis.get(key);    if (value == null) { // ä»£è¡¨ç¼“å­˜å€¼è¿‡æœŸ        // è®¾ç½®3minçš„è¶…æ—¶ï¼Œé˜²æ­¢delæ“ä½œå¤±è´¥çš„æ—¶å€™ï¼Œä¸‹æ¬¡ç¼“å­˜è¿‡æœŸä¸€ç›´ä¸èƒ½load db        if (redis.setnx(key_mutex, 1, 3 * 60) == 1) {  // ä»£è¡¨è®¾ç½®æˆåŠŸ            value = db.get(key);            redis.set(key, value, expire_secs);            redis.del(key_mutex);        } else {  // è¿™ä¸ªæ—¶å€™ä»£è¡¨åŒæ—¶å€™çš„å…¶ä»–çº¿ç¨‹å·²ç»load dbå¹¶å›è®¾åˆ°ç¼“å­˜äº†ï¼Œè¿™æ—¶å€™é‡è¯•è·å–ç¼“å­˜å€¼å³å¯            sleep(50);            get(key);  // é‡è¯•        }    } else {        return value;          }}</code></pre><h2 id="ä¸‰ã€ç¼“å­˜é›ªå´©"><a href="#ä¸‰ã€ç¼“å­˜é›ªå´©" class="headerlink" title="ä¸‰ã€ç¼“å­˜é›ªå´©"></a>ä¸‰ã€ç¼“å­˜é›ªå´©</h2><p>ç¼“å­˜é›ªå´©å‘ç”Ÿæœ‰å‡ ç§æƒ…å†µï¼Œæ¯”å¦‚å¤§é‡ç¼“å­˜é›†ä¸­åœ¨æˆ–è€…ç¼“å­˜åŒæ—¶åœ¨å¤§èŒƒå›´ä¸­å¤±æ•ˆï¼Œå‡ºç°äº†å¤§é‡è¯·æ±‚å»è®¿é—®æ•°æ®åº“ï¼Œä»è€Œå¯¼è‡´CPUå’Œå†…å­˜è¿‡è½½ï¼Œç”šè‡³åœæœºã€‚</p><p>ä¸€ä¸ªç®€å•çš„é›ªå´©è¿‡ç¨‹ï¼š</p><ol><li> Redis é›†ç¾¤äº§ç”Ÿäº†å¤§é¢ç§¯æ•…éšœï¼›</li><li> ç¼“å­˜å¤±è´¥ï¼Œæ­¤æ—¶ä»æœ‰å¤§é‡è¯·æ±‚å»è®¿é—® Redis ç¼“å­˜æœåŠ¡å™¨ï¼›</li><li> åœ¨å¤§é‡ Redis è¯·æ±‚å¤±è´¥åï¼Œè¿™äº›è¯·æ±‚å°†ä¼šå»è®¿é—®æ•°æ®åº“ï¼›</li><li> ç”±äºåº”ç”¨çš„è®¾è®¡ä¾èµ–äºæ•°æ®åº“å’Œ Redis æœåŠ¡ï¼Œå¾ˆå¿«å°±ä¼šé€ æˆæœåŠ¡å™¨é›†ç¾¤çš„é›ªå´©ï¼Œæœ€ç»ˆå¯¼è‡´æ•´ä¸ªç³»ç»Ÿçš„ç˜«ç—ªã€‚</li></ol><h3 id="è§£å†³æ–¹æ¡ˆ-1"><a href="#è§£å†³æ–¹æ¡ˆ-1" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><ul><li>ã€äº‹å‰ã€‘é«˜å¯ç”¨ç¼“å­˜ï¼šé«˜å¯ç”¨ç¼“å­˜æ˜¯é˜²æ­¢å‡ºç°æ•´ä¸ªç¼“å­˜æ•…éšœã€‚å³ä½¿ä¸ªåˆ«èŠ‚ç‚¹ï¼Œæœºå™¨ç”šè‡³æœºæˆ¿éƒ½å…³é—­ï¼Œç³»ç»Ÿä»ç„¶å¯ä»¥æä¾›æœåŠ¡ï¼ŒRedis å“¨å…µ(Sentinel) å’Œ Redis é›†ç¾¤(Cluster) éƒ½å¯ä»¥åšåˆ°é«˜å¯ç”¨ï¼›</li><li>ã€äº‹ä¸­ã€‘ç¼“å­˜é™çº§ï¼ˆä¸´æ—¶æ”¯æŒï¼‰ï¼šå½“è®¿é—®æ¬¡æ•°æ€¥å‰§å¢åŠ å¯¼è‡´æœåŠ¡å‡ºç°é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å¦‚ä½•ç¡®ä¿æœåŠ¡ä»ç„¶å¯ç”¨ã€‚åœ¨å›½å†…ä½¿ç”¨æ¯”è¾ƒå¤šçš„æ˜¯ Hystrixï¼Œå®ƒé€šè¿‡ç†”æ–­ã€é™çº§ã€é™æµä¸‰ä¸ªæ‰‹æ®µæ¥é™ä½é›ªå´©å‘ç”Ÿåçš„æŸå¤±ã€‚åªè¦ç¡®ä¿æ•°æ®åº“ä¸æ­»ï¼Œç³»ç»Ÿæ€»å¯ä»¥å“åº”è¯·æ±‚ï¼Œæ¯å¹´çš„æ˜¥èŠ‚ 12306 æˆ‘ä»¬ä¸éƒ½æ˜¯è¿™ä¹ˆè¿‡æ¥çš„å—ï¼Ÿåªè¦è¿˜å¯ä»¥å“åº”èµ·ç è¿˜æœ‰æŠ¢åˆ°ç¥¨çš„æœºä¼šï¼›</li><li>ã€äº‹åã€‘Rediså¤‡ä»½å’Œå¿«é€Ÿé¢„çƒ­ï¼šRedisæ•°æ®å¤‡ä»½å’Œæ¢å¤ã€å¿«é€Ÿç¼“å­˜é¢„çƒ­ã€‚</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;Redisç»å¸¸ç”¨äºç³»ç»Ÿä¸­çš„ç¼“å­˜ï¼Œè¿™æ ·å¯ä»¥è§£å†³ç›®å‰IOè®¾å¤‡æ— æ³•æ»¡è¶³äº’è”ç½‘åº”ç”¨æµ·é‡çš„è¯»å†™è¯·æ±‚çš„é—®é¢˜ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Redis" scheme="http://example.com/categories/Redis/"/>
    
    
    <category term="Redis" scheme="http://example.com/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>PWAåœ¨likeeä¸šåŠ¡çº¿çš„å®è·µ</title>
    <link href="http://example.com/2021/01/08/PWA/PWA%E5%9C%A8likee%E4%B8%9A%E5%8A%A1%E7%BA%BF%E7%9A%84%E5%AE%9E%E8%B7%B5/"/>
    <id>http://example.com/2021/01/08/PWA/PWA%E5%9C%A8likee%E4%B8%9A%E5%8A%A1%E7%BA%BF%E7%9A%84%E5%AE%9E%E8%B7%B5/</id>
    <published>2021-01-08T17:37:50.000Z</published>
    <updated>2021-01-23T09:15:30.414Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-ä»€ä¹ˆæ˜¯PWAï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯PWAï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯PWAï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯PWAï¼Ÿ</h2><p>PWAï¼ˆProgressive web appsï¼Œæ¸è¿›å¼ Web åº”ç”¨ï¼‰è¿ç”¨ç°ä»£çš„ Web API ä»¥åŠä¼ ç»Ÿçš„æ¸è¿›å¼å¢å¼ºç­–ç•¥æ¥åˆ›å»ºè·¨å¹³å° Web åº”ç”¨ç¨‹åºã€‚</p><a id="more"></a><p>å¦‚ä½•ç†è§£æ¸è¿›å¼ï¼Ÿ</p><ul><li>  æ¸è¿›å¼æ„å»ºã€‚æ„æˆ PWA çš„æ ‡å‡†éƒ½æ¥è‡ª Web æŠ€æœ¯ï¼Œå®ƒä»¬éƒ½æ˜¯æµè§ˆå™¨æä¾›çš„ã€å‘ä¸‹å…¼å®¹çš„ã€æ²¡æœ‰é¢å¤–è¿è¡Œæ—¶ä»£ä»·çš„æŠ€æœ¯ã€‚å› æ­¤å¯ä»¥æŠŠä»»ä½•ç°æœ‰çš„æ¡†æ¶å¼€å‘çš„ Web é¡µé¢æ”¹é€ æˆ PWAï¼Œä¸éœ€è¦å®Œå…¨é‡æ„ç°æœ‰ä»£ç ï¼Œå¯ä»¥é€æ­¥åœ°è¿ç§»å’Œæ”¹å–„ã€‚</li><li>  æ¸è¿›å¼å¢å¼ºã€‚æµè§ˆå™¨å‚å•†ä¼šé€æ­¥æä¾›å¯¹ PWA ç›¸å…³apiçš„æ”¯æŒï¼Œç°ä»£æµè§ˆå™¨çš„ç”¨æˆ·ä¼šé€æ­¥å—ç›Šï¼Œä½†ä¸ä¼šä¸ºä½¿ç”¨æ—§ç‰ˆæµè§ˆå™¨çš„ç”¨æˆ·ç ´åä»»ä½•å†…å®¹ã€‚</li></ul><h2 id="2-PWAèƒ½åšä»€ä¹ˆï¼Ÿ"><a href="#2-PWAèƒ½åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="2. PWAèƒ½åšä»€ä¹ˆï¼Ÿ"></a>2. PWAèƒ½åšä»€ä¹ˆï¼Ÿ</h2><ul><li><p>  å®‰è£…æ·»åŠ æ¡Œé¢å›¾æ ‡</p></li><li><p>  æä¾›å‰ç«¯ç½‘ç»œä»£ç†</p></li><li><p>  åˆ©ç”¨cache apiå¯¹responseè¿›è¡Œç¼“å­˜</p></li><li><p>å‘é€pushé€šçŸ¥  </p><p>  æ¥æ”¶æœåŠ¡ç«¯æ¨é€</p></li></ul><h2 id="3-PWAçš„å·¥ä½œåŸç†"><a href="#3-PWAçš„å·¥ä½œåŸç†" class="headerlink" title="3. PWAçš„å·¥ä½œåŸç†"></a>3. PWAçš„å·¥ä½œåŸç†</h2><p>PWAå®ç°ä¸Šè¿°åŠŸèƒ½ï¼Œä¾èµ–äºservice workeræä¾›çš„èƒ½åŠ›ã€‚</p><p>service workeræ˜¯web workerçš„ä¸€ç§ï¼Œæ˜¯è¿è¡Œåœ¨ç‹¬ç«‹çº¿ç¨‹ä¸­çš„jsä»£ç ã€‚ä¸€ä¸ªservice workerçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="/My-Blogs/images/PWA%E5%9C%A8likee%E4%B8%9A%E5%8A%A1%E7%BA%BF%E7%9A%84%E5%AE%9E%E8%B7%B5-01.png"></p><p>é€šå¸¸éµå¾ªä»¥ä¸‹åŸºæœ¬æ­¥éª¤æ¥ä½¿ç”¨ service workerï¼š</p><ul><li><p>  service worker URL é€šè¿‡ serviceWorkerContainer.register() æ¥è·å–å’Œæ³¨å†Œã€‚</p></li><li><p>  å¦‚æœæ³¨å†ŒæˆåŠŸï¼Œservice worker å°±åœ¨ ServiceWorkerGlobalScope ç¯å¢ƒä¸­è¿è¡Œï¼› è¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šç±»å‹çš„ worker ä¸Šä¸‹æ–‡è¿è¡Œç¯å¢ƒï¼Œä¸ä¸»è¿è¡Œçº¿ç¨‹ï¼ˆæ‰§è¡Œè„šæœ¬ï¼‰ç›¸ç‹¬ç«‹ï¼ŒåŒæ—¶ä¹Ÿæ²¡æœ‰è®¿é—® DOM çš„èƒ½åŠ›ã€‚</p></li><li><p>service worker ç°åœ¨å¯ä»¥å¤„ç†äº‹ä»¶äº†ã€‚  </p><p>  å— service worker æ§åˆ¶çš„é¡µé¢æ‰“å¼€åä¼šå°è¯•å»å®‰è£… service workerã€‚æœ€å…ˆå‘é€ç»™ service worker çš„äº‹ä»¶æ˜¯å®‰è£…äº‹ä»¶ã€‚</p></li><li><p>  å½“ oninstall äº‹ä»¶çš„å¤„ç†ç¨‹åºæ‰§è¡Œå®Œæ¯•åï¼Œå¯ä»¥è®¤ä¸º service worker å®‰è£…å®Œæˆäº†ã€‚</p></li><li><p>  ä¸‹ä¸€æ­¥æ˜¯æ¿€æ´»ã€‚å½“ service worker å®‰è£…å®Œæˆåï¼Œä¼šæ¥æ”¶åˆ°ä¸€ä¸ªæ¿€æ´»äº‹ä»¶(activate event)ã€‚onactivate ä¸»è¦ç”¨é€”æ˜¯æ¸…ç†å…ˆå‰ç‰ˆæœ¬çš„service worker è„šæœ¬ä¸­ä½¿ç”¨çš„èµ„æºã€‚</p></li><li><p>  service worker ç°åœ¨å¯ä»¥æ§åˆ¶é¡µé¢äº†ï¼Œä½†ä»…æ˜¯åœ¨ register() æˆåŠŸåçš„æ‰“å¼€çš„é¡µé¢ã€‚</p></li></ul><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="JS">navigator.serviceWorker.register(opts.url).then(function(registration) {  console.log("Service worker successfully registered.");})</code></pre><h2 id="4-å¤„ç†ä¸šåŠ¡éœ€è¦å°è£…çš„åŸºæœ¬æ–¹æ³•"><a href="#4-å¤„ç†ä¸šåŠ¡éœ€è¦å°è£…çš„åŸºæœ¬æ–¹æ³•" class="headerlink" title="4. å¤„ç†ä¸šåŠ¡éœ€è¦å°è£…çš„åŸºæœ¬æ–¹æ³•"></a>4. å¤„ç†ä¸šåŠ¡éœ€è¦å°è£…çš„åŸºæœ¬æ–¹æ³•</h2><p>ä¸ºäº†å¤„ç†ä¸šåŠ¡ï¼Œæˆ‘ä»¬å¯¹service workerç›¸å…³çš„åŸºæœ¬æ–¹æ³•è¿›è¡Œäº†å°è£…</p><p>ä¸»çº¿ç¨‹jså°è£…å¦‚ä¸‹ï¼š</p><pre><code class="JS">/** * service worker sdk *  * @param {string} opts.url [required] swæ–‡ä»¶åœ°å€ * @param {function} opts.onReady [optional] swæ³¨å†ŒæˆåŠŸ * @param {function} opts.onBeforeInstallPrompt [optional] æœªå®‰è£…pwaäº‹ä»¶è§¦å‘ * @param {function} opts.onClickInstallPrompt [optional] ç‚¹å‡»å®‰è£…ç¡®è®¤å¼¹çª— * @param {function} opts.onInstalled [optional] pwaå®‰è£…æˆåŠŸæ—¶è§¦å‘ * @param {function} opts.onNotificationPermission [optional] ç‚¹å‡»é€šçŸ¥æˆæƒç¡®è®¤å¼¹çª— *  */export function SWSdk(opts) {  /**   * åˆå§‹åŒ–sw   */  /**   * swæ³¨å†ŒæˆåŠŸ   */  /**   * æœªå®‰è£…pwaäº‹ä»¶è§¦å‘   */  /**   * pwaå®‰è£…æˆåŠŸæ—¶è§¦å‘   */  /**   * å¼¹å‡ºå®‰è£…ç¡®è®¤å¼¹çª—   */  /**   * ç›‘å¬swäº‹ä»¶   */  /**   * è§¦å‘swäº‹ä»¶   */  /**   * å¼¹å‡ºé€šçŸ¥æˆæƒç¡®è®¤å¼¹çª—   */  /**   * å‘é€ä¸€æ¡é€šçŸ¥   */  /**   * ç¼“å­˜èµ„æº   */  /**   * åˆ é™¤ç¼“å­˜èµ„æº   */}</code></pre><p>swçº¿ç¨‹jså°è£…å¦‚ä¸‹ï¼š</p><pre><code class="JS">/** * SW *  * @param {string} opts. CACHE_NAME [optional] ç¼“å­˜å‘½åç©ºé—´ï¼Œå»ºè®®æ¯ä¸ªåº”ç”¨ç‹¬ç«‹å‘½å * @param {number} opts.tickTime [optional] æ¯ä¸ªtickçš„æ—¶é—´é—´éš”ï¼Œå•ä½msï¼Œé»˜è®¤1000 * @param {function} opts.onTick [optional] æ¯ä¸ªæ—¶é—´é—´éš”è°ƒç”¨ä¸€æ¬¡ * @param {function} opts.onProxy [optional] ä»£ç†ç½‘ç»œè¯·æ±‚ * @param {function} opts.onInstall [optional] å®‰è£…äº‹ä»¶çš„å›è°ƒ * @param {function} opts.onActivate [optional] æ¿€æ´»äº‹ä»¶çš„å›è°ƒ * @param {function} opts.onPush [optional] æ”¶åˆ°æœåŠ¡ç«¯äº‹ä»¶çš„å›è°ƒ * @param {function} opts.notificationOnClick [optional] ç‚¹å‡»pushé€šçŸ¥çš„å›è°ƒ */var SW = function(opts) {  /**   * åˆå§‹åŒ–sw   */  /**   * ç›‘å¬çª—å£äº‹ä»¶   */  /**   * è§¦å‘çª—å£äº‹ä»¶   */  /**   * è®¾ç½®cache   */  /**   * è·å–cache   */  /**   * å‘é€ä¸€æ¡é€šçŸ¥   */};</code></pre><p>å¯¹service worker apiçš„å°è£…ï¼Œä½¿æˆ‘ä»¬å¯ä»¥æ›´åŠ é›†ä¸­ç²¾åŠ›å¤„ç†ä¸šåŠ¡ã€‚</p><p>å°è£…çš„åŸºæœ¬æ–¹æ³•æœ‰ï¼š</p><blockquote><p>a. çº¿ç¨‹é—´é€šè®¯ã€‚ä¸»çº¿ç¨‹å’Œservice workerçº¿ç¨‹ä¹‹é—´éœ€è¦é¢‘ç¹çš„é€šä¿¡ï¼Œå› æ­¤éœ€è¦å°è£…æ¯”è¾ƒå‹å¥½çš„é€šä¿¡æ–¹æ³•</p></blockquote><p>ä¸»çº¿ç¨‹ï¼š</p><pre><code class="JS">/** * ç›‘å¬swäº‹ä»¶ *  * @param {string} eventName [required] äº‹ä»¶åç§° * @param {function} handler [required] å¤„ç†å‡½æ•° */this.on = function(eventName, handler) {  this.eventListener.push({    eventName: eventName,    handler: handler  })};/** * è§¦å‘swäº‹ä»¶ *  * @param {string} eventName [required] äº‹ä»¶åç§° * @param {any} payload [optional] ä¼ é€’çš„æ•°æ® */this.emit = function(eventName, payload) {  const data = {    eventName: eventName,    payload: payload  };  try {    if (navigator.serviceWorker.controller) {      navigator.serviceWorker.controller.postMessage(data);    } else {      navigator.serviceWorker.addEventListener("controllerchange", () =&gt; {        navigator.serviceWorker.controller.postMessage(data);      });    }  } catch (err) {    console.error(err);  }}</code></pre><p>service workerçº¿ç¨‹ï¼š</p><pre><code class="JS">/** * ç›‘å¬çª—å£äº‹ä»¶ *  * @param {string} eventName [required] äº‹ä»¶åç§° * @param {function} handler [required] å¤„ç†å‡½æ•° */this.on = function(eventName, handler) {  this.eventListener.push({    eventName: eventName,    handler: handler  })};/** * è§¦å‘çª—å£äº‹ä»¶ *  * @param {string} eventName [required] äº‹ä»¶åç§° * @param {any} payload [optional] ä¼ é€’çš„æ•°æ® */this.emit = function(eventName, payload) {  clients.matchAll({    type: 'window',    includeUncontrolled: true  }).then(function(matchClient) {    matchClient.forEach(function(client) {      client.postMessage({        eventName: eventName,        payload: payload      });    })  });};</code></pre><blockquote><p>b. æœ¬åœ°å­˜å‚¨ã€‚åœ¨service worker çº¿ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ— æ³•ä½¿ç”¨cookieï¼ŒlocalStorageå’ŒsessionStorageï¼Œæˆ‘ä»¬åªèƒ½ä½¿ç”¨cache apiæˆ–è€…indexDBä½œä¸ºå­˜å‚¨key-valueæ•°æ®çš„è½½ä½“ã€‚</p></blockquote><pre><code class="JS">/** * è®¾ç½®cache *  * @param {string} key cacheçš„key * @param {any} value cacheçš„å€¼ */this.setCache = function(key, value) {  try {    return caches.open(this.CACHE_NAME).then(function(cache) {      return cache.put(key, new Response(value));    })  } catch (err) {    const that = this;    return new Promise(function(resolve) {      if (!that.cacheStorage[that.CACHE_NAME]) {        that.cacheStorage[that.CACHE_NAME] = {};      }      that.cacheStorage[that.CACHE_NAME][key] = value;      resolve();    })  }};/** * è·å–cache *  * @param {string} key cacheçš„key */this.getCache = function(key) {  try {    return caches.open(this.CACHE_NAME).then(function(cache) {      return cache.match(key);    }).then(function(response) {      return response ? response.text() : '';    })  } catch (err) {    const that = this;    return new Promise(function(resolve) {      resolve(new String(that.cacheStorage[that.CACHE_NAME][key]));    })  }};</code></pre><p>cache apiæ— æ³•ç›´æ¥ä¿å­˜key-valueé”®å€¼å¯¹æ•°æ®ï¼Œåªèƒ½ä¿å­˜url-responseå¯¹æ•°æ®ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨äº†ä¸€äº›å°æŠ€å·§ï¼Œä½¿å®ƒå¯ä»¥å­˜å‚¨key-valueå‹æ•°æ®</p><blockquote><p>c. é€šçŸ¥</p></blockquote><p>ä¸»çº¿ç¨‹ç”³è¯·æˆæƒ</p><pre><code class="JS">/** * å¼¹å‡ºé€šçŸ¥æˆæƒç¡®è®¤å¼¹çª— */this.requestNotificationPermission = function() {  Notification.requestPermission().then((result) =&gt; {    that.onNotificationPermission.bind(that)(result);  });};</code></pre><p>service workerçº¿ç¨‹å‘é€é€šçŸ¥</p><pre><code class="JS">/** * å‘é€ä¸€æ¡é€šçŸ¥ *  * @param {object} params [required] * @param {string} params.title [required] æ ‡é¢˜ * @param {string} params.desc [optional] æè¿° * @param {string} params.icon [optional] å›¾æ ‡ * @param {any} params.data [optional] ä¼ é€’å‚æ•° * @param {string} params.url [optional] ç‚¹å‡»è·³è½¬åœ°å€ */this.showNotification = function(params) {  try {    self.registration.showNotification(params.title, {      body: params.desc,      icon: params.icon,      image: params.image,      data: Object.assign({        url: params.url      }, params.data)    })  } catch (err) {    console.log(err);  }};</code></pre><h2 id="5-ä¸šåŠ¡éœ€æ±‚åŠå¯¹ç­–"><a href="#5-ä¸šåŠ¡éœ€æ±‚åŠå¯¹ç­–" class="headerlink" title="5. ä¸šåŠ¡éœ€æ±‚åŠå¯¹ç­–"></a>5. ä¸šåŠ¡éœ€æ±‚åŠå¯¹ç­–</h2><p>æ­¤å°èŠ‚å†…å®¹å¤ªå¤šï¼Œä¸è¯¦ç»†å±•å¼€ï¼Œæœ‰å…´è¶£å¯ä»¥ç§èŠ</p><blockquote><p>a. å®‰è£…æ¡Œé¢å¿«æ·æ–¹å¼</p></blockquote><ul><li>  æœªå®‰è£…äº‹ä»¶</li><li>  å¼¹å‡ºè¯¢é—®å®‰è£…å¼¹çª—api</li></ul><blockquote><p>b. æœ¬åœ°æ¨é€é€šçŸ¥</p></blockquote><ul><li>  è¯¢é—®æˆæƒé€šçŸ¥api</li><li>  å‘é€é€šçŸ¥</li></ul><blockquote><p>c. swå†…åŸ‹ç‚¹</p></blockquote><ul><li>  Fetch api</li><li>  è¯·æ±‚æ•°æ®æ„é€ </li></ul><blockquote><p>d. æ‹‰æ´»æ¡Œé¢pwa</p></blockquote><ul><li>  éœ€è¦å®‰è£…google playæœåŠ¡</li><li>  éœ€è¦ç”±ä¸åŒåŸŸçš„é¡µé¢å‘èµ·é‡å®šå‘è·³è½¬</li><li>  ä¸pwaåŒåŸŸçš„é“¾æ¥å‡å¯æ‹‰æ´»pwaï¼Œä¸”pwaå±•ç¤ºè·³è½¬é“¾æ¥ï¼Œè€Œéstart_urlä¸­é…ç½®çš„é“¾æ¥</li><li>  ä¸­è½¬é¡µç­–ç•¥</li></ul><blockquote><p>e. è§†é¢‘é¢„åŠ è½½</p></blockquote><ul><li>  ä½¿ç”¨cache api</li></ul><blockquote><p>f. è¯†åˆ«ç”¨æˆ·è®¿é—®çš„æ˜¯webé¡µé¢è¿˜æ˜¯æ¡Œé¢pwa</p></blockquote><ul><li>  æ¡Œé¢å…¥å£æ‹‰æ´»</li><li>  é“¾æ¥æ‹‰æ´»</li></ul><h2 id="6-é‡åˆ°çš„é—®é¢˜"><a href="#6-é‡åˆ°çš„é—®é¢˜" class="headerlink" title="6. é‡åˆ°çš„é—®é¢˜"></a>6. é‡åˆ°çš„é—®é¢˜</h2><blockquote><p>a. å…¼å®¹é—®é¢˜</p></blockquote><p>pwaçš„å…¼å®¹æ€§æ˜¯æ¯”è¾ƒå·®çš„ï¼Œå‡ ä¹æ¯ä¸ªapiéƒ½æœ‰å…¼å®¹é—®é¢˜ï¼Œéœ€è¦å¯¹ä¸åŒçš„è®¾å¤‡åšé€‚é…ã€‚è¿™äº›å…¼å®¹é—®é¢˜å¾ˆå¤šæ˜¯æŸ¥çœ‹çº¿ä¸Šç»Ÿè®¡æ•°æ®åæ‰å‘ç°çš„</p><blockquote><p>b. æ•°æ®ç»Ÿè®¡</p></blockquote><p>ä¸ºäº†ç»Ÿè®¡pwaè½¬åŒ–æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦è¯†åˆ«ç”¨æˆ·è®¿é—®çš„æ˜¯webé¡µé¢è¿˜æ˜¯æ¡Œé¢çš„pwaï¼Œç„¶è€Œï¼Œæˆ‘ä»¬åªèƒ½ç»Ÿè®¡åˆ°æ¡Œé¢å›¾æ ‡æ‰“å¼€çš„ç”¨æˆ·å’Œé“¾æ¥æ‹‰æ´»çš„pwaç”¨æˆ·ï¼Œå¯¹äºpushæ‹‰æ´»ï¼Œç¬¬ä¸‰æ–¹appæ‹‰æ´»çš„åœºæ™¯ï¼Œæˆ‘ä»¬æ˜¯æ— æ³•è¯†åˆ«çš„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;1-ä»€ä¹ˆæ˜¯PWAï¼Ÿ&quot;&gt;&lt;a href=&quot;#1-ä»€ä¹ˆæ˜¯PWAï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;1. ä»€ä¹ˆæ˜¯PWAï¼Ÿ&quot;&gt;&lt;/a&gt;1. ä»€ä¹ˆæ˜¯PWAï¼Ÿ&lt;/h2&gt;&lt;p&gt;PWAï¼ˆProgressive web appsï¼Œæ¸è¿›å¼ Web åº”ç”¨ï¼‰è¿ç”¨ç°ä»£çš„ Web API ä»¥åŠä¼ ç»Ÿçš„æ¸è¿›å¼å¢å¼ºç­–ç•¥æ¥åˆ›å»ºè·¨å¹³å° Web åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="PWA" scheme="http://example.com/categories/PWA/"/>
    
    
    <category term="PWA" scheme="http://example.com/tags/PWA/"/>
    
  </entry>
  
  <entry>
    <title>Libuvçº¿ç¨‹æ± å¦‚ä½•æé«˜nodejsæ€§èƒ½</title>
    <link href="http://example.com/2021/01/08/NodeJs/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/Libuv%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98NodeJs%E6%80%A7%E8%83%BD/"/>
    <id>http://example.com/2021/01/08/NodeJs/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/Libuv%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98NodeJs%E6%80%A7%E8%83%BD/</id>
    <published>2021-01-08T17:35:42.000Z</published>
    <updated>2021-01-23T09:15:30.414Z</updated>
    
    <content type="html"><![CDATA[<p>å¦‚ä½•æé«˜NodeJSæ€§èƒ½ï¼Ÿä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»ä¸€ç§æ–¹å¼ï¼Œä¸€èµ·çœ‹çœ‹å§</p><a id="more"></a><h3 id="åŸæ–‡é“¾æ¥"><a href="#åŸæ–‡é“¾æ¥" class="headerlink" title="åŸæ–‡é“¾æ¥"></a><a href="https://hackernoon.com/how-libuv-thread-pool-can-boost-your-node-js-performance-bel3tyf">åŸæ–‡é“¾æ¥</a></h3><h3 id="Libuvçº¿ç¨‹æ± "><a href="#Libuvçº¿ç¨‹æ± " class="headerlink" title="Libuvçº¿ç¨‹æ± "></a>Libuvçº¿ç¨‹æ± </h3><p>Libuvå¯åŠ¨ä¸€ä¸ªåŒ…å«4ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œç”¨äºå°†åŒæ­¥æ“ä½œå¸è½½åˆ°è¯¥çº¿ç¨‹æ± ã€‚ä¸ºæ­¤ï¼ŒLibuvç¡®ä¿åŒæ­¥ä»»åŠ¡ä¸ä¼šä¸å¿…è¦åœ°é˜»æ­¢æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚</p><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†åˆ©ç”¨è®¾ç½®æ¥æ›´å¥½åœ°é€‚åº”æˆ‘ä»¬çš„è®¡ç®—æœºæˆ–å°†åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°çš„è™šæ‹Ÿæœºçš„è§„æ ¼ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬è¢«å…è®¸å°†4ä¸ªçº¿ç¨‹çš„é»˜è®¤å€¼æ›´æ”¹ä¸ºæœ€å¤š1024ä¸ªçº¿ç¨‹ã€‚æˆ‘ä»¬é€šè¿‡è®¾ç½®UV_THREADPOOL_SIZE Nodeå˜é‡æ¥å®ç°ã€‚</p><p>ç‰©ç†ä¸é€»è¾‘CPUå†…æ ¸</p><p>ä¸ºäº†æ›´å¥½åœ°äº†è§£å°†UV_THREADPOOL_SIZEè®¾ç½®ä¸ºä»€ä¹ˆï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£æˆ‘ä»¬çš„è®¡ç®—æœºæ­£åœ¨è¿è¡Œå¤šå°‘ä¸ªé€»è¾‘æ ¸å¿ƒã€‚å¦‚æœä»¥æˆ‘çš„MacBook Proä¸ºä¾‹ï¼Œå®ƒè¿è¡Œçš„æ˜¯6ä¸ªç‰©ç†CPUå†…æ ¸ï¼ˆè‹±ç‰¹å°”ï¼‰ã€‚</p><p>ä½†æ˜¯ï¼Œè¿™äº›å†…æ ¸å…·æœ‰è¶…çº¿ç¨‹ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªå†…æ ¸å¯ä»¥åŒæ—¶è¿è¡Œ2ä¸ªæ“ä½œã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†å…·æœ‰è¶…çº¿ç¨‹çš„1ä¸ªç‰©ç†æ ¸å¿ƒè§†ä¸º2ä¸ªé€»è¾‘æ ¸å¿ƒã€‚å°±æˆ‘è€Œè¨€ï¼Œæˆ‘çš„MacBook Proè¿è¡Œ12ä¸ªé€»è¾‘æ ¸å¿ƒã€‚</p><h3 id="å¦‚ä½•æé«˜Node-JSæ€§èƒ½"><a href="#å¦‚ä½•æé«˜Node-JSæ€§èƒ½" class="headerlink" title="å¦‚ä½•æé«˜Node JSæ€§èƒ½"></a>å¦‚ä½•æé«˜Node JSæ€§èƒ½</h3><p>å»ºè®®å°† <code>UV_THREADPOOL_SIZE</code> è®¾ç½®ä¸ºè®¡ç®—æœºæ­£åœ¨è¿è¡Œçš„é€»è¾‘æ ¸å¿ƒæ•°ã€‚å°±æˆ‘è€Œè¨€ï¼Œæˆ‘å°†çº¿ç¨‹æ± å¤§å°è®¾ç½®ä¸º12ã€‚</p><p>å°†å¤§å°è®¾ç½®ä¸ºé™¤ç¡¬ä»¶æ­£åœ¨è¿è¡Œçš„é€»è¾‘å†…æ ¸ä¹‹å¤–çš„ä»»ä½•å€¼éƒ½æ²¡æœ‰æ„ä¹‰ï¼Œå®é™…ä¸Šå¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é™ä½ã€‚</p><h3 id="å¦‚ä½•æ£€æŸ¥é€»è¾‘æ ¸å¿ƒ"><a href="#å¦‚ä½•æ£€æŸ¥é€»è¾‘æ ¸å¿ƒ" class="headerlink" title="å¦‚ä½•æ£€æŸ¥é€»è¾‘æ ¸å¿ƒ"></a>å¦‚ä½•æ£€æŸ¥é€»è¾‘æ ¸å¿ƒ</h3><p>éƒ¨ç½²æ—¶ï¼Œæœ€åè¦åšçš„æ˜¯æ‰‹åŠ¨è®¾ç½®UV_THREADPOOL_SIZEï¼Œå› ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºå¯èƒ½åœ¨å…·æœ‰ä¸åŒæœºå™¨è§„æ ¼çš„å¤šä¸ªç¯å¢ƒä¸­è¿è¡Œã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§åœ¨ç›¸å…³ç¯å¢ƒä¸­å¯åŠ¨åº”ç”¨ç¨‹åºååŠ¨æ€è®¾ç½®çº¿ç¨‹æ± å¤§å°çš„æ–¹æ³•ã€‚</p><p>å¥½æ¶ˆæ¯æ˜¯ï¼Œè¿™å¾ˆç®€å•ï¼Œä½†å¿…é¡»è°¨æ…å¯¹å¾…ã€‚ä¸ºæ­¤ï¼Œè¯·å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°Nodeåº”ç”¨ç¨‹åºçš„æ ¹JSæ–‡ä»¶çš„é¡¶éƒ¨ï¼š</p><pre><code class="JavaScript">const OS = require('os')process.env.UV_THREADPOOL_SIZE = OS.cpus().length</code></pre><p>è¯¥OSæ¨¡å—æ˜¯åŸäº§äºèŠ‚ç‚¹JSã€‚å®ƒå…·æœ‰ä¸€ä¸ªå‡½æ•°cpusï¼ˆï¼‰ï¼Œè¯¥å‡½æ•°è¿”å›è®¡ç®—æœºæ­£åœ¨è¿è¡Œçš„é€»è¾‘å†…æ ¸çš„æ€»æ•°ã€‚å¾ˆå¥½çš„æ˜¯ï¼Œå¦‚æœæ‚¨çš„CPUå†…æ ¸æ²¡æœ‰è¶…çº¿ç¨‹ï¼Œåˆ™æ­¤å‡½æ•°å°†åªè¿”å›ç‰©ç†cpuå†…æ ¸çš„æ•°é‡ï¼Œè¿™æ˜¯å®Œç¾çš„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å¦‚ä½•æé«˜NodeJSæ€§èƒ½ï¼Ÿä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»ä¸€ç§æ–¹å¼ï¼Œä¸€èµ·çœ‹çœ‹å§&lt;/p&gt;</summary>
    
    
    
    <category term="nodejs" scheme="http://example.com/categories/nodejs/"/>
    
    
    <category term="nodejs" scheme="http://example.com/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title>Nginxé…ç½®å°ç»“</title>
    <link href="http://example.com/2021/01/08/nginx/Nginx%E9%85%8D%E7%BD%AE%E5%B0%8F%E7%BB%93/"/>
    <id>http://example.com/2021/01/08/nginx/Nginx%E9%85%8D%E7%BD%AE%E5%B0%8F%E7%BB%93/</id>
    <published>2021-01-08T17:33:59.000Z</published>
    <updated>2021-01-23T09:15:30.418Z</updated>
    
    <content type="html"><![CDATA[<p>nginxé…ç½®æœ‰å“ªäº›å˜é‡ï¼ŸåŒ¹é…è§„åˆ™åˆæœ‰å“ªäº›ï¼Ÿè®©æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹å§</p><a id="more"></a><h2 id="å…¨å±€å˜é‡"><a href="#å…¨å±€å˜é‡" class="headerlink" title="å…¨å±€å˜é‡"></a>å…¨å±€å˜é‡</h2><pre><code class="NGINX">$args ï¼š è¿™ä¸ªå˜é‡ç­‰äºè¯·æ±‚è¡Œä¸­çš„å‚æ•°ï¼ŒåŒ$query_string$content_length ï¼š è¯·æ±‚å¤´ä¸­çš„Content-lengthå­—æ®µ$content_type ï¼š è¯·æ±‚å¤´ä¸­çš„Content-Typeå­—æ®µ$document_root ï¼š å½“å‰è¯·æ±‚åœ¨rootæŒ‡ä»¤ä¸­æŒ‡å®šçš„å€¼$host ï¼š è¯·æ±‚ä¸»æœºå¤´å­—æ®µï¼Œå¦åˆ™ä¸ºæœåŠ¡å™¨åç§°$http_user_agent ï¼š å®¢æˆ·ç«¯agentä¿¡æ¯$http_cookie ï¼š å®¢æˆ·ç«¯cookieä¿¡æ¯$limit_rate ï¼š è¿™ä¸ªå˜é‡å¯ä»¥é™åˆ¶è¿æ¥é€Ÿç‡$request_method ï¼š å®¢æˆ·ç«¯è¯·æ±‚çš„åŠ¨ä½œï¼Œé€šå¸¸ä¸ºGETæˆ–POST$remote_addr ï¼š å®¢æˆ·ç«¯çš„IPåœ°å€$remote_port ï¼š å®¢æˆ·ç«¯çš„ç«¯å£$remote_user ï¼š å·²ç»ç»è¿‡Auth Basic ModuleéªŒè¯çš„ç”¨æˆ·å$request_filename ï¼š å½“å‰è¯·æ±‚çš„æ–‡ä»¶è·¯å¾„ï¼Œç”±rootæˆ–aliasæŒ‡ä»¤ä¸URIè¯·æ±‚ç”Ÿæˆ$scheme ï¼š HTTPæ–¹æ³•ï¼ˆå¦‚httpï¼Œhttpsï¼‰$server_protocol ï¼š è¯·æ±‚ä½¿ç”¨çš„åè®®ï¼Œé€šå¸¸æ˜¯HTTP/1.0æˆ–HTTP/1.1$server_addr ï¼š æœåŠ¡å™¨åœ°å€ï¼Œåœ¨å®Œæˆä¸€æ¬¡ç³»ç»Ÿè°ƒç”¨åå¯ä»¥ç¡®å®šè¿™ä¸ªå€¼$server_name ï¼š æœåŠ¡å™¨åç§°$server_port ï¼š è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨çš„ç«¯å£å·$request_uri ï¼š åŒ…å«è¯·æ±‚å‚æ•°çš„åŸå§‹URIï¼Œä¸åŒ…å«ä¸»æœºåï¼Œå¦‚/foo/bar.php?arg=baz$uri ï¼š ä¸å¸¦è¯·æ±‚å‚æ•°çš„å½“å‰URIï¼Œ$uriä¸åŒ…å«ä¸»æœºåï¼Œå¦‚/foo/bar.html$document_uri ï¼š ä¸$uriç›¸åŒ</code></pre><p>å‡è®¾è¯·æ±‚ä¸º<a href="http://www.qq.com:8080/a/b/c.php%EF%BC%8C%E5%88%99">http://www.qq.com:8080/a/b/c.phpï¼Œåˆ™</a></p><pre><code class="NGINX">$hostï¼šwww.qq.com$server_portï¼š8080$request_uriï¼šhttp://www.qq.com:8080/a/b/c.php$document_uriï¼š/a/b/c.php$document_rootï¼š/var/www/html$request_filenameï¼š/var/www/html/a/b/c.php</code></pre><h2 id="ä¸»æœºåï¼ˆserver-nameï¼‰åŒ¹é…"><a href="#ä¸»æœºåï¼ˆserver-nameï¼‰åŒ¹é…" class="headerlink" title="ä¸»æœºåï¼ˆserver_nameï¼‰åŒ¹é…"></a>ä¸»æœºåï¼ˆserver_nameï¼‰åŒ¹é…</h2><p>ä»ä¸Šåˆ°ä¸‹çš„ä¼˜å…ˆçº§ä¸ºä»é«˜åˆ°ä½</p><ol><li> æ˜ç¡®çš„<code>server_name</code>åç§°ï¼Œå¦‚<code>www.qq.com</code></li><li> å‰ç¼€é€šé…ç¬¦ï¼Œå¦‚<code>*.qq.com</code>æˆ–<code>. qq.com</code></li><li> åç¼€é€šé…ç¬¦ï¼Œå¦‚<code>www.qq.*</code></li><li> æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¦‚<code>~[a-z]+\.qq\.com</code></li></ol><h2 id="LocationæŸ¥æ‰¾è§„åˆ™"><a href="#LocationæŸ¥æ‰¾è§„åˆ™" class="headerlink" title="LocationæŸ¥æ‰¾è§„åˆ™"></a>LocationæŸ¥æ‰¾è§„åˆ™</h2><p>ä»ä¸Šåˆ°ä¸‹çš„ä¼˜å…ˆçº§ä¸ºä»é«˜åˆ°ä½</p><ol><li> ç­‰å·ç±»å‹ï¼Œç²¾ç¡®åŒ¹é…ï¼Œå¦‚location = / {}</li><li> ^<del>ç±»å‹ï¼Œå‰ç¼€åŒ¹é…ï¼Œä¸æ”¯æŒæ­£åˆ™ï¼Œå¦‚location ^</del> /user {}</li><li> <del>å’Œ</del>*ç±»å‹ï¼Œæ­£åˆ™åŒ¹é…ï¼Œ<del>åŒºåˆ†å¤§å°å†™ï¼Œ</del>*ä¸åŒºåˆ†å¤§å°å†™ï¼Œå¦‚location ~ ^/user {}</li><li> å¸¸è§„å­—ç¬¦ä¸²åŒ¹é…ç±»å‹ï¼Œå¦‚location / {}æˆ–location /user {}</li></ol><h2 id="Try-filesè§„åˆ™"><a href="#Try-filesè§„åˆ™" class="headerlink" title="Try_filesè§„åˆ™"></a>Try_filesè§„åˆ™</h2><p>try_files $uri $uri/ /index.php<br>å‡è®¾è¯·æ±‚ä¸º<code>http://www.qq.com/test</code>ï¼Œåˆ™<code>$uri</code>ä¸º<code>test</code></p><p>æŸ¥æ‰¾<code>/$root/test</code>æ–‡ä»¶<br>æŸ¥æ‰¾<code>/$root/test/</code>ç›®å½•<br>å‘èµ·<code>/index.php</code>çš„å†…éƒ¨â€œå­è¯·æ±‚â€</p><h2 id="Rewriteè§„åˆ™"><a href="#Rewriteè§„åˆ™" class="headerlink" title="Rewriteè§„åˆ™"></a>Rewriteè§„åˆ™</h2><p>rewrite ^/images/(.*).(png|jpg|gif)$ /images?name=$1.$4 last;</p><p>ä¸Šé¢çš„<code>rewrite</code>è§„åˆ™ä¼šå°†æ–‡ä»¶åæ”¹å†™åˆ°å‚æ•°ä¸­</p><ul><li>last : ç›¸å½“äº<code>Apache</code>çš„[L]æ ‡è®°ï¼Œè¡¨ç¤ºå®Œæˆ<code>rewrite</code></li><li>break : åœæ­¢æ‰§è¡Œå½“å‰è™šæ‹Ÿä¸»æœºçš„åç»­<code>rewrite</code>æŒ‡ä»¤é›†</li><li>redirect : è¿”å›302ä¸´æ—¶é‡å®šå‘ï¼Œåœ°å€æ ä¼šæ˜¾ç¤ºè·³è½¬åçš„åœ°å€</li><li>permanent : è¿”å›301æ°¸ä¹…é‡å®šå‘ï¼Œåœ°å€æ ä¼šæ˜¾ç¤ºè·³è½¬åçš„åœ°å€</li></ul><h2 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h2><p>ä¾‹å­å¦‚ä¸‹</p><pre><code class="NGINX">upstream backend1 {    server backend1.qq.com weight=5;    server 127.0.0.1:8080 max_fails=3 fail_timeout=30s;    server unix:/tmp/backend3 backup;}upstream backend2 {    ip_hash;    server backend1.qq.com;    server backend2.qq.com;    server backend3.qq.com down;    server backend4.qq.com;}server {    location / {        proxy_pass http://backend1;    }    location /api {        proxy_pass http://backend2;    }}</code></pre><h2 id="æŸ¥çœ‹ä¸€ä¸ªå®ä¾‹"><a href="#æŸ¥çœ‹ä¸€ä¸ªå®ä¾‹" class="headerlink" title="æŸ¥çœ‹ä¸€ä¸ªå®ä¾‹"></a>æŸ¥çœ‹ä¸€ä¸ªå®ä¾‹</h2><p>ä¸‹é¢æ˜¯ä¸€ä¸ª <code>laravel</code>æ¡†æ¶<code>Nginx</code>é…ç½®çš„ä¾‹å­ï¼Œå¬è¿‡è¿™å ‚è¯¾ç»ˆäºäº†è§£äº†ä¸‹é¢çš„åŸç†ã€‚</p><pre><code class="NGINX">server {    listen 80 default_server;    listen [::]:80 default_server ipv6only=on;    # è®¾å®šç½‘ç«™æ ¹ç›®å½•    root /var/www/laravel/public;    # ç½‘ç«™é»˜è®¤é¦–é¡µ    index index.php index.html index.htm;    # æœåŠ¡å™¨åç§°ï¼Œserver_domain_or_IP è¯·æ›¿æ¢ä¸ºè‡ªå·±è®¾ç½®çš„åç§°æˆ–è€… IP åœ°å€    server_name server_domain_or_IP;    # ä¿®æ”¹ä¸º Laravel è½¬å‘è§„åˆ™ï¼Œå¦åˆ™PHPæ— æ³•è·å–$_GETä¿¡æ¯ï¼Œæç¤º404é”™è¯¯    location / {        try_files $uri $uri/ /index.php?$query_string;    }    # PHP æ”¯æŒ    location ~ \.php$ {        try_files $uri /index.php =404;        fastcgi_split_path_info ^(.+\.php)(/.+)$;        fastcgi_pass unix:/var/run/php5-fpm.sock;        fastcgi_index index.php;        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;        include fastcgi_params;    }}</code></pre><p>æˆ‘ä»¬ä¸»è¦å…³æ³¨ä¸¤ä¸ª<code>location</code>ï¼Œå‡è®¾åœ°å€æ˜¯<code>http://www.qq.com/user/info</code>ï¼Œä¼šåŒ¹é…åˆ°å¦‚ä¸‹<code>location</code></p><pre><code class="NGINX">location / {    try_files $uri $uri/ /index.php?$query_string;}</code></pre><p>ç”±äº<code>$uri</code>å’Œ<code>$uri/</code>æ˜¯ä¸å­˜åœ¨çš„ï¼Œæ‰€ä»¥ä¼šèµ°<code>/index.php?$query_string</code>ï¼Œè¿™æ—¶å€™ä¼šå‘èµ·ä¸€ä¸ªå†…éƒ¨â€œå­è¯·æ±‚â€ï¼Œâ€œå­è¯·æ±‚â€ä¼šé‡æ–°åŒ¹é…<code>location</code>ï¼Œç„¶ååŒ¹é…åˆ°å¦‚ä¸‹<code>location</code></p><pre><code class="NGINX">location ~ \.php$ {    try_files $uri /index.php =404;    fastcgi_split_path_info ^(.+\.php)(/.+)$;    fastcgi_pass unix:/var/run/php5-fpm.sock;    fastcgi_index index.php;    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;    include fastcgi_params;}</code></pre><p>è¿™æ ·è¯·æ±‚å°±ä¼šå‘é€åˆ°<code>fastcgi</code>å»åšå¤„ç†ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;nginxé…ç½®æœ‰å“ªäº›å˜é‡ï¼ŸåŒ¹é…è§„åˆ™åˆæœ‰å“ªäº›ï¼Ÿè®©æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹å§&lt;/p&gt;</summary>
    
    
    
    <category term="nginx" scheme="http://example.com/categories/nginx/"/>
    
    
    <category term="nginx" scheme="http://example.com/tags/nginx/"/>
    
    <category term="devops" scheme="http://example.com/tags/devops/"/>
    
  </entry>
  
  <entry>
    <title>Nginxä»£ç†proxy passé…ç½®å»é™¤å‰ç¼€é—®é¢˜</title>
    <link href="http://example.com/2021/01/08/nginx/Nginx%E4%BB%A3%E7%90%86proxy%20pass%E9%85%8D%E7%BD%AE%E5%8E%BB%E9%99%A4%E5%89%8D%E7%BC%80%E9%97%AE%E9%A2%98/"/>
    <id>http://example.com/2021/01/08/nginx/Nginx%E4%BB%A3%E7%90%86proxy%20pass%E9%85%8D%E7%BD%AE%E5%8E%BB%E9%99%A4%E5%89%8D%E7%BC%80%E9%97%AE%E9%A2%98/</id>
    <published>2021-01-08T17:32:38.000Z</published>
    <updated>2021-01-23T09:15:30.418Z</updated>
    
    <content type="html"><![CDATA[<p>è®¾ç½®åå‘ä»£ç†çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™ç¨‹åºä¼šæ‹¿ä¸åˆ°URLåé¢çš„pathéƒ¨åˆ†ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹å§</p><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä½¿ç”¨Nginxåšä»£ç†çš„æ—¶å€™ï¼Œå¯ä»¥ç®€å•çš„ç›´æ¥æŠŠè¯·æ±‚åŸå°ä¸åŠ¨çš„è½¬å‘ç»™ä¸‹ä¸€ä¸ªæœåŠ¡ã€‚</p><p>æ¯”å¦‚ï¼Œè®¿é—®abc.com/appv2/a/b.html, è¦æ±‚è½¬å‘åˆ°localhost:8088/appv2/a/b.html</p><p>ç®€å•é…ç½®å¦‚ä¸‹ï¼š</p><pre><code class="nginx">upstream one {  server localhost:8088 weight=5;}server {    listen              80;    server_name         abc.com;    access_log  "pipe:rollback /data/log/nginx/access.log interval=1d baknum=7 maxsize=1G"  main;    location / {        proxy_set_header Host $host;        proxy_set_header  X-Real-IP        $remote_addr;        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;        proxy_set_header X-NginX-Proxy true;        proxy_pass http://one;    }}</code></pre><p>å³ï¼Œè®¾ç½® <code>proxy_pass</code> å³å¯ã€‚è¯·æ±‚åªä¼šæ›¿æ¢åŸŸåã€‚</p><p>ä½†å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®urlçš„å‰ç¼€è½¬å‘åˆ°ä¸åŒçš„æœåŠ¡ã€‚</p><p>æ¯”å¦‚</p><p>abc.com/user/profile.html è½¬å‘åˆ° ç”¨æˆ·æœåŠ¡localhost:8089/profile.html</p><p>abc.com/order/details.html è½¬å‘åˆ° è®¢å•æœåŠ¡ localhost:8090/details.html</p><p>å³ï¼Œurlçš„å‰ç¼€å¯¹ä¸‹æ¸¸çš„æœåŠ¡æ˜¯ä¸éœ€è¦çš„ï¼Œé™¤éä¸‹æ¸¸æœåŠ¡æ·»åŠ context-path, ä½†å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸å–œæ¬¢åŠ è¿™ä¸ªã€‚å¦‚æœNginxè½¬å‘çš„æ—¶å€™ï¼ŒæŠŠè¿™ä¸ªå‰ç¼€å»æ‰å°±å¥½äº†ã€‚</p><h3 id="ä¸€ä¸ªç§æ–¹æ¡ˆæ˜¯proxy-passåé¢åŠ æ ¹è·¯å¾„"><a href="#ä¸€ä¸ªç§æ–¹æ¡ˆæ˜¯proxy-passåé¢åŠ æ ¹è·¯å¾„" class="headerlink" title="ä¸€ä¸ªç§æ–¹æ¡ˆæ˜¯proxy_passåé¢åŠ æ ¹è·¯å¾„ / ."></a>ä¸€ä¸ªç§æ–¹æ¡ˆæ˜¯proxy_passåé¢åŠ æ ¹è·¯å¾„ <code>/</code> .</h3><pre><code class="nginx">server {    listen              80;    server_name         abc.com;    access_log  "pipe:rollback /data/log/nginx/access.log interval=1d baknum=7 maxsize=1G"  main;    location ^~/user/ {        proxy_set_header Host $host;        proxy_set_header  X-Real-IP        $remote_addr;        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;        proxy_set_header X-NginX-Proxy true;        proxy_pass http://user/;    }    location ^~/order/ {        proxy_set_header Host $host;        proxy_set_header  X-Real-IP        $remote_addr;        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;        proxy_set_header X-NginX-Proxy true;        proxy_pass http://order/;    }}</code></pre><p><code>^~/user/</code> è¡¨ç¤ºåŒ¹é…å‰ç¼€æ˜¯ <code>user</code> çš„è¯·æ±‚ï¼Œproxy_passçš„ç»“å°¾æœ‰/ï¼Œ åˆ™ä¼šæŠŠ <code>/user/*</code> åé¢çš„è·¯å¾„ç›´æ¥æ‹¼æ¥åˆ°åé¢ï¼Œå³ç§»é™¤user.</p><h3 id="å¦ä¸€ç§æ–¹æ¡ˆæ˜¯ä½¿ç”¨-rewrite"><a href="#å¦ä¸€ç§æ–¹æ¡ˆæ˜¯ä½¿ç”¨-rewrite" class="headerlink" title="å¦ä¸€ç§æ–¹æ¡ˆæ˜¯ä½¿ç”¨ rewrite"></a>å¦ä¸€ç§æ–¹æ¡ˆæ˜¯ä½¿ç”¨ <code>rewrite</code></h3><pre><code class="nginx">upstream user {  server localhost:8089 weight=5;}upstream order {  server localhost:8090 weight=5;}server {    listen              80;    server_name         abc.com;    access_log  "pipe:rollback /data/log/nginx/access.log interval=1d baknum=7 maxsize=1G"  main;    location ^~/user/ {        proxy_set_header Host $host;        proxy_set_header  X-Real-IP        $remote_addr;        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;        proxy_set_header X-NginX-Proxy true;        rewrite ^/user/(.*)$ /$1 break;        proxy_pass http://user;    }    location ^~/order/ {        proxy_set_header Host $host;        proxy_set_header  X-Real-IP        $remote_addr;        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;        proxy_set_header X-NginX-Proxy true;        rewrite ^/order/(.*)$ /$1 break;        proxy_pass http://order;    }}</code></pre><p>æ³¨æ„åˆ°proxy_passç»“å°¾æ²¡æœ‰ <code>/</code> , <code>rewrite</code> é‡å†™äº†urlã€‚</p><p>å…³äºrewrite</p><pre><code class="nginx">syntax: rewrite regex replacement [flag]Default: â€”Context: server, location, if</code></pre>]]></content>
    
    
    <summary type="html">&lt;p&gt;è®¾ç½®åå‘ä»£ç†çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™ç¨‹åºä¼šæ‹¿ä¸åˆ°URLåé¢çš„pathéƒ¨åˆ†ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹å§&lt;/p&gt;</summary>
    
    
    
    <category term="nginx" scheme="http://example.com/categories/nginx/"/>
    
    
    <category term="nginx" scheme="http://example.com/tags/nginx/"/>
    
    <category term="devops" scheme="http://example.com/tags/devops/"/>
    
  </entry>
  
</feed>
